(self.webpackChunkais_generator=self.webpackChunkais_generator||[]).push([[792],{587:(Ts,hr,Ne)=>{"use strict";function kt(n){return"function"==typeof n}function C(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const P=C(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function G(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Q{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(kt(i))try{i()}catch(o){e=o instanceof P?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{Ke(o)}catch(s){e=e??[],s instanceof P?e=[...e,...s.errors]:e.push(s)}}if(e)throw new P(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ke(e);else{if(e instanceof Q){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&G(t,e)}remove(e){const{_finalizers:t}=this;t&&G(t,e),e instanceof Q&&e._removeParent(this)}}Q.EMPTY=(()=>{const n=new Q;return n.closed=!0,n})();const Ie=Q.EMPTY;function Je(n){return n instanceof Q||n&&"closed"in n&&kt(n.remove)&&kt(n.add)&&kt(n.unsubscribe)}function Ke(n){kt(n)?n():n.unsubscribe()}const dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ue={setTimeout(n,e,...t){const{delegate:i}=ue;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ue;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function td(n){ue.setTimeout(()=>{const{onUnhandledError:e}=dt;if(!e)throw n;e(n)})}function Pr(){}const zn=fo("C",void 0,void 0);function fo(n,e,t){return{kind:n,value:e,error:t}}let Pi=null;function sa(n){if(dt.useDeprecatedSynchronousErrorHandling){const e=!Pi;if(e&&(Pi={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Pi;if(Pi=null,t)throw i}}else n()}class es extends Q{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Je(e)&&e.add(this)):this.destination=fr}static create(e,t,i){return new _i(e,t,i)}next(e){this.isStopped?gn(function nr(n){return fo("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?gn(function Vl(n){return fo("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gn(zn,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Hl=Function.prototype.bind;function ts(n,e){return Hl.call(n,e)}class Xa{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){hi(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){hi(i)}else hi(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){hi(t)}}}class _i extends es{constructor(e,t,i){let r;if(super(),kt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&dt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ts(e.next,o),error:e.error&&ts(e.error,o),complete:e.complete&&ts(e.complete,o)}):r=e}this.destination=new Xa(r)}}function hi(n){dt.useDeprecatedSynchronousErrorHandling?function Za(n){dt.useDeprecatedSynchronousErrorHandling&&Pi&&(Pi.errorThrown=!0,Pi.error=n)}(n):td(n)}function gn(n,e){const{onStoppedNotification:t}=dt;t&&ue.setTimeout(()=>t(n,e))}const fr={closed:!0,next:Pr,error:function qn(n){throw n},complete:Pr},nd="function"==typeof Symbol&&Symbol.observable||"@@observable";function fi(n){return n}function Ut(n){return 0===n.length?fi:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Rn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function Si(n){return n&&n instanceof es||function xn(n){return n&&kt(n.next)&&kt(n.error)&&kt(n.complete)}(n)&&Je(n)}(t)?t:new _i(t,i,r);return sa(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Pt(i))((r,o)=>{const s=new _i({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[nd](){return this}pipe(...t){return Ut(t)(this)}toPromise(t){return new(t=Pt(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function Pt(n){var e;return null!==(e=n??dt.Promise)&&void 0!==e?e:Promise}const vi=C(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let St=(()=>{class n extends Rn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new _n(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new vi}next(t){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?Ie:(this.currentObservers=null,o.push(t),new Q(()=>{this.currentObservers=null,G(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new Rn;return t.source=this,t}}return n.create=(e,t)=>new _n(e,t),n})();class _n extends St{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Ie}}function en(n){return kt(n?.lift)}function Sn(n){return e=>{if(en(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function vn(n,e,t,i,r){return new Gl(n,e,t,i,r)}class Gl extends es{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $t(n,e){return Sn((t,i)=>{let r=0;t.subscribe(vn(i,o=>{i.next(n.call(e,o,r++))}))})}function ri(n){return this instanceof ri?(this.v=n,this):new ri(n)}function Ya(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function ii(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){!function r(o,s,a,l){Promise.resolve(l).then(function(d){o({value:d,done:a})},s)}(a,l,(s=n[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const ad=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Zl(n){return kt(n?.then)}function Wu(n){return kt(n[nd])}function $u(n){return Symbol.asyncIterator&&kt(n?.[Symbol.asyncIterator])}function Xl(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Vr=function ld(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function yt(n){return kt(n?.[Vr])}function cd(n){return function Hu(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(g){return function(v){return Promise.resolve(v).then(g,f)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(g,v){i[g]&&(r[g]=function(w){return new Promise(function(x,y){o.push([g,w,x,y])>1||l(g,w)})},v&&(r[g]=v(r[g])))}function l(g,v){try{!function d(g){g.value instanceof ri?Promise.resolve(g.value.v).then(h,f):p(o[0][2],g)}(i[g](v))}catch(w){p(o[0][3],w)}}function h(g){l("next",g)}function f(g){l("throw",g)}function p(g,v){g(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield ri(t.read());if(r)return yield ri(void 0);yield yield ri(i)}}finally{t.releaseLock()}})}function dd(n){return kt(n?.getReader)}function $i(n){if(n instanceof Rn)return n;if(null!=n){if(Wu(n))return function Fn(n){return new Rn(e=>{const t=n[nd]();if(kt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(ad(n))return function ud(n){return new Rn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Zl(n))return function qu(n){return new Rn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,td)})}(n);if($u(n))return hd(n);if(yt(n))return function la(n){return new Rn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(dd(n))return function Ep(n){return hd(cd(n))}(n)}throw Xl(n)}function hd(n){return new Rn(e=>{(function Sp(n,e){var t,i,r,o;return function yn(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(h){try{d(i.next(h))}catch(f){s(f)}}function l(h){try{d(i.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):function r(o){return o instanceof t?o:new t(function(s){s(o)})}(h.value).then(a,l)}d((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Ya(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Hr(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function yi(n,e,t=1/0){return kt(e)?yi((i,r)=>$t((o,s)=>e(i,o,r,s))($i(n(i,r))),t):("number"==typeof e&&(t=e),Sn((i,r)=>function Ka(n,e,t,i,r,o,s,a){const l=[];let d=0,h=0,f=!1;const p=()=>{f&&!l.length&&!d&&e.complete()},g=w=>d<i?v(w):l.push(w),v=w=>{o&&e.next(w),d++;let x=!1;$i(t(w,h++)).subscribe(vn(e,y=>{r?.(y),o?g(y):e.next(y)},()=>{x=!0},void 0,()=>{if(x)try{for(d--;l.length&&d<i;){const y=l.shift();s?Hr(e,s,()=>v(y)):v(y)}p()}catch(y){e.error(y)}}))};return n.subscribe(vn(e,g,()=>{f=!0,p()})),()=>{a?.()}}(i,r,n,t)))}function Oo(n=1/0){return yi(fi,n)}const bn=new Rn(n=>n.complete());function Zu(n){return n&&kt(n.schedule)}function Yl(n){return n[n.length-1]}function fd(n){return kt(Yl(n))?n.pop():void 0}function Ls(n){return Zu(Yl(n))?n.pop():void 0}function Kl(n,e=0){return Sn((t,i)=>{t.subscribe(vn(i,r=>Hr(i,n,()=>i.next(r),e),()=>Hr(i,n,()=>i.complete(),e),r=>Hr(i,n,()=>i.error(r),e)))})}function pd(n,e=0){return Sn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function rs(n,e){if(!n)throw new Error("Iterable cannot be null");return new Rn(t=>{Hr(t,e,()=>{const i=n[Symbol.asyncIterator]();Hr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function vt(n,e){return e?function Ql(n,e){if(null!=n){if(Wu(n))return function ca(n,e){return $i(n).pipe(pd(e),Kl(e))}(n,e);if(ad(n))return function Vn(n,e){return new Rn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(Zl(n))return function wn(n,e){return $i(n).pipe(pd(e),Kl(e))}(n,e);if($u(n))return rs(n,e);if(yt(n))return function Ja(n,e){return new Rn(t=>{let i;return Hr(t,e,()=>{i=n[Vr](),Hr(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>kt(i?.return)&&i.return()})}(n,e);if(dd(n))return function Os(n,e){return rs(cd(n),e)}(n,e)}throw Xl(n)}(n,e):$i(n)}function Kn(...n){const e=Ls(n),t=function Qa(n,e){return"number"==typeof Yl(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?$i(i[0]):Oo(t)(vt(i,e)):bn}class Li extends St{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function ut(...n){return vt(n,Ls(n))}function Ui(n={}){const{connector:e=(()=>new St),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,d=0,h=!1,f=!1;const p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),s=l=void 0,h=f=!1},v=()=>{const w=s;g(),w?.unsubscribe()};return Sn((w,x)=>{d++,!f&&!h&&p();const y=l=l??e();x.add(()=>{d--,0===d&&!f&&!h&&(a=Jl(v,r))}),y.subscribe(x),!s&&d>0&&(s=new _i({next:E=>y.next(E),error:E=>{f=!0,p(),a=Jl(g,t,E),y.error(E)},complete:()=>{h=!0,p(),a=Jl(g,i),y.complete()}}),$i(w).subscribe(s))})(o)}}function Jl(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new _i({next:()=>{i.unsubscribe(),n()}});return $i(e(...t)).subscribe(i)}function zi(n,e){return Sn((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(vn(i,l=>{r?.unsubscribe();let d=0;const h=o++;$i(n(l,h)).subscribe(r=vn(i,f=>i.next(e?e(l,f,h,d++):f),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function os(n,e=fi){return n=n??bi,Sn((t,i)=>{let r,o=!0;t.subscribe(vn(i,s=>{const a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function bi(n,e){return n===e}function pn(n){for(let e in n)if(n[e]===pn)return e;throw Error("Could not find renamed property on target object.")}function ss(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Qn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Qn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function da(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const el=pn({__forward_ref__:pn});function Cn(n){return n.__forward_ref__=Cn,n.toString=function(){return Qn(this())},n}function It(n){return ua(n)?n():n}function ua(n){return"function"==typeof n&&n.hasOwnProperty(el)&&n.__forward_ref__===Cn}function go(n){return n&&!!n.\u0275providers}const tl="https://g.co/ng/security#xss";class ge extends Error{constructor(e,t){super(function ks(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Nt(n){return"string"==typeof n?n:null==n?"":String(n)}function nl(n,e){throw new ge(-201,!1)}function xr(n,e){null==n&&function qe(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Be(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nn(n){return{providers:n.providers||[],imports:n.imports||[]}}function nc(n){return _d(n,ic)||_d(n,Qu)}function _d(n,e){return n.hasOwnProperty(e)?n[e]:null}function pa(n){return n&&(n.hasOwnProperty(Rr)||n.hasOwnProperty(Ju))?n[Rr]:null}const ic=pn({\u0275prov:pn}),Rr=pn({\u0275inj:pn}),Qu=pn({ngInjectableDef:pn}),Ju=pn({ngInjectorDef:pn});var zt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(zt||{});let rc;function Zi(n){const e=rc;return rc=n,e}function eh(n,e,t){const i=nc(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&zt.Optional?null:void 0!==e?e:void nl(Qn(n))}const Ln=globalThis;class Se{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Be({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ds={},ma="__NG_DI_FLAG__",ol="ngTempTokenPath",yd=/\n/gm,Hi="__source";let Wr;function Xi(n){const e=Wr;return Wr=n,e}function oh(n,e=zt.Default){if(void 0===Wr)throw new ge(-203,!1);return null===Wr?eh(n,void 0,e):Wr.get(n,e&zt.Optional?null:void 0,e)}function he(n,e=zt.Default){return(function vd(){return rc}()||oh)(It(n),e)}function He(n,e=zt.Default){return he(n,sl(e))}function sl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ga(n){const e=[];for(let t=0;t<n.length;t++){const i=It(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ge(900,!1);let r,o=zt.Default;for(let s=0;s<i.length;s++){const a=i[s],l=ko(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}e.push(he(r,o))}else e.push(he(i))}return e}function _a(n,e){return n[ma]=e,n.prototype[ma]=e,n}function ko(n){return n[ma]}function $r(n){return{toString:n}.toString()}var al=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(al||{}),oi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(oi||{});const vo={},an=[],cc=pn({\u0275cmp:pn}),qr=pn({\u0275dir:pn}),Fo=pn({\u0275pipe:pn}),xd=pn({\u0275mod:pn}),Zr=pn({\u0275fac:pn}),us=pn({__NG_ELEMENT_ID__:pn}),dc=pn({__NG_ENV_ID__:pn});function va(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function hs(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];uc(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function ll(n){return 3===n||4===n||6===n}function uc(n){return 64===n.charCodeAt(0)}function ya(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||wd(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function wd(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const ba="ng-template";function Op(n,e,t){let i=0,r=!0;for(;i<n.length;){let o=n[i++];if("string"==typeof o&&r){const s=n[i++];if(t&&"class"===o&&-1!==va(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function Md(n){return 4===n.type&&n.value!==ba}function kp(n,e,t){return e===(4!==n.type||t?n.value:ba)}function Cd(n,e,t){let i=4;const r=n.attrs||[],o=function Ed(n){for(let e=0;e<n.length;e++)if(ll(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!kp(n,l,t)||""===l&&1===e.length){if(wr(i))return!1;s=!0}}else{const d=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!Op(n.attrs,d,t)){if(wr(i))return!1;s=!0}continue}const f=yo(8&i?"class":l,r,Md(n),t);if(-1===f){if(wr(i))return!1;s=!0;continue}if(""!==d){let p;p=f>o?"":r[f+1].toLowerCase();const g=8&i?p:null;if(g&&-1!==va(g,d,0)||2&i&&d!==p){if(wr(i))return!1;s=!0}}}}else{if(!s&&!wr(i)&&!wr(l))return!1;if(s&&wr(l))continue;s=!1,i=l|1&i}}return wr(i)||s}function wr(n){return 0==(1&n)}function yo(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function g_(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function cl(n,e,t=!1){for(let i=0;i<e.length;i++)if(Cd(n,e[i],t))return!0;return!1}function Np(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function ah(n,e){return n?":not("+e.trim()+")":e}function dl(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!wr(s)&&(e+=ah(o,r),r=""),i=s,o=o||!wr(i);t++}return""!==r&&(e+=ah(o,r)),e}function wi(n){return $r(()=>{const e=Sd(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===al.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||oi.Emulated,styles:n.styles||an,_:null,schemas:n.schemas||null,tView:null,id:""};hc(t);const i=n.dependencies;return t.directiveDefs=ul(i,!1),t.pipeDefs=ul(i,!0),t.id=function Up(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Bp(n){return tn(n)||Oi(n)}function No(n){return null!==n}function dn(n){return $r(()=>({type:n.type,bootstrap:n.bootstrap||an,declarations:n.declarations||an,imports:n.imports||an,exports:n.exports||an,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function wa(n,e){if(null==n)return vo;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}function bt(n){return $r(()=>{const e=Sd(n);return hc(e),e})}function tn(n){return n[cc]||null}function Oi(n){return n[qr]||null}function Ti(n){return n[Fo]||null}function mr(n,e){const t=n[xd]||null;if(!t&&!0===e)throw new Error(`Type ${Qn(n)} does not have '\u0275mod' property.`);return t}function Sd(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||vo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||an,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:wa(n.inputs,e),outputs:wa(n.outputs)}}function hc(n){n.features?.forEach(e=>e(n))}function ul(n,e){if(!n)return null;const t=e?Ti:Bp;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(No)}const Mn=0,Ye=1,ct=2,c=3,u=4,m=5,M=6,S=7,R=8,X=9,ae=10,J=11,_=12,b=13,T=14,N=15,ce=16,Oe=17,pt=18,Dt=19,An=20,Mr=21,Xr=22,Td=23,fc=24,mn=25,Mi=1,Dd=2,fs=7,pc=9,Yi=11;function bo(n){return Array.isArray(n)&&"object"==typeof n[Mi]}function Yr(n){return Array.isArray(n)&&!0===n[Mi]}function W0(n){return 0!=(4&n.flags)}function Ad(n){return n.componentOffset>-1}function __(n){return 1==(1&n.flags)}function Bs(n){return!!n.template}function $0(n){return 0!=(512&n[ct])}function Id(n,e){return n.hasOwnProperty(Zr)?n[Zr]:null}let Cr=null,v_=!1;function ps(n){const e=Cr;return Cr=n,e}const pD={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function gD(n){if(!zp(n)||n.dirty){if(!n.producerMustRecompute(n)&&!yD(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function vD(n){n.dirty=!0,function _D(n){if(void 0===n.liveConsumerNode)return;const e=v_;v_=!0;try{for(const t of n.liveConsumerNode)t.dirty||vD(t)}finally{v_=e}}(n),n.consumerMarkedDirty?.(n)}function Z0(n){return n&&(n.nextProducerIndex=0),ps(n)}function X0(n,e){if(ps(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(zp(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)y_(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function yD(n){fh(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(gD(t),i!==t.version))return!0}return!1}function bD(n){if(fh(n),zp(n))for(let e=0;e<n.producerNode.length;e++)y_(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function y_(n,e){if(function wD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),fh(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)y_(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];fh(r),r.producerIndexOfThis[i]=e}}function zp(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function fh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let MD=null;const TD=()=>{},ez=(()=>({...pD,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:TD}))();class tz{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Bo(){return DD}function DD(n){return n.type.prototype.ngOnChanges&&(n.setInput=iz),nz}function nz(){const n=ID(this),e=n?.current;if(e){const t=n.previous;if(t===vo)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function iz(n,e,t,i){const r=this.declaredInputs[t],o=ID(n)||function rz(n,e){return n[AD]=e}(n,{previous:vo,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[r];s[r]=new tz(l&&l.currentValue,e,a===vo),n[i]=e}Bo.ngInherit=!0;const AD="__ngSimpleChanges__";function ID(n){return n[AD]||null}const Ca=function(n,e,t){},PD="svg";function si(n){for(;Array.isArray(n);)n=n[Mn];return n}function b_(n,e){return si(e[n])}function xo(n,e){return si(e[n.index])}function LD(n,e){return n.data[e]}function Uo(n,e){const t=e[n];return bo(t)?t:t[Mn]}function gc(n,e){return null==e?null:n[e]}function OD(n){n[Oe]=0}function dz(n){1024&n[ct]||(n[ct]|=1024,FD(n,1))}function kD(n){1024&n[ct]&&(n[ct]&=-1025,FD(n,-1))}function FD(n,e){let t=n[c];if(null===t)return;t[m]+=e;let i=t;for(t=t[c];null!==t&&(1===e&&1===i[m]||-1===e&&0===i[m]);)t[m]+=e,i=t,t=t[c]}const Vt={lFrame:qD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function UD(){return Vt.bindingsEnabled}function mh(){return null!==Vt.skipHydrationRootTNode}function De(){return Vt.lFrame.lView}function Tn(){return Vt.lFrame.tView}function Ze(n){return Vt.lFrame.contextLView=n,n[R]}function Xe(n){return Vt.lFrame.contextLView=null,n}function Er(){let n=zD();for(;null!==n&&64===n.type;)n=n.parent;return n}function zD(){return Vt.lFrame.currentTNode}function Ea(n,e){const t=Vt.lFrame;t.currentTNode=n,t.isParent=e}function ex(){return Vt.lFrame.isParent}function tx(){Vt.lFrame.isParent=!1}function gh(){return Vt.lFrame.bindingIndex++}function pl(n){const e=Vt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function wz(n,e){const t=Vt.lFrame;t.bindingIndex=t.bindingRootIndex=n,nx(e)}function nx(n){Vt.lFrame.currentDirectiveIndex=n}function jD(){return Vt.lFrame.currentQueryIndex}function rx(n){Vt.lFrame.currentQueryIndex=n}function Cz(n){const e=n[Ye];return 2===e.type?e.declTNode:1===e.type?n[M]:null}function WD(n,e,t){if(t&zt.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&zt.Host||(r=Cz(o),null===r||(o=o[T],10&r.type))););if(null===r)return!1;e=r,n=o}const i=Vt.lFrame=$D();return i.currentTNode=e,i.lView=n,!0}function ox(n){const e=$D(),t=n[Ye];Vt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $D(){const n=Vt.lFrame,e=null===n?null:n.child;return null===e?qD(n):e}function qD(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ZD(){const n=Vt.lFrame;return Vt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const XD=ZD;function sx(){const n=ZD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Qr(){return Vt.lFrame.selectedIndex}function Pd(n){Vt.lFrame.selectedIndex=n}function Di(){const n=Vt.lFrame;return LD(n.tView,n.selectedIndex)}function x_(){Vt.lFrame.currentNamespace=PD}let QD=!0;function w_(){return QD}function _c(n){QD=n}function M_(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:d,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function C_(n,e,t){JD(n,e,3,t)}function E_(n,e,t,i){(3&n[ct])===t&&JD(n,e,t,i)}function ax(n,e){let t=n[ct];(3&t)===e&&(t&=8191,t+=1,n[ct]=t)}function JD(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let l=void 0!==i?65535&n[Oe]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[Oe]+=65536),(a<o||-1==o)&&(Iz(n,t,e,l),n[Oe]=(4294901760&n[Oe])+l+2),l++}function e1(n,e){Ca(4,n,e);const t=ps(null);try{e.call(n)}finally{ps(t),Ca(5,n,e)}}function Iz(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];r?n[ct]>>13<n[Oe]>>16&&(3&n[ct])===e&&(n[ct]+=8192,e1(a,o)):e1(a,o)}const _h=-1;class Hp{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function cx(n){return n!==_h}function Gp(n){return 32767&n}function jp(n,e){let t=function Oz(n){return n>>16}(n),i=e;for(;t>0;)i=i[T],t--;return i}let dx=!0;function S_(n){const e=dx;return dx=n,e}const t1=255,n1=5;let kz=0;const Sa={};function T_(n,e){const t=r1(n,e);if(-1!==t)return t;const i=e[Ye];i.firstCreatePass&&(n.injectorIndex=e.length,ux(i.data,n),ux(e,null),ux(i.blueprint,null));const r=D_(n,e),o=n.injectorIndex;if(cx(r)){const s=Gp(r),a=jp(r,e),l=a[Ye].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|l[s+d]}return e[o+8]=r,o}function ux(n,e){n.push(0,0,0,0,0,0,0,0,e)}function r1(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function D_(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=u1(r),null===i)return _h;if(t++,r=r[T],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return _h}function hx(n,e,t){!function Fz(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(us)&&(i=t[us]),null==i&&(i=t[us]=kz++);const r=i&t1;e.data[n+(r>>n1)]|=1<<r}(n,e,t)}function o1(n,e,t){if(t&zt.Optional||void 0!==n)return n;nl()}function s1(n,e,t,i){if(t&zt.Optional&&void 0===i&&(i=null),!(t&(zt.Self|zt.Host))){const r=n[X],o=Zi(void 0);try{return r?r.get(e,i,t&zt.Optional):eh(e,i,t&zt.Optional)}finally{Zi(o)}}return o1(i,0,t)}function a1(n,e,t,i=zt.Default,r){if(null!==n){if(2048&e[ct]&&!(i&zt.Self)){const s=function Hz(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[ct]&&!(512&s[ct]);){const a=l1(o,s,t,i|zt.Self,Sa);if(a!==Sa)return a;let l=o.parent;if(!l){const d=s[An];if(d){const h=d.get(t,Sa,i);if(h!==Sa)return h}l=u1(s),s=s[T]}o=l}return r}(n,e,t,i,Sa);if(s!==Sa)return s}const o=l1(n,e,t,i,Sa);if(o!==Sa)return o}return s1(e,t,i,r)}function l1(n,e,t,i,r){const o=function Uz(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(us)?n[us]:void 0;return"number"==typeof e?e>=0?e&t1:Vz:e}(t);if("function"==typeof o){if(!WD(e,n,i))return i&zt.Host?o1(r,0,i):s1(e,t,i,r);try{let s;if(s=o(i),null!=s||i&zt.Optional)return s;nl()}finally{XD()}}else if("number"==typeof o){let s=null,a=r1(n,e),l=_h,d=i&zt.Host?e[N][M]:null;for((-1===a||i&zt.SkipSelf)&&(l=-1===a?D_(n,e):e[a+8],l!==_h&&d1(i,!1)?(s=e[Ye],a=Gp(l),e=jp(l,e)):a=-1);-1!==a;){const h=e[Ye];if(c1(o,a,h.data)){const f=Bz(a,e,t,s,i,d);if(f!==Sa)return f}l=e[a+8],l!==_h&&d1(i,e[Ye].data[a+8]===d)&&c1(o,a,e)?(s=h,a=Gp(l),e=jp(l,e)):a=-1}}return r}function Bz(n,e,t,i,r,o){const s=e[Ye],a=s.data[n+8],h=A_(a,s,t,null==i?Ad(a)&&dx:i!=s&&0!=(3&a.type),r&zt.Host&&o===a);return null!==h?Rd(e,s,h,a):Sa}function A_(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,l=n.directiveStart,h=o>>20,p=r?a+h:n.directiveEnd;for(let g=i?a:a+h;g<p;g++){const v=s[g];if(g<l&&t===v||g>=l&&v.type===t)return g}if(r){const g=s[l];if(g&&Bs(g)&&g.type===t)return l}return null}function Rd(n,e,t,i){let r=n[t];const o=e.data;if(function Pz(n){return n instanceof Hp}(r)){const s=r;s.resolving&&function _o(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ge(-200,`Circular dependency in DI detected for ${n}${t}`)}(function et(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Nt(n)}(o[t]));const a=S_(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?Zi(s.injectImpl):null;WD(n,i,zt.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function Az(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=DD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==d&&Zi(d),S_(a),s.resolving=!1,XD()}}return r}function c1(n,e,t){return!!(t[e+(n>>n1)]&1<<n)}function d1(n,e){return!(n&zt.Self||n&zt.Host&&e)}class Jr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return a1(this._tNode,this._lView,e,sl(i),t)}}function Vz(){return new Jr(Er(),De())}function gr(n){return $r(()=>{const e=n.prototype.constructor,t=e[Zr]||fx(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[Zr]||fx(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function fx(n){return ua(n)?()=>{const e=fx(It(n));return e&&e()}:Id(n)}function u1(n){const e=n[Ye],t=e.type;return 2===t?e.declTNode:1===t?n[M]:null}function vh(n){return function Nz(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(ll(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(Er(),n)}const bh="__parameters__";function wh(n,e,t){return $r(()=>{const i=function px(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,d,h){const f=l.hasOwnProperty(bh)?l[bh]:Object.defineProperty(l,bh,{value:[]})[bh];for(;f.length<=h;)f.push(null);return(f[h]=f[h]||[]).push(s),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function Ch(n,e){n.forEach(t=>Array.isArray(t)?Ch(t,e):e(t))}function f1(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function I_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qp(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function zo(n,e,t){let i=Eh(n,e);return i>=0?n[1|i]=t:(i=~i,function Xz(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function mx(n,e){const t=Eh(n,e);if(t>=0)return n[1|t]}function Eh(n,e){return function p1(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const Ld=_a(wh("Optional"),8),Zp=_a(wh("SkipSelf"),4);function F_(n){return 128==(128&n.flags)}var vc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(vc||{});const gV=/^>|^->|<!--|-->|--!>|<!-$/g,_V=/(<|>)/g,vV="\u200b$1\u200b";const bx=new Map;let yV=0;const wx="__ngContext__";function Lr(n,e){bo(e)?(n[wx]=e[Dt],function xV(n){bx.set(n[Dt],n)}(e)):n[wx]=e}let Mx;function Cx(n,e){return Mx(n,e)}function Kp(n){const e=n[c];return Yr(e)?e[c]:e}function O1(n){return F1(n[_])}function k1(n){return F1(n[u])}function F1(n){for(;null!==n&&!Yr(n);)n=n[u];return n}function Dh(n,e,t,i,r){if(null!=i){let o,s=!1;Yr(i)?o=i:bo(i)&&(s=!0,i=i[Mn]);const a=si(i);0===n&&null!==t?null==r?z1(e,t,a):Od(e,t,a,r||null,!0):1===n&&null!==t?Od(e,t,a,r||null,!0):2===n?function G_(n,e,t){const i=V_(n,e);i&&function zV(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function GV(n,e,t,i,r){const o=t[fs];o!==si(t)&&Dh(e,n,i,o,r);for(let a=Yi;a<t.length;a++){const l=t[a];Jp(l[Ye],l,n,e,i,o)}}(e,n,o,t,r)}}function Ex(n,e){return n.createComment(function S1(n){return n.replace(gV,e=>e.replace(_V,vV))}(e))}function U_(n,e,t){return n.createElement(e,t)}function B1(n,e){const t=n[pc],i=t.indexOf(e);kD(e),t.splice(i,1)}function z_(n,e){if(n.length<=Yi)return;const t=Yi+e,i=n[t];if(i){const r=i[ce];null!==r&&r!==n&&B1(r,i),e>0&&(n[t-1][u]=i[u]);const o=I_(n,Yi+e);!function RV(n,e){Jp(n,e,e[J],2,null,null),e[Mn]=null,e[M]=null}(i[Ye],i);const s=o[pt];null!==s&&s.detachView(o[Ye]),i[c]=null,i[u]=null,i[ct]&=-129}return i}function Sx(n,e){if(!(256&e[ct])){const t=e[J];e[Td]&&bD(e[Td]),e[fc]&&bD(e[fc]),t.destroyNode&&Jp(n,e,t,3,null,null),function kV(n){let e=n[_];if(!e)return Tx(n[Ye],n);for(;e;){let t=null;if(bo(e))t=e[_];else{const i=e[Yi];i&&(t=i)}if(!t){for(;e&&!e[u]&&e!==n;)bo(e)&&Tx(e[Ye],e),e=e[c];null===e&&(e=n),bo(e)&&Tx(e[Ye],e),t=e&&e[u]}e=t}}(e)}}function Tx(n,e){if(!(256&e[ct])){e[ct]&=-129,e[ct]|=256,function UV(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Hp)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];Ca(4,a,l);try{l.call(a)}finally{Ca(5,a,l)}}else{Ca(4,r,o);try{o.call(r)}finally{Ca(5,r,o)}}}}}(n,e),function BV(n,e){const t=n.cleanup,i=e[S];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[S]=null);const r=e[Mr];if(null!==r){e[Mr]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,e),1===e[Ye].type&&e[J].destroy();const t=e[ce];if(null!==t&&Yr(e[c])){t!==e[c]&&B1(t,e);const i=e[pt];null!==i&&i.detachView(n)}!function wV(n){bx.delete(n[Dt])}(e)}}function Dx(n,e,t){return function U1(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[Mn];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===oi.None||o===oi.Emulated)return null}return xo(i,t)}}(n,e.parent,t)}function Od(n,e,t,i,r){n.insertBefore(e,t,i,r)}function z1(n,e,t){n.appendChild(e,t)}function V1(n,e,t,i,r){null!==i?Od(n,e,t,i,r):z1(n,e,t)}function V_(n,e){return n.parentNode(e)}function H1(n,e,t){return j1(n,e,t)}let Ax,j_,Lx,j1=function G1(n,e,t){return 40&n.type?xo(n,t):null};function H_(n,e,t,i){const r=Dx(n,i,e),o=e[J],a=H1(i.parent||e[M],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)V1(o,r,t[l],a,!1);else V1(o,r,t,a,!1);void 0!==Ax&&Ax(o,i,e,t,r)}function Qp(n,e){if(null!==e){const t=e.type;if(3&t)return xo(e,n);if(4&t)return Ix(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Qp(n,i);{const r=n[e.index];return Yr(r)?Ix(-1,r):si(r)}}if(32&t)return Cx(e,n)()||si(n[e.index]);{const i=$1(n,e);return null!==i?Array.isArray(i)?i[0]:Qp(Kp(n[N]),i):Qp(n,e.next)}}return null}function $1(n,e){return null!==e?n[N][M].projection[e.projection]:null}function Ix(n,e){const t=Yi+n+1;if(t<e.length){const i=e[t],r=i[Ye].firstChild;if(null!==r)return Qp(i,r)}return e[fs]}function Px(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],l=t.type;if(s&&0===e&&(a&&Lr(si(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)Px(n,e,t.child,i,r,o,!1),Dh(e,n,r,a,o);else if(32&l){const d=Cx(t,i);let h;for(;h=d();)Dh(e,n,r,h,o);Dh(e,n,r,a,o)}else 16&l?Z1(n,e,i,t,r,o):Dh(e,n,r,a,o);t=s?t.projectionNext:t.next}}function Jp(n,e,t,i,r,o){Px(t,i,n.firstChild,e,r,o,!1)}function Z1(n,e,t,i,r,o){const s=t[N],l=s[M].projection[i.projection];if(Array.isArray(l))for(let d=0;d<l.length;d++)Dh(e,n,r,l[d],o);else{let d=l;const h=s[c];F_(i)&&(d.flags|=128),Px(n,e,d,h,r,o,!0)}}function X1(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Y1(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&hs(n,e,i),null!==r&&X1(n,e,r),null!==o&&function WV(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function Ah(n){return function Rx(){if(void 0===j_&&(j_=null,Ln.trustedTypes))try{j_=Ln.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return j_}()?.createHTML(n)||n}class kd{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tl})`}}class YV extends kd{getTypeName(){return"HTML"}}class KV extends kd{getTypeName(){return"Style"}}class QV extends kd{getTypeName(){return"Script"}}class JV extends kd{getTypeName(){return"URL"}}class e5 extends kd{getTypeName(){return"ResourceURL"}}function Vo(n){return n instanceof kd?n.changingThisBreaksApplicationSecurity:n}function Ta(n,e){const t=function t5(n){return n instanceof kd&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${tl})`)}return t===e}class l5{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ah(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class c5{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Ah(e),t}}const u5=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function $_(n){return(n=String(n)).match(u5)?n:"unsafe:"+n}function ml(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function em(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const tA=ml("area,br,col,hr,img,wbr"),nA=ml("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),iA=ml("rp,rt"),kx=em(tA,em(nA,ml("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),em(iA,ml("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),em(iA,nA)),Fx=ml("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rA=em(Fx,ml("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ml("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),h5=ml("script,style,template");class f5{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!kx.hasOwnProperty(t))return this.sanitizedSomething=!0,!h5.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!rA.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;Fx[a]&&(l=$_(l)),this.buf.push(" ",s,'="',oA(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();kx.hasOwnProperty(t)&&!tA.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(oA(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const p5=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m5=/([^\#-~ |!])/g;function oA(n){return n.replace(/&/g,"&amp;").replace(p5,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(m5,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let q_;function sA(n,e){let t=null;try{q_=q_||function eA(n){const e=new c5(n);return function d5(){try{return!!(new window.DOMParser).parseFromString(Ah(""),"text/html")}catch{return!1}}()?new l5(e):e}(n);let i=e?String(e):"";t=q_.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=q_.getInertBodyElement(i)}while(i!==o);return Ah((new f5).sanitizeChildren(Nx(t)||t))}finally{if(t){const i=Nx(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Nx(n){return"content"in n&&function g5(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Sr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Sr||{});const nm=new Se("ENVIRONMENT_INITIALIZER"),dA=new Se("INJECTOR",-1),uA=new Se("INJECTOR_DEF_TYPES");class Bx{get(e,t=ds){if(t===ds){const i=new Error(`NullInjectorError: No provider for ${Qn(e)}!`);throw i.name="NullInjectorError",i}return t}}function M5(...n){return{\u0275providers:hA(0,n),\u0275fromNgModule:!0}}function hA(n,...e){const t=[],i=new Set;let r;const o=s=>{t.push(s)};return Ch(e,s=>{const a=s;Z_(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&fA(r,o),t}function fA(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];zx(r,o=>{e(o,i)})}}function Z_(n,e,t,i){if(!(n=It(n)))return!1;let r=null,o=pa(n);const s=!o&&tn(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const l=n.ngModule;if(o=pa(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of l)Z_(d,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let d;i.add(r);try{Ch(o.imports,h=>{Z_(h,e,t,i)&&(d||=[],d.push(h))})}finally{}void 0!==d&&fA(d,e)}if(!a){const d=Id(r)||(()=>new r);e({provide:r,useFactory:d,deps:an},r),e({provide:uA,useValue:r,multi:!0},r),e({provide:nm,useValue:()=>he(r),multi:!0},r)}const l=o.providers;if(null!=l&&!a){const d=n;zx(l,h=>{e(h,d)})}}}return r!==n&&void 0!==n.providers}function zx(n,e){for(let t of n)go(t)&&(t=t.\u0275providers),Array.isArray(t)?zx(t,e):e(t)}const C5=pn({provide:String,useValue:pn});function Vx(n){return null!==n&&"object"==typeof n&&C5 in n}function Fd(n){return"function"==typeof n}const Hx=new Se("Set Injector scope."),X_={},S5={};let Gx;function Y_(){return void 0===Gx&&(Gx=new Bx),Gx}class Ho{}class Ph extends Ho{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wx(e,s=>this.processProvider(s)),this.records.set(dA,Rh(void 0,this)),r.has("environment")&&this.records.set(Ho,Rh(void 0,this));const o=this.records.get(Hx);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(uA.multi,an,zt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Xi(this),i=Zi(void 0);try{return e()}finally{Xi(t),Zi(i)}}get(e,t=ds,i=zt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(dc))return e[dc](this);i=sl(i);const o=Xi(this),s=Zi(void 0);try{if(!(i&zt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const d=function P5(n){return"function"==typeof n||"object"==typeof n&&n instanceof Se}(e)&&nc(e);l=d&&this.injectableDefInScope(d)?Rh(jx(e),X_):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&zt.Self?Y_():this.parent).get(e,t=i&zt.Optional&&t===ds?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[ol]=a[ol]||[]).unshift(Qn(e)),o)throw a;return function lc(n,e,t,i){const r=n[ol];throw e[Hi]&&r.unshift(e[Hi]),n.message=function sh(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Qn(e);if(Array.isArray(e))r=e.map(Qn).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Qn(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(yd,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[ol]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Zi(s),Xi(o)}}resolveInjectorInitializers(){const e=Xi(this),t=Zi(void 0);try{const r=this.get(nm.multi,an,zt.Self);for(const o of r)o()}finally{Xi(e),Zi(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Qn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(e){let t=Fd(e=It(e))?e:It(e&&e.provide);const i=function D5(n){return Vx(n)?Rh(void 0,n.useValue):Rh(gA(n),X_)}(e);if(Fd(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Rh(void 0,X_,!0),r.factory=()=>ga(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===X_&&(t.value=S5,t.value=t.factory()),"object"==typeof t.value&&t.value&&function I5(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=It(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function jx(n){const e=nc(n),t=null!==e?e.factory:Id(n);if(null!==t)return t;if(n instanceof Se)throw new ge(204,!1);if(n instanceof Function)return function T5(n){const e=n.length;if(e>0)throw qp(e,"?"),new ge(204,!1);const t=function fa(n){return n&&(n[ic]||n[Qu])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ge(204,!1)}function gA(n,e,t){let i;if(Fd(n)){const r=It(n);return Id(r)||jx(r)}if(Vx(n))i=()=>It(n.useValue);else if(function mA(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...ga(n.deps||[]));else if(function pA(n){return!(!n||!n.useExisting)}(n))i=()=>he(It(n.useExisting));else{const r=It(n&&(n.useClass||n.provide));if(!function A5(n){return!!n.deps}(n))return Id(r)||jx(r);i=()=>new r(...ga(n.deps))}return i}function Rh(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Wx(n,e){for(const t of n)Array.isArray(t)?Wx(t,e):t&&go(t)?Wx(t.\u0275providers,e):e(t)}const K_=new Se("AppId",{providedIn:"root",factory:()=>R5}),R5="ng",_A=new Se("Platform Initializer"),yc=new Se("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Us=new Se("AnimationModuleType"),$x=new Se("CSP nonce",{providedIn:"root",factory:()=>function Ih(){if(void 0!==Lx)return Lx;if(typeof document<"u")return document;throw new ge(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let vA=(n,e,t)=>null;function ew(n,e,t=!1){return vA(n,e,t)}class H5{}class xA{}class j5{resolveComponentFactory(e){throw function G5(n){const e=Error(`No component factory found for ${Qn(n)}.`);return e.ngComponent=n,e}(e)}}let kh=(()=>{class n{static{this.NULL=new j5}}return n})();function W5(){return Fh(Er(),De())}function Fh(n,e){return new Zn(xo(n,e))}let Zn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=W5}}return n})();function $5(n){return n instanceof Zn?n.nativeElement:n}class om{}let gl=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function q5(){const n=De(),t=Uo(Er().index,n);return(bo(t)?t:n)[J]}()}}return n})(),Z5=(()=>{class n{static{this.\u0275prov=Be({token:n,providedIn:"root",factory:()=>null})}}return n})();class Nd{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const X5=new Nd("16.2.12"),iw={};function SA(n,e=null,t=null,i){const r=TA(n,e,t,i);return r.resolveInjectorInitializers(),r}function TA(n,e=null,t=null,i,r=new Set){const o=[t||an,M5(n)];return i=i||("object"==typeof n?void 0:Qn(n)),new Ph(o,e||Y_(),i||null,r)}let Ki=(()=>{class n{static{this.THROW_IF_NOT_FOUND=ds}static{this.NULL=new Bx}static create(t,i){if(Array.isArray(t))return SA({name:""},i,t,"");{const r=t.name??"";return SA({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=Be({token:n,providedIn:"any",factory:()=>he(dA)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function ow(n){return n.ngOriginalError}class gs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ow(e);for(;t&&ow(t);)t=ow(t);return t||null}}function sw(n){return e=>{setTimeout(n,void 0,e)}}const ei=class r4 extends St{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=sw(o),r&&(r=sw(r)),s&&(s=sw(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof Q&&e.add(a),a}};function AA(...n){}class qt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ei(!1),this.onMicrotaskEmpty=new ei(!1),this.onStable=new ei(!1),this.onError=new ei(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function o4(){const n="function"==typeof Ln.requestAnimationFrame;let e=Ln[n?"requestAnimationFrame":"setTimeout"],t=Ln[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function l4(n){const e=()=>{!function a4(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ln,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,lw(n),n.isCheckStableRunning=!0,aw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),lw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{if(function d4(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,o,s,a);try{return IA(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),PA(n)}},onInvoke:(t,i,r,o,s,a,l)=>{try{return IA(n),t.invoke(r,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),PA(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,lw(n),aw(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qt.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(qt.isInAngularZone())throw new ge(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,s4,AA,AA);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const s4={};function aw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function lw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function IA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function PA(n){n._nesting--,aw(n)}class c4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ei,this.onMicrotaskEmpty=new ei,this.onStable=new ei,this.onError=new ei}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const RA=new Se("",{providedIn:"root",factory:LA});function LA(){const n=He(qt);let e=!0;return Kn(new Rn(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new Rn(r=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{qt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const s=n.onUnstable.subscribe(()=>{qt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(Ui()))}function _l(n){return n instanceof Function?n():n}let cw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Be({token:n,providedIn:"root",factory:()=>new n})}}return n})();function sm(n){for(;n;){n[ct]|=64;const e=Kp(n);if($0(n)&&!e)return n;n=e}return null}const BA=new Se("",{providedIn:"root",factory:()=>!1});let ov=null;function HA(n,e){return n[e]??WA()}function GA(n,e){const t=WA();t.producerNode?.length&&(n[e]=ov,t.lView=n,ov=jA())}const b4={...pD,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{sm(n.lView)},lView:null};function jA(){return Object.create(b4)}function WA(){return ov??=jA(),ov}const Yt={};function ee(n){$A(Tn(),De(),Qr()+n,!1)}function $A(n,e,t,i){if(!i)if(3==(3&e[ct])){const o=n.preOrderCheckHooks;null!==o&&C_(e,o,t)}else{const o=n.preOrderHooks;null!==o&&E_(e,o,0,t)}Pd(t)}function oe(n,e=zt.Default){const t=De();return null===t?he(n,e):a1(Er(),t,It(n),e)}function am(){throw new Error("invalid")}function sv(n,e,t,i,r,o,s,a,l,d,h){const f=e.blueprint.slice();return f[Mn]=r,f[ct]=140|i,(null!==d||n&&2048&n[ct])&&(f[ct]|=2048),OD(f),f[c]=f[T]=n,f[R]=t,f[ae]=s||n&&n[ae],f[J]=a||n&&n[J],f[X]=l||n&&n[X]||null,f[M]=o,f[Dt]=function bV(){return yV++}(),f[Xr]=h,f[An]=d,f[N]=2==e.type?n[N]:f,f}function Uh(n,e,t,i,r){let o=n.data[e];if(null===o)o=function dw(n,e,t,i,r){const o=zD(),s=ex(),l=n.data[e]=function D4(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return mh()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(n,e,t,i,r),function xz(){return Vt.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function Vp(){const n=Vt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Ea(o,!0),o}function lm(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function qA(n,e,t,i,r){const o=HA(e,Td),s=Qr(),a=2&i;try{Pd(-1),a&&e.length>mn&&$A(n,e,mn,!1),Ca(a?2:0,r);const d=a?o:null,h=Z0(d);try{null!==d&&(d.dirty=!1),t(i,r)}finally{X0(d,h)}}finally{a&&null===e[Td]&&GA(e,Td),Pd(s),Ca(a?3:1,r)}}function uw(n,e,t){if(W0(e)){const i=ps(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{ps(i)}}}function hw(n,e,t){UD()&&(function k4(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;Ad(t)&&function H4(n,e,t){const i=xo(e,n),r=ZA(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=av(n,sv(n,r,null,s,i,e,null,n[ae].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||T_(t,e),Lr(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const l=n.data[a],d=Rd(e,n,a,t);Lr(d,e),null!==s&&G4(0,a-r,d,l,0,s),Bs(l)&&(Uo(t.index,e)[R]=Rd(e,n,a,t))}}(n,e,t,xo(t,e)),64==(64&t.flags)&&JA(n,e,t))}function fw(n,e,t=xo){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function ZA(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=pw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function pw(n,e,t,i,r,o,s,a,l,d,h){const f=mn+i,p=f+r,g=function w4(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Yt);return t}(f,p),v="function"==typeof d?d():d;return g[Ye]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:h}}let XA=n=>null;function YA(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?KA(t,e,r,o):i.hasOwnProperty(r)&&KA(t,e,i[r],o)}return t}function KA(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Go(n,e,t,i,r,o,s,a){const l=xo(e,t);let h,d=e.inputs;!a&&null!=d&&(h=d[i])?(yw(n,t,h,i,r),Ad(e)&&function P4(n,e){const t=Uo(e,n);16&t[ct]||(t[ct]|=64)}(t,e.index)):3&e.type&&(i=function I4(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(l,i,r))}function mw(n,e,t,i){if(UD()){const r=null===i?null:{"":-1},o=function N4(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(cl(e,s.selectors,!1))if(i||(i=[]),Bs(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),gw(n,e,a.length)}else i.unshift(s),gw(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&QA(n,e,t,s,r,a),r&&function B4(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new ge(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=ya(t.mergedAttrs,t.attrs)}function QA(n,e,t,i,r,o){for(let d=0;d<i.length;d++)hx(T_(t,e),n,i[d].type);!function z4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let d=0;d<i.length;d++){const h=i[d];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,l=lm(n,e,i.length,null);for(let d=0;d<i.length;d++){const h=i[d];t.mergedAttrs=ya(t.mergedAttrs,h.hostAttrs),V4(n,t,e,l,h),U4(l,h,r),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const f=h.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function A4(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let l=null,d=null;for(let h=e.directiveStart;h<r;h++){const f=o[h],p=t?t.get(f):null,v=p?p.outputs:null;l=YA(f.inputs,h,l,p?p.inputs:null),d=YA(f.outputs,h,d,v);const w=null===l||null===s||Md(e)?null:j4(l,h,s);a.push(w)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=d}(n,t,o)}function JA(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function Mz(){return Vt.lFrame.currentDirectiveIndex}();try{Pd(o);for(let a=i;a<r;a++){const l=n.data[a],d=e[a];nx(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&F4(l,d)}}finally{Pd(-1),nx(s)}}function F4(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function gw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function U4(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Bs(e)&&(t[""]=n)}}function V4(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=Id(r.type)),s=new Hp(o,Bs(r),oe);n.blueprint[i]=s,t[i]=s,function L4(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function O4(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,lm(n,t,r.hostVars,Yt),r)}function Da(n,e,t,i,r,o){const s=xo(n,e);!function _w(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?Nt(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[J],s,o,n.value,t,i,r)}function G4(n,e,t,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)eI(i,t,s[a++],s[a++],s[a++])}function eI(n,e,t,i,r){const o=ps(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{ps(o)}}function j4(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function tI(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function nI(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const s=n.data[o];rx(t[i]),s.contentQueries(2,e[o],o)}}}function av(n,e){return n[_]?n[b][u]=e:n[_]=e,n[b]=e,e}function vw(n,e,t){rx(0);const i=ps(null);try{e(n,t)}finally{ps(i)}}function iI(n){return n[S]||(n[S]=[])}function rI(n){return n.cleanup||(n.cleanup=[])}function sI(n,e){const t=n[X],i=t?t.get(gs,null):null;i&&i.handleError(e)}function yw(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];eI(n.data[s],e[s],i,a,r)}}function vl(n,e,t){const i=b_(e,n);!function N1(n,e,t){n.setValue(e,t)}(n[J],i,t)}function W4(n,e){const t=Uo(e,n),i=t[Ye];!function $4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[Mn];null!==r&&null===t[Xr]&&(t[Xr]=ew(r,t[X])),bw(i,t,t[R])}function bw(n,e,t){ox(e);try{const i=n.viewQuery;null!==i&&vw(1,i,t);const r=n.template;null!==r&&qA(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&nI(n,e),n.staticViewQueries&&vw(2,n.viewQuery,t);const o=n.components;null!==o&&function q4(n,e){for(let t=0;t<e.length;t++)W4(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ct]&=-5,sx()}}let aI=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const o=typeof Zone>"u"?null:Zone.current,s=function JU(n,e,t){const i=Object.create(ez);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=s=>{i.cleanupFn=s};return i.ref={notify:()=>vD(i),run:()=>{if(i.dirty=!1,i.hasRun&&!yD(i))return;i.hasRun=!0;const s=Z0(i);try{i.cleanupFn(),i.cleanupFn=TD,i.fn(r)}finally{X0(i,s)}},cleanup:()=>i.cleanupFn()},i.ref}(t,d=>{this.all.has(d)&&this.queue.set(d,o)},r);let a;this.all.add(s),s.notify();const l=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Be({token:n,providedIn:"root",factory:()=>new n})}}return n})();function lv(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=da(r,a):2==o&&(i=da(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function cm(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];null!==o&&i.push(si(o)),Yr(o)&&lI(o,i);const s=t.type;if(8&s)cm(n,e,t.child,i);else if(32&s){const a=Cx(t,e);let l;for(;l=a();)i.push(l)}else if(16&s){const a=$1(e,t);if(Array.isArray(a))i.push(...a);else{const l=Kp(e[N]);cm(l[Ye],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function lI(n,e){for(let t=Yi;t<n.length;t++){const i=n[t],r=i[Ye].firstChild;null!==r&&cm(i[Ye],i,r,e)}n[fs]!==n[Mn]&&e.push(n[fs])}function cv(n,e,t,i=!0){const r=e[ae],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{cI(n,e,n.template,t)}catch(l){throw i&&sI(e,l),l}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function cI(n,e,t,i){const r=e[ct];if(256!=(256&r)){e[ae].effectManager?.flush(),ox(e);try{OD(e),function HD(n){return Vt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&qA(n,e,t,2,i);const s=3==(3&r);if(s){const d=n.preOrderCheckHooks;null!==d&&C_(e,d,null)}else{const d=n.preOrderHooks;null!==d&&E_(e,d,0,null),ax(e,0)}if(function Y4(n){for(let e=O1(n);null!==e;e=k1(e)){if(!e[Dd])continue;const t=e[pc];for(let i=0;i<t.length;i++){dz(t[i])}}}(e),dI(e,2),null!==n.contentQueries&&nI(n,e),s){const d=n.contentCheckHooks;null!==d&&C_(e,d)}else{const d=n.contentHooks;null!==d&&E_(e,d,1),ax(e,1)}!function x4(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=HA(e,fc);try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)Pd(~o);else{const s=o,a=t[++r],l=t[++r];wz(a,s),i.dirty=!1;const d=Z0(i);try{l(2,e[s])}finally{X0(i,d)}}}}finally{null===e[fc]&&GA(e,fc),Pd(-1)}}(n,e);const a=n.components;null!==a&&hI(e,a,0);const l=n.viewQuery;if(null!==l&&vw(2,l,i),s){const d=n.viewCheckHooks;null!==d&&C_(e,d)}else{const d=n.viewHooks;null!==d&&E_(e,d,2),ax(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ct]&=-73,kD(e)}finally{sx()}}}function dI(n,e){for(let t=O1(n);null!==t;t=k1(t))for(let i=Yi;i<t.length;i++)uI(t[i],e)}function K4(n,e,t){uI(Uo(e,n),t)}function uI(n,e){if(!function lz(n){return 128==(128&n[ct])}(n))return;const t=n[Ye],i=n[ct];if(80&i&&0===e||1024&i||2===e)cI(t,n,t.template,n[R]);else if(n[m]>0){dI(n,1);const r=t.components;null!==r&&hI(n,r,1)}}function hI(n,e,t){for(let i=0;i<e.length;i++)K4(n,e[i],t)}class dm{get rootNodes(){const e=this._lView,t=e[Ye];return cm(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[R]}set context(e){this._lView[R]=e}get destroyed(){return 256==(256&this._lView[ct])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[c];if(Yr(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(z_(e,i),I_(t,i))}this._attachedToViewContainer=!1}Sx(this._lView[Ye],this._lView)}onDestroy(e){!function ND(n,e){if(256==(256&n[ct]))throw new ge(911,!1);null===n[Mr]&&(n[Mr]=[]),n[Mr].push(e)}(this._lView,e)}markForCheck(){sm(this._cdRefInjectingView||this._lView)}detach(){this._lView[ct]&=-129}reattach(){this._lView[ct]|=128}detectChanges(){cv(this._lView[Ye],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function OV(n,e){Jp(n,e,e[J],2,null,null)}(this._lView[Ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=e}}class Q4 extends dm{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;cv(e[Ye],e,e[R],!1)}checkNoChanges(){}get context(){return null}}class fI extends kh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=tn(e);return new um(t,this.ngModule)}}function pI(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class eH{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=sl(i);const r=this.injector.get(e,iw,i);return r!==iw||t===iw?r:this.parentInjector.get(e,t,i)}}class um extends xA{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=pI(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return pI(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function lh(n){return n.map(dl).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof Ho?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new eH(e,o):e,a=s.get(om,null);if(null===a)throw new ge(407,!1);const f={rendererFactory:a,sanitizer:s.get(Z5,null),effectManager:s.get(aI,null),afterRenderEventManager:s.get(cw,null)},p=a.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",v=i?function M4(n,e,t,i){const o=i.get(BA,!1)||t===oi.ShadowDom,s=n.selectRootElement(e,o);return function C4(n){XA(n)}(s),s}(p,i,this.componentDef.encapsulation,s):U_(p,g,function J4(n){const e=n.toLowerCase();return"svg"===e?PD:"math"===e?"math":null}(g)),y=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let E=null;null!==v&&(E=ew(v,s,!0));const D=pw(0,null,null,1,0,null,null,null,null,null,null),I=sv(null,D,null,y,null,null,f,p,s,null,E);let z,U;ox(I);try{const W=this.componentDef;let Z,F=null;W.findHostDirectiveDefs?(Z=[],F=new Map,W.findHostDirectiveDefs(W,Z,F),Z.push(W)):Z=[W];const O=function nH(n,e){const t=n[Ye],i=mn;return n[i]=e,Uh(t,i,2,"#host",null)}(I,v),Y=function iH(n,e,t,i,r,o,s){const a=r[Ye];!function rH(n,e,t,i){for(const r of n)e.mergedAttrs=ya(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(lv(e,e.mergedAttrs,!0),null!==t&&Y1(i,t,e))}(i,n,e,s);let l=null;null!==e&&(l=ew(e,r[X]));const d=o.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const f=sv(r,ZA(t),null,h,r[n.index],n,o,d,null,null,l);return a.firstCreatePass&&gw(a,n,i.length-1),av(r,f),r[n.index]=f}(O,v,W,Z,I,f,p);U=LD(D,mn),v&&function sH(n,e,t,i){if(i)hs(n,t,["ng-version",X5.full]);else{const{attrs:r,classes:o}=function xa(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!wr(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&hs(n,t,r),o&&o.length>0&&X1(n,t,o.join(" "))}}(p,W,v,i),void 0!==t&&function aH(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(U,this.ngContentSelectors,t),z=function oH(n,e,t,i,r,o){const s=Er(),a=r[Ye],l=xo(s,r);QA(a,r,s,t,null,i);for(let h=0;h<t.length;h++)Lr(Rd(r,a,s.directiveStart+h,s),r);JA(a,r,s),l&&Lr(l,r);const d=Rd(r,a,s.directiveStart+s.componentOffset,s);if(n[R]=r[R]=d,null!==o)for(const h of o)h(d,e);return uw(a,s,n),d}(Y,W,Z,F,I,[lH]),bw(D,I,null)}finally{sx()}return new tH(this.componentType,z,Fh(U,I),I,U)}}class tH extends H5{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Q4(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;yw(o[Ye],o,r,e,t),this.previousInputValues.set(e,t),sm(Uo(this._tNode.index,o))}}get injector(){return new Jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function lH(){const n=Er();M_(De()[Ye],n)}function ln(n){let e=function mI(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Bs(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ge(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=dv(n.inputs),s.inputTransforms=dv(n.inputTransforms),s.declaredInputs=dv(n.declaredInputs),s.outputs=dv(n.outputs);const a=r.hostBindings;a&&hH(n,a);const l=r.viewQuery,d=r.contentQueries;if(l&&dH(n,l),d&&uH(n,d),ss(n.inputs,r.inputs),ss(n.declaredInputs,r.declaredInputs),ss(n.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),ss(s.inputTransforms,r.inputTransforms)),Bs(r)&&r.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===ln&&(t=!1)}}e=Object.getPrototypeOf(e)}!function cH(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=ya(r.hostAttrs,t=ya(t,r.hostAttrs))}}(i)}function dv(n){return n===vo?{}:n===an?[]:n}function dH(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function uH(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function hH(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function uv(n){return!!xw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function xw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Or(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ci(n,e,t,i){const r=De();return Or(r,gh(),e)&&(Tn(),Da(Di(),r,n,e,t,i)),Ci}function Hh(n,e,t,i,r,o){const a=function Bd(n,e,t,i){const r=Or(n,e,t);return Or(n,e+1,i)||r}(n,function fl(){return Vt.lFrame.bindingIndex}(),t,r);return pl(2),a?e+Nt(t)+i+Nt(r)+o:Yt}function Ht(n,e,t,i,r,o,s,a){const l=De(),d=Tn(),h=n+mn,f=d.firstCreatePass?function NH(n,e,t,i,r,o,s,a,l){const d=e.consts,h=Uh(e,n,4,s||null,gc(d,a));mw(e,t,h,gc(d,l)),M_(e,h);const f=h.tView=pw(2,h,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,h),f.queries=e.queries.embeddedTView(h)),h}(h,d,l,e,t,i,r,o,s):d.data[h];Ea(f,!1);const p=RI(d,l,f,n);w_()&&H_(d,l,p,f),Lr(p,l),av(l,l[h]=tI(p,l,p,f)),__(f)&&hw(d,l,f),null!=s&&fw(l,f,a)}let RI=function LI(n,e,t,i){return _c(!0),e[J].createComment("")};function gv(n){return function ph(n,e){return n[e]}(function bz(){return Vt.lFrame.contextLView}(),mn+n)}function se(n,e,t){const i=De();return Or(i,gh(),e)&&Go(Tn(),Di(),i,n,e,i[J],t,!1),se}function Tw(n,e,t,i,r){const s=r?"class":"style";yw(n,t,e.inputs[s],s,i)}function B(n,e,t,i){const r=De(),o=Tn(),s=mn+n,a=r[J],l=o.firstCreatePass?function VH(n,e,t,i,r,o){const s=e.consts,l=Uh(e,n,2,i,gc(s,r));return mw(e,t,l,gc(s,o)),null!==l.attrs&&lv(l,l.attrs,!1),null!==l.mergedAttrs&&lv(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,r,e,t,i):o.data[s],d=OI(o,r,l,a,e,n);r[s]=d;const h=__(l);return Ea(l,!0),Y1(a,d,l),32!=(32&l.flags)&&w_()&&H_(o,r,d,l),0===function hz(){return Vt.lFrame.elementDepthCount}()&&Lr(d,r),function fz(){Vt.lFrame.elementDepthCount++}(),h&&(hw(o,r,l),uw(o,l,r)),null!==i&&fw(r,l),B}function H(){let n=Er();ex()?tx():(n=n.parent,Ea(n,!1));const e=n;(function mz(n){return Vt.skipHydrationRootTNode===n})(e)&&function yz(){Vt.skipHydrationRootTNode=null}(),function pz(){Vt.lFrame.elementDepthCount--}();const t=Tn();return t.firstCreatePass&&(M_(t,n),W0(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Rz(n){return 0!=(8&n.flags)}(e)&&Tw(t,e,De(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Lz(n){return 0!=(16&n.flags)}(e)&&Tw(t,e,De(),e.stylesWithoutHost,!1),H}function ai(n,e,t,i){return B(n,e,t,i),H(),ai}let OI=(n,e,t,i,r,o)=>(_c(!0),U_(i,r,function KD(){return Vt.lFrame.currentNamespace}()));function zs(n,e,t){const i=De(),r=Tn(),o=n+mn,s=r.firstCreatePass?function jH(n,e,t,i,r){const o=e.consts,s=gc(o,i),a=Uh(e,n,8,"ng-container",s);return null!==s&&lv(a,s,!0),mw(e,t,a,gc(o,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,r,i,e,t):r.data[o];Ea(s,!0);const a=kI(r,i,s,n);return i[o]=a,w_()&&H_(r,i,a,s),Lr(a,i),__(s)&&(hw(r,i,s),uw(r,s,i)),null!=t&&fw(i,s),zs}function Vs(){let n=Er();const e=Tn();return ex()?tx():(n=n.parent,Ea(n,!1)),e.firstCreatePass&&(M_(e,n),W0(n)&&e.queries.elementEnd(n)),Vs}function gm(n,e,t){return zs(n,e,t),Vs(),gm}let kI=(n,e,t,i)=>(_c(!0),Ex(e[J],""));function rr(){return De()}function _m(n){return!!n&&"function"==typeof n.then}function FI(n){return!!n&&"function"==typeof n.subscribe}function Re(n,e,t,i){const r=De(),o=Tn(),s=Er();return function BI(n,e,t,i,r,o,s){const a=__(i),d=n.firstCreatePass&&rI(n),h=e[R],f=iI(e);let p=!0;if(3&i.type||s){const w=xo(i,e),x=s?s(w):w,y=f.length,E=s?I=>s(si(I[i.index])):i.index;let D=null;if(!s&&a&&(D=function qH(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[S],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=o,D.__ngLastListenerFn__=o,p=!1;else{o=zI(i,e,h,o,!1);const I=t.listen(x,r,o);f.push(o,I),d&&d.push(r,E,y,y+1)}}else o=zI(i,e,h,o,!1);const g=i.outputs;let v;if(p&&null!==g&&(v=g[r])){const w=v.length;if(w)for(let x=0;x<w;x+=2){const z=e[v[x]][v[x+1]].subscribe(o),U=f.length;f.push(o,z),d&&d.push(r,i.index,U,-(U+1))}}}(o,r,r[J],s,n,e,i),Re}function UI(n,e,t,i){try{return Ca(6,e,t),!1!==t(i)}catch(r){return sI(n,r),!1}finally{Ca(7,e,t)}}function zI(n,e,t,i,r){return function o(s){if(s===Function)return i;sm(n.componentOffset>-1?Uo(n.index,e):e);let l=UI(e,t,i,s),d=o.__ngNextListenerFn__;for(;d;)l=UI(e,t,d,s)&&l,d=d.__ngNextListenerFn__;return r&&!1===l&&s.preventDefault(),l}}function ke(n=1){return function Ez(n){return(Vt.lFrame.contextLView=function Sz(n,e){for(;n>0;)e=e[T],n--;return e}(n,Vt.lFrame.contextLView))[R]}(n)}function ZH(n,e){let t=null;const i=function Fp(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?cl(n,o,!0):Np(i,o))return r}else t=r}return t}function vm(n){const e=De()[N][M];if(!e.projection){const i=e.projection=qp(n?n.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=n?ZH(o,n):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Ud(n,e=0,t){const i=De(),r=Tn(),o=Uh(r,mn+n,16,null,t||null);null===o.projection&&(o.projection=e),tx(),(!i[Xr]||mh())&&32!=(32&o.flags)&&function HV(n,e,t){Z1(e[J],0,e,t,Dx(n,t,e),H1(t.parent||e[M],t,e))}(r,i,o)}function _v(n,e){return n<<17|e<<2}function bc(n){return n>>17&32767}function Aw(n){return 2|n}function zd(n){return(131068&n)>>2}function Iw(n,e){return-131069&n|e<<2}function Pw(n){return 1|n}function YI(n,e,t,i,r){const o=n[t+1],s=null===e;let a=i?bc(o):zd(o),l=!1;for(;0!==a&&(!1===l||s);){const h=n[a+1];e8(n[a],e)&&(l=!0,n[a+1]=i?Pw(h):Aw(h)),a=i?bc(h):zd(h)}l&&(n[t+1]=i?Aw(o):Pw(o))}function e8(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Eh(n,e)>=0}function ym(n,e,t){return Hs(n,e,t,!1),ym}function eo(n,e){return Hs(n,e,null,!0),eo}function Hs(n,e,t,i){const r=De(),o=Tn(),s=pl(2);o.firstUpdatePass&&function rP(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[Qr()],s=function iP(n,e){return e>=n.expandoStartIndex}(n,t);(function lP(n,e){return 0!=(n.flags&(e?8:16))})(o,i)&&null===e&&!s&&(e=!1),e=function d8(n,e,t,i){const r=function ix(n){const e=Vt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=bm(t=Rw(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=Rw(r,n,e,t,i),null===o){let l=function u8(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==zd(i))return n[bc(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=Rw(null,n,e,l[1],i),l=bm(l,e.attrs,i),function h8(n,e,t,i){n[bc(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else o=function f8(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=bm(i,n[o].hostAttrs,t);return bm(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function QH(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=bc(s),l=zd(s);n[i]=t;let h,d=!1;if(Array.isArray(t)?(h=t[1],(null===h||Eh(t,h)>0)&&(d=!0)):h=t,r)if(0!==l){const p=bc(n[a+1]);n[i+1]=_v(p,a),0!==p&&(n[p+1]=Iw(n[p+1],i)),n[a+1]=function YH(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=_v(a,0),0!==a&&(n[a+1]=Iw(n[a+1],i)),a=i;else n[i+1]=_v(l,0),0===a?a=i:n[l+1]=Iw(n[l+1],i),l=i;d&&(n[i+1]=Aw(n[i+1])),YI(n,h,i,!0),YI(n,h,i,!1),function JH(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Eh(o,e)>=0&&(t[i+1]=Pw(t[i+1]))}(e,h,n,i,o),s=_v(a,l),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}(o,n,s,i),e!==Yt&&Or(r,s,e)&&function sP(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const l=n.data,d=l[a+1],h=function KH(n){return 1==(1&n)}(d)?aP(l,e,t,r,zd(d),s):void 0;vv(h)||(vv(o)||function XH(n){return 2==(2&n)}(d)&&(o=aP(l,null,t,r,a,s)),function jV(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:vc.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=vc.Important),n.setStyle(t,i,r,o))}}(i,s,b_(Qr(),t),r,o))}(o,o.data[Qr()],r,r[J],n,r[s+1]=function _8(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Qn(Vo(n)))),n}(e,t),i,s)}function Rw(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=bm(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function bm(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),zo(n,s,!!t||e[++o]))}return void 0===n?null:n}function aP(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const l=n[r],d=Array.isArray(l),h=d?l[1]:l,f=null===h;let p=t[r+1];p===Yt&&(p=f?an:void 0);let g=f?mx(p,i):h===i?p:void 0;if(d&&!vv(g)&&(g=mx(l,i)),vv(g)&&(a=g,s))return a;const v=n[r+1];r=s?bc(v):zd(v)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=mx(l,i))}return a}function vv(n){return void 0!==n}function K(n,e=""){const t=De(),i=Tn(),r=n+mn,o=i.firstCreatePass?Uh(i,r,1,e,null):i.data[r],s=cP(i,t,o,e,n);t[r]=s,w_()&&H_(i,t,s,o),Ea(o,!1)}let cP=(n,e,t,i,r)=>(_c(!0),function B_(n,e){return n.createText(e)}(e[J],i));function sr(n){return _r("",n,""),sr}function _r(n,e,t){const i=De(),r=function Vh(n,e,t,i){return Or(n,gh(),t)?e+Nt(t)+i:Yt}(i,n,e,t);return r!==Yt&&vl(i,Qr(),r),_r}function xc(n,e,t,i,r){const o=De(),s=Hh(o,n,e,t,i,r);return s!==Yt&&vl(o,Qr(),s),xc}function xm(n,e,t){const i=De();return Or(i,gh(),e)&&Go(Tn(),Di(),i,n,e,i[J],t,!0),xm}const Kh="en-US";let AP=Kh;function kw(n,e,t,i,r){if(n=It(n),Array.isArray(n))for(let o=0;o<n.length;o++)kw(n[o],e,t,i,r);else{const o=Tn(),s=De(),a=Er();let l=Fd(n)?n:It(n.provide);const d=gA(n),h=1048575&a.providerIndexes,f=a.directiveStart,p=a.providerIndexes>>20;if(Fd(n)||!n.multi){const g=new Hp(d,r,oe),v=Nw(l,e,r?h:h+p,f);-1===v?(hx(T_(a,s),o,l),Fw(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[v]=g,s[v]=g)}else{const g=Nw(l,e,h+p,f),v=Nw(l,e,h,h+p),x=v>=0&&t[v];if(r&&!x||!r&&!(g>=0&&t[g])){hx(T_(a,s),o,l);const y=function BG(n,e,t,i,r){const o=new Hp(n,t,oe);return o.multi=[],o.index=e,o.componentProviders=0,eR(o,r,i&&!t),o}(r?NG:FG,t.length,r,i,d);!r&&x&&(t[v].providerFactory=y),Fw(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(y),s.push(y)}else Fw(o,n,g>-1?g:v,eR(t[r?v:g],d,!r&&i));!r&&i&&x&&t[v].componentProviders++}}}function Fw(n,e,t,i){const r=Fd(e),o=function E5(n){return!!n.useClass}(e);if(r||o){const l=(o?It(e.useClass):e).prototype.ngOnDestroy;if(l){const d=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const h=d.indexOf(t);-1===h?d.push(t,[i,l]):d[h+1].push(i,l)}else d.push(t,l)}}}function eR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Nw(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function FG(n,e,t,i){return Bw(this.multi,[])}function NG(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Rd(t,t[Ye],this.providerFactory.index,i);o=a.slice(0,s),Bw(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Bw(r,o);return o}function Bw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ci(n,e=[]){return t=>{t.providersResolver=(i,r)=>function kG(n,e,t){const i=Tn();if(i.firstCreatePass){const r=Bs(n);kw(t,i.data,i.blueprint,r,!0),kw(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Hd{}class tR{}class Uw extends Hd{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fI(this);const r=mr(e);this._bootstrapComponents=_l(r.bootstrap),this._r3Injector=TA(e,t,[{provide:Hd,useValue:this},{provide:kh,useValue:this.componentFactoryResolver},...i],Qn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zw extends tR{constructor(e){super(),this.moduleType=e}create(e){return new Uw(this.moduleType,e,[])}}class nR extends Hd{constructor(e){super(),this.componentFactoryResolver=new fI(this),this.instance=null;const t=new Ph([...e.providers,{provide:Hd,useValue:this},{provide:kh,useValue:this.componentFactoryResolver}],e.parent||Y_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Vw(n,e,t=null){return new nR({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let VG=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=hA(0,t.type),r=i.length>0?Vw([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Be({token:n,providedIn:"environment",factory:()=>new n(he(Ho))})}}return n})();function iR(n){n.getStandaloneInjector=e=>e.get(VG).getOrCreateStandaloneInjector(n)}function f6(){return this._results[Symbol.iterator]()}class Am{get changes(){return this._changes||(this._changes=new ei)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Am.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=f6)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function ms(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function qz(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function m6(n,e,t,i=!0){const r=e[Ye];if(function FV(n,e,t,i){const r=Yi+i,o=t.length;i>0&&(t[r-1][u]=e),i<o-Yi?(e[u]=t[r],f1(t,Yi+i,e)):(t.push(e),e[u]=null),e[c]=t;const s=e[ce];null!==s&&t!==s&&function NV(n,e){const t=n[pc];e[N]!==e[c][c][N]&&(n[Dd]=!0),null===t?n[pc]=[e]:t.push(e)}(s,e);const a=e[pt];null!==a&&a.insertView(n),e[ct]|=128}(r,e,n,t),i){const o=Ix(t,n),s=e[J],a=V_(s,n[fs]);null!==a&&function LV(n,e,t,i,r,o){i[Mn]=r,i[M]=e,Jp(n,i,t,1,r,o)}(r,n[M],s,e,a,o)}}let Ra=(()=>{class n{static{this.__NG_ELEMENT_ID__=v6}}return n})();const g6=Ra,_6=class extends g6{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function p6(n,e,t,i){const r=e.tView,a=sv(n,r,t,4096&n[ct]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[ce]=n[e.index];const d=n[pt];return null!==d&&(a[pt]=d.createEmbeddedView(r)),bw(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new dm(r)}};function v6(){return Mv(Er(),De())}function Mv(n,e){return 4&n.type?new _6(e,n,Fh(n,e)):null}let vs=(()=>{class n{static{this.__NG_ELEMENT_ID__=C6}}return n})();function C6(){return xR(Er(),De())}const E6=vs,yR=class extends E6{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Fh(this._hostTNode,this._hostLView)}get injector(){return new Jr(this._hostTNode,this._hostLView)}get parentInjector(){const e=D_(this._hostTNode,this._hostLView);if(cx(e)){const t=jp(e,this._hostLView),i=Gp(e);return new Jr(t[Ye].data[i+8],t)}return new Jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=bR(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Yi}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,o){const s=e&&!function $p(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const w=t||{};a=w.index,i=w.injector,r=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}const l=s?e:new um(tn(e)),d=i||this.parentInjector;if(!o&&null==l.ngModule){const x=(s?d:this.parentInjector).get(Ho,null);x&&(o=x)}tn(l.componentType??{});const g=l.create(d,r,null,o);return this.insertImpl(g.hostView,a,false),g}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function cz(n){return Yr(n[c])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const d=r[c],h=new yR(d,d[M],d[c]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return m6(a,r,s,!i),e.attachToViewContainerRef(),f1(Gw(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=bR(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=z_(this._lContainer,t);i&&(I_(Gw(this._lContainer),t),Sx(i[Ye],i))}detach(e){const t=this._adjustIndex(e,-1),i=z_(this._lContainer,t);return i&&null!=I_(Gw(this._lContainer),t)?new dm(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function bR(n){return n[8]}function Gw(n){return n[8]||(n[8]=[])}function xR(n,e){let t;const i=e[n.index];return Yr(i)?t=i:(t=tI(i,e,null,n),e[n.index]=t,av(e,t)),wR(t,e,n,i),new yR(t,n,e)}let wR=function MR(n,e,t,i){if(n[fs])return;let r;r=8&t.type?si(i):function S6(n,e){const t=n[J],i=t.createComment(""),r=xo(e,n);return Od(t,V_(t,r),i,function VV(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[fs]=r};class jw{constructor(e){this.queryList=e,this.matches=null}clone(){return new jw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ww{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new Ww(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==AR(e,t).matches&&this.queries[t].setDirty()}}class CR{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class $w{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new $w(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class qw{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new qw(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,A6(t,o)),this.matchTNodeWithReadOption(e,t,A_(t,e,o,!1,!1))}else i===Ra?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,A_(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Zn||r===vs||r===Ra&&4&t.type)this.addMatch(t.index,-2);else{const o=A_(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function A6(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function P6(n,e,t,i){return-1===t?function I6(n,e){return 11&n.type?Fh(n,e):4&n.type?Mv(n,e):null}(e,n):-2===t?function R6(n,e,t){return t===Zn?Fh(e,n):t===Ra?Mv(e,n):t===vs?xR(e,n):void 0}(n,e,i):Rd(n,n[Ye],t,e)}function ER(n,e,t,i){const r=e[pt].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const d=s[l];a.push(d<0?null:P6(e,o[d],s[l+1],t.metadata.read))}r.matches=a}return r.matches}function Zw(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=ER(n,e,r,t);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const d=o[a+1],h=e[-l];for(let f=Yi;f<h.length;f++){const p=h[f];p[ce]===p[c]&&Zw(p[Ye],p,d,i)}if(null!==h[pc]){const f=h[pc];for(let p=0;p<f.length;p++){const g=f[p];Zw(g[Ye],g,d,i)}}}}}return i}function Gd(n){const e=De(),t=Tn(),i=jD();rx(i+1);const r=AR(t,i);if(n.dirty&&function az(n){return 4==(4&n[ct])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?Zw(t,e,i,[]):ER(t,e,r,i);n.reset(o,$5),n.notifyOnChanges()}return!0}return!1}function Qh(n,e,t){const i=Tn();i.firstCreatePass&&(function DR(n,e,t){null===n.queries&&(n.queries=new $w),n.queries.track(new qw(e,t))}(i,new CR(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function TR(n,e,t){const i=new Am(4==(4&t));(function T4(n,e,t,i){const r=iI(e);r.push(t),n.firstCreatePass&&rI(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[pt]&&(e[pt]=new Ww),e[pt].queries.push(new jw(i))}(i,De(),e)}function jd(){return function L6(n,e){return n[pt].queries[e].queryList}(De(),jD())}function AR(n,e){return n.queries.getByIndex(e)}function Xw(n,e){return Mv(n,e)}const tM=new Se("Application Initializer");let nM=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=He(tM,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(_m(o))t.push(o);else if(FI(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$R=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const La=new Se("LocaleId",{providedIn:"root",factory:()=>He(La,zt.Optional|zt.SkipSelf)||function tj(){return typeof $localize<"u"&&$localize.locale||Kh}()});let Sv=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Li(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class rj{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let qR=(()=>{class n{compileModuleSync(t){return new zw(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),o=_l(mr(t).declarations).reduce((s,a)=>{const l=tn(a);return l&&s.push(new um(l)),s},[]);return new rj(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const KR=new Se(""),Dv=new Se("");let aM,oM=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,aM||(function Sj(n){aM=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static{this.\u0275fac=function(i){return new(i||n)(he(qt),he(sM),he(Dv))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})(),sM=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return aM?.findTestabilityInTree(this,t,i)??null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),wc=null;const QR=new Se("AllowMultipleToken"),lM=new Se("PlatformDestroyListeners"),cM=new Se("appBootstrapListener");class eL{constructor(e,t){this.name=e,this.token=t}}function nL(n,e,t=[]){const i=`Platform: ${e}`,r=new Se(i);return(o=[])=>{let s=dM();if(!s||s.injector.get(QR,!1)){const a=[...t,...o,{provide:r,useValue:!0}];n?n(a):function Aj(n){if(wc&&!wc.get(QR,!1))throw new ge(400,!1);(function JR(){!function ZU(n){MD=n}(()=>{throw new ge(600,!1)})})(),wc=n;const e=n.get(rL);(function tL(n){n.get(_A,null)?.forEach(t=>t())})(n)}(function iL(n=[],e){return Ki.create({name:e,providers:[{provide:Hx,useValue:"platform"},{provide:lM,useValue:new Set([()=>wc=null])},...n]})}(a,i))}return function Pj(n){const e=dM();if(!e)throw new ge(401,!1);return e}()}}function dM(){return wc?.get(rL)??null}let rL=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function Rj(n="zone.js",e){return"noop"===n?new c4:"zone.js"===n?new qt(e):n}(i?.ngZone,function oL(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function zG(n,e,t){return new Uw(n,e,t)}(t.moduleType,this.injector,function dL(n){return[{provide:qt,useFactory:n},{provide:nm,multi:!0,useFactory:()=>{const e=He(Oj,{optional:!0});return()=>e.initialize()}},{provide:cL,useFactory:Lj},{provide:RA,useFactory:LA}]}(()=>r)),s=o.injector.get(gs,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{s.handleError(l)}});o.onDestroy(()=>{Av(this._modules,o),a.unsubscribe()})}),function sL(n,e,t){try{const i=t();return _m(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(s,r,()=>{const a=o.injector.get(nM);return a.runInitializers(),a.donePromise.then(()=>(function IP(n){xr(n,"Expected localeId to be defined"),"string"==typeof n&&(AP=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(La,Kh)||Kh),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=aL({},i);return function Tj(n,e,t){const i=new zw(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(Mc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ge(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(lM,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||n)(he(Ki))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function aL(n,e){return Array.isArray(e)?e.reduce(aL,n):{...n,...e}}let Mc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=He(cL),this.zoneIsStable=He(RA),this.componentTypes=[],this.components=[],this.isStable=He(Sv).hasPendingTasks.pipe(zi(t=>t?ut(!1):this.zoneIsStable),os(),Ui()),this._injector=He(Ho)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof xA;if(!this._injector.get(nM).done)throw!r&&function Ma(n){const e=tn(n)||Oi(n)||Ti(n);return null!==e&&e.standalone}(t),new ge(405,!1);let s;s=r?t:this._injector.get(kh).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function Dj(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Hd),d=s.create(Ki.NULL,[],i||s.selector,a),h=d.location.nativeElement,f=d.injector.get(KR,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),Av(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Av(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(cM,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Av(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ge(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Av(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const cL=new Se("",{providedIn:"root",factory:()=>He(gs).handleError.bind(void 0)});function Lj(){const n=He(qt),e=He(gs);return t=>n.runOutsideAngular(()=>e.handleError(t))}let Oj=(()=>{class n{constructor(){this.zone=He(qt),this.applicationRef=He(Mc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let Rm=(()=>{class n{static{this.__NG_ELEMENT_ID__=Fj}}return n})();function Fj(n){return function Nj(n,e,t){if(Ad(n)&&!t){const i=Uo(n.index,e);return new dm(i,i)}return 47&n.type?new dm(e[N],e):null}(Er(),De(),16==(16&n))}class mL{constructor(){}supports(e){return uv(e)}create(e){return new Hj(e)}}const Vj=(n,e)=>e;class Hj{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Vj}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<_L(i,r,o)?t:i,a=_L(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const d=a-r,h=l-r;if(d!=h){for(let p=0;p<d;p++){const g=p<o.length?o[p]:o[p]=0,v=g+p;h<=v&&v<d&&(o[p]=g+1)}o[s.previousIndex]=h-d}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!uv(e))throw new ge(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function yH(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new Gj(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new gL),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gL),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Gj{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jj{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class gL{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new jj,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _L(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class vL{constructor(){}supports(e){return e instanceof Map||xw(e)}create(){return new Wj}}class Wj{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||xw(e)))throw new ge(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new $j(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class $j{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yL(){return new Rv([new mL])}let Rv=(()=>{class n{static{this.\u0275prov=Be({token:n,providedIn:"root",factory:yL})}constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||yL()),deps:[[n,new Zp,new Ld]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new ge(901,!1)}}return n})();function bL(){return new Lm([new vL])}let Lm=(()=>{class n{static{this.\u0275prov=Be({token:n,providedIn:"root",factory:bL})}constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||bL()),deps:[[n,new Zp,new Ld]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new ge(901,!1)}}return n})();const Xj=nL(null,"core",[]);let Yj=(()=>{class n{constructor(t){}static{this.\u0275fac=function(i){return new(i||n)(he(Mc))}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({})}}return n})();function tf(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let gM=null;function Cc(){return gM}class dW{}const un=new Se("DocumentToken");let _M=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return He(hW)},providedIn:"platform"})}}return n})();const uW=new Se("Location Initialized");let hW=(()=>{class n extends _M{constructor(){super(),this._doc=He(un),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cc().getBaseHref(this._doc)}onPopState(t){const i=Cc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Cc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function vM(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function AL(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function yl(n){return n&&"?"!==n[0]?"?"+n:n}let $d=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return He(PL)},providedIn:"root"})}}return n})();const IL=new Se("appBaseHref");let PL=(()=>{class n extends $d{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??He(un).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return vM(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+yl(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+yl(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+yl(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(he(_M),he(IL,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fW=(()=>{class n extends $d{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=vM(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+yl(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+yl(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(he(_M),he(IL,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})(),Om=(()=>{class n{constructor(t){this._subject=new ei,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function gW(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(AL(RL(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+yl(i))}normalize(t){return n.stripTrailingSlash(function mW(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,RL(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yl(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=yl}static{this.joinWithSlash=vM}static{this.stripTrailingSlash=AL}static{this.\u0275fac=function(i){return new(i||n)(he($d))}}static{this.\u0275prov=Be({token:n,factory:function(){return function pW(){return new Om(he($d))}()},providedIn:"root"})}}return n})();function RL(n){return n.replace(/\/index.html$/,"")}function VL(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}const DM=/\s+/,HL=[];let GL=(()=>{class n{constructor(t,i,r,o){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this.initialClasses=HL,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(DM):HL}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(DM):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(DM).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)(oe(Rv),oe(Lm),oe(Zn),oe(gl))}}static{this.\u0275dir=bt({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class t${constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Nm=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new t$(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),WL(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{WL(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(oe(vs),oe(Ra),oe(Rv))}}static{this.\u0275dir=bt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function WL(n,e){n.context.$implicit=e.item}let qd=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new n$,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$L("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$L("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(oe(vs),oe(Ra))}}static{this.\u0275dir=bt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class n${constructor(){this.$implicit=null,this.ngIf=null}}function $L(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Qn(e)}'.`)}let ZL=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=i.createEmbeddedView(r,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static{this.\u0275fac=function(i){return new(i||n)(oe(vs))}}static{this.\u0275dir=bt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Bo]})}}return n})(),rf=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({})}}return n})();const YL="browser";function KL(n){return"server"===n}let L$=(()=>{class n{static{this.\u0275prov=Be({token:n,providedIn:"root",factory:()=>new O$(he(un),window)})}}return n})();class O${constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function k$(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class QL{}class o7 extends dW{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class kM extends o7{static makeCurrent(){!function cW(n){gM||(gM=n)}(new kM)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function s7(){return Um=Um||document.querySelector("base"),Um?Um.getAttribute("href"):null}();return null==t?null:function a7(n){$v=$v||document.createElement("a"),$v.setAttribute("href",n);const e=$v.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Um=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return VL(document.cookie,e)}}let $v,Um=null,c7=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const FM=new Se("EventManagerPlugins");let iO=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new ge(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(he(FM),he(qt))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();class rO{constructor(e){this._doc=e}}const NM="ng-app-id";let oO=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=KL(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${NM}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(NM),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(NM,this.appId),s}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(he(un),he(K_),he($x,8),he(yc))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const BM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},UM=/%COMP%/g,f7=new Se("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function aO(n,e){return e.map(t=>t.replace(UM,n))}let zM=(()=>{class n{constructor(t,i,r,o,s,a,l,d=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=KL(a),this.defaultRenderer=new VM(t,s,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===oi.ShadowDom&&(i={...i,encapsulation:oi.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof cO?r.applyToHost(t):r instanceof HM&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case oi.Emulated:o=new cO(l,d,i,this.appId,h,s,a,f);break;case oi.ShadowDom:return new _7(l,d,t,i,s,a,this.nonce,f);default:o=new HM(l,d,i,h,s,a,f)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(he(iO),he(oO),he(K_),he(f7),he(un),he(yc),he(qt),he($x))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();class VM{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(BM[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(lO(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(lO(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new ge(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=BM[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=BM[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(vc.DashCase|vc.Important)?e.style.setProperty(t,i,r&vc.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&vc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Cc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function lO(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class _7 extends VM{constructor(e,t,i,r,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=aO(r.id,r.styles);for(const h of d){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class HM extends VM{constructor(e,t,i,r,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?aO(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class cO extends HM{constructor(e,t,i,r,o,s,a,l){const d=r+"-"+i.id;super(e,t,i,o,s,a,l,d),this.contentAttr=function p7(n){return"_ngcontent-%COMP%".replace(UM,n)}(d),this.hostAttr=function m7(n){return"_nghost-%COMP%".replace(UM,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let v7=(()=>{class n extends rO{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(he(un))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const dO=["alt","control","meta","shift"],y7={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},b7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let x7=(()=>{class n extends rO{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cc().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),dO.forEach(d=>{const h=i.indexOf(d);h>-1&&(i.splice(h,1),s+=d+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=y7[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),dO.forEach(s=>{s!==r&&(0,b7[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(he(un))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const E7=nL(Xj,"browser",[{provide:yc,useValue:YL},{provide:_A,useValue:function w7(){kM.makeCurrent()},multi:!0},{provide:un,useFactory:function C7(){return function XV(n){Lx=n}(document),document},deps:[]}]),S7=new Se(""),fO=[{provide:Dv,useClass:class l7{addToWindow(e){Ln.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new ge(5103,!1);return o},Ln.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ln.getAllAngularRootElements=()=>e.getAllRootElements(),Ln.frameworkStabilizers||(Ln.frameworkStabilizers=[]),Ln.frameworkStabilizers.push(i=>{const r=Ln.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Cc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:KR,useClass:oM,deps:[qt,sM,Dv]},{provide:oM,useClass:oM,deps:[qt,sM,Dv]}],pO=[{provide:Hx,useValue:"root"},{provide:gs,useFactory:function M7(){return new gs},deps:[]},{provide:FM,useClass:v7,multi:!0,deps:[un,qt,yc]},{provide:FM,useClass:x7,multi:!0,deps:[un]},zM,oO,iO,{provide:om,useExisting:zM},{provide:QL,useClass:c7,deps:[]},[]];let mO=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:K_,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(he(S7,12))}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({providers:[...pO,...fO],imports:[rf,Yj]})}}return n})(),gO=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(he(un))}}static{this.\u0275prov=Be({token:n,factory:function(i){let r=null;return r=i?new i:function D7(){return new gO(he(un))}(),r},providedIn:"root"})}}return n})();typeof window<"u"&&window;let jM=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:function(i){let r=null;return r=i?new(i||n):he(yO),r},providedIn:"root"})}}return n})(),yO=(()=>{class n extends jM{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Sr.NONE:return i;case Sr.HTML:return Ta(i,"HTML")?Vo(i):sA(this._doc,String(i)).toString();case Sr.STYLE:return Ta(i,"Style")?Vo(i):i;case Sr.SCRIPT:if(Ta(i,"Script"))return Vo(i);throw new ge(5200,!1);case Sr.URL:return Ta(i,"URL")?Vo(i):$_(String(i));case Sr.RESOURCE_URL:if(Ta(i,"ResourceURL"))return Vo(i);throw new ge(5201,!1);default:throw new ge(5202,!1)}}bypassSecurityTrustHtml(t){return function n5(n){return new YV(n)}(t)}bypassSecurityTrustStyle(t){return function r5(n){return new KV(n)}(t)}bypassSecurityTrustScript(t){return function o5(n){return new QV(n)}(t)}bypassSecurityTrustUrl(t){return function s5(n){return new JV(n)}(t)}bypassSecurityTrustResourceUrl(t){return function a5(n){return new e5(n)}(t)}static{this.\u0275fac=function(i){return new(i||n)(he(un))}}static{this.\u0275prov=Be({token:n,factory:function(i){let r=null;return r=i?new i:function R7(n){return new yO(n.get(un))}(he(Ki)),r},providedIn:"root"})}}return n})();const{isArray:L7}=Array,{getPrototypeOf:O7,prototype:k7,keys:F7}=Object;function xO(n){if(1===n.length){const e=n[0];if(L7(e))return{args:e,keys:null};if(function N7(n){return n&&"object"==typeof n&&O7(n)===k7}(e)){const t=F7(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:B7}=Array;function WM(n){return $t(e=>function U7(n,e){return B7(e)?n(...e):n(e)}(n,e))}function wO(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function MO(...n){const e=fd(n),{args:t,keys:i}=xO(n),r=new Rn(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let l=s,d=s;for(let h=0;h<s;h++){let f=!1;$i(t[h]).subscribe(vn(o,p=>{f||(f=!0,d--),a[h]=p},()=>l--,void 0,()=>{(!l||!f)&&(d||o.next(i?wO(i,a):a),o.complete())}))}});return e?r.pipe(WM(e)):r}let CO=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(oe(gl),oe(Zn))}}static{this.\u0275dir=bt({type:n})}}return n})(),Zd=(()=>{class n extends CO{static{this.\u0275fac=function(){let t;return function(r){return(t||(t=gr(n)))(r||n)}}()}static{this.\u0275dir=bt({type:n,features:[ln]})}}return n})();const $s=new Se("NgValueAccessor"),V7={provide:$s,useExisting:Cn(()=>sf),multi:!0},G7=new Se("CompositionEventMode");let sf=(()=>{class n extends CO{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function H7(){const n=Cc()?Cc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(oe(gl),oe(Zn),oe(G7,8))}}static{this.\u0275dir=bt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&Re("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[ci([V7]),ln]})}}return n})();function Sc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Tr=new Se("NgValidators"),Tc=new Se("NgAsyncValidators");function AO(n){return Sc(n.value)?{required:!0}:null}function qv(n){return null}function kO(n){return null!=n}function FO(n){return _m(n)?vt(n):n}function NO(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function BO(n,e){return e.map(t=>t(n))}function UO(n){return n.map(e=>function W7(n){return!n.validate}(e)?e:t=>e.validate(t))}function $M(n){return null!=n?function zO(n){if(!n)return null;const e=n.filter(kO);return 0==e.length?null:function(t){return NO(BO(t,e))}}(UO(n)):null}function qM(n){return null!=n?function VO(n){if(!n)return null;const e=n.filter(kO);return 0==e.length?null:function(t){return MO(BO(t,e).map(FO)).pipe($t(NO))}}(UO(n)):null}function HO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ZM(n){return n?Array.isArray(n)?n:[n]:[]}function Zv(n,e){return Array.isArray(n)?n.includes(e):n===e}function WO(n,e){const t=ZM(e);return ZM(n).forEach(r=>{Zv(t,r)||t.push(r)}),t}function $O(n,e){return ZM(e).filter(t=>!Zv(n,t))}class qO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$M(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ro extends qO{get formDirective(){return null}get path(){return null}}class Dc extends qO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ZO{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let af=(()=>{class n extends ZO{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(oe(Dc,2))}}static{this.\u0275dir=bt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&eo("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ln]})}}return n})(),XO=(()=>{class n extends ZO{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(oe(ro,10))}}static{this.\u0275dir=bt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&eo("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[ln]})}}return n})();const zm="VALID",Yv="INVALID",lf="PENDING",Vm="DISABLED";function KM(n){return(Kv(n)?n.validators:n)||null}function QM(n,e){return(Kv(e)?e.asyncValidators:n)||null}function Kv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class JM{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===zm}get invalid(){return this.status===Yv}get pending(){return this.status==lf}get disabled(){return this.status===Vm}get enabled(){return this.status!==Vm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(WO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(WO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($O(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($O(e,this._rawAsyncValidators))}hasValidator(e){return Zv(this._rawValidators,e)}hasAsyncValidator(e){return Zv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=lf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Vm,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zm,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zm||this.status===lf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vm:zm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=lf,this._hasOwnPendingAsyncValidator=!0;const t=FO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ei,this.statusChanges=new ei}_calculateStatus(){return this._allControlsDisabled()?Vm:this.errors?Yv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lf)?lf:this._anyControlsHaveStatus(Yv)?Yv:zm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function X7(n){return Array.isArray(n)?$M(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Y7(n){return Array.isArray(n)?qM(n):n||null}(this._rawAsyncValidators)}}class eC extends JM{constructor(e,t,i){super(KM(t),QM(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function QO(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new ge(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function KO(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new ge(1e3,"");if(!i[t])throw new ge(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Xd=new Se("CallSetDisabledState",{providedIn:"root",factory:()=>Hm}),Hm="always";function Gm(n,e,t=Hm){tC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function J7(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&JO(n,e)})}(n,e),function t9(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function e9(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&JO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Q7(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ey(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function tC(n,e){const t=function GO(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(HO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function jO(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(HO(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();ey(e._rawValidators,r),ey(e._rawAsyncValidators,r)}function JO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const s9={provide:ro,useExisting:Cn(()=>ny)},jm=(()=>Promise.resolve())();let ny=(()=>{class n extends ro{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ei,this.form=new eC({},$M(t),qM(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){jm.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Gm(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){jm.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){jm.then(()=>{const i=this._findContainer(t.path),r=new eC({});(function e2(n,e){tC(n,e)})(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){jm.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){jm.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function t2(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||n)(oe(Tr,10),oe(Tc,10),oe(Xd,8))}}static{this.\u0275dir=bt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&Re("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ci([s9]),ln]})}}return n})();function n2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function r2(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const o2=class extends JM{constructor(e=null,t,i){super(KM(t),QM(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=r2(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){n2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){n2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){r2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},c9={provide:Dc,useExisting:Cn(()=>Yd)},l2=(()=>Promise.resolve())();let Yd=(()=>{class n extends Dc{constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new o2,this._registered=!1,this.name="",this.update=new ei,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function rC(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===sf?t=o:function r9(n){return Object.getPrototypeOf(n.constructor)===Zd}(o)?i=o:r=o}),r||i||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function iC(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Gm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){l2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&tf(i);l2.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Qv(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(oe(ro,9),oe(Tr,10),oe(Tc,10),oe($s,10),oe(Rm,8),oe(Xd,8))}}static{this.\u0275dir=bt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ci([c9]),ln,Bo]})}}return n})(),c2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=bt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const d9={provide:$s,useExisting:Cn(()=>iy),multi:!0};let iy=(()=>{class n extends Zd{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}static{this.\u0275fac=function(){let t;return function(r){return(t||(t=gr(n)))(r||n)}}()}static{this.\u0275dir=bt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){1&i&&Re("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[ci([d9]),ln]})}}return n})(),d2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({})}}return n})();const oC=new Se("NgModelWithFormControlWarning"),y9={provide:$s,useExisting:Cn(()=>Kd),multi:!0};function g2(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Kd=(()=>{class n extends Zd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=g2(this._getOptionId(t),t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function b9(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static{this.\u0275fac=function(){let t;return function(r){return(t||(t=gr(n)))(r||n)}}()}static{this.\u0275dir=bt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){1&i&&Re("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ci([y9]),ln]})}}return n})(),Wm=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(g2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(oe(Zn),oe(gl),oe(Kd,9))}}static{this.\u0275dir=bt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();const x9={provide:$s,useExisting:Cn(()=>cC),multi:!0};function _2(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let cC=(()=>{class n extends Zd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const r=[],o=i.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const d=this._getOptionValue(s[a].value);r.push(d)}}else{const s=i.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const d=this._getOptionValue(l.value);r.push(d)}}}this.value=r,t(r)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function w9(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static{this.\u0275fac=function(){let t;return function(r){return(t||(t=gr(n)))(r||n)}}()}static{this.\u0275dir=bt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){1&i&&Re("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ci([x9]),ln]})}}return n})(),$m=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(_2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(_2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(oe(Zn),oe(gl),oe(cC,9))}}static{this.\u0275dir=bt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function y2(n){return"number"==typeof n?n:parseFloat(n)}let Qd=(()=>{class n{constructor(){this._validator=qv}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):qv,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=bt({type:n,features:[Bo]})}}return n})();const M9={provide:Tr,useExisting:Cn(()=>ry),multi:!0};let ry=(()=>{class n extends Qd{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>y2(t),this.createValidator=t=>function DO(n){return e=>{if(Sc(e.value)||Sc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(t)}static{this.\u0275fac=function(){let t;return function(r){return(t||(t=gr(n)))(r||n)}}()}static{this.\u0275dir=bt({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){2&i&&Ci("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[ci([M9]),ln]})}}return n})();const C9={provide:Tr,useExisting:Cn(()=>oy),multi:!0};let oy=(()=>{class n extends Qd{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>y2(t),this.createValidator=t=>function TO(n){return e=>{if(Sc(e.value)||Sc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}static{this.\u0275fac=function(){let t;return function(r){return(t||(t=gr(n)))(r||n)}}()}static{this.\u0275dir=bt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){2&i&&Ci("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[ci([C9]),ln]})}}return n})();const E9={provide:Tr,useExisting:Cn(()=>cf),multi:!0};let cf=(()=>{class n extends Qd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=tf,this.createValidator=t=>AO}enabled(t){return t}static{this.\u0275fac=function(){let t;return function(r){return(t||(t=gr(n)))(r||n)}}()}static{this.\u0275dir=bt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){2&i&&Ci("required",r._enabled?"":null)},inputs:{required:"required"},features:[ci([E9]),ln]})}}return n})(),C2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[d2]})}}return n})(),R9=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Xd,useValue:t.callSetDisabledState??Hm}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[C2]})}}return n})(),L9=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:oC,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Xd,useValue:t.callSetDisabledState??Hm}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[C2]})}}return n})();function df(n,e){return kt(e)?yi(n,e,1):yi(n,1)}function Dr(n,e){return Sn((t,i)=>{let r=0;t.subscribe(vn(i,o=>n.call(e,o,r++)&&i.next(o)))})}function uf(n){return Sn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class sy{}class ay{}class Oa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Oa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Oa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Oa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class O9{encodeKey(e){return E2(e)}encodeValue(e){return E2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const F9=/%(\d[a-f0-9])/gi,N9={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function E2(n){return encodeURIComponent(n).replace(F9,(e,t)=>N9[t]??e)}function ly(n){return`${n}`}class Ac{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new O9,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function k9(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(ly):[ly(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ac({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ly(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(ly(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class B9{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function S2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function T2(n){return typeof Blob<"u"&&n instanceof Blob}function D2(n){return typeof FormData<"u"&&n instanceof FormData}class qm{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function U9(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Oa),this.context||(this.context=new B9),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Ac,this.urlWithParams=t}serializeBody(){return null===this.body?null:S2(this.body)||T2(this.body)||D2(this.body)||function z9(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ac?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||D2(this.body)?null:T2(this.body)?this.body.type||null:S2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ac?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,d=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),d)),new qm(t,i,o,{params:d,headers:l,context:h,reportProgress:a,responseType:r,withCredentials:s})}}var hf=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(hf||{});class uC{constructor(e,t=200,i="OK"){this.headers=e.headers||new Oa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class hC extends uC{constructor(e={}){super(e),this.type=hf.ResponseHeader}clone(e={}){return new hC({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ff extends uC{constructor(e={}){super(e),this.type=hf.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ff({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class A2 extends uC{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function fC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Jd=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof qm)o=t;else{let l,d;l=r.headers instanceof Oa?r.headers:new Oa(r.headers),r.params&&(d=r.params instanceof Ac?r.params:new Ac({fromObject:r.params})),o=new qm(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=ut(o).pipe(df(l=>this.handler.handle(l)));if(t instanceof qm||"events"===r.observe)return s;const a=s.pipe(Dr(l=>l instanceof ff));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe($t(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe($t(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe($t(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe($t(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Ac).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,fC(r,i))}post(t,i,r={}){return this.request("POST",t,fC(r,i))}put(t,i,r={}){return this.request("PUT",t,fC(r,i))}static{this.\u0275fac=function(i){return new(i||n)(he(sy))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();function R2(n,e){return e(n)}function H9(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const j9=new Se(""),Zm=new Se(""),L2=new Se("");function W9(){let n=null;return(e,t)=>{null===n&&(n=(He(j9,{optional:!0})??[]).reduceRight(H9,R2));const i=He(Sv),r=i.add();return n(e,t).pipe(uf(()=>i.remove(r)))}}let O2=(()=>{class n extends sy{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=He(Sv)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Zm),...this.injector.get(L2,[])]));this.chain=r.reduceRight((o,s)=>function G9(n,e,t){return(i,r)=>t.runInContext(()=>e(i,o=>n(o,r)))}(o,s,this.injector),R2)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(uf(()=>this.pendingTasks.remove(i)))}static{this.\u0275fac=function(i){return new(i||n)(he(ay),he(Ho))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const X9=/^\)\]\}',?\n/;let F2=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new ge(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?vt(i.\u0275loadImpl()):ut(null)).pipe(zi(()=>new Rn(o=>{const s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((w,x)=>s.setRequestHeader(w,x.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const w=t.detectContentTypeHeader();null!==w&&s.setRequestHeader("Content-Type",w)}if(t.responseType){const w=t.responseType.toLowerCase();s.responseType="json"!==w?w:"text"}const a=t.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const w=s.statusText||"OK",x=new Oa(s.getAllResponseHeaders()),y=function Y9(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return l=new hC({headers:x,status:s.status,statusText:w,url:y}),l},h=()=>{let{headers:w,status:x,statusText:y,url:E}=d(),D=null;204!==x&&(D=typeof s.response>"u"?s.responseText:s.response),0===x&&(x=D?200:0);let I=x>=200&&x<300;if("json"===t.responseType&&"string"==typeof D){const z=D;D=D.replace(X9,"");try{D=""!==D?JSON.parse(D):null}catch(U){D=z,I&&(I=!1,D={error:U,text:D})}}I?(o.next(new ff({body:D,headers:w,status:x,statusText:y,url:E||void 0})),o.complete()):o.error(new A2({error:D,headers:w,status:x,statusText:y,url:E||void 0}))},f=w=>{const{url:x}=d(),y=new A2({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:x||void 0});o.error(y)};let p=!1;const g=w=>{p||(o.next(d()),p=!0);let x={type:hf.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(x.total=w.total),"text"===t.responseType&&s.responseText&&(x.partialText=s.responseText),o.next(x)},v=w=>{let x={type:hf.UploadProgress,loaded:w.loaded};w.lengthComputable&&(x.total=w.total),o.next(x)};return s.addEventListener("load",h),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",g),null!==a&&s.upload&&s.upload.addEventListener("progress",v)),s.send(a),o.next({type:hf.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",h),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",g),null!==a&&s.upload&&s.upload.removeEventListener("progress",v)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(he(QL))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const pC=new Se("XSRF_ENABLED"),N2=new Se("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),B2=new Se("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class U2{}let J9=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=VL(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(he(un),he(yc),he(N2))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();function eq(n,e){const t=n.url.toLowerCase();if(!He(pC)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=He(U2).getToken(),r=He(B2);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Ic=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ic||{});function eu(n,e){return{\u0275kind:n,\u0275providers:e}}function tq(...n){const e=[Jd,F2,O2,{provide:sy,useExisting:O2},{provide:ay,useExisting:F2},{provide:Zm,useValue:eq,multi:!0},{provide:pC,useValue:!0},{provide:U2,useClass:J9}];for(const t of n)e.push(...t.\u0275providers);return function Ux(n){return{\u0275providers:n}}(e)}const z2=new Se("LEGACY_INTERCEPTOR_FN");let iq=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({providers:[tq(eu(Ic.LegacyInterceptors,[{provide:z2,useFactory:W9},{provide:Zm,useExisting:z2,multi:!0}]))]})}}return n})();function dy(...n){const e=Ls(n),t=fd(n),{args:i,keys:r}=xO(n);if(0===i.length)return vt([],e);const o=new Rn(function dq(n,e,t=fi){return i=>{V2(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)V2(e,()=>{const d=vt(n[l],e);let h=!1;d.subscribe(vn(i,f=>{o[l]=f,h||(h=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,e,r?s=>wO(r,s):fi));return t?o.pipe(WM(t)):o}function V2(n,e,t){n?Hr(t,n,e):e()}const uy=C(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Xm(...n){return function uq(){return Oo(1)}()(vt(n,Ls(n)))}function hy(n){return new Rn(e=>{$i(n()).subscribe(e)})}function pf(n,e){const t=kt(n)?n:()=>n,i=r=>r.error(t());return new Rn(e?r=>e.schedule(i,0,r):i)}function mC(){return Sn((n,e)=>{let t=null;n._refCount++;const i=vn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class H2 extends Rn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,en(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Q;const t=this.getSubject();e.add(this.source.subscribe(vn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Q.EMPTY)}return e}refCount(){return mC()(this)}}function Wo(n){return n<=0?()=>bn:Sn((e,t)=>{let i=0;e.subscribe(vn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function fy(...n){const e=Ls(n);return Sn((t,i)=>{(e?Xm(n,t,e):Xm(n,t)).subscribe(i)})}function py(n){return Sn((e,t)=>{let i=!1;e.subscribe(vn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function G2(n=hq){return Sn((e,t)=>{let i=!1;e.subscribe(vn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function hq(){return new uy}function tu(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Dr((r,o)=>n(r,o,i)):fi,Wo(1),t?py(e):G2(()=>new uy))}function Ji(n,e,t){const i=kt(n)||e||t?{next:n,error:e,complete:t}:n;return i?Sn((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(vn(o,l=>{var d;null===(d=i.next)||void 0===d||d.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var d;a=!1,null===(d=i.error)||void 0===d||d.call(i,l),o.error(l)},()=>{var l,d;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(d=i.finalize)||void 0===d||d.call(i)}))}):fi}function Pc(n){return Sn((e,t)=>{let o,i=null,r=!1;i=e.subscribe(vn(t,void 0,void 0,s=>{o=$i(n(s,Pc(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function gC(n){return n<=0?()=>bn:Sn((e,t)=>{let i=[];e.subscribe(vn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Ym(n){return Sn((e,t)=>{$i(n).subscribe(vn(t,()=>t.complete(),Pr)),!t.closed&&e.subscribe(t)})}const rn="primary",Km=Symbol("RouteTitle");class _q{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function mf(n){return new _q(n)}function vq(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ka(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!j2(n[r],e[r]))return!1;return!0}function j2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function W2(n){return n.length>0?n[n.length-1]:null}function Rc(n){return function cq(n){return!!n&&(n instanceof Rn||kt(n.lift)&&kt(n.subscribe))}(n)?n:_m(n)?vt(Promise.resolve(n)):ut(n)}const bq={exact:function Z2(n,e,t){if(!nu(n.segments,e.segments)||!my(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!Z2(n.children[i],e.children[i],t))return!1;return!0},subset:X2},$2={exact:function xq(n,e){return ka(n,e)},subset:function wq(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>j2(n[t],e[t]))},ignored:()=>!0};function q2(n,e,t){return bq[t.paths](n.root,e.root,t.matrixParams)&&$2[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function X2(n,e,t){return Y2(n,e,e.segments,t)}function Y2(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!nu(r,t)||e.hasChildren()||!my(r,t,i))}if(n.segments.length===t.length){if(!nu(n.segments,t)||!my(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!X2(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(nu(n.segments,r)&&my(n.segments,r,i)&&n.children[rn])&&Y2(n.children[rn],e,o,i)}}function my(n,e,t){return e.every((i,r)=>$2[t](n[r].parameters,i.parameters))}class gf{constructor(e=new Gn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mf(this.queryParams)),this._queryParamMap}toString(){return Eq.serialize(this)}}class Gn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gy(this)}}class Qm{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=mf(this.parameters)),this._parameterMap}toString(){return J2(this)}}function nu(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Jm=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return new _C},providedIn:"root"})}}return n})();class _C{parse(e){const t=new Fq(e);return new gf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${eg(e.root,!0)}`,i=function Dq(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${_y(t)}=${_y(r)}`).join("&"):`${_y(t)}=${_y(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Sq(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Eq=new _C;function gy(n){return n.segments.map(e=>J2(e)).join("/")}function eg(n,e){if(!n.hasChildren())return gy(n);if(e){const t=n.children[rn]?eg(n.children[rn],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==rn&&i.push(`${r}:${eg(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Cq(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===rn&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==rn&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===rn?[eg(n.children[rn],!1)]:[`${r}:${eg(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[rn]?`${gy(n)}/${t[0]}`:`${gy(n)}/(${t.join("//")})`}}function K2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _y(n){return K2(n).replace(/%3B/gi,";")}function vC(n){return K2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vy(n){return decodeURIComponent(n)}function Q2(n){return vy(n.replace(/\+/g,"%20"))}function J2(n){return`${vC(n.path)}${function Tq(n){return Object.keys(n).map(e=>`;${vC(e)}=${vC(n[e])}`).join("")}(n.parameters)}`}const Aq=/^[^\/()?;#]+/;function yC(n){const e=n.match(Aq);return e?e[0]:""}const Iq=/^[^\/()?;=#]+/,Rq=/^[^=?&#]+/,Oq=/^[^&#]+/;class Fq{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gn([],{}):new Gn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[rn]=new Gn(e,t)),i}parseSegment(){const e=yC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ge(4009,!1);return this.capture(e),new Qm(vy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Pq(n){const e=n.match(Iq);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=yC(this.remaining);r&&(i=r,this.capture(i))}e[vy(t)]=vy(i)}parseQueryParam(e){const t=function Lq(n){const e=n.match(Rq);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function kq(n){const e=n.match(Oq);return e?e[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=Q2(t),o=Q2(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=yC(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new ge(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=rn);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[rn]:new Gn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ge(4011,!1)}}function ek(n){return n.segments.length>0?new Gn([],{[rn]:n}):n}function tk(n){const e={};for(const i of Object.keys(n.children)){const o=tk(n.children[i]);if(i===rn&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function Nq(n){if(1===n.numberOfChildren&&n.children[rn]){const e=n.children[rn];return new Gn(n.segments.concat(e.segments),e.children)}return n}(new Gn(n.segments,e))}function iu(n){return n instanceof gf}function nk(n){let e;const r=ek(function t(o){const s={};for(const l of o.children){const d=t(l);s[l.outlet]=d}const a=new Gn(o.url,s);return o===n&&(e=a),a}(n.root));return e??r}function ik(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return bC(r,r,r,t,i);const o=function Uq(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ok(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([l,d])=>{a[l]="string"==typeof d?d.split("/"):d}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new ok(t,e,i)}(e);if(o.toRoot())return bC(r,r,new Gn([],{}),t,i);const s=function zq(n,e,t){if(n.isAbsolute)return new by(e,!0,0);if(!t)return new by(e,!1,NaN);if(null===t.parent)return new by(t,!0,0);const i=yy(n.commands[0])?0:1;return function Vq(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ge(4005,!1);r=i.segments.length}return new by(i,!1,r-o)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(o,r,n),a=s.processChildren?ng(s.segmentGroup,s.index,o.commands):sk(s.segmentGroup,s.index,o.commands);return bC(r,s.segmentGroup,a,t,i)}function yy(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function tg(n){return"object"==typeof n&&null!=n&&n.outlets}function bC(n,e,t,i,r){let s,o={};i&&Object.entries(i).forEach(([l,d])=>{o[l]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`}),s=n===e?t:rk(n,e,t);const a=ek(tk(s));return new gf(a,o,r)}function rk(n,e,t){const i={};return Object.entries(n.children).forEach(([r,o])=>{i[r]=o===e?t:rk(o,e,t)}),new Gn(n.segments,i)}class ok{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&yy(i[0]))throw new ge(4003,!1);const r=i.find(tg);if(r&&r!==W2(i))throw new ge(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class by{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function sk(n,e,t){if(n||(n=new Gn([],{})),0===n.segments.length&&n.hasChildren())return ng(n,e,t);const i=function Gq(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const s=n.segments[r],a=t[i];if(tg(a))break;const l=`${a}`,d=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&d&&"object"==typeof d&&void 0===d.outlets){if(!lk(l,d,s))return o;i+=2}else{if(!lk(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new Gn(n.segments.slice(0,i.pathIndex),{});return o.children[rn]=new Gn(n.segments.slice(i.pathIndex),n.children),ng(o,0,r)}return i.match&&0===r.length?new Gn(n.segments,{}):i.match&&!n.hasChildren()?xC(n,e,t):i.match?ng(n,0,r):xC(n,e,t)}function ng(n,e,t){if(0===t.length)return new Gn(n.segments,{});{const i=function Hq(n){return tg(n[0])?n[0].outlets:{[rn]:n}}(t),r={};if(Object.keys(i).some(o=>o!==rn)&&n.children[rn]&&1===n.numberOfChildren&&0===n.children[rn].segments.length){const o=ng(n.children[rn],e,t);return new Gn(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=sk(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===i[o]&&(r[o]=s)}),new Gn(n.segments,r)}}function xC(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(tg(o)){const l=jq(o.outlets);return new Gn(i,l)}if(0===r&&yy(t[0])){i.push(new Qm(n.segments[e].path,ak(t[0]))),r++;continue}const s=tg(o)?o.outlets[rn]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&yy(a)?(i.push(new Qm(s,ak(a))),r+=2):(i.push(new Qm(s,{})),r++)}return new Gn(i,{})}function jq(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=xC(new Gn([],{}),0,i))}),e}function ak(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function lk(n,e,t){return n==t.path&&ka(e,t.parameters)}const ig="imperative";class Fa{constructor(e,t){this.id=e,this.url=t}}class xy extends Fa{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lc extends Fa{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rg extends Fa{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _f extends Fa{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class wy extends Fa{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ck extends Fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wq extends Fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $q extends Fa{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qq extends Fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zq extends Fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xq{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yq{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Kq{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qq{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jq{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eZ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dk{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class wC{}class MC{constructor(e){this.url=e}}class tZ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new og,this.attachRef=null}}let og=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new tZ,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class uk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=CC(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=CC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=EC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return EC(e,this._root).map(t=>t.value)}}function CC(n,e){if(n===e.value)return e;for(const t of e.children){const i=CC(n,t);if(i)return i}return null}function EC(n,e){if(n===e.value)return[e];for(const t of e.children){const i=EC(n,t);if(i.length)return i.unshift(e),i}return[]}class wl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class hk extends uk{constructor(e,t){super(e),this.snapshot=t,SC(this,e)}toString(){return this.snapshot.toString()}}function fk(n,e){const t=function nZ(n,e){const s=new My([],{},{},"",{},rn,e,null,{});return new mk("",new wl(s,[]))}(0,e),i=new Li([new Qm("",{})]),r=new Li({}),o=new Li({}),s=new Li({}),a=new Li(""),l=new yf(i,r,s,a,o,rn,e,t.root);return l.snapshot=t.root,new hk(new wl(l,[]),t)}class yf{constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe($t(d=>d[Km]))??ut(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe($t(e=>mf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe($t(e=>mf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pk(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function iZ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class My{get title(){return this.data?.[Km]}constructor(e,t,i,r,o,s,a,l,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mk extends uk{constructor(e,t){super(t),this.url=e,SC(this,t)}toString(){return gk(this._root)}}function SC(n,e){e.value._routerState=n,e.children.forEach(t=>SC(n,t))}function gk(n){const e=n.children.length>0?` { ${n.children.map(gk).join(", ")} } `:"";return`${n.value}${e}`}function TC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ka(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ka(e.params,t.params)||n.paramsSubject.next(t.params),function yq(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ka(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ka(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function DC(n,e){const t=ka(n.params,e.params)&&function Mq(n,e){return nu(n,e)&&n.every((t,i)=>ka(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||DC(n.parent,e.parent))}let AC=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=rn,this.activateEvents=new ei,this.deactivateEvents=new ei,this.attachEvents=new ei,this.detachEvents=new ei,this.parentContexts=He(og),this.location=He(vs),this.changeDetector=He(Rm),this.environmentInjector=He(Ho),this.inputBinder=He(Cy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ge(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ge(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ge(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ge(4013,!1);this._activatedRoute=t;const r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new rZ(t,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=bt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bo]})}}return n})();class rZ{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===yf?this.route:e===og?this.childContexts:this.parent.get(e,t)}}const Cy=new Se("");let _k=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=dy([i.queryParams,i.params,i.data]).pipe(zi(([o,s,a],l)=>(a={...o,...s,...a},0===l?ut(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const s=function lW(n){const e=tn(n);if(!e)return null;const t=new um(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();function sg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function sZ(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return sg(n,i,r);return sg(n,i)})}(n,e,t);return new wl(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>sg(n,a)),s}}const i=function aZ(n){return new yf(new Li(n.url),new Li(n.params),new Li(n.queryParams),new Li(n.fragment),new Li(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>sg(n,o));return new wl(i,r)}}const IC="ngNavigationCancelingError";function vk(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=iu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=yk(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function yk(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[IC]=!0,i.cancellationCode=e,t&&(i.url=t),i}function bk(n){return n&&n[IC]}let xk=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=wi({type:n,selectors:[["ng-component"]],standalone:!0,features:[iR],decls:1,vars:0,template:function(i,r){1&i&&ai(0,"router-outlet")},dependencies:[AC],encapsulation:2})}}return n})();function PC(n){const e=n.children&&n.children.map(PC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==rn&&(t.component=xk),t}function qs(n){return n.outlet||rn}function ag(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class mZ{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),TC(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=vf(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=vf(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=vf(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=vf(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new eZ(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Qq(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(TC(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),TC(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=ag(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}}class wk{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ey{constructor(e,t){this.component=e,this.route=t}}function gZ(n,e,t){const i=n._root;return lg(i,e?e._root:null,t,[i.value])}function bf(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function Ku(n){return null!==nc(n)}(n)?e.get(n):n:i}function lg(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=vf(e);return n.children.forEach(s=>{(function vZ(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function yZ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!nu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!nu(n.url,e.url)||!ka(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!DC(n,e)||!ka(n.queryParams,e.queryParams);default:return!DC(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new wk(i)):(o.data=s.data,o._resolvedData=s._resolvedData),lg(n,e,o.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ey(a.outlet.component,s))}else s&&cg(e,a,r),r.canActivateChecks.push(new wk(i)),lg(n,null,o.component?a?a.children:null:t,i,r)})(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>cg(a,t.getContext(s),r)),r}function cg(n,e,t){const i=vf(n),r=n.value;Object.entries(i).forEach(([o,s])=>{cg(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Ey(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function dg(n){return"function"==typeof n}function Mk(n){return n instanceof uy||"EmptyError"===n?.name}const Sy=Symbol("INITIAL_VALUE");function xf(){return zi(n=>dy(n.map(e=>e.pipe(Wo(1),fy(Sy)))).pipe($t(e=>{for(const t of e)if(!0!==t){if(t===Sy)return Sy;if(!1===t||t instanceof gf)return t}return!0}),Dr(e=>e!==Sy),Wo(1)))}function Ck(n){return function Ds(...n){return Ut(n)}(Ji(e=>{if(iu(e))throw vk(0,e)}),$t(e=>!0===e))}class Ty{constructor(e){this.segmentGroup=e||null}}class Ek{constructor(e){this.urlTree=e}}function wf(n){return pf(new Ty(n))}function Sk(n){return pf(new Ek(n))}class UZ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new ge(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ut(i);if(r.numberOfChildren>1||!r.children[rn])return pf(new ge(4e3,!1));r=r.children[rn]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new gf(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new Gn(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new ge(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const RC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zZ(n,e,t,i,r){const o=LC(n,e,t);return o.matched?(i=function cZ(n,e){return n.providers&&!n._injector&&(n._injector=Vw(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function FZ(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?ut(r.map(s=>{const a=bf(s,n);return Rc(function EZ(n){return n&&dg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(xf(),Ck()):ut(!0)}(i,e,t).pipe($t(s=>!0===s?o:{...RC}))):ut(o)}function LC(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...RC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||vq)(t,n,e);if(!r)return{...RC};const o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Tk(n,e,t,i){return t.length>0&&function GZ(n,e,t){return t.some(i=>Dy(n,e,i)&&qs(i)!==rn)}(n,t,i)?{segmentGroup:new Gn(e,HZ(i,new Gn(t,n.children))),slicedSegments:[]}:0===t.length&&function jZ(n,e,t){return t.some(i=>Dy(n,e,i))}(n,t,i)?{segmentGroup:new Gn(n.segments,VZ(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Gn(n.segments,n.children),slicedSegments:t}}function VZ(n,e,t,i,r){const o={};for(const s of i)if(Dy(n,t,s)&&!r[qs(s)]){const a=new Gn([],{});o[qs(s)]=a}return{...r,...o}}function HZ(n,e){const t={};t[rn]=e;for(const i of n)if(""===i.path&&qs(i)!==rn){const r=new Gn([],{});t[qs(i)]=r}return t}function Dy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class ZZ{constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new UZ(this.urlSerializer,this.urlTree)}noMatchError(e){return new ge(4002,!1)}recognize(){const e=Tk(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,rn).pipe(Pc(t=>{if(t instanceof Ek)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Ty?this.noMatchError(t):t}),$t(t=>{const i=new My([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},rn,this.rootComponentType,null,{}),r=new wl(i,t),o=new mk("",r),s=function Bq(n,e,t=null,i=null){return ik(nk(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,rn).pipe(Pc(i=>{throw i instanceof Ty?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=pk(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return vt(r).pipe(df(o=>{const s=i.children[o],a=function fZ(n,e){const t=n.filter(i=>qs(i)===e);return t.push(...n.filter(i=>qs(i)!==e)),t}(t,o);return this.processSegmentGroup(e,a,s,o)}),function pq(n,e){return Sn(function fq(n,e,t,i,r){return(o,s)=>{let a=t,l=e,d=0;o.subscribe(vn(s,h=>{const f=d++;l=a?n(l,h,f):(a=!0,h),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}(n,e,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),py(null),function mq(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Dr((r,o)=>n(r,o,i)):fi,gC(1),t?py(e):G2(()=>new uy))}(),yi(o=>{if(null===o)return wf(i);const s=Dk(o);return function XZ(n){n.sort((e,t)=>e.value.outlet===rn?-1:t.value.outlet===rn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),ut(s)}))}processSegment(e,t,i,r,o,s){return vt(t).pipe(df(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,o,s).pipe(Pc(l=>{if(l instanceof Ty)return ut(null);throw l}))),tu(a=>!!a),Pc(a=>{if(Mk(a))return function $Z(n,e,t){return 0===e.length&&!n.children[t]}(i,r,o)?ut([]):wf(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,o,s,a){return function WZ(n,e,t,i){return!!(qs(n)===i||i!==rn&&Dy(e,t,n))&&("**"===n.path||LC(e,n,t).matched)}(i,r,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s):wf(r):wf(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Sk(o):this.applyRedirects.lineralizeSegments(i,o).pipe(yi(s=>{const a=new Gn(s,{});return this.processSegment(e,t,a,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:d,positionalParamSegments:h}=LC(t,r,o);if(!a)return wf(t);const f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,h);return r.redirectTo.startsWith("/")?Sk(f):this.applyRedirects.lineralizeSegments(r,f).pipe(yi(p=>this.processSegment(e,i,t,p.concat(d),s,!1)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a;if("**"===i.path){const l=r.length>0?W2(r).parameters:{};a=ut({snapshot:new My(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ak(i),qs(i),i.component??i._loadedComponent??null,i,Ik(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=zZ(t,i,r,e).pipe($t(({matched:l,consumedSegments:d,remainingSegments:h,parameters:f})=>l?{snapshot:new My(d,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ak(i),qs(i),i.component??i._loadedComponent??null,i,Ik(i)),consumedSegments:d,remainingSegments:h}:null));return a.pipe(zi(l=>null===l?wf(t):this.getChildConfig(e=i._injector??e,i,r).pipe(zi(({routes:d})=>{const h=i._loadedInjector??e,{snapshot:f,consumedSegments:p,remainingSegments:g}=l,{segmentGroup:v,slicedSegments:w}=Tk(t,p,g,d);if(0===w.length&&v.hasChildren())return this.processChildren(h,d,v).pipe($t(y=>null===y?null:[new wl(f,y)]));if(0===d.length&&0===w.length)return ut([new wl(f,[])]);const x=qs(i)===o;return this.processSegment(h,d,v,w,x?rn:o,!0).pipe($t(y=>[new wl(f,y)]))}))))}getChildConfig(e,t,i){return t.children?ut({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ut({routes:t._loadedRoutes,injector:t._loadedInjector}):function kZ(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?ut(!0):ut(r.map(s=>{const a=bf(s,n);return Rc(function xZ(n){return n&&dg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(xf(),Ck())}(e,t,i).pipe(yi(r=>r?this.configLoader.loadChildren(e,t).pipe(Ji(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function BZ(n){return pf(yk(!1,3))}())):ut({routes:[],injector:e})}}function YZ(n){const e=n.value.routeConfig;return e&&""===e.path}function Dk(n){const e=[],t=new Set;for(const i of n){if(!YZ(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Dk(i.children);e.push(new wl(i.value,r))}return e.filter(i=>!t.has(i))}function Ak(n){return n.data||{}}function Ik(n){return n.resolve||{}}function Pk(n){return"string"==typeof n.title||null===n.title}function OC(n){return zi(e=>{const t=n(e);return t?vt(t).pipe($t(()=>e)):ut(e)})}const Mf=new Se("ROUTES");let kC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=He(qR)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ut(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Rc(t.loadComponent()).pipe($t(Rk),Ji(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),uf(()=>{this.componentLoaders.delete(t)})),r=new H2(i,()=>new St).pipe(mC());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ut({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=function iX(n,e,t,i){return Rc(n.loadChildren()).pipe($t(Rk),yi(r=>r instanceof tR||Array.isArray(r)?ut(r):vt(e.compileModuleAsync(r))),$t(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,!0):(o=r.create(t).injector,s=o.get(Mf,[],{optional:!0,self:!0}).flat()),{routes:s.map(PC),injector:o}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(uf(()=>{this.childrenLoaders.delete(i)})),s=new H2(o,()=>new St).pipe(mC());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rk(n){return function rX(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ay=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new St,this.transitionAbortSubject=new St,this.configLoader=He(kC),this.environmentInjector=He(Ho),this.urlSerializer=He(Jm),this.rootContexts=He(og),this.inputBindingEnabled=null!==He(Cy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ut(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Yq(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Xq(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new Li({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ig,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Dr(o=>0!==o.id),$t(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),zi(o=>{this.currentTransition=o;let s=!1,a=!1;return ut(o).pipe(Ji(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),zi(l=>{const d=l.currentBrowserUrl.toString(),h=!t.navigated||l.extractedUrl.toString()!==d||d!==l.currentUrlTree.toString();if(!h&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const p="";return this.events.next(new _f(l.id,this.urlSerializer.serialize(l.rawUrl),p,0)),l.resolve(null),bn}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ut(l).pipe(zi(p=>{const g=this.transitions?.getValue();return this.events.next(new xy(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?bn:Promise.resolve(p)}),function KZ(n,e,t,i,r,o){return yi(s=>function qZ(n,e,t,i,r,o,s="emptyOnly"){return new ZZ(n,e,t,i,r,s,o).recognize()}(n,e,t,i,s.extractedUrl,r,o).pipe($t(({state:a,tree:l})=>({...s,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Ji(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:p.urlAfterRedirects};const g=new ck(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:p,extractedUrl:g,source:v,restoredState:w,extras:x}=l,y=new xy(p,this.urlSerializer.serialize(g),v,w);this.events.next(y);const E=fk(0,this.rootComponentType).snapshot;return this.currentTransition=o={...l,targetSnapshot:E,urlAfterRedirects:g,extras:{...x,skipLocationChange:!1,replaceUrl:!1}},ut(o)}{const p="";return this.events.next(new _f(l.id,this.urlSerializer.serialize(l.extractedUrl),p,1)),l.resolve(null),bn}}),Ji(l=>{const d=new Wq(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),$t(l=>(this.currentTransition=o={...l,guards:gZ(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},o)),function TZ(n,e){return yi(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?ut({...t,guardsResult:!0}):function DZ(n,e,t,i){return vt(n).pipe(yi(r=>function OZ(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?ut(o.map(a=>{const l=ag(e)??r,d=bf(a,l);return Rc(function CZ(n){return n&&dg(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,i):l.runInContext(()=>d(n,e,t,i))).pipe(tu())})).pipe(xf()):ut(!0)}(r.component,r.route,t,e,i)),tu(r=>!0!==r,!0))}(s,i,r,n).pipe(yi(a=>a&&function bZ(n){return"boolean"==typeof n}(a)?function AZ(n,e,t,i){return vt(e).pipe(df(r=>Xm(function PZ(n,e){return null!==n&&e&&e(new Kq(n)),ut(!0)}(r.route.parent,i),function IZ(n,e){return null!==n&&e&&e(new Jq(n)),ut(!0)}(r.route,i),function LZ(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function _Z(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>hy(()=>ut(s.guards.map(l=>{const d=ag(s.node)??t,h=bf(l,d);return Rc(function MZ(n){return n&&dg(n.canActivateChild)}(h)?h.canActivateChild(i,n):d.runInContext(()=>h(i,n))).pipe(tu())})).pipe(xf())));return ut(o).pipe(xf())}(n,r.path,t),function RZ(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ut(!0);const r=i.map(o=>hy(()=>{const s=ag(e)??t,a=bf(o,s);return Rc(function wZ(n){return n&&dg(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(tu())}));return ut(r).pipe(xf())}(n,r.route,t))),tu(r=>!0!==r,!0))}(i,o,n,e):ut(a)),$t(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Ji(l=>{if(o.guardsResult=l.guardsResult,iu(l.guardsResult))throw vk(0,l.guardsResult);const d=new $q(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Dr(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),OC(l=>{if(l.guards.canActivateChecks.length)return ut(l).pipe(Ji(d=>{const h=new qq(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),zi(d=>{let h=!1;return ut(d).pipe(function QZ(n,e){return yi(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ut(t);let o=0;return vt(r).pipe(df(s=>function JZ(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!Pk(r)&&(o[Km]=r.title),function eX(n,e,t,i){const r=function tX(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ut({});const o={};return vt(r).pipe(yi(s=>function nX(n,e,t,i){const r=ag(e)??i,o=bf(n,r);return Rc(o.resolve?o.resolve(e,t):r.runInContext(()=>o(e,t)))}(n[s],e,t,i).pipe(tu(),Ji(a=>{o[s]=a}))),gC(1),function gq(n){return $t(()=>n)}(o),Pc(s=>Mk(s)?bn:pf(s)))}(o,n,e,i).pipe($t(s=>(n._resolvedData=s,n.data=pk(n,t).resolve,r&&Pk(r)&&(n.data[Km]=r.title),null)))}(s.route,i,n,e)),Ji(()=>o++),gC(1),yi(s=>o===r.length?ut(t):bn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Ji({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",2)}}))}),Ji(d=>{const h=new Zq(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),OC(l=>{const d=h=>{const f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ji(p=>{h.component=p}),$t(()=>{})));for(const p of h.children)f.push(...d(p));return f};return dy(d(l.targetSnapshot.root)).pipe(py(),Wo(1))}),OC(()=>this.afterPreactivation()),$t(l=>{const d=function oZ(n,e,t){const i=sg(n,e._root,t?t._root:void 0);return new hk(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o={...l,targetRouterState:d},o}),Ji(()=>{this.events.next(new wC)}),((n,e,t,i)=>$t(r=>(new mZ(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Wo(1),Ji({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Ym(this.transitionAbortSubject.pipe(Ji(l=>{throw l}))),uf(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Pc(l=>{if(a=!0,bk(l))this.events.next(new rg(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),function lZ(n){return bk(n)&&iu(n.url)}(l)?this.events.next(new MC(l.url)):o.resolve(!1);else{this.events.next(new wy(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(l))}catch(d){o.reject(d)}}return bn}))}))}cancelNavigationTransition(t,i,r){const o=new rg(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Lk(n){return n!==ig}let Ok=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===rn);return i}getResolvedTitleForRoute(t){return t.data[Km]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return He(oX)},providedIn:"root"})}}return n})(),oX=(()=>{class n extends Ok{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(he(gO))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sX=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return He(lX)},providedIn:"root"})}}return n})();class aX{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let lX=(()=>{class n extends aX{static{this.\u0275fac=function(){let t;return function(r){return(t||(t=gr(n)))(r||n)}}()}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Iy=new Se("",{providedIn:"root",factory:()=>({})});let cX=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return He(dX)},providedIn:"root"})}}return n})(),dX=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ug=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ug||{});function kk(n,e){n.events.pipe(Dr(t=>t instanceof Lc||t instanceof rg||t instanceof wy||t instanceof _f),$t(t=>t instanceof Lc||t instanceof _f?ug.COMPLETE:t instanceof rg&&(0===t.code||1===t.code)?ug.REDIRECTING:ug.FAILED),Dr(t=>t!==ug.REDIRECTING),Wo(1)).subscribe(()=>{e()})}function uX(n){throw n}function hX(n,e,t){return e.parse("/")}const fX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xs=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=He($R),this.isNgZoneEnabled=!1,this._events=new St,this.options=He(Iy,{optional:!0})||{},this.pendingTasks=He(Sv),this.errorHandler=this.options.errorHandler||uX,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||hX,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=He(cX),this.routeReuseStrategy=He(sX),this.titleStrategy=He(Ok),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=He(Mf,{optional:!0})?.flat()??[],this.navigationTransitions=He(Ay),this.urlSerializer=He(Jm),this.location=He(Om),this.componentInputBindingEnabled=!!He(Cy,{optional:!0}),this.eventsSubscription=new Q,this.isNgZoneEnabled=He(qt)instanceof qt&&qt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new gf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fk(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(Fk(i)&&this._events.next(i));if(i instanceof xy)Lk(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof _f)this.rawUrlTree=r.rawUrl;else if(i instanceof ck){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(o,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof wC)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof rg)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof MC){const o=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),s={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Lk(r.source)};this.scheduleNavigation(o,ig,null,s,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof wy&&this.restoreHistory(r,!0),i instanceof Lc&&(this.navigated=!0),Fk(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ig,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(PC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:s;let f,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{f=nk(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),f=this.currentUrlTree.root}return ik(f,t,h,d??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=iu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,ig,null,i)}navigate(t,i={skipLocationChange:!1}){return function mX(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ge(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...fX}:!1===i?{...pX}:i,iu(t))return q2(this.currentUrlTree,t,r);const o=this.parseUrl(t);return q2(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,d;s?(a=s.resolve,l=s.reject,d=s.promise):d=new Promise((f,p)=>{a=f,l=p});const h=this.pendingTasks.add();return kk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(f=>Promise.reject(f))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",s)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Fk(n){return!(n instanceof wC||n instanceof MC)}class Nk{}let vX=(()=>{class n{constructor(t,i,r,o,s){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Dr(t=>t instanceof Lc),df(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=Vw(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return vt(r).pipe(Oo())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):ut(null);const o=r.pipe(yi(s=>null===s?ut(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return i.loadComponent&&!i._loadedComponent?vt([o,this.loader.loadComponent(i)]).pipe(Oo()):o})}static{this.\u0275fac=function(i){return new(i||n)(he(xs),he(qR),he(Ho),he(Nk),he(kC))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const NC=new Se("");let Bk=(()=>{class n{constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Lc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof _f&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof dk&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dk(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){am()}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();function Ml(n,e){return{\u0275kind:n,\u0275providers:e}}function zk(){const n=He(Ki);return e=>{const t=n.get(Mc);if(e!==t.components[0])return;const i=n.get(xs),r=n.get(Vk);1===n.get(BC)&&i.initialNavigation(),n.get(Hk,null,zt.Optional)?.setUpPreloading(),n.get(NC,null,zt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const Vk=new Se("",{factory:()=>new St}),BC=new Se("",{providedIn:"root",factory:()=>1}),Hk=new Se("");function wX(n){return Ml(0,[{provide:Hk,useExisting:vX},{provide:Nk,useExisting:n}])}const Gk=new Se("ROUTER_FORROOT_GUARD"),CX=[Om,{provide:Jm,useClass:_C},xs,og,{provide:yf,useFactory:function Uk(n){return n.routerState.root},deps:[xs]},kC,[]];function EX(){return new eL("Router",xs)}let jk=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[CX,[],{provide:Mf,multi:!0,useValue:t},{provide:Gk,useFactory:AX,deps:[[xs,new Ld,new Zp]]},{provide:Iy,useValue:i||{}},i?.useHash?{provide:$d,useClass:fW}:{provide:$d,useClass:PL},{provide:NC,useFactory:()=>{const n=He(L$),e=He(qt),t=He(Iy),i=He(Ay),r=He(Jm);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Bk(r,i,n,e,t)}},i?.preloadingStrategy?wX(i.preloadingStrategy).\u0275providers:[],{provide:eL,multi:!0,useFactory:EX},i?.initialNavigation?IX(i):[],i?.bindToComponentInputs?Ml(8,[_k,{provide:Cy,useExisting:_k}]).\u0275providers:[],[{provide:Wk,useFactory:zk},{provide:cM,multi:!0,useExisting:Wk}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Mf,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(he(Gk,8))}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({})}}return n})();function AX(n){return"guarded"}function IX(n){return["disabled"===n.initialNavigation?Ml(3,[{provide:tM,multi:!0,useFactory:()=>{const e=He(xs);return()=>{e.setUpLocationChangeListener()}}},{provide:BC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ml(2,[{provide:BC,useValue:0},{provide:tM,multi:!0,deps:[Ki],useFactory:e=>{const t=e.get(uW,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(xs),o=e.get(Vk);kk(r,()=>{i(!0)}),e.get(Ay).afterPreactivation=()=>(i(!0),o.closed?ut(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const Wk=new Se("");class RX extends Q{constructor(e,t){super()}schedule(e,t=0){return this}}const Py={setInterval(n,e,...t){const{delegate:i}=Py;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Py;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class UC extends RX{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Py.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&Py.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,G(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const $k={now:()=>($k.delegate||Date).now(),delegate:void 0};class hg{constructor(e,t=hg.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}hg.now=$k.now;class zC extends hg{constructor(e,t=hg.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const Ry=new zC(UC),LX=Ry;function Ly(n=0,e,t=LX){let i=-1;return null!=e&&(Zu(e)?t=e:i=e),new Rn(r=>{let o=function OX(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Oc(n){return null!=n&&"false"!=`${n}`}function Cf(n,e=0){return function kX(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function Oy(n){return Array.isArray(n)?n:[n]}function er(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ef(n){return n instanceof Zn?n.nativeElement:n}const FX=["addListener","removeListener"],NX=["addEventListener","removeEventListener"],BX=["on","off"];function VC(n,e,t,i){if(kt(t)&&(i=t,t=void 0),i)return VC(n,e,t).pipe(WM(i));const[r,o]=function VX(n){return kt(n.addEventListener)&&kt(n.removeEventListener)}(n)?NX.map(s=>a=>n[s](e,a,t)):function UX(n){return kt(n.addListener)&&kt(n.removeListener)}(n)?FX.map(qk(n,e)):function zX(n){return kt(n.on)&&kt(n.off)}(n)?BX.map(qk(n,e)):[];if(!r&&ad(n))return yi(s=>VC(s,e,t))($i(n));if(!r)throw new TypeError("Invalid event target");return new Rn(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function qk(n,e){return t=>i=>n[t](e,i)}const fg={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=fg;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new Q(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=fg;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=fg;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class GX extends zC{flush(e){let t;this._active=!0,e?t=e.id:(t=this._scheduled,this._scheduled=void 0);const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class HX extends UC{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=fg.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&t===e._scheduled&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(fg.cancelAnimationFrame(t),e._scheduled=void 0)}});let HC,WX=1;const ky={};function Zk(n){return n in ky&&(delete ky[n],!0)}const $X={setImmediate(n){const e=WX++;return ky[e]=!0,HC||(HC=Promise.resolve()),HC.then(()=>Zk(e)&&n()),e},clearImmediate(n){Zk(n)}},{setImmediate:qX,clearImmediate:ZX}=$X,Fy={setImmediate(...n){const{delegate:e}=Fy;return(e?.setImmediate||qX)(...n)},clearImmediate(n){const{delegate:e}=Fy;return(e?.clearImmediate||ZX)(n)},delegate:void 0};new class YX extends zC{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class XX extends UC{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Fy.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(Fy.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function Xk(n,e=Ry){return function QX(n){return Sn((e,t)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const d=r;r=null,t.next(d)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(vn(t,d=>{i=!0,r=d,o||$i(n(d)).subscribe(o=vn(t,a,l))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>Ly(n,e))}let GC;try{GC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{GC=!1}let pg,ru,jC,Eo=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function R$(n){return n===YL}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!GC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(he(yc))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mg(n){return function JX(){if(null==pg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>pg=!0}))}finally{pg=pg||!1}return pg}()?n:!!n.capture}function eY(){if(null==ru){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ru=!1,ru;if("scrollBehavior"in document.documentElement.style)ru=!0;else{const n=Element.prototype.scrollTo;ru=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ru}function WC(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function kc(n){return n.composedPath?n.composedPath()[0]:n.target}function $C(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const iY=new Se("cdk-dir-doc",{providedIn:"root",factory:function rY(){return He(un)}}),oY=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let qC=(()=>{class n{constructor(t){this.value="ltr",this.change=new ei,t&&(this.value=function sY(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?oY.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(he(iY,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({})}}return n})(),lY=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new St,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Rn(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(Xk(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ut()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Dr(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Ef(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>VC(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||n)(he(qt),he(Eo),he(un,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Kk=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new St,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Xk(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(he(Eo),he(qt),he(un,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ZC=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({})}}return n})(),Qk=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[gg,ZC,gg,ZC]})}}return n})();class XC{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class YC extends XC{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class Jk extends XC{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class dY extends XC{constructor(e){super(),this.element=e instanceof Zn?e.nativeElement:e}}class KC{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof YC?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Jk?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof dY?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class uY extends KC{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Ki.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let QC=(()=>{class n extends KC{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new ei,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static{this.\u0275fac=function(i){return new(i||n)(oe(kh),oe(vs),oe(un))}}static{this.\u0275dir=bt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ln]})}}return n})(),By=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({})}}return n})();const eF=eY();class hY{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=er(-this._previousScrollPosition.left),e.style.top=er(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),eF&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),eF&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class fY{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Dr(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class tF{enable(){}disable(){}attach(){}}function JC(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function nF(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class pY{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();JC(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let mY=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new tF,this.close=s=>new fY(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new hY(this._viewportRuler,this._document),this.reposition=s=>new pY(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}static{this.\u0275fac=function(i){return new(i||n)(he(lY),he(Kk),he(qt),he(un))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class iF{constructor(e){if(this.scrollStrategy=new tF,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class gY{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let rF=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static{this.\u0275fac=function(i){return new(i||n)(he(un))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_Y=(()=>{class n extends rF{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||n)(he(un),he(qt,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vY=(()=>{class n extends rF{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=kc(o)},this._clickListener=o=>{const s=kc(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){const h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(s)||h.overlayElement.contains(a))break;const f=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(o)):f.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||n)(he(un),he(Eo),he(qt,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Uy=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||$C()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),$C()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||n)(he(un),he(Eo))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class _g{constructor(e,t,i,r,o,s,a,l,d,h=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=d,this._animationsDisabled=h,this._backdropElement=null,this._backdropClick=new St,this._attachments=new St,this._detachments=new St,this._locationChanges=Q.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new St,this._outsidePointerEvents=new St,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Wo(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=er(this._config.width),e.height=er(this._config.height),e.minWidth=er(this._config.minWidth),e.minHeight=er(this._config.minHeight),e.maxWidth=er(this._config.maxWidth),e.maxHeight=er(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=Oy(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ym(Kn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const oF="cdk-overlay-connected-position-bounding-box",yY=/([A-Za-z%]+)$/;class bY{get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new St,this._resizeSubscription=Q.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(oF),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),d=this._getOverlayPoint(l,t,a),h=this._getOverlayFit(d,t,i,a);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(h,d,i)?o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<h.visibleArea)&&(s={overlayFit:h,overlayPoint:d,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(const d of o){const h=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);h>l&&(l=h,a=d)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ou(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(oF),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=aF(t);let{x:s,y:a}=e,l=this._getOffset(r,"x"),d=this._getOffset(r,"y");l&&(s+=l),d&&(a+=d);let p=0-a,g=a+o.height-i.height,v=this._subtractOverflows(o.width,0-s,s+o.width-i.width),w=this._subtractOverflows(o.height,p,g),x=v*w;return{visibleArea:x,isCompletelyWithinViewport:o.width*o.height===x,fitsInViewportVertically:w===o.height,fitsInViewportHorizontally:v==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,s=sF(this._overlayRef.getConfig().minHeight),a=sF(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=aF(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),l=Math.max(o.top-i.top-e.y,0),d=Math.max(o.left-i.left-e.x,0);let h=0,f=0;return h=r.width<=o.width?d||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,f=r.height<=o.height?l||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:h,y:f},{x:e.x+h,y:e.y+f}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new gY(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,s,a,h,f,p;if("top"===t.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),v=this._lastBoundingBoxSize.height;o=2*g,s=e.y-g,o>v&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-v/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=i.width-e.x+this._viewportMargin,h=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)f=e.x,h=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),v=this._lastBoundingBoxSize.width;h=2*g,f=e.x-g,h>v&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-v/2)}return{top:s,left:f,bottom:a,right:p,width:h,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=er(i.height),r.top=er(i.top),r.bottom=er(i.bottom),r.width=er(i.width),r.left=er(i.left),r.right=er(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=er(o)),s&&(r.maxWidth=er(s))}this._lastBoundingBoxSize=i,ou(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ou(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ou(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const h=this._viewportRuler.getViewportScrollPosition();ou(i,this._getExactOverlayY(t,e,h)),ou(i,this._getExactOverlayX(t,e,h))}else i.position="static";let a="",l=this._getOffset(t,"x"),d=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),d&&(a+=`translateY(${d}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=er(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=er(s.maxWidth):o&&(i.maxWidth="")),ou(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=er(o.y),r}_getExactOverlayX(e,t,i){let s,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=er(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:nF(e,i),isOriginOutsideView:JC(e,i),isOverlayClipped:nF(t,i),isOverlayOutsideView:JC(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Oy(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Zn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function ou(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function sF(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(yY);return t&&"px"!==t?null:parseFloat(e)}return n||null}function aF(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const lF="cdk-global-overlay-wrapper";class xY{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(lF),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),d=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),h=this._xPosition,f=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let g="",v="",w="";l?w="flex-start":"center"===h?(w="center",p?v=f:g=f):p?"left"===h||"end"===h?(w="flex-end",g=f):("right"===h||"start"===h)&&(w="flex-start",v=f):"left"===h||"start"===h?(w="flex-start",g=f):("right"===h||"end"===h)&&(w="flex-end",v=f),e.position=this._cssPosition,e.marginLeft=l?"0":g,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":v,t.justifyContent=w,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(lF),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let wY=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new xY}flexibleConnectedTo(t){return new bY(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||n)(he(Kk),he(un),he(Eo),he(Uy))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),MY=0,su=(()=>{class n{constructor(t,i,r,o,s,a,l,d,h,f,p,g){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=d,this._directionality=h,this._location=f,this._outsideClickDispatcher=p,this._animationsModuleType=g}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new iF(t);return s.direction=s.direction||this._directionality.value,new _g(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+MY++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Mc)),new uY(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||n)(he(mY),he(Uy),he(kh),he(wY),he(_Y),he(Ki),he(qt),he(un),he(qC),he(Om),he(vY),he(Us,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const SY={provide:new Se("cdk-connected-overlay-scroll-strategy"),deps:[su],useFactory:function EY(n){return()=>n.scrollStrategies.reposition()}};let eE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({providers:[su,SY],imports:[gg,By,Qk,Qk]})}}return n})();function tE(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function uF(n){return Dr((e,t)=>n<=t)}let WY=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hF=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({providers:[WY]})}}return n})();const fF=new Set;let au,$Y=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ZY}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function qY(n,e){if(!fF.has(n))try{au||(au=document.createElement("style"),e&&(au.nonce=e),au.setAttribute("type","text/css"),document.head.appendChild(au)),au.sheet&&(au.sheet.insertRule(`@media ${n} {body{ }}`,0),fF.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(he(Eo),he($x,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZY(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let XY=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new St}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return pF(Oy(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=dy(pF(Oy(t)).map(s=>this._registerQuery(s).observable));return o=Xm(o.pipe(Wo(1)),o.pipe(uF(1),function dF(n,e=Ry){return Sn((t,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const d=o;o=null,i.next(d)}};function l(){const d=s+n,h=e.now();if(h<d)return r=this.schedule(void 0,d-h),void i.add(r);a()}t.subscribe(vn(i,d=>{o=d,s=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}(0))),o.pipe($t(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:d})=>{a.matches=a.matches||l,a.breakpoints[d]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new Rn(s=>{const a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(fy(i),$t(({matches:s})=>({query:t,matches:s})),Ym(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static{this.\u0275fac=function(i){return new(i||n)(he($Y),he(qt))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pF(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let zy=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function eK(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function JY(n){try{return n.frameElement}catch{return null}}(function lK(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===vF(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=vF(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function sK(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function aK(n){return!function nK(n){return function rK(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function tK(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function iK(n){return function oK(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||_F(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static{this.\u0275fac=function(i){return new(i||n)(he(Eo))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _F(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function vF(n){if(!_F(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class yF{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,o=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Wo(1)).subscribe(e)}}let nE=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new yF(t,this._checker,this._ngZone,this._document,i)}static{this.\u0275fac=function(i){return new(i||n)(he(zy),he(qt),he(un))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bF(n){return 0===n.buttons||0===n.detail}function xF(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const cK=new Se("cdk-input-modality-detector-options"),dK={ignoreKeys:[18,17,224,91,16]},Tf=mg({passive:!0,capture:!0});let uK=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Li(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=kc(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(bF(s)?"keyboard":"mouse"),this._mostRecentTarget=kc(s))},this._onTouchstart=s=>{xF(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=kc(s))},this._options={...dK,...o},this.modalityDetected=this._modality.pipe(uF(1)),this.modalityChanged=this.modalityDetected.pipe(os()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Tf),r.addEventListener("mousedown",this._onMousedown,Tf),r.addEventListener("touchstart",this._onTouchstart,Tf)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Tf),document.removeEventListener("mousedown",this._onMousedown,Tf),document.removeEventListener("touchstart",this._onTouchstart,Tf))}static{this.\u0275fac=function(i){return new(i||n)(he(Eo),he(qt),he(un),he(cK,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const fK=new Se("cdk-focus-monitor-default-options"),Vy=mg({passive:!0,capture:!0});let vg=(()=>{class n{constructor(t,i,r,o,s){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new St,this._rootNodeFocusAndBlurListener=a=>{for(let d=kc(a);d;d=d.parentElement)"focus"===a.type?this._onFocus(a,d):this._onBlur(a,d)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(t,i=!1){const r=Ef(t);if(!this._platform.isBrowser||1!==r.nodeType)return ut();const o=function nY(n){if(function tY(){if(null==jC){const n=typeof document<"u"?document.head:null;jC=!(!n||!n.createShadowRoot&&!n.attachShadow)}return jC}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new St,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Ef(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=Ef(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=kc(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Vy),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Vy)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ym(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Vy),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Vy),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}static{this.\u0275fac=function(i){return new(i||n)(he(qt),he(Eo),he(uK),he(un,8),he(fK,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const MF="cdk-high-contrast-black-on-white",CF="cdk-high-contrast-white-on-black",iE="cdk-high-contrast-active";let EF=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=He(XY).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(iE,MF,CF),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(iE,MF):2===i&&t.add(iE,CF)}}static{this.\u0275fac=function(i){return new(i||n)(he(Eo),he(un))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pK=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(i){return new(i||n)(he(EF))}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[hF]})}}return n})();function mK(n,e){}class Hy{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let SF=(()=>{class n extends KC{constructor(t,i,r,o,s,a,l,d){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=s,this._ngZone=a,this._overlayRef=l,this._focusMonitor=d,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),f},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=WC(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=WC();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=WC())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static{this.\u0275fac=function(i){return new(i||n)(oe(Zn),oe(nE),oe(un,8),oe(Hy),oe(zy),oe(qt),oe(_g),oe(vg))}}static{this.\u0275cmp=wi({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Qh(QC,7),2&i){let o;Gd(o=jd())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Ci("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[ln],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&Ht(0,mK,0,0,"ng-template",0)},dependencies:[QC],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}}return n})();class rE{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new St,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!tE(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const TF=new Se("DialogScrollStrategy"),gK=new Se("DialogData"),_K=new Se("DefaultDialogConfig"),yK={provide:TF,deps:[su],useFactory:function vK(n){return()=>n.scrollStrategies.block()}};let bK=0,DF=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,o,s,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new St,this._afterOpenedAtThisLevel=new St,this._ariaHiddenElements=new Map,this.afterAllClosed=hy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(fy(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new Hy,...i}).id=i.id||"cdk-dialog-"+bK++,i.id&&this.getDialogById(i.id);const o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new rE(s,i),l=this._attachContainer(s,a,i);return a.containerInstance=l,this._attachDialogContent(t,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){oE(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){oE(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),oE(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new iF({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const o=r.injector||r.viewContainerRef?.injector,s=[{provide:Hy,useValue:r},{provide:rE,useValue:i},{provide:_g,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=SF;const l=new YC(a,r.viewContainerRef,Ki.create({parent:o||this._injector,providers:s}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,o){if(t instanceof Ra){const s=this._createInjector(o,i,r,void 0);let a={$implicit:o.data,dialogRef:i};o.templateContext&&(a={...a,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new Jk(t,null,a,s))}else{const s=this._createInjector(o,i,r,this._injector),a=r.attachComponentPortal(new YC(t,o.viewContainerRef,s,o.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,r,o){const s=t.injector||t.viewContainerRef?.injector,a=[{provide:gK,useValue:t.data},{provide:rE,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!s||!s.get(qC,null,{optional:!0}))&&a.push({provide:qC,useValue:{value:t.direction,change:ut()}}),Ki.create({parent:s||o,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const o=i[r];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static{this.\u0275fac=function(i){return new(i||n)(he(su),he(Ki),he(_K,8),he(n,12),he(Uy),he(TF))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();function oE(n,e){let t=n.length;for(;t--;)e(n[t])}let xK=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({providers:[DF,yK],imports:[eE,By,pK,By]})}}return n})();const MK=new Se("mat-sanity-checks",{providedIn:"root",factory:function wK(){return!0}});let ar=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!$C()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static{this.\u0275fac=function(i){return new(i||n)(he(EF),he(MK,8),he(un))}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[gg,gg]})}}return n})();function PF(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=Oc(e)}constructor(...e){super(...e),this._disabled=!1}}}function Gy(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function RF(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Oc(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function CK(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Cf(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}class SK{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const LF=mg({passive:!0,capture:!0});class TK{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=kc(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,LF)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,LF)))}}const OF={enterDuration:225,exitDuration:150},kF=mg({passive:!0,capture:!0}),FF=["mousedown","touchstart"],NF=["mouseup","mouseleave","touchend","touchcancel"];class jy{static{this._eventManager=new TK}constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ef(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...OF,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const s=i.radius||function AK(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,d=o.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=a-s+"px",h.style.top=l-s+"px",h.style.height=2*s+"px",h.style.width=2*s+"px",null!=i.color&&(h.style.backgroundColor=i.color),h.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(h);const f=window.getComputedStyle(h),g=f.transitionDuration,v="none"===f.transitionProperty||"0s"===g||"0s, 0s"===g||0===r.width&&0===r.height,w=new SK(this,h,i,v);h.style.transform="scale3d(1, 1, 1)",w.state=0,i.persistent||(this._mostRecentTransientRipple=w);let x=null;return!v&&(d||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const y=()=>this._finishRippleTransition(w),E=()=>this._destroyRipple(w);h.addEventListener("transitionend",y),h.addEventListener("transitioncancel",E),x={onTransitionEnd:y,onTransitionCancel:E}}),this._activeRipples.set(w,x),(v||!d)&&this._finishRippleTransition(w),w}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...OF,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Ef(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,FF.forEach(i=>{jy._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{NF.forEach(t=>{this._triggerElement.addEventListener(t,this,kF)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=bF(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!xF(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(FF.forEach(t=>jy._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&NF.forEach(t=>e.removeEventListener(t,this,kF)))}}const BF=new Se("mat-ripple-global-options");let UF=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,o,s){this._elementRef=t,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new jy(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static{this.\u0275fac=function(i){return new(i||n)(oe(Zn),oe(qt),oe(Eo),oe(BF,8),oe(Us,8))}}static{this.\u0275dir=bt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&eo("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}}return n})(),sE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[ar,ar]})}}return n})(),IK=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[ar]})}}return n})(),zF=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[sE,rf,ar,IK]})}}return n})();const VF={capture:!0},HF=["focus","click","mouseenter","touchstart"],aE="mat-ripple-loader-uninitialized",lE="mat-ripple-loader-class-name",GF="mat-ripple-loader-centered",Wy="mat-ripple-loader-disabled";let PK=(()=>{class n{constructor(){this._document=He(un,{optional:!0}),this._animationMode=He(Us,{optional:!0}),this._globalRippleOptions=He(BF,{optional:!0}),this._platform=He(Eo),this._ngZone=He(qt),this._hosts=new Map,this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;const r=t.target.closest(`[${aE}]`);r&&this._createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(const t of HF)this._document?.addEventListener(t,this._onInteraction,VF)})}ngOnDestroy(){const t=this._hosts.keys();for(const i of t)this.destroyRipple(i);for(const i of HF)this._document?.removeEventListener(i,this._onInteraction,VF)}configureRipple(t,i){t.setAttribute(aE,""),(i.className||!t.hasAttribute(lE))&&t.setAttribute(lE,i.className||""),i.centered&&t.setAttribute(GF,""),i.disabled&&t.setAttribute(Wy,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,i){const r=this._hosts.get(t);r?r.disabled=i:i?t.setAttribute(Wy,""):t.removeAttribute(Wy)}_createRipple(t){if(!this._document)return;const i=this._hosts.get(t);if(i)return i;t.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(lE)),t.append(r);const o=new UF(new Zn(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=t,o.centered=t.hasAttribute(GF),o.disabled=t.hasAttribute(Wy),this.attachRipple(t,o),o}attachRipple(t,i){t.removeAttribute(aE),this._hosts.set(t,i)}destroyRipple(t){const i=this._hosts.get(t);i&&(i.ngOnDestroy(),this._hosts.delete(t))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class jF{}class RK{}const Cl="*";function $F(n,e=null){return{type:2,steps:n,options:e}}function Zs(n){return{type:6,styles:n,offset:null}}class xg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class qF{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function LK(n,e){}class Zy{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const hE="mdc-dialog--open",ZF="mdc-dialog--opening",XF="mdc-dialog--closing";let FK=(()=>{class n extends SF{constructor(t,i,r,o,s,a,l,d){super(t,i,r,o,s,a,l,d),this._animationStateChanged=new ei}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}static{this.\u0275fac=function(i){return new(i||n)(oe(Zn),oe(nE),oe(un,8),oe(Zy),oe(zy),oe(qt),oe(_g),oe(vg))}}static{this.\u0275cmp=wi({type:n,selectors:[["ng-component"]],features:[ln],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return n})();const YF="--mat-dialog-transition-duration";function KF(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?Cf(n.substring(0,n.length-2)):n.endsWith("s")?1e3*Cf(n.substring(0,n.length-1)):"0"===n?0:null}let NK=(()=>{class n extends FK{constructor(t,i,r,o,s,a,l,d,h){super(t,i,r,o,s,a,l,h),this._animationMode=d,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?KF(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?KF(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(YF,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(ZF,hE)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(hE),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(hE),this._animationsEnabled?(this._hostElement.style.setProperty(YF,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(XF)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(ZF,XF)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}static{this.\u0275fac=function(i){return new(i||n)(oe(Zn),oe(nE),oe(un,8),oe(Zy),oe(zy),oe(qt),oe(_g),oe(Us,8),oe(vg))}}static{this.\u0275cmp=wi({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(xm("id",r._config.id),Ci("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),eo("_mat-animation-noopable",!r._animationsEnabled))},features:[ln],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(B(0,"div",0)(1,"div",1),Ht(2,LK,0,0,"ng-template",2),H()())},dependencies:[QC],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}}return n})();class Af{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new St,this._beforeClosed=new St,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(Dr(r=>"opened"===r.state),Wo(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Dr(r=>"closed"===r.state),Wo(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Kn(this.backdropClick(),this.keydownEvents().pipe(Dr(r=>27===r.keyCode&&!this.disableClose&&!tE(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),QF(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Dr(t=>"closing"===t.state),Wo(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function QF(n,e,t){return n._closeInteractionType=e,n.close(t)}const wg=new Se("MatMdcDialogData"),BK=new Se("mat-mdc-dialog-default-options"),JF=new Se("mat-mdc-dialog-scroll-strategy"),zK={provide:JF,deps:[su],useFactory:function UK(n){return()=>n.scrollStrategies.block()}};let VK=0,HK=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,o,s,a,l,d,h,f){this._overlay=t,this._defaultOptions=r,this._parentDialog=o,this._dialogRefConstructor=l,this._dialogContainerType=d,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new St,this._afterOpenedAtThisLevel=new St,this._idPrefix="mat-dialog-",this.dialogConfigClass=Zy,this.afterAllClosed=hy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(fy(void 0))),this._scrollStrategy=a,this._dialog=i.get(DF)}open(t,i){let r;(i={...this._defaultOptions||new Zy,...i}).id=i.id||`${this._idPrefix}${VK++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Hy,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,a,l)=>(r=new this._dialogRefConstructor(s,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static{this.\u0275fac=function(i){am()}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})(),If=(()=>{class n extends HK{constructor(t,i,r,o,s,a,l,d){super(t,i,o,a,l,s,Af,NK,wg,d),this._idPrefix="mat-mdc-dialog-"}static{this.\u0275fac=function(i){return new(i||n)(he(su),he(Ki),he(Om,8),he(BK,8),he(JF),he(n,12),he(Uy),he(Us,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})(),GK=0,fE=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=nN(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const i=t._matDialogClose||t._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(t){QF(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}static{this.\u0275fac=function(i){return new(i||n)(oe(Af,8),oe(Zn),oe(If))}}static{this.\u0275dir=bt({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,r){1&i&&Re("click",function(s){return r._onButtonClick(s)}),2&i&&Ci("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Bo]})}}return n})(),pE=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+GK++}ngOnInit(){this._dialogRef||(this._dialogRef=nN(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const t=this._dialogRef?._containerInstance?._ariaLabelledByQueue;t&&Promise.resolve().then(()=>{const i=t.indexOf(this.id);i>-1&&t.splice(i,1)})}static{this.\u0275fac=function(i){return new(i||n)(oe(Af,8),oe(Zn),oe(If))}}static{this.\u0275dir=bt({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&xm("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]})}}return n})(),eN=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=bt({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]})}}return n})(),tN=(()=>{class n{constructor(){this.align="start"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=bt({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(i,r){2&i&&eo("mat-mdc-dialog-actions-align-center","center"===r.align)("mat-mdc-dialog-actions-align-end","end"===r.align)},inputs:{align:"align"}})}}return n})();function nN(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}let jK=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({providers:[If,zK],imports:[xK,eE,By,ar,ar]})}}return n})();const Mg_apiUrl=`${window.location.origin}/api`;window;let WK=(()=>{class n{constructor(t){this.http=t,this.encodedApiUrl=`${Mg_apiUrl}/encode`}getEncodedAisData(){return this.http.get(this.encodedApiUrl)}static{this.\u0275fac=function(i){return new(i||n)(he(Jd))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const $K=["mat-button",""],qK=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],ZK=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],YK=["mat-icon-button",""],KK=["*"],QK=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],JK=Gy(PF(RF(class{constructor(n){this._elementRef=n}})));let rN=(()=>{class n extends JK{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Oc(t),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=Oc(t),this._updateRippleDisabled()}constructor(t,i,r,o){super(t),this._platform=i,this._ngZone=r,this._animationMode=o,this._focusMonitor=He(vg),this._rippleLoader=He(PK),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const s=t.nativeElement.classList;for(const a of QK)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{s.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...t){return t.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(i){am()}}static{this.\u0275dir=bt({type:n,features:[ln]})}}return n})(),Xy=(()=>{class n extends rN{constructor(t,i,r,o){super(t,i,r,o)}static{this.\u0275fac=function(i){return new(i||n)(oe(Zn),oe(Eo),oe(qt),oe(Us,8))}}static{this.\u0275cmp=wi({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(Ci("disabled",r.disabled||null),eo("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ln],attrs:$K,ngContentSelectors:ZK,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(vm(qK),ai(0,"span",0),Ud(1),B(2,"span",1),Ud(3,1),H(),Ud(4,2),ai(5,"span",2)(6,"span",3)),2&i&&eo("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return n})(),nQ=(()=>{class n extends rN{constructor(t,i,r,o){super(t,i,r,o),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static{this.\u0275fac=function(i){return new(i||n)(oe(Zn),oe(Eo),oe(qt),oe(Us,8))}}static{this.\u0275cmp=wi({type:n,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(Ci("disabled",r.disabled||null),eo("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ln],attrs:YK,ngContentSelectors:KK,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(vm(),ai(0,"span",0),Ud(1),ai(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return n})(),iQ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[ar,sE,ar]})}}return n})();const rQ=["*"];let Yy;function Cg(n){return function oQ(){if(void 0===Yy&&(Yy=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Yy=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Yy}()?.createHTML(n)||n}function oN(n){return Error(`Unable to find icon with the name "${n}"`)}function sN(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function aN(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class lu{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let Ky=(()=>{class n{constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new lu(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){const s=this._sanitizer.sanitize(Sr.HTML,r);if(!s)throw aN(r);const a=Cg(s);return this._addSvgIconConfig(t,i,new lu("",a,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new lu(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const o=this._sanitizer.sanitize(Sr.HTML,i);if(!o)throw aN(i);const s=Cg(o);return this._addSvgIconSetConfig(t,new lu("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Sr.RESOURCE_URL,t);if(!i)throw sN(t);const r=this._cachedIconsByUrl.get(i);return r?ut(Qy(r)):this._loadSvgIconFromConfig(new lu(t,null)).pipe(Ji(o=>this._cachedIconsByUrl.set(i,o)),$t(o=>Qy(o)))}getNamedSvgIcon(t,i=""){const r=lN(i,t);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(t,s):pf(oN(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?ut(Qy(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe($t(i=>Qy(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?ut(r):MO(i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Pc(a=>{const d=`Loading icon set URL: ${this._sanitizer.sanitize(Sr.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(d)),ut(null)})))).pipe($t(()=>{const s=this._extractIconWithNameFromAnySet(t,i);if(!s)throw oN(t);return s}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ji(i=>t.svgText=i),$t(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?ut(null):this._fetchIcon(t).pipe(Ji(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const o=t.querySelector(`[id="${i}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(Cg("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Cg("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&i.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw function sQ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const s=this._sanitizer.sanitize(Sr.RESOURCE_URL,i);if(!s)throw sN(i);const a=this._inProgressUrlFetches.get(s);if(a)return a;const l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe($t(d=>Cg(d)),uf(()=>this._inProgressUrlFetches.delete(s)),Ui());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(lN(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,t);if(o)return lQ(o)?new lu(o.url,null,o.options):new lu(o,null)}}static{this.\u0275fac=function(i){return new(i||n)(he(Jd,8),he(jM),he(un,8),he(gs))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Qy(n){return n.cloneNode(!0)}function lN(n,e){return n+":"+e}function lQ(n){return!(!n.url||!n.options)}const cQ=Gy(class{constructor(n){this._elementRef=n}}),dQ=new Se("MAT_ICON_DEFAULT_OPTIONS"),uQ=new Se("mat-icon-location",{providedIn:"root",factory:function hQ(){const n=He(un),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),cN=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],fQ=cN.map(n=>`[${n}]`).join(", "),pQ=/^url\(['"]?#(.*?)['"]?\)$/;let dN=(()=>{class n extends cQ{get inline(){return this._inline}set inline(t){this._inline=Oc(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,o,s,a){super(t),this._iconRegistry=i,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Q.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(fQ),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)cN.forEach(s=>{const a=i[o],l=a.getAttribute(s),d=l?l.match(pQ):null;if(d){let h=r.get(a);h||(h=[],r.set(a,h)),h.push({name:s,value:d[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Wo(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}static{this.\u0275fac=function(i){return new(i||n)(oe(Zn),oe(Ky),vh("aria-hidden"),oe(uQ),oe(gs),oe(dQ,8))}}static{this.\u0275cmp=wi({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(Ci("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),eo("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ln],ngContentSelectors:rQ,decls:1,vars:0,template:function(i,r){1&i&&(vm(),Ud(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return n})(),mQ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[ar,ar]})}}return n})();const gQ=["determinateSpinner"];function _Q(n,e){if(1&n&&(x_(),B(0,"svg",11),ai(1,"circle",12),H()),2&n){const t=ke();Ci("viewBox",t._viewBox()),ee(1),ym("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),Ci("r",t._circleRadius())}}const vQ=Gy(class{constructor(n){this._elementRef=n}},"primary"),yQ=new Se("mat-progress-spinner-default-options",{providedIn:"root",factory:function bQ(){return{diameter:uN}}}),uN=100;let wQ=(()=>{class n extends vQ{constructor(t,i,r){super(t),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=uN,this._noopAnimations="NoopAnimations"===i&&!!r&&!r._forceAnimations,r&&(r.color&&(this.color=this.defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Cf(t)))}get diameter(){return this._diameter}set diameter(t){this._diameter=Cf(t)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=Cf(t)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static{this.\u0275fac=function(i){return new(i||n)(oe(Zn),oe(Us,8),oe(yQ))}}static{this.\u0275cmp=wi({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,r){if(1&i&&Qh(gQ,5),2&i){let o;Gd(o=jd())&&(r._determinateCircle=o.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:16,hostBindings:function(i,r){2&i&&(Ci("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===r.mode?r.value:null)("mode",r.mode),ym("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),eo("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===r.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[ln],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,r){if(1&i&&(Ht(0,_Q,2,8,"ng-template",null,0,Xw),B(2,"div",1,2),x_(),B(4,"svg",3),ai(5,"circle",4),H()(),function YD(){!function Dz(){Vt.lFrame.currentNamespace=null}()}(),B(6,"div",5)(7,"div",6)(8,"div",7),gm(9,8),H(),B(10,"div",9),gm(11,8),H(),B(12,"div",10),gm(13,8),H()()()),2&i){const o=gv(1);ee(4),Ci("viewBox",r._viewBox()),ee(1),ym("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),Ci("r",r._circleRadius()),ee(4),se("ngTemplateOutlet",o),ee(2),se("ngTemplateOutlet",o),ee(2),se("ngTemplateOutlet",o)}},dependencies:[ZL],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{--mdc-circular-progress-active-indicator-width:4px;--mdc-circular-progress-size:48px}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0})}}return n})(),MQ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[rf,ar]})}}return n})();function CQ(n,e){1&n&&(B(0,"div",7),ai(1,"mat-spinner",8),B(2,"span"),K(3,"Memuat data awal..."),H()())}function EQ(n,e){if(1&n&&(B(0,"div",9)(1,"mat-icon"),K(2,"error_outline"),H(),K(3),H()),2&n){const t=ke();ee(3),_r(" ",t.errorMessage," ")}}let SQ=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this.aisApi=i,this.data=r,this.aisTextLog="",this.isLoading=!0,this.errorMessage=null,this.destroy$=new St}ngOnInit(){this.startPolling()}startPolling(t=2e3){Ly(0,t).pipe(zi(()=>this.aisApi.getEncodedAisData()),Ym(this.destroy$)).subscribe({next:i=>{if(this.isLoading=!1,i.success){let s=`Timestamp: ${(new Date).toLocaleString("id-ID",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}\nInterval: ${i.interval}s\n`;i.data.forEach(a=>{s+=`Part: ${a.part.toUpperCase()}\n`,s+=`AIS Type: ${a.aistype}\n`,s+=`NMEA: ${a.nmea}\n`,s+="-------------------------\n"}),this.aisTextLog=s+this.aisTextLog,this.aisTextLog.length>1e4&&(this.aisTextLog=this.aisTextLog.substring(0,1e4)),i.interval&&1e3*i.interval!==t&&(this.destroy$.next(),this.startPolling(1e3*i.interval))}},error:i=>{this.isLoading=!1,this.errorMessage="Gagal memuat data: "+i.message}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(i){return new(i||n)(oe(Af),oe(WK),oe(wg))}}static{this.\u0275cmp=wi({type:n,selectors:[["app-debug-dialog"]],decls:12,vars:3,consts:[[1,"debug-container"],[1,"header"],["mat-icon-button","",3,"click"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"data-container"],["tabindex","0",1,"terminal-output"],[1,"loading"],["diameter","40"],[1,"error-message"]],template:function(i,r){1&i&&(B(0,"div",0)(1,"div",1)(2,"h2"),K(3,"Debug AIS Data"),H(),B(4,"button",2),Re("click",function(){return r.closeDialog()}),B(5,"mat-icon"),K(6,"close"),H()()(),Ht(7,CQ,4,0,"div",3),Ht(8,EQ,4,1,"div",4),B(9,"div",5)(10,"pre",6),K(11),H()()()),2&i&&(ee(7),se("ngIf",r.isLoading),ee(1),se("ngIf",r.errorMessage),ee(3),sr(r.aisTextLog))},dependencies:[qd,nQ,dN,wQ],styles:[".debug-container[_ngcontent-%COMP%]{padding:20px;max-width:800px;background:#f5f5f5;border-radius:8px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}h2[_ngcontent-%COMP%]{color:#3f51b5;margin:0}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:20px;background:white;border-radius:4px;box-shadow:0 2px 4px #0000001a}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#d32f2f;padding:15px;background:#ffebee;border-radius:4px;margin:10px 0}.data-container[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto}.data-card[_ngcontent-%COMP%]{background:white;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:15px}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid #eee}.timestamp[_ngcontent-%COMP%], .interval[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;color:#666;font-size:.9em}.data-section[_ngcontent-%COMP%]{margin-bottom:15px}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#2196f3;margin:0 0 10px}.nmea-box[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.nmea-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;background:#f8f9fa}.aistype[_ngcontent-%COMP%]{font-weight:500;color:#4a4a4a}.nmea-code[_ngcontent-%COMP%]{margin:0;padding:15px;background:#272822;color:#f8f8f2;font-family:Courier New,Courier,monospace;font-size:.9em;overflow-x:auto}button[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:500}"]})}}return n})();function hN(n,e,t,i,r,o,s){try{var a=n[o](s),l=a.value}catch(d){return void t(d)}a.done?e(l):Promise.resolve(l).then(i,r)}function cu(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function s(l){hN(o,i,r,s,a,"next",l)}function a(l){hN(o,i,r,s,a,"throw",l)}s(void 0)})}}const gE=1,AQ=2,El=3,Jy=0,ZQ=1,XQ=2,Bc=0,YQ=1,KQ=2,QQ=3,JQ=4,eJ=5,tJ=6,nJ=7,Uc=301,uu=302,Eg=306,Xs=1001,kr=1003,vr=1006,Sl=1008,Ba=1009,yN=1010,bN=1011,Tg=1012,TE=1013,zc=1014,$o=1015,Dg=1016,DE=1017,AE=1018,Ag=1020,xN=35902,wN=1021,MN=1022,To=1023,Ig=1026,Pg=1027,IE=1028,ob=1029,CN=1030,PE=1031,RE=1033,sb=33776,ab=33777,lb=33778,cb=33779,LE=35840,OE=35841,kE=35842,FE=35843,NE=36196,BE=37492,UE=37496,zE=37808,VE=37809,HE=37810,GE=37811,jE=37812,WE=37813,$E=37814,qE=37815,ZE=37816,XE=37817,YE=37818,KE=37819,QE=37820,JE=37821,db=36492,eS=36494,tS=36495,EN=36283,nS=36284,iS=36285,rS=36286,Do="srgb",Nf="srgb-linear",fb="linear",Xn="srgb",Bf=7680,AN="300 es",Ys=2e3;class Tl{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return void 0!==i&&void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){const i=this._listeners;if(void 0===i)return;const r=i[e];if(void 0!==r){const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const i=t[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}}const Fr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let IN=1234567;const fu=Math.PI/180,Uf=180/Math.PI;function qo(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Fr[255&n]+Fr[n>>8&255]+Fr[n>>16&255]+Fr[n>>24&255]+"-"+Fr[255&e]+Fr[e>>8&255]+"-"+Fr[e>>16&15|64]+Fr[e>>24&255]+"-"+Fr[63&t|128]+Fr[t>>8&255]+"-"+Fr[t>>16&255]+Fr[t>>24&255]+Fr[255&i]+Fr[i>>8&255]+Fr[i>>16&255]+Fr[i>>24&255]).toLowerCase()}function Kt(n,e,t){return Math.max(e,Math.min(t,n))}function lS(n,e){return(n%e+e)%e}function Rg(n,e,t){return(1-t)*n+t*e}function oo(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function on(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const pu={DEG2RAD:fu,RAD2DEG:Uf,generateUUID:qo,clamp:Kt,euclideanModulo:lS,mapLinear:function _J(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},inverseLerp:function vJ(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:Rg,damp:function yJ(n,e,t,i){return Rg(n,e,1-Math.exp(-t*i))},pingpong:function bJ(n,e=1){return e-Math.abs(lS(n,2*e)-e)},smoothstep:function xJ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function wJ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function MJ(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function CJ(n,e){return n+Math.random()*(e-n)},randFloatSpread:function EJ(n){return n*(.5-Math.random())},seededRandom:function SJ(n){void 0!==n&&(IN=n);let e=IN+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function TJ(n){return n*fu},radToDeg:function DJ(n){return n*Uf},isPowerOfTwo:function AJ(n){return 0==(n&n-1)&&0!==n},ceilPowerOfTwo:function IJ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},floorPowerOfTwo:function PJ(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},setQuaternionFromProperEuler:function RJ(n,e,t,i,r){const o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),d=o((e+i)/2),h=s((e+i)/2),f=o((e-i)/2),p=s((e-i)/2),g=o((i-e)/2),v=s((i-e)/2);switch(r){case"XYX":n.set(a*h,l*f,l*p,a*d);break;case"YZY":n.set(l*p,a*h,l*f,a*d);break;case"ZXZ":n.set(l*f,l*p,a*h,a*d);break;case"XZX":n.set(a*h,l*v,l*g,a*d);break;case"YXY":n.set(l*g,a*h,l*v,a*d);break;case"ZYZ":n.set(l*v,l*g,a*h,a*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:on,denormalize:oo};class Ce{constructor(e=0,t=0){Ce.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Kt(this.x,e.x,t.x),this.y=Kt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Kt(this.x,e,t),this.y=Kt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Kt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Kt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class sn{constructor(e,t,i,r,o,s,a,l,d){sn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,o,s,a,l,d)}set(e,t,i,r,o,s,a,l,d){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=o,h[5]=l,h[6]=i,h[7]=s,h[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],l=i[6],d=i[1],h=i[4],f=i[7],p=i[2],g=i[5],v=i[8],w=r[0],x=r[3],y=r[6],E=r[1],D=r[4],I=r[7],z=r[2],U=r[5],W=r[8];return o[0]=s*w+a*E+l*z,o[3]=s*x+a*D+l*U,o[6]=s*y+a*I+l*W,o[1]=d*w+h*E+f*z,o[4]=d*x+h*D+f*U,o[7]=d*y+h*I+f*W,o[2]=p*w+g*E+v*z,o[5]=p*x+g*D+v*U,o[8]=p*y+g*I+v*W,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],d=e[7],h=e[8];return t*s*h-t*a*d-i*o*h+i*a*l+r*o*d-r*s*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],d=e[7],h=e[8],f=h*s-a*d,p=a*l-h*o,g=d*o-s*l,v=t*f+i*p+r*g;if(0===v)return this.set(0,0,0,0,0,0,0,0,0);const w=1/v;return e[0]=f*w,e[1]=(r*d-h*i)*w,e[2]=(a*i-r*s)*w,e[3]=p*w,e[4]=(h*t-r*l)*w,e[5]=(r*o-a*t)*w,e[6]=g*w,e[7]=(i*l-d*t)*w,e[8]=(s*t-i*o)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){const l=Math.cos(o),d=Math.sin(o);return this.set(i*l,i*d,-i*(l*s+d*a)+s+e,-r*d,r*l,-r*(-d*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(cS.makeScale(e,t)),this}rotate(e){return this.premultiply(cS.makeRotation(-e)),this}translate(e,t){return this.premultiply(cS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const cS=new sn;function PN(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Lg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function OJ(){const n=Lg("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const RN={};function gb(n){n in RN||(RN[n]=!0,console.warn(n))}const LN=(new sn).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ON=(new sn).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function BJ(){const n={enabled:!0,workingColorSpace:Nf,spaces:{},convert:function(r,o,s){return!1===this.enabled||o===s||!o||!s||(this.spaces[o].transfer===Xn&&(r.r=Dl(r.r),r.g=Dl(r.g),r.b=Dl(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Xn&&(r.r=Vf(r.r),r.g=Vf(r.g),r.b=Vf(r.b))),r},fromWorkingColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},toWorkingColorSpace:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return""===r?fb:this.spaces[r].transfer},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Nf]:{primaries:e,whitePoint:i,transfer:fb,toXYZ:LN,fromXYZ:ON,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Do},outputColorSpaceConfig:{drawingBufferColorSpace:Do}},[Do]:{primaries:e,whitePoint:i,transfer:Xn,toXYZ:LN,fromXYZ:ON,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Do}}}),n}const In=BJ();function Dl(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Vf(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Hf;class UJ{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{void 0===Hf&&(Hf=Lg("canvas")),Hf.width=e.width,Hf.height=e.height;const r=Hf.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Hf}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Lg("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=255*Dl(o[s]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Dl(t[i]/255)):Dl(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let zJ=0;class mu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:zJ++}),this.uuid=qo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)o.push(dS(r[s].isDataTexture?r[s].image:r[s]))}else o=dS(r);i.url=o}return t||(e.images[this.uuid]=i),i}}function dS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?UJ.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let VJ=0,Ao=(()=>{class n extends Tl{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Xs,o=Xs,s=vr,a=Sl,l=To,d=Ba,h=n.DEFAULT_ANISOTROPY,f=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:VJ++}),this.uuid=qo(),this.name="",this.source=new mu(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=d,this.offset=new Ce(0,0),this.repeat=new Ce(1,1),this.center=new Ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new sn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isTextureArray=t.isTextureArray,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case Xs:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case Xs:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class On{constructor(e=0,t=0,i=0,r=1){On.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o;const l=e.elements,d=l[0],h=l[4],f=l[8],p=l[1],g=l[5],v=l[9],w=l[2],x=l[6],y=l[10];if(Math.abs(h-p)<.01&&Math.abs(f-w)<.01&&Math.abs(v-x)<.01){if(Math.abs(h+p)<.1&&Math.abs(f+w)<.1&&Math.abs(v+x)<.1&&Math.abs(d+g+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(d+1)/2,I=(g+1)/2,z=(y+1)/2,U=(h+p)/4,W=(f+w)/4,Z=(v+x)/4;return D>I&&D>z?D<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(D),r=U/i,o=W/i):I>z?I<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(I),i=U/r,o=Z/r):z<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(z),i=W/o,r=Z/o),this.set(i,r,o,t),this}let E=Math.sqrt((x-v)*(x-v)+(f-w)*(f-w)+(p-h)*(p-h));return Math.abs(E)<.001&&(E=1),this.x=(x-v)/E,this.y=(f-w)/E,this.z=(p-h)/E,this.w=Math.acos((d+g+y-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Kt(this.x,e.x,t.x),this.y=Kt(this.y,e.y,t.y),this.z=Kt(this.z,e.z,t.z),this.w=Kt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Kt(this.x,e,t),this.y=Kt(this.y,e,t),this.z=Kt(this.z,e,t),this.w=Kt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Kt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class uS extends Tl{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new On(0,0,e,t),this.scissorTest=!1,this.viewport=new On(0,0,e,t);const r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:vr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);const o=new Ao(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];const s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new mu(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Al extends uS{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class _b extends Ao{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=kr,this.minFilter=kr,this.wrapR=Xs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class hS extends Ao{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=kr,this.minFilter=kr,this.wrapR=Xs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class so{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let l=i[r+0],d=i[r+1],h=i[r+2],f=i[r+3];const p=o[s+0],g=o[s+1],v=o[s+2],w=o[s+3];if(0===a)return e[t+0]=l,e[t+1]=d,e[t+2]=h,void(e[t+3]=f);if(1===a)return e[t+0]=p,e[t+1]=g,e[t+2]=v,void(e[t+3]=w);if(f!==w||l!==p||d!==g||h!==v){let x=1-a;const y=l*p+d*g+h*v+f*w,E=y>=0?1:-1,D=1-y*y;if(D>Number.EPSILON){const z=Math.sqrt(D),U=Math.atan2(z,y*E);x=Math.sin(x*U)/z,a=Math.sin(a*U)/z}const I=a*E;if(l=l*x+p*I,d=d*x+g*I,h=h*x+v*I,f=f*x+w*I,x===1-a){const z=1/Math.sqrt(l*l+d*d+h*h+f*f);l*=z,d*=z,h*=z,f*=z}}e[t]=l,e[t+1]=d,e[t+2]=h,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,o,s){const a=i[r],l=i[r+1],d=i[r+2],h=i[r+3],f=o[s],p=o[s+1],g=o[s+2],v=o[s+3];return e[t]=a*v+h*f+l*g-d*p,e[t+1]=l*v+h*p+d*f-a*g,e[t+2]=d*v+h*g+a*p-l*f,e[t+3]=h*v-a*f-l*p-d*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,d=a(i/2),h=a(r/2),f=a(o/2),p=l(i/2),g=l(r/2),v=l(o/2);switch(s){case"XYZ":this._x=p*h*f+d*g*v,this._y=d*g*f-p*h*v,this._z=d*h*v+p*g*f,this._w=d*h*f-p*g*v;break;case"YXZ":this._x=p*h*f+d*g*v,this._y=d*g*f-p*h*v,this._z=d*h*v-p*g*f,this._w=d*h*f+p*g*v;break;case"ZXY":this._x=p*h*f-d*g*v,this._y=d*g*f+p*h*v,this._z=d*h*v+p*g*f,this._w=d*h*f-p*g*v;break;case"ZYX":this._x=p*h*f-d*g*v,this._y=d*g*f+p*h*v,this._z=d*h*v-p*g*f,this._w=d*h*f+p*g*v;break;case"YZX":this._x=p*h*f+d*g*v,this._y=d*g*f+p*h*v,this._z=d*h*v-p*g*f,this._w=d*h*f-p*g*v;break;case"XZY":this._x=p*h*f-d*g*v,this._y=d*g*f-p*h*v,this._z=d*h*v+p*g*f,this._w=d*h*f+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],l=t[9],d=t[2],h=t[6],f=t[10],p=i+a+f;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(h-l)*g,this._y=(o-d)*g,this._z=(s-r)*g}else if(i>a&&i>f){const g=2*Math.sqrt(1+i-a-f);this._w=(h-l)/g,this._x=.25*g,this._y=(r+s)/g,this._z=(o+d)/g}else if(a>f){const g=2*Math.sqrt(1+a-i-f);this._w=(o-d)/g,this._x=(r+s)/g,this._y=.25*g,this._z=(l+h)/g}else{const g=2*Math.sqrt(1+f-i-a);this._w=(s-r)/g,this._x=(o+d)/g,this._y=(l+h)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Kt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,l=t._y,d=t._z,h=t._w;return this._x=i*h+s*a+r*d-o*l,this._y=r*h+s*l+o*a-i*d,this._z=o*h+s*d+i*l-r*a,this._w=s*h-i*a-r*l-o*d,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,o=this._z,s=this._w;let a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*s+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*o+t*this._z,this.normalize(),this}const d=Math.sqrt(l),h=Math.atan2(d,a),f=Math.sin((1-t)*h)/d,p=Math.sin(t*h)/d;return this._w=s*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=o*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ${constructor(e=0,t=0,i=0){$.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(kN.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(kN.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,d=2*(s*r-a*i),h=2*(a*t-o*r),f=2*(o*i-s*t);return this.x=t+l*d+s*f-a*h,this.y=i+l*h+a*d-o*f,this.z=r+l*f+o*h-s*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Kt(this.x,e.x,t.x),this.y=Kt(this.y,e.y,t.y),this.z=Kt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Kt(this.x,e,t),this.y=Kt(this.y,e,t),this.z=Kt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Kt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return fS.copy(this).projectOnVector(e),this.sub(fS)}reflect(e){return this.sub(fS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Kt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const fS=new $,kN=new so;class ao{constructor(e=new $(1/0,1/0,1/0),t=new $(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ks.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ks.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ks.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const o=i.getAttribute("position");if(!0===t&&void 0!==o&&!0!==e.isInstancedMesh)for(let s=0,a=o.count;s<a;s++)!0===e.isMesh?e.getVertexPosition(s,Ks):Ks.fromBufferAttribute(o,s),Ks.applyMatrix4(e.matrixWorld),this.expandByPoint(Ks);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),vb.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),vb.copy(i.boundingBox)),vb.applyMatrix4(e.matrixWorld),this.union(vb)}const r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ks),Ks.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Og),yb.subVectors(this.max,Og),Gf.subVectors(e.a,Og),jf.subVectors(e.b,Og),Wf.subVectors(e.c,Og),Hc.subVectors(jf,Gf),Gc.subVectors(Wf,jf),gu.subVectors(Gf,Wf);let t=[0,-Hc.z,Hc.y,0,-Gc.z,Gc.y,0,-gu.z,gu.y,Hc.z,0,-Hc.x,Gc.z,0,-Gc.x,gu.z,0,-gu.x,-Hc.y,Hc.x,0,-Gc.y,Gc.x,0,-gu.y,gu.x,0];return!(!pS(t,Gf,jf,Wf,yb)||(t=[1,0,0,0,1,0,0,0,1],!pS(t,Gf,jf,Wf,yb)))&&(bb.crossVectors(Hc,Gc),t=[bb.x,bb.y,bb.z],pS(t,Gf,jf,Wf,yb))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ks).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Ks).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Il[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Il[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Il[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Il[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Il[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Il[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Il[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Il[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Il)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Il=[new $,new $,new $,new $,new $,new $,new $,new $],Ks=new $,vb=new ao,Gf=new $,jf=new $,Wf=new $,Hc=new $,Gc=new $,gu=new $,Og=new $,yb=new $,bb=new $,_u=new $;function pS(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){_u.fromArray(n,o);const a=r.x*Math.abs(_u.x)+r.y*Math.abs(_u.y)+r.z*Math.abs(_u.z),l=e.dot(_u),d=t.dot(_u),h=i.dot(_u);if(Math.max(-Math.max(l,d,h),Math.min(l,d,h))>a)return!1}return!0}const HJ=new ao,kg=new $,mS=new $;class Nr{constructor(e=new $,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):HJ.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;kg.subVectors(e,this.center);const t=kg.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(kg,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(mS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(kg.copy(e.center).add(mS)),this.expandByPoint(kg.copy(e.center).sub(mS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Pl=new $,gS=new $,xb=new $,jc=new $,_S=new $,wb=new $,vS=new $;class $f{constructor(e=new $,t=new $(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Pl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Pl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Pl.copy(this.origin).addScaledVector(this.direction,t),Pl.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){gS.copy(e).add(t).multiplyScalar(.5),xb.copy(t).sub(e).normalize(),jc.copy(this.origin).sub(gS);const o=.5*e.distanceTo(t),s=-this.direction.dot(xb),a=jc.dot(this.direction),l=-jc.dot(xb),d=jc.lengthSq(),h=Math.abs(1-s*s);let f,p,g,v;if(h>0)if(f=s*l-a,p=s*a-l,v=o*h,f>=0)if(p>=-v)if(p<=v){const w=1/h;f*=w,p*=w,g=f*(f+s*p+2*a)+p*(s*f+p+2*l)+d}else p=o,f=Math.max(0,-(s*p+a)),g=-f*f+p*(p+2*l)+d;else p=-o,f=Math.max(0,-(s*p+a)),g=-f*f+p*(p+2*l)+d;else p<=-v?(f=Math.max(0,-(-s*o+a)),p=f>0?-o:Math.min(Math.max(-o,-l),o),g=-f*f+p*(p+2*l)+d):p<=v?(f=0,p=Math.min(Math.max(-o,-l),o),g=p*(p+2*l)+d):(f=Math.max(0,-(s*o+a)),p=f>0?o:Math.min(Math.max(-o,-l),o),g=-f*f+p*(p+2*l)+d);else p=s>0?-o:o,f=Math.max(0,-(s*p+a)),g=-f*f+p*(p+2*l)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(gS).addScaledVector(xb,p),g}intersectSphere(e,t){Pl.subVectors(e.center,this.origin);const i=Pl.dot(this.direction),r=Pl.dot(Pl)-i*i,o=e.radius*e.radius;if(r>o)return null;const s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,l;const d=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,p=this.origin;return d>=0?(i=(e.min.x-p.x)*d,r=(e.max.x-p.x)*d):(i=(e.max.x-p.x)*d,r=(e.min.x-p.x)*d),h>=0?(o=(e.min.y-p.y)*h,s=(e.max.y-p.y)*h):(o=(e.max.y-p.y)*h,s=(e.min.y-p.y)*h),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Pl)}intersectTriangle(e,t,i,r,o){_S.subVectors(t,e),wb.subVectors(i,e),vS.crossVectors(_S,wb);let a,s=this.direction.dot(vS);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}jc.subVectors(this.origin,e);const l=a*this.direction.dot(wb.crossVectors(jc,wb));if(l<0)return null;const d=a*this.direction.dot(_S.cross(jc));if(d<0||l+d>s)return null;const h=-a*jc.dot(vS);return h<0?null:this.at(h/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Gt{constructor(e,t,i,r,o,s,a,l,d,h,f,p,g,v,w,x){Gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,o,s,a,l,d,h,f,p,g,v,w,x)}set(e,t,i,r,o,s,a,l,d,h,f,p,g,v,w,x){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=o,y[5]=s,y[9]=a,y[13]=l,y[2]=d,y[6]=h,y[10]=f,y[14]=p,y[3]=g,y[7]=v,y[11]=w,y[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Gt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/qf.setFromMatrixColumn(e,0).length(),o=1/qf.setFromMatrixColumn(e,1).length(),s=1/qf.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),d=Math.sin(r),h=Math.cos(o),f=Math.sin(o);if("XYZ"===e.order){const p=s*h,g=s*f,v=a*h,w=a*f;t[0]=l*h,t[4]=-l*f,t[8]=d,t[1]=g+v*d,t[5]=p-w*d,t[9]=-a*l,t[2]=w-p*d,t[6]=v+g*d,t[10]=s*l}else if("YXZ"===e.order){const p=l*h,g=l*f,v=d*h,w=d*f;t[0]=p+w*a,t[4]=v*a-g,t[8]=s*d,t[1]=s*f,t[5]=s*h,t[9]=-a,t[2]=g*a-v,t[6]=w+p*a,t[10]=s*l}else if("ZXY"===e.order){const p=l*h,g=l*f,v=d*h,w=d*f;t[0]=p-w*a,t[4]=-s*f,t[8]=v+g*a,t[1]=g+v*a,t[5]=s*h,t[9]=w-p*a,t[2]=-s*d,t[6]=a,t[10]=s*l}else if("ZYX"===e.order){const p=s*h,g=s*f,v=a*h,w=a*f;t[0]=l*h,t[4]=v*d-g,t[8]=p*d+w,t[1]=l*f,t[5]=w*d+p,t[9]=g*d-v,t[2]=-d,t[6]=a*l,t[10]=s*l}else if("YZX"===e.order){const p=s*l,g=s*d,v=a*l,w=a*d;t[0]=l*h,t[4]=w-p*f,t[8]=v*f+g,t[1]=f,t[5]=s*h,t[9]=-a*h,t[2]=-d*h,t[6]=g*f+v,t[10]=p-w*f}else if("XZY"===e.order){const p=s*l,g=s*d,v=a*l,w=a*d;t[0]=l*h,t[4]=-f,t[8]=d*h,t[1]=p*f+w,t[5]=s*h,t[9]=g*f-v,t[2]=v*f-g,t[6]=a*h,t[10]=w*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(GJ,e,jJ)}lookAt(e,t,i){const r=this.elements;return Zo.subVectors(e,t),0===Zo.lengthSq()&&(Zo.z=1),Zo.normalize(),Wc.crossVectors(i,Zo),0===Wc.lengthSq()&&(1===Math.abs(i.z)?Zo.x+=1e-4:Zo.z+=1e-4,Zo.normalize(),Wc.crossVectors(i,Zo)),Wc.normalize(),Mb.crossVectors(Zo,Wc),r[0]=Wc.x,r[4]=Mb.x,r[8]=Zo.x,r[1]=Wc.y,r[5]=Mb.y,r[9]=Zo.y,r[2]=Wc.z,r[6]=Mb.z,r[10]=Zo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],l=i[8],d=i[12],h=i[1],f=i[5],p=i[9],g=i[13],v=i[2],w=i[6],x=i[10],y=i[14],E=i[3],D=i[7],I=i[11],z=i[15],U=r[0],W=r[4],Z=r[8],F=r[12],O=r[1],Y=r[5],pe=r[9],fe=r[13],be=r[2],Ee=r[6],te=r[10],me=r[14],re=r[3],Te=r[7],We=r[11],rt=r[15];return o[0]=s*U+a*O+l*be+d*re,o[4]=s*W+a*Y+l*Ee+d*Te,o[8]=s*Z+a*pe+l*te+d*We,o[12]=s*F+a*fe+l*me+d*rt,o[1]=h*U+f*O+p*be+g*re,o[5]=h*W+f*Y+p*Ee+g*Te,o[9]=h*Z+f*pe+p*te+g*We,o[13]=h*F+f*fe+p*me+g*rt,o[2]=v*U+w*O+x*be+y*re,o[6]=v*W+w*Y+x*Ee+y*Te,o[10]=v*Z+w*pe+x*te+y*We,o[14]=v*F+w*fe+x*me+y*rt,o[3]=E*U+D*O+I*be+z*re,o[7]=E*W+D*Y+I*Ee+z*Te,o[11]=E*Z+D*pe+I*te+z*We,o[15]=E*F+D*fe+I*me+z*rt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],d=e[13],h=e[2],f=e[6],p=e[10],g=e[14];return e[3]*(+o*l*f-r*d*f-o*a*p+i*d*p+r*a*g-i*l*g)+e[7]*(+t*l*g-t*d*p+o*s*p-r*s*g+r*d*h-o*l*h)+e[11]*(+t*d*f-t*a*g-o*s*f+i*s*g+o*a*h-i*d*h)+e[15]*(-r*a*h-t*l*f+t*a*p+r*s*f-i*s*p+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],d=e[7],h=e[8],f=e[9],p=e[10],g=e[11],v=e[12],w=e[13],x=e[14],y=e[15],E=f*x*d-w*p*d+w*l*g-a*x*g-f*l*y+a*p*y,D=v*p*d-h*x*d-v*l*g+s*x*g+h*l*y-s*p*y,I=h*w*d-v*f*d+v*a*g-s*w*g-h*a*y+s*f*y,z=v*f*l-h*w*l-v*a*p+s*w*p+h*a*x-s*f*x,U=t*E+i*D+r*I+o*z;if(0===U)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const W=1/U;return e[0]=E*W,e[1]=(w*p*o-f*x*o-w*r*g+i*x*g+f*r*y-i*p*y)*W,e[2]=(a*x*o-w*l*o+w*r*d-i*x*d-a*r*y+i*l*y)*W,e[3]=(f*l*o-a*p*o-f*r*d+i*p*d+a*r*g-i*l*g)*W,e[4]=D*W,e[5]=(h*x*o-v*p*o+v*r*g-t*x*g-h*r*y+t*p*y)*W,e[6]=(v*l*o-s*x*o-v*r*d+t*x*d+s*r*y-t*l*y)*W,e[7]=(s*p*o-h*l*o+h*r*d-t*p*d-s*r*g+t*l*g)*W,e[8]=I*W,e[9]=(v*f*o-h*w*o-v*i*g+t*w*g+h*i*y-t*f*y)*W,e[10]=(s*w*o-v*a*o+v*i*d-t*w*d-s*i*y+t*a*y)*W,e[11]=(h*a*o-s*f*o-h*i*d+t*f*d+s*i*g-t*a*g)*W,e[12]=z*W,e[13]=(h*w*r-v*f*r+v*i*p-t*w*p-h*i*x+t*f*x)*W,e[14]=(v*a*r-s*w*r-v*i*l+t*w*l+s*i*x-t*a*x)*W,e[15]=(s*f*r-h*a*r+h*i*l-t*f*l-s*i*p+t*a*p)*W,this}scale(e){const t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,l=e.z,d=o*s,h=o*a;return this.set(d*s+i,d*a-r*l,d*l+r*a,0,d*a+r*l,h*a+i,h*l-r*s,0,d*l-r*a,h*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,d=o+o,h=s+s,f=a+a,p=o*d,g=o*h,v=o*f,w=s*h,x=s*f,y=a*f,E=l*d,D=l*h,I=l*f,z=i.x,U=i.y,W=i.z;return r[0]=(1-(w+y))*z,r[1]=(g+I)*z,r[2]=(v-D)*z,r[3]=0,r[4]=(g-I)*U,r[5]=(1-(p+y))*U,r[6]=(x+E)*U,r[7]=0,r[8]=(v+D)*W,r[9]=(x-E)*W,r[10]=(1-(p+w))*W,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let o=qf.set(r[0],r[1],r[2]).length();const s=qf.set(r[4],r[5],r[6]).length(),a=qf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Qs.copy(this);const d=1/o,h=1/s,f=1/a;return Qs.elements[0]*=d,Qs.elements[1]*=d,Qs.elements[2]*=d,Qs.elements[4]*=h,Qs.elements[5]*=h,Qs.elements[6]*=h,Qs.elements[8]*=f,Qs.elements[9]*=f,Qs.elements[10]*=f,t.setFromRotationMatrix(Qs),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=Ys){const l=this.elements,d=2*o/(t-e),h=2*o/(i-r),f=(t+e)/(t-e),p=(i+r)/(i-r);let g,v;if(a===Ys)g=-(s+o)/(s-o),v=-2*s*o/(s-o);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);g=-s/(s-o),v=-s*o/(s-o)}return l[0]=d,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=Ys){const l=this.elements,d=1/(t-e),h=1/(i-r),f=1/(s-o),p=(t+e)*d,g=(i+r)*h;let v,w;if(a===Ys)v=(s+o)*f,w=-2*f;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);v=o*f,w=-1*f}return l[0]=2*d,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=w,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const qf=new $,Qs=new Gt,GJ=new $(0,0,0),jJ=new $(1,1,1),Wc=new $,Mb=new $,Zo=new $,FN=new Gt,NN=new so;let Rl=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const o=t.elements,s=o[0],a=o[4],l=o[8],d=o[1],h=o[5],f=o[9],p=o[2],g=o[6],v=o[10];switch(i){case"XYZ":this._y=Math.asin(Kt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,v),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(g,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Kt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(d,h)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(Kt(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-Kt(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(Kt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-Kt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,h),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-f,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return FN.makeRotationFromQuaternion(t),this.setFromRotationMatrix(FN,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return NN.setFromEuler(this),this.setFromQuaternion(NN,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class yS{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let WJ=0;const BN=new $,Zf=new so,Ll=new Gt,Cb=new $,Fg=new $,$J=new $,qJ=new so,UN=new $(1,0,0),zN=new $(0,1,0),VN=new $(0,0,1),HN={type:"added"},ZJ={type:"removed"},Xf={type:"childadded",child:null},bS={type:"childremoved",child:null};let pi=(()=>{class n extends Tl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:WJ++}),this.uuid=qo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new $,i=new Rl,r=new so,o=new $(1,1,1);i._onChange(function s(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Gt},normalMatrix:{value:new sn}}),this.matrix=new Gt,this.matrixWorld=new Gt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new yS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Zf.setFromAxisAngle(t,i),this.quaternion.multiply(Zf),this}rotateOnWorldAxis(t,i){return Zf.setFromAxisAngle(t,i),this.quaternion.premultiply(Zf),this}rotateX(t){return this.rotateOnAxis(UN,t)}rotateY(t){return this.rotateOnAxis(zN,t)}rotateZ(t){return this.rotateOnAxis(VN,t)}translateOnAxis(t,i){return BN.copy(t).applyQuaternion(this.quaternion),this.position.add(BN.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(UN,t)}translateY(t){return this.translateOnAxis(zN,t)}translateZ(t){return this.translateOnAxis(VN,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ll.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Cb.copy(t):Cb.set(t,i,r);const o=this.parent;this.updateWorldMatrix(!0,!1),Fg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ll.lookAt(Fg,Cb,this.up):Ll.lookAt(Cb,Fg,this.up),this.quaternion.setFromRotationMatrix(Ll),o&&(Ll.extractRotation(o.matrixWorld),Zf.setFromRotationMatrix(Ll),this.quaternion.premultiply(Zf.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(HN),Xf.child=t,this.dispatchEvent(Xf),Xf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(ZJ),bS.child=t,this.dispatchEvent(bS),bS.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ll.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ll.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ll),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(HN),Xf.child=t,this.dispatchEvent(Xf),Xf.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);const o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fg,t,$J),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fg,qJ,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===i){const o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};function s(l,d){return void 0===l[d.uuid]&&(l[d.uuid]=d.toJSON(t)),d.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),o.instanceInfo=this._instanceInfo.map(l=>({...l})),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(t),o.indirectTexture=this._indirectTexture.toJSON(t),null!==this._colorsTexture&&(o.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(o.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),null!==this.boundingBox&&(o.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const d=l.shapes;if(Array.isArray(d))for(let h=0,f=d.length;h<f;h++)s(t.shapes,d[h]);else s(t.shapes,d)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let d=0,h=this.material.length;d<h;d++)l.push(s(t.materials,this.material[d]));o.material=l}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++)o.animations.push(s(t.animations,this.animations[l]))}if(i){const l=a(t.geometries),d=a(t.materials),h=a(t.textures),f=a(t.images),p=a(t.shapes),g=a(t.skeletons),v=a(t.animations),w=a(t.nodes);l.length>0&&(r.geometries=l),d.length>0&&(r.materials=d),h.length>0&&(r.textures=h),f.length>0&&(r.images=f),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),v.length>0&&(r.animations=v),w.length>0&&(r.nodes=w)}return r.object=o,r;function a(l){const d=[];for(const h in l){const f=l[h];delete f.metadata,d.push(f)}return d}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new $(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const Js=new $,Ol=new $,xS=new $,kl=new $,Yf=new $,Kf=new $,GN=new $,wS=new $,MS=new $,CS=new $,ES=new On,SS=new On,TS=new On;class Xo{constructor(e=new $,t=new $,i=new $){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Js.subVectors(e,t),r.cross(Js);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){Js.subVectors(r,t),Ol.subVectors(i,t),xS.subVectors(e,t);const s=Js.dot(Js),a=Js.dot(Ol),l=Js.dot(xS),d=Ol.dot(Ol),h=Ol.dot(xS),f=s*d-a*a;if(0===f)return o.set(0,0,0),null;const p=1/f,g=(d*l-a*h)*p,v=(s*h-a*l)*p;return o.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return null!==this.getBarycoord(e,t,i,r,kl)&&kl.x>=0&&kl.y>=0&&kl.x+kl.y<=1}static getInterpolation(e,t,i,r,o,s,a,l){return null===this.getBarycoord(e,t,i,r,kl)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,kl.x),l.addScaledVector(s,kl.y),l.addScaledVector(a,kl.z),l)}static getInterpolatedAttribute(e,t,i,r,o,s){return ES.setScalar(0),SS.setScalar(0),TS.setScalar(0),ES.fromBufferAttribute(e,t),SS.fromBufferAttribute(e,i),TS.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(ES,o.x),s.addScaledVector(SS,o.y),s.addScaledVector(TS,o.z),s}static isFrontFacing(e,t,i,r){return Js.subVectors(i,t),Ol.subVectors(e,t),Js.cross(Ol).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Js.subVectors(this.c,this.b),Ol.subVectors(this.a,this.b),.5*Js.cross(Ol).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Xo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Xo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,o){return Xo.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return Xo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Xo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,o=this.c;let s,a;Yf.subVectors(r,i),Kf.subVectors(o,i),wS.subVectors(e,i);const l=Yf.dot(wS),d=Kf.dot(wS);if(l<=0&&d<=0)return t.copy(i);MS.subVectors(e,r);const h=Yf.dot(MS),f=Kf.dot(MS);if(h>=0&&f<=h)return t.copy(r);const p=l*f-h*d;if(p<=0&&l>=0&&h<=0)return s=l/(l-h),t.copy(i).addScaledVector(Yf,s);CS.subVectors(e,o);const g=Yf.dot(CS),v=Kf.dot(CS);if(v>=0&&g<=v)return t.copy(o);const w=g*d-l*v;if(w<=0&&d>=0&&v<=0)return a=d/(d-v),t.copy(i).addScaledVector(Kf,a);const x=h*v-g*f;if(x<=0&&f-h>=0&&g-v>=0)return GN.subVectors(o,r),a=(f-h)/(f-h+(g-v)),t.copy(r).addScaledVector(GN,a);const y=1/(x+w+p);return s=w*y,a=p*y,t.copy(i).addScaledVector(Yf,s).addScaledVector(Kf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const jN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$c={h:0,s:0,l:0},Eb={h:0,s:0,l:0};function DS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class at{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Do){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,In.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=In.workingColorSpace){return this.r=e,this.g=t,this.b=i,In.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=In.workingColorSpace){if(e=lS(e,1),t=Kt(t,0,1),i=Kt(i,0,1),0===t)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=DS(s,o,e+1/3),this.g=DS(s,o,e),this.b=DS(s,o,e-1/3)}return In.toWorkingColorSpace(this,r),this}setStyle(e,t=Do){function i(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],s=o.length;if(3===s)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(6===s)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Do){const i=jN[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Dl(e.r),this.g=Dl(e.g),this.b=Dl(e.b),this}copyLinearToSRGB(e){return this.r=Vf(e.r),this.g=Vf(e.g),this.b=Vf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Do){return In.fromWorkingColorSpace(Br.copy(this),e),65536*Math.round(Kt(255*Br.r,0,255))+256*Math.round(Kt(255*Br.g,0,255))+Math.round(Kt(255*Br.b,0,255))}getHexString(e=Do){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=In.workingColorSpace){In.fromWorkingColorSpace(Br.copy(this),t);const i=Br.r,r=Br.g,o=Br.b,s=Math.max(i,r,o),a=Math.min(i,r,o);let l,d;const h=(a+s)/2;if(a===s)l=0,d=0;else{const f=s-a;switch(d=h<=.5?f/(s+a):f/(2-s-a),s){case i:l=(r-o)/f+(r<o?6:0);break;case r:l=(o-i)/f+2;break;case o:l=(i-r)/f+4}l/=6}return e.h=l,e.s=d,e.l=h,e}getRGB(e,t=In.workingColorSpace){return In.fromWorkingColorSpace(Br.copy(this),t),e.r=Br.r,e.g=Br.g,e.b=Br.b,e}getStyle(e=Do){In.fromWorkingColorSpace(Br.copy(this),e);const t=Br.r,i=Br.g,r=Br.b;return e!==Do?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL($c),this.setHSL($c.h+e,$c.s+t,$c.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL($c),e.getHSL(Eb);const i=Rg($c.h,Eb.h,t),r=Rg($c.s,Eb.s,t),o=Rg($c.l,Eb.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Br=new at;at.NAMES=jN;let XJ=0;class lo extends Tl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:XJ++}),this.uuid=qo(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new at(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Bf,this.stencilZFail=Bf,this.stencilZPass=Bf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Bf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Bf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Bf&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class ea extends lo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Rl,this.combine=Jy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const tr=new $,Sb=new Ce;let KJ=0;class jn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:KJ++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRanges=[],this.gpuType=$o,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Sb.fromBufferAttribute(this,t),Sb.applyMatrix3(e),this.setXY(t,Sb.x,Sb.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)tr.fromBufferAttribute(this,t),tr.applyMatrix3(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)tr.fromBufferAttribute(this,t),tr.applyMatrix4(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)tr.fromBufferAttribute(this,t),tr.applyNormalMatrix(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)tr.fromBufferAttribute(this,t),tr.transformDirection(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=oo(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=on(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=oo(t,this.array)),t}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=oo(t,this.array)),t}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=oo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=oo(t,this.array)),t}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array),o=on(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class WN extends jn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class $N extends jn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class gt extends jn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let QJ=0;const ws=new Gt,AS=new pi,Qf=new $,Yo=new ao,Bg=new ao,yr=new $;class jt extends Tl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:QJ++}),this.uuid=qo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(PN(e)?$N:WN)(e,1):e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const o=(new sn).getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ws.makeRotationFromQuaternion(e),this.applyMatrix4(ws),this}rotateX(e){return ws.makeRotationX(e),this.applyMatrix4(ws),this}rotateY(e){return ws.makeRotationY(e),this.applyMatrix4(ws),this}rotateZ(e){return ws.makeRotationZ(e),this.applyMatrix4(ws),this}translate(e,t,i){return ws.makeTranslation(e,t,i),this.applyMatrix4(ws),this}scale(e,t,i){return ws.makeScale(e,t,i),this.applyMatrix4(ws),this}lookAt(e){return AS.lookAt(e),AS.updateMatrix(),this.applyMatrix4(AS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qf).negate(),this.translate(Qf.x,Qf.y,Qf.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const i=[];for(let r=0,o=e.length;r<o;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new gt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const o=e[r];t.setXYZ(r,o.x,o.y,o.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ao);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new $(-1/0,-1/0,-1/0),new $(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Yo.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(yr.addVectors(this.boundingBox.min,Yo.min),this.boundingBox.expandByPoint(yr),yr.addVectors(this.boundingBox.max,Yo.max),this.boundingBox.expandByPoint(yr)):(this.boundingBox.expandByPoint(Yo.min),this.boundingBox.expandByPoint(Yo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Nr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new $,1/0);if(e){const i=this.boundingSphere.center;if(Yo.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++)Bg.setFromBufferAttribute(t[o]),this.morphTargetsRelative?(yr.addVectors(Yo.min,Bg.min),Yo.expandByPoint(yr),yr.addVectors(Yo.max,Bg.max),Yo.expandByPoint(yr)):(Yo.expandByPoint(Bg.min),Yo.expandByPoint(Bg.max));Yo.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)yr.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(yr));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],l=this.morphTargetsRelative;for(let d=0,h=a.count;d<h;d++)yr.fromBufferAttribute(a,d),l&&(Qf.fromBufferAttribute(e,d),yr.add(Qf)),r=Math.max(r,i.distanceToSquared(yr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,r=t.normal,o=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new jn(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),a=[],l=[];for(let Z=0;Z<i.count;Z++)a[Z]=new $,l[Z]=new $;const d=new $,h=new $,f=new $,p=new Ce,g=new Ce,v=new Ce,w=new $,x=new $;function y(Z,F,O){d.fromBufferAttribute(i,Z),h.fromBufferAttribute(i,F),f.fromBufferAttribute(i,O),p.fromBufferAttribute(o,Z),g.fromBufferAttribute(o,F),v.fromBufferAttribute(o,O),h.sub(d),f.sub(d),g.sub(p),v.sub(p);const Y=1/(g.x*v.y-v.x*g.y);isFinite(Y)&&(w.copy(h).multiplyScalar(v.y).addScaledVector(f,-g.y).multiplyScalar(Y),x.copy(f).multiplyScalar(g.x).addScaledVector(h,-v.x).multiplyScalar(Y),a[Z].add(w),a[F].add(w),a[O].add(w),l[Z].add(x),l[F].add(x),l[O].add(x))}let E=this.groups;0===E.length&&(E=[{start:0,count:e.count}]);for(let Z=0,F=E.length;Z<F;++Z){const O=E[Z],Y=O.start;for(let fe=Y,be=Y+O.count;fe<be;fe+=3)y(e.getX(fe+0),e.getX(fe+1),e.getX(fe+2))}const D=new $,I=new $,z=new $,U=new $;function W(Z){z.fromBufferAttribute(r,Z),U.copy(z);const F=a[Z];D.copy(F),D.sub(z.multiplyScalar(z.dot(F))).normalize(),I.crossVectors(U,F);const Y=I.dot(l[Z])<0?-1:1;s.setXYZW(Z,D.x,D.y,D.z,Y)}for(let Z=0,F=E.length;Z<F;++Z){const O=E[Z],Y=O.start;for(let fe=Y,be=Y+O.count;fe<be;fe+=3)W(e.getX(fe+0)),W(e.getX(fe+1)),W(e.getX(fe+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new jn(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);const r=new $,o=new $,s=new $,a=new $,l=new $,d=new $,h=new $,f=new $;if(e)for(let p=0,g=e.count;p<g;p+=3){const v=e.getX(p+0),w=e.getX(p+1),x=e.getX(p+2);r.fromBufferAttribute(t,v),o.fromBufferAttribute(t,w),s.fromBufferAttribute(t,x),h.subVectors(s,o),f.subVectors(r,o),h.cross(f),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,w),d.fromBufferAttribute(i,x),a.add(h),l.add(h),d.add(h),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(w,l.x,l.y,l.z),i.setXYZ(x,d.x,d.y,d.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),o.fromBufferAttribute(t,p+1),s.fromBufferAttribute(t,p+2),h.subVectors(s,o),f.subVectors(r,o),h.cross(f),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)yr.fromBufferAttribute(e,t),yr.normalize(),e.setXYZ(t,yr.x,yr.y,yr.z)}toNonIndexed(){function e(a,l){const d=a.array,h=a.itemSize,f=a.normalized,p=new d.constructor(l.length*h);let g=0,v=0;for(let w=0,x=l.length;w<x;w++){g=a.isInterleavedBufferAttribute?l[w]*a.data.stride+a.offset:l[w]*h;for(let y=0;y<h;y++)p[v++]=d[g++]}return new jn(p,h,f)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jt,i=this.index.array,r=this.attributes;for(const a in r){const d=e(r[a],i);t.setAttribute(a,d)}const o=this.morphAttributes;for(const a in o){const l=[],d=o[a];for(let h=0,f=d.length;h<f;h++){const g=e(d[h],i);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const d=s[a];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const d in l)void 0!==l[d]&&(e[d]=l[d]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let o=!1;for(const l in this.morphAttributes){const d=this.morphAttributes[l],h=[];for(let f=0,p=d.length;f<p;f++)h.push(d[f].toJSON(e.data));h.length>0&&(r[l]=h,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone());const r=e.attributes;for(const d in r)this.setAttribute(d,r[d].clone(t));const o=e.morphAttributes;for(const d in o){const h=[],f=o[d];for(let p=0,g=f.length;p<g;p++)h.push(f[p].clone(t));this.morphAttributes[d]=h}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let d=0,h=s.length;d<h;d++){const f=s[d];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const qN=new Gt,vu=new $f,Tb=new Nr,ZN=new $,Db=new $,Ab=new $,Ib=new $,IS=new $,Pb=new $,XN=new $,Rb=new $;class mi extends pi{constructor(e=new jt,t=new ea){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){const i=this.geometry,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(o&&a){Pb.set(0,0,0);for(let l=0,d=o.length;l<d;l++){const h=a[l];0!==h&&(IS.fromBufferAttribute(o[l],e),Pb.addScaledVector(s?IS:IS.sub(t),h))}t.add(Pb)}return t}raycast(e,t){const i=this.geometry,o=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),Tb.copy(i.boundingSphere),Tb.applyMatrix4(o),vu.copy(e.ray).recast(e.near),(!1!==Tb.containsPoint(vu.origin)||!(null===vu.intersectSphere(Tb,ZN)||vu.origin.distanceToSquared(ZN)>(e.far-e.near)**2))&&(qN.copy(o).invert(),vu.copy(e.ray).applyMatrix4(qN),(null===i.boundingBox||!1!==vu.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,vu)))}_computeIntersections(e,t,i){let r;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,d=o.attributes.uv,h=o.attributes.uv1,f=o.attributes.normal,p=o.groups,g=o.drawRange;if(null!==a)if(Array.isArray(s))for(let v=0,w=p.length;v<w;v++){const x=p[v],y=s[x.materialIndex];for(let I=Math.max(x.start,g.start),z=Math.min(a.count,Math.min(x.start+x.count,g.start+g.count));I<z;I+=3)r=Lb(this,y,e,i,d,h,f,a.getX(I),a.getX(I+1),a.getX(I+2)),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=x.materialIndex,t.push(r))}else for(let x=Math.max(0,g.start),y=Math.min(a.count,g.start+g.count);x<y;x+=3)r=Lb(this,s,e,i,d,h,f,a.getX(x),a.getX(x+1),a.getX(x+2)),r&&(r.faceIndex=Math.floor(x/3),t.push(r));else if(void 0!==l)if(Array.isArray(s))for(let v=0,w=p.length;v<w;v++){const x=p[v],y=s[x.materialIndex];for(let I=Math.max(x.start,g.start),z=Math.min(l.count,Math.min(x.start+x.count,g.start+g.count));I<z;I+=3)r=Lb(this,y,e,i,d,h,f,I,I+1,I+2),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=x.materialIndex,t.push(r))}else for(let x=Math.max(0,g.start),y=Math.min(l.count,g.start+g.count);x<y;x+=3)r=Lb(this,s,e,i,d,h,f,x,x+1,x+2),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}function Lb(n,e,t,i,r,o,s,a,l,d){n.getVertexPosition(a,Db),n.getVertexPosition(l,Ab),n.getVertexPosition(d,Ib);const h=function JJ(n,e,t,i,r,o,s,a){let l;if(l=1===e.side?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,0===e.side,a),null===l)return null;Rb.copy(a),Rb.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(Rb);return d<t.near||d>t.far?null:{distance:d,point:Rb.clone(),object:n}}(n,e,t,i,Db,Ab,Ib,XN);if(h){const f=new $;Xo.getBarycoord(XN,Db,Ab,Ib,f),r&&(h.uv=Xo.getInterpolatedAttribute(r,a,l,d,f,new Ce)),o&&(h.uv1=Xo.getInterpolatedAttribute(o,a,l,d,f,new Ce)),s&&(h.normal=Xo.getInterpolatedAttribute(s,a,l,d,f,new $),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const p={a,b:l,c:d,normal:new $,materialIndex:0};Xo.getNormal(Db,Ab,Ib,p.normal),h.face=p,h.barycoord=f}return h}class Jf extends jt{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};const a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);const l=[],d=[],h=[],f=[];let p=0,g=0;function v(w,x,y,E,D,I,z,U,W,Z,F){const O=I/W,Y=z/Z,pe=I/2,fe=z/2,be=U/2,Ee=W+1,te=Z+1;let me=0,re=0;const Te=new $;for(let We=0;We<te;We++){const rt=We*Y-fe;for(let Tt=0;Tt<Ee;Tt++)Te[w]=(Tt*O-pe)*E,Te[x]=rt*D,Te[y]=be,d.push(Te.x,Te.y,Te.z),Te[w]=0,Te[x]=0,Te[y]=U>0?1:-1,h.push(Te.x,Te.y,Te.z),f.push(Tt/W),f.push(1-We/Z),me+=1}for(let We=0;We<Z;We++)for(let rt=0;rt<W;rt++){const Qt=p+rt+Ee*(We+1),ye=p+(rt+1)+Ee*(We+1),$e=p+(rt+1)+Ee*We;l.push(p+rt+Ee*We,Qt,$e),l.push(Qt,ye,$e),re+=6}a.addGroup(g,re,F),g+=re,p+=me}v("z","y","x",-1,-1,i,t,e,s,o,0),v("z","y","x",1,-1,i,t,-e,s,o,1),v("x","z","y",1,1,e,i,t,r,s,2),v("x","z","y",1,-1,e,i,-t,r,s,3),v("x","y","z",1,-1,e,t,i,r,o,4),v("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new gt(d,3)),this.setAttribute("normal",new gt(h,3)),this.setAttribute("uv",new gt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ep(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function co(n){const e={};for(let t=0;t<n.length;t++){const i=ep(n[t]);for(const r in i)e[r]=i[r]}return e}function YN(n){const e=n.getRenderTarget();return null===e?n.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:In.workingColorSpace}const tee={clone:ep,merge:co};class Ua extends lo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ep(e.uniforms),this.uniformsGroups=function eee(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;t.uniforms[r]=s&&s.isTexture?{type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?{type:"c",value:s.getHex()}:s&&s.isVector2?{type:"v2",value:s.toArray()}:s&&s.isVector3?{type:"v3",value:s.toArray()}:s&&s.isVector4?{type:"v4",value:s.toArray()}:s&&s.isMatrix3?{type:"m3",value:s.toArray()}:s&&s.isMatrix4?{type:"m4",value:s.toArray()}:{value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class PS extends pi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Gt,this.projectionMatrix=new Gt,this.projectionMatrixInverse=new Gt,this.coordinateSystem=Ys}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const qc=new $,KN=new Ce,QN=new Ce;class Ar extends PS{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Uf*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*fu*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Uf*Math.atan(Math.tan(.5*fu*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){qc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(qc.x,qc.y).multiplyScalar(-e/qc.z),qc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(qc.x,qc.y).multiplyScalar(-e/qc.z)}getViewSize(e,t){return this.getViewBounds(e,KN,QN),t.subVectors(QN,KN)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*fu*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const l=s.fullWidth,d=s.fullHeight;o+=s.offsetX*r/l,t-=s.offsetY*i/d,r*=s.width/l,i*=s.height/d}const a=this.filmOffset;0!==a&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class ree extends pi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ar(-90,1,e,t);r.layers=this.layers,this.add(r);const o=new Ar(-90,1,e,t);o.layers=this.layers,this.add(o);const s=new Ar(-90,1,e,t);s.layers=this.layers,this.add(s);const a=new Ar(-90,1,e,t);a.layers=this.layers,this.add(a);const l=new Ar(-90,1,e,t);l.layers=this.layers,this.add(l);const d=new Ar(-90,1,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,l]=t;for(const d of t)this.remove(d);if(e===Ys)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,l,d,h]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,o),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,d),i.texture.generateMipmaps=w,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(f,p,g),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Ob extends Ao{constructor(e=[],t=Uc,i,r,o,s,a,l,d,h){super(e,t,i,r,o,s,a,l,d,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class oee extends Al{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new Ob([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:vr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Jf(5,5,5),o=new Ua({name:"CubemapFromEquirect",uniforms:ep(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});o.uniforms.tEquirect.value=t;const s=new mi(r,o),a=t.minFilter;return t.minFilter===Sl&&(t.minFilter=vr),new ree(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}}class Zc extends pi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const see={type:"move"};class RS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Zc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Zc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Zc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null;const a=this._targetRay,l=this._grip,d=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(d&&e.hand){s=!0;for(const w of e.hand.values()){const x=t.getJointPose(w,i),y=this._getHandJoint(d,w);null!==x&&(y.matrix.fromArray(x.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=x.radius),y.visible=null!==x}const p=d.joints["index-finger-tip"].position.distanceTo(d.joints["thumb-tip"].position),g=.02,v=.005;d.inputState.pinching&&p>g+v?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&p<=g-v&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),null!==o&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==o&&(r=o),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(see)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),null!==d&&(d.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new Zc;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class kb{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new at(e),this.near=t,this.far=i}clone(){return new kb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class JN extends pi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Rl,this.environmentIntensity=1,this.environmentRotation=new Rl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class OS{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRanges=[],this.version=0,this.uuid=qo()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=qo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=qo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const uo=new $;class ip{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)uo.fromBufferAttribute(this,t),uo.applyMatrix4(e),this.setXYZ(t,uo.x,uo.y,uo.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)uo.fromBufferAttribute(this,t),uo.applyNormalMatrix(e),this.setXYZ(t,uo.x,uo.y,uo.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)uo.fromBufferAttribute(this,t),uo.transformDirection(e),this.setXYZ(t,uo.x,uo.y,uo.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=oo(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=on(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=oo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=oo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=oo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=oo(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array),o=on(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new jn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ip(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class kS extends lo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let rp;const Ug=new $,op=new $,sp=new $,ap=new Ce,zg=new Ce,eB=new Gt,Fb=new $,Vg=new $,Nb=new $,tB=new Ce,FS=new Ce,nB=new Ce;class iB extends pi{constructor(e=new kS){if(super(),this.isSprite=!0,this.type="Sprite",void 0===rp){rp=new jt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new OS(t,5);rp.setIndex([0,1,2,0,2,3]),rp.setAttribute("position",new ip(i,3,0,!1)),rp.setAttribute("uv",new ip(i,2,3,!1))}this.geometry=rp,this.material=e,this.center=new Ce(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),op.setFromMatrixScale(this.matrixWorld),eB.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),sp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&op.multiplyScalar(-sp.z);const i=this.material.rotation;let r,o;0!==i&&(o=Math.cos(i),r=Math.sin(i));const s=this.center;Bb(Fb.set(-.5,-.5,0),sp,s,op,r,o),Bb(Vg.set(.5,-.5,0),sp,s,op,r,o),Bb(Nb.set(.5,.5,0),sp,s,op,r,o),tB.set(0,0),FS.set(1,0),nB.set(1,1);let a=e.ray.intersectTriangle(Fb,Vg,Nb,!1,Ug);if(null===a&&(Bb(Vg.set(-.5,.5,0),sp,s,op,r,o),FS.set(0,1),a=e.ray.intersectTriangle(Fb,Nb,Vg,!1,Ug),null===a))return;const l=e.ray.origin.distanceTo(Ug);l<e.near||l>e.far||t.push({distance:l,point:Ug.clone(),uv:Xo.getInterpolation(Ug,Fb,Vg,Nb,tB,FS,nB,new Ce),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Bb(n,e,t,i,r,o){ap.subVectors(n,t).addScalar(.5).multiply(i),void 0!==r?(zg.x=o*ap.x-r*ap.y,zg.y=r*ap.x+o*ap.y):zg.copy(ap),n.copy(e),n.x+=zg.x,n.y+=zg.y,n.applyMatrix4(eB)}const zS=new $,fee=new $,pee=new sn;class Xc{constructor(e=new $(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=zS.subVectors(i,t).cross(fee.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(zS),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||pee.getNormalMatrix(e),r=this.coplanarPoint(zS).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const yu=new Nr,Hb=new $;class Wg{constructor(e=new Xc,t=new Xc,i=new Xc,r=new Xc,o=new Xc,s=new Xc){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ys){const i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],l=r[3],d=r[4],h=r[5],f=r[6],p=r[7],g=r[8],v=r[9],w=r[10],x=r[11],y=r[12],E=r[13],D=r[14],I=r[15];if(i[0].setComponents(l-o,p-d,x-g,I-y).normalize(),i[1].setComponents(l+o,p+d,x+g,I+y).normalize(),i[2].setComponents(l+s,p+h,x+v,I+E).normalize(),i[3].setComponents(l-s,p-h,x-v,I-E).normalize(),i[4].setComponents(l-a,p-f,x-w,I-D).normalize(),t===Ys)i[5].setComponents(l+a,p+f,x+w,I+D).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,f,w,D).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),yu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),yu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(yu)}intersectsSprite(e){return yu.center.set(0,0,0),yu.radius=.7071067811865476,yu.applyMatrix4(e.matrixWorld),this.intersectsSphere(yu)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Hb.x=r.normal.x>0?e.max.x:e.min.x,Hb.y=r.normal.y>0?e.max.y:e.min.y,Hb.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Hb)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class lr extends lo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new at(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Wb=new $,$b=new $,gB=new Gt,qg=new $f,qb=new Nr,jS=new $,_B=new $;class ta extends pi{constructor(e=new jt,t=new lr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)Wb.fromBufferAttribute(t,r-1),$b.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Wb.distanceTo($b);e.setAttribute("lineDistance",new gt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),qb.copy(i.boundingSphere),qb.applyMatrix4(r),qb.radius+=o,!1===e.ray.intersectsSphere(qb))return;gB.copy(r).invert(),qg.copy(e.ray).applyMatrix4(gB);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,d=this.isLineSegments?2:1,h=i.index,p=i.attributes.position;if(null!==h){const g=Math.max(0,s.start),v=Math.min(h.count,s.start+s.count);for(let w=g,x=v-1;w<x;w+=d){const y=h.getX(w),E=h.getX(w+1),D=Zb(this,e,qg,l,y,E,w);D&&t.push(D)}if(this.isLineLoop){const w=h.getX(v-1),x=h.getX(g),y=Zb(this,e,qg,l,w,x,v-1);y&&t.push(y)}}else{const g=Math.max(0,s.start),v=Math.min(p.count,s.start+s.count);for(let w=g,x=v-1;w<x;w+=d){const y=Zb(this,e,qg,l,w,w+1,w);y&&t.push(y)}if(this.isLineLoop){const w=Zb(this,e,qg,l,v-1,g,v-1);w&&t.push(w)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function Zb(n,e,t,i,r,o,s){const a=n.geometry.attributes.position;if(Wb.fromBufferAttribute(a,r),$b.fromBufferAttribute(a,o),t.distanceSqToSegment(Wb,$b,jS,_B)>i)return;jS.applyMatrix4(n.matrixWorld);const d=e.ray.origin.distanceTo(jS);return d<e.near||d>e.far?void 0:{distance:d,point:_B.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const vB=new $,yB=new $;class Ha extends ta{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)vB.fromBufferAttribute(t,r),yB.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+vB.distanceTo(yB);e.setAttribute("lineDistance",new gt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class See extends Ao{constructor(e,t,i,r,o,s,a,l,d){super(e,t,i,r,o,s,a,l,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class qS extends Ao{constructor(e,t,i=zc,r,o,s,a=kr,l=kr,d,h=Ig){if(h!==Ig&&h!==Pg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,o,s,a,l,h,i,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new mu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Kb extends jt{constructor(e=1,t=1,i=1,r=32,o=1,s=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const d=this;r=Math.floor(r),o=Math.floor(o);const h=[],f=[],p=[],g=[];let v=0;const w=[],x=i/2;let y=0;function D(I){const z=v,U=new Ce,W=new $;let Z=0;const F=!0===I?e:t,O=!0===I?1:-1;for(let pe=1;pe<=r;pe++)f.push(0,x*O,0),p.push(0,O,0),g.push(.5,.5),v++;const Y=v;for(let pe=0;pe<=r;pe++){const be=pe/r*l+a,Ee=Math.cos(be),te=Math.sin(be);W.x=F*te,W.y=x*O,W.z=F*Ee,f.push(W.x,W.y,W.z),p.push(0,O,0),U.x=.5*Ee+.5,U.y=.5*te*O+.5,g.push(U.x,U.y),v++}for(let pe=0;pe<r;pe++){const fe=z+pe,be=Y+pe;!0===I?h.push(be,be+1,fe):h.push(be+1,be,fe),Z+=3}d.addGroup(y,Z,!0===I?1:2),y+=Z}(function E(){const I=new $,z=new $;let U=0;const W=(t-e)/i;for(let Z=0;Z<=o;Z++){const F=[],O=Z/o,Y=O*(t-e)+e;for(let pe=0;pe<=r;pe++){const fe=pe/r,be=fe*l+a,Ee=Math.sin(be),te=Math.cos(be);z.x=Y*Ee,z.y=-O*i+x,z.z=Y*te,f.push(z.x,z.y,z.z),I.set(Ee,W,te).normalize(),p.push(I.x,I.y,I.z),g.push(fe,1-O),F.push(v++)}w.push(F)}for(let Z=0;Z<r;Z++)for(let F=0;F<o;F++){const Y=w[F+1][Z],pe=w[F+1][Z+1],fe=w[F][Z+1];(e>0||0!==F)&&(h.push(w[F][Z],Y,fe),U+=3),(t>0||F!==o-1)&&(h.push(Y,pe,fe),U+=3)}d.addGroup(y,U,0),y+=U})(),!1===s&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(h),this.setAttribute("position",new gt(f,3)),this.setAttribute("normal",new gt(p,3)),this.setAttribute("uv",new gt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kb(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class wu extends Kb{constructor(e=1,t=1,i=32,r=1,o=!1,s=0,a=2*Math.PI){super(0,e,t,i,r,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new wu(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}const Qb=new $,Jb=new $,KS=new $,e0=new Xo;class MB extends jt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const r=Math.pow(10,4),o=Math.cos(fu*t),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,d=[0,0,0],h=["a","b","c"],f=new Array(3),p={},g=[];for(let v=0;v<l;v+=3){s?(d[0]=s.getX(v),d[1]=s.getX(v+1),d[2]=s.getX(v+2)):(d[0]=v,d[1]=v+1,d[2]=v+2);const{a:w,b:x,c:y}=e0;if(w.fromBufferAttribute(a,d[0]),x.fromBufferAttribute(a,d[1]),y.fromBufferAttribute(a,d[2]),e0.getNormal(KS),f[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,f[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,f[2]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(let E=0;E<3;E++){const D=(E+1)%3,I=f[E],z=f[D],U=e0[h[E]],W=e0[h[D]],Z=`${I}_${z}`,F=`${z}_${I}`;F in p&&p[F]?(KS.dot(p[F].normal)<=o&&(g.push(U.x,U.y,U.z),g.push(W.x,W.y,W.z)),p[F]=null):Z in p||(p[Z]={index0:d[E],index1:d[D],normal:KS.clone()})}}for(const v in p)if(p[v]){const{index0:w,index1:x}=p[v];Qb.fromBufferAttribute(a,w),Jb.fromBufferAttribute(a,x),g.push(Qb.x,Qb.y,Qb.z),g.push(Jb.x,Jb.y,Jb.z)}this.setAttribute("position",new gt(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class e_ extends jt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const o=e/2,s=t/2,a=Math.floor(i),l=Math.floor(r),d=a+1,h=l+1,f=e/a,p=t/l,g=[],v=[],w=[],x=[];for(let y=0;y<h;y++){const E=y*p-s;for(let D=0;D<d;D++)v.push(D*f-o,-E,0),w.push(0,0,1),x.push(D/a),x.push(1-y/l)}for(let y=0;y<l;y++)for(let E=0;E<a;E++){const I=E+d*(y+1),z=E+1+d*(y+1),U=E+1+d*y;g.push(E+d*y,I,U),g.push(I,z,U)}this.setIndex(g),this.setAttribute("position",new gt(v,3)),this.setAttribute("normal",new gt(w,3)),this.setAttribute("uv",new gt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new e_(e.width,e.height,e.widthSegments,e.heightSegments)}}class t_ extends jt{constructor(e=1,t=32,i=16,r=0,o=2*Math.PI,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(s+a,Math.PI);let d=0;const h=[],f=new $,p=new $,g=[],v=[],w=[],x=[];for(let y=0;y<=i;y++){const E=[],D=y/i;let I=0;0===y&&0===s?I=.5/t:y===i&&l===Math.PI&&(I=-.5/t);for(let z=0;z<=t;z++){const U=z/t;f.x=-e*Math.cos(r+U*o)*Math.sin(s+D*a),f.y=e*Math.cos(s+D*a),f.z=e*Math.sin(r+U*o)*Math.sin(s+D*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),w.push(p.x,p.y,p.z),x.push(U+I,1-D),E.push(d++)}h.push(E)}for(let y=0;y<i;y++)for(let E=0;E<t;E++){const I=h[y][E],z=h[y+1][E],U=h[y+1][E+1];(0!==y||s>0)&&g.push(h[y][E+1],I,U),(y!==i-1||l<Math.PI)&&g.push(I,z,U)}this.setIndex(g),this.setAttribute("position",new gt(v,3)),this.setAttribute("normal",new gt(w,3)),this.setAttribute("uv",new gt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class zB extends lo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new at(16777215),this.specular=new at(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Rl,this.combine=Jy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VB extends lo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class HB extends lo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Eu(n,e){return n&&n.constructor!==e?"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n):n}class a0{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break n}if(e>=o)break e;{const a=t[1];e<a&&(i=2,o=a);for(let l=i-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0}}for(;i<s;){const a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class _te extends a0{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let o=e-2,s=e+1,a=r[o],l=r[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:o=e,a=2*t-i;break;case 2402:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:s=e,l=2*i-t;break;case 2402:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=t}const d=.5*(i-t),h=this.valueSize;this._weightPrev=d/(t-a),this._weightNext=d/(l-i),this._offsetPrev=o*h,this._offsetNext=s*h}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,d=l-a,h=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),w=v*v,x=w*v,y=-p*x+2*p*w-p*v,E=(1+p)*x+(-1.5-2*p)*w+(-.5+p)*v+1,D=(-1-g)*x+(1.5+g)*w+.5*v,I=g*x-g*w;for(let z=0;z!==a;++z)o[z]=y*s[h+z]+E*s[d+z]+D*s[l+z]+I*s[f+z];return o}}class WB extends a0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,d=l-a,h=(i-t)/(r-t),f=1-h;for(let p=0;p!==a;++p)o[p]=s[d+p]*f+s[l+p]*h;return o}}class vte extends a0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class na{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Eu(t,this.TimeBufferType),this.values=Eu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Eu(e.times,Array),values:Eu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new vte(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new WB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new _te(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;-1!==s&&i[s]>t;)--s;if(++s,0!==o||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,o=i.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==s&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(void 0!==r&&function GB(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const d=r[a];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const d=e[a];if(d!==e[a+1]&&(1!==a||d!==e[0]))if(r)l=!0;else{const f=a*i,p=f-i,g=f+i;for(let v=0;v!==i;++v){const w=t[f+v];if(w!==t[p+v]||w!==t[g+v]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const f=a*i,p=s*i;for(let g=0;g!==i;++g)t[p+g]=t[f+g]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,l=s*i,d=0;d!==i;++d)t[l+d]=t[a+d];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}na.prototype.ValueTypeName="",na.prototype.TimeBufferType=Float32Array,na.prototype.ValueBufferType=Float32Array,na.prototype.DefaultInterpolation=2301;class up extends na{constructor(e,t,i){super(e,t,i)}}up.prototype.ValueTypeName="bool",up.prototype.ValueBufferType=Array,up.prototype.DefaultInterpolation=2300,up.prototype.InterpolantFactoryMethodLinear=void 0,up.prototype.InterpolantFactoryMethodSmooth=void 0;(class $B extends na{constructor(e,t,i,r){super(e,t,i,r)}}).prototype.ValueTypeName="color";(class l0 extends na{constructor(e,t,i,r){super(e,t,i,r)}}).prototype.ValueTypeName="number";class yte extends a0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let d=e*a;for(let h=d+a;d!==h;d+=4)so.slerpFlat(o,0,s,d-a,s,d,l);return o}}class c0 extends na{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new yte(this.times,this.values,this.getValueSize(),e)}}c0.prototype.ValueTypeName="quaternion",c0.prototype.InterpolantFactoryMethodSmooth=void 0;class hp extends na{constructor(e,t,i){super(e,t,i)}}hp.prototype.ValueTypeName="string",hp.prototype.ValueBufferType=Array,hp.prototype.DefaultInterpolation=2300,hp.prototype.InterpolantFactoryMethodLinear=void 0,hp.prototype.InterpolantFactoryMethodSmooth=void 0;(class d0 extends na{constructor(e,t,i,r){super(e,t,i,r)}}).prototype.ValueTypeName="vector",Error;class Su extends pi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new at(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const _T=new Gt,ZB=new $,XB=new $;class vT{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ce(512,512),this.mapType=Ba,this.map=null,this.mapPass=null,this.matrix=new Gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wg,this._frameExtents=new Ce(1,1),this._viewportCount=1,this._viewports=[new On(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;ZB.setFromMatrixPosition(e.matrixWorld),t.position.copy(ZB),XB.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(XB),t.updateMatrixWorld(),_T.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_T),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(_T)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class bT extends PS{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=i-e,s=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,s=o+d*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class Ate extends vT{constructor(){super(new bT(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class f0 extends Su{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(pi.DEFAULT_UP),this.updateMatrix(),this.target=new pi,this.shadow=new Ate}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class KB extends Su{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Fte extends Ar{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}const wT="\\[\\]\\.:\\/",Hte=new RegExp("["+wT+"]","g"),MT="[^"+wT+"]",Gte="[^"+wT.replace("\\.","")+"]",Zte=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",MT)+/(WCOD+)?/.source.replace("WCOD",Gte)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",MT)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",MT)+"$"),Xte=["material","materials","bones","map"];class Yte{constructor(e,t,i){const r=i||gi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let gi=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Hte,"")}static parseTrackName(t){const i=Zte.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const s=r.nodeName.substring(o+1);-1!==Xte.indexOf(s)&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===i||l.uuid===i)return l;const d=r(l.children);if(d)return d}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,o=i.propertyName;let s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let h=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===h){h=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==h){if(void 0===t[h])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[h]}}const a=t[o];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+o+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?l=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(l=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===o){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else void 0!==a.fromArray&&void 0!==a.toArray?(d=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(d=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=Yte,n})();gi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},gi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},gi.prototype.GetterByBindingType=[gi.prototype._getValue_direct,gi.prototype._getValue_array,gi.prototype._getValue_arrayElement,gi.prototype._getValue_toArray],gi.prototype.SetterByBindingTypeAndVersioning=[[gi.prototype._setValue_direct,gi.prototype._setValue_direct_setNeedsUpdate,gi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_array,gi.prototype._setValue_array_setNeedsUpdate,gi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_arrayElement,gi.prototype._setValue_arrayElement_setNeedsUpdate,gi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_fromArray,gi.prototype._setValue_fromArray_setNeedsUpdate,gi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class u3{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Kt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Kt(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class tne extends Tl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){void 0!==e?(null!==this.domElement&&this.disconnect(),this.domElement=e):console.warn("THREE.Controls: connect() now requires an element.")}disconnect(){}dispose(){}update(){}}function TT(n,e,t,i){const r=function one(n){switch(n){case Ba:case yN:return{byteLength:1,components:1};case Tg:case bN:case Dg:return{byteLength:2,components:1};case DE:case AE:return{byteLength:2,components:4};case zc:case TE:case $o:return{byteLength:4,components:1};case xN:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}(i);switch(t){case wN:return n*e;case IE:case ob:return n*e/r.components*r.byteLength;case CN:case PE:return n*e*2/r.components*r.byteLength;case MN:return n*e*3/r.components*r.byteLength;case To:case RE:return n*e*4/r.components*r.byteLength;case sb:case ab:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case lb:case cb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case OE:case FE:return Math.max(n,16)*Math.max(e,8)/4;case LE:case kE:return Math.max(n,8)*Math.max(e,8)/2;case NE:case BE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case UE:case zE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case VE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case HE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case GE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case jE:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case WE:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case $E:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case qE:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case ZE:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case XE:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case YE:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case KE:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case QE:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case JE:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case db:case eS:case tS:return Math.ceil(n/4)*Math.ceil(e/4)*16;case EN:case nS:return Math.ceil(n/4)*Math.ceil(e/4)*8;case iS:case rS:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function w3(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function sne(n){const e=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)},remove:function o(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))},update:function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=e.get(a);return void((!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}const d=e.get(a);if(void 0===d)e.set(a,function t(a,l){const d=a.array,h=a.usage,f=d.byteLength,p=n.createBuffer();let g;if(n.bindBuffer(l,p),n.bufferData(l,d,h),a.onUploadCallback(),d instanceof Float32Array)g=n.FLOAT;else if(d instanceof Uint16Array)g=a.isFloat16BufferAttribute?n.HALF_FLOAT:n.UNSIGNED_SHORT;else if(d instanceof Int16Array)g=n.SHORT;else if(d instanceof Uint32Array)g=n.UNSIGNED_INT;else if(d instanceof Int32Array)g=n.INT;else if(d instanceof Int8Array)g=n.BYTE;else if(d instanceof Uint8Array)g=n.UNSIGNED_BYTE;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);g=n.UNSIGNED_BYTE}return{buffer:p,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:a.version,size:f}}(a,l));else if(d.version<a.version){if(d.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function i(a,l,d){const h=l.array,f=l.updateRanges;if(n.bindBuffer(d,a),0===f.length)n.bufferSubData(d,0,h);else{f.sort((g,v)=>g.start-v.start);let p=0;for(let g=1;g<f.length;g++){const v=f[p],w=f[g];w.start<=v.start+v.count+1?v.count=Math.max(v.count,w.start+w.count-v.start):(++p,f[p]=w)}f.length=p+1;for(let g=0,v=f.length;g<v;g++){const w=f[g];n.bufferSubData(d,w.start*h.BYTES_PER_ELEMENT,h,w.start,w.count)}l.clearUpdateRanges()}l.onUploadCallback()})(d.buffer,a,l),d.version=a.version}}}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"176"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="176");const hn={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},tt={common:{diffuse:{value:new at(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new sn},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new sn}},envmap:{envMap:{value:null},envMapRotation:{value:new sn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new sn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new sn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new sn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new sn},normalScale:{value:new Ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new sn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new sn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new sn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new sn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new at(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new at(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0},uvTransform:{value:new sn}},sprite:{diffuse:{value:new at(16777215)},opacity:{value:1},center:{value:new Ce(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new sn},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0}}},Wa={basic:{uniforms:co([tt.common,tt.specularmap,tt.envmap,tt.aomap,tt.lightmap,tt.fog]),vertexShader:hn.meshbasic_vert,fragmentShader:hn.meshbasic_frag},lambert:{uniforms:co([tt.common,tt.specularmap,tt.envmap,tt.aomap,tt.lightmap,tt.emissivemap,tt.bumpmap,tt.normalmap,tt.displacementmap,tt.fog,tt.lights,{emissive:{value:new at(0)}}]),vertexShader:hn.meshlambert_vert,fragmentShader:hn.meshlambert_frag},phong:{uniforms:co([tt.common,tt.specularmap,tt.envmap,tt.aomap,tt.lightmap,tt.emissivemap,tt.bumpmap,tt.normalmap,tt.displacementmap,tt.fog,tt.lights,{emissive:{value:new at(0)},specular:{value:new at(1118481)},shininess:{value:30}}]),vertexShader:hn.meshphong_vert,fragmentShader:hn.meshphong_frag},standard:{uniforms:co([tt.common,tt.envmap,tt.aomap,tt.lightmap,tt.emissivemap,tt.bumpmap,tt.normalmap,tt.displacementmap,tt.roughnessmap,tt.metalnessmap,tt.fog,tt.lights,{emissive:{value:new at(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hn.meshphysical_vert,fragmentShader:hn.meshphysical_frag},toon:{uniforms:co([tt.common,tt.aomap,tt.lightmap,tt.emissivemap,tt.bumpmap,tt.normalmap,tt.displacementmap,tt.gradientmap,tt.fog,tt.lights,{emissive:{value:new at(0)}}]),vertexShader:hn.meshtoon_vert,fragmentShader:hn.meshtoon_frag},matcap:{uniforms:co([tt.common,tt.bumpmap,tt.normalmap,tt.displacementmap,tt.fog,{matcap:{value:null}}]),vertexShader:hn.meshmatcap_vert,fragmentShader:hn.meshmatcap_frag},points:{uniforms:co([tt.points,tt.fog]),vertexShader:hn.points_vert,fragmentShader:hn.points_frag},dashed:{uniforms:co([tt.common,tt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hn.linedashed_vert,fragmentShader:hn.linedashed_frag},depth:{uniforms:co([tt.common,tt.displacementmap]),vertexShader:hn.depth_vert,fragmentShader:hn.depth_frag},normal:{uniforms:co([tt.common,tt.bumpmap,tt.normalmap,tt.displacementmap,{opacity:{value:1}}]),vertexShader:hn.meshnormal_vert,fragmentShader:hn.meshnormal_frag},sprite:{uniforms:co([tt.sprite,tt.fog]),vertexShader:hn.sprite_vert,fragmentShader:hn.sprite_frag},background:{uniforms:{uvTransform:{value:new sn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:hn.background_vert,fragmentShader:hn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new sn}},vertexShader:hn.backgroundCube_vert,fragmentShader:hn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hn.cube_vert,fragmentShader:hn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:hn.equirect_vert,fragmentShader:hn.equirect_frag},distanceRGBA:{uniforms:co([tt.common,tt.displacementmap,{referencePosition:{value:new $},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:hn.distanceRGBA_vert,fragmentShader:hn.distanceRGBA_frag},shadow:{uniforms:co([tt.lights,tt.fog,{color:{value:new at(0)},opacity:{value:1}}]),vertexShader:hn.shadow_vert,fragmentShader:hn.shadow_frag}};Wa.physical={uniforms:co([Wa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new sn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new sn},clearcoatNormalScale:{value:new Ce(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new sn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new sn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new sn},sheen:{value:0},sheenColor:{value:new at(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new sn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new sn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new sn},transmissionSamplerSize:{value:new Ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new sn},attenuationDistance:{value:0},attenuationColor:{value:new at(0)},specularColor:{value:new at(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new sn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new sn},anisotropyVector:{value:new Ce},anisotropyMap:{value:null},anisotropyMapTransform:{value:new sn}}]),vertexShader:hn.meshphysical_vert,fragmentShader:hn.meshphysical_frag};const x0={r:0,b:0,g:0},Ru=new Rl,sre=new Gt;function are(n,e,t,i,r,o,s){const a=new at(0);let d,h,l=!0===o?0:1,f=null,p=0,g=null;function v(D){let I=!0===D.isScene?D.background:null;return I&&I.isTexture&&(I=(D.backgroundBlurriness>0?t:e).get(I)),I}function y(D,I){D.getRGB(x0,YN(n)),i.buffers.color.setClear(x0.r,x0.g,x0.b,I,s)}return{getClearColor:function(){return a},setClearColor:function(D,I=1){a.set(D),l=I,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(D){l=D,y(a,l)},render:function w(D){let I=!1;const z=v(D);null===z?y(a,l):z&&z.isColor&&(y(z,1),I=!0);const U=n.xr.getEnvironmentBlendMode();"additive"===U?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===U&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||I)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))},addToRenderList:function x(D,I){const z=v(I);z&&(z.isCubeTexture||z.mapping===Eg)?(void 0===h&&(h=new mi(new Jf(1,1,1),new Ua({name:"BackgroundCubeMaterial",uniforms:ep(Wa.backgroundCube.uniforms),vertexShader:Wa.backgroundCube.vertexShader,fragmentShader:Wa.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(U,W,Z){this.matrixWorld.copyPosition(Z.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),Ru.copy(I.backgroundRotation),Ru.x*=-1,Ru.y*=-1,Ru.z*=-1,z.isCubeTexture&&!1===z.isRenderTargetTexture&&(Ru.y*=-1,Ru.z*=-1),h.material.uniforms.envMap.value=z,h.material.uniforms.flipEnvMap.value=z.isCubeTexture&&!1===z.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(sre.makeRotationFromEuler(Ru)),h.material.toneMapped=In.getTransfer(z.colorSpace)!==Xn,(f!==z||p!==z.version||g!==n.toneMapping)&&(h.material.needsUpdate=!0,f=z,p=z.version,g=n.toneMapping),h.layers.enableAll(),D.unshift(h,h.geometry,h.material,0,0,null)):z&&z.isTexture&&(void 0===d&&(d=new mi(new e_(2,2),new Ua({name:"BackgroundMaterial",uniforms:ep(Wa.background.uniforms),vertexShader:Wa.background.vertexShader,fragmentShader:Wa.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=z,d.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,d.material.toneMapped=In.getTransfer(z.colorSpace)!==Xn,!0===z.matrixAutoUpdate&&z.updateMatrix(),d.material.uniforms.uvTransform.value.copy(z.matrix),(f!==z||p!==z.version||g!==n.toneMapping)&&(d.material.needsUpdate=!0,f=z,p=z.version,g=n.toneMapping),d.layers.enableAll(),D.unshift(d,d.geometry,d.material,0,0,null))},dispose:function E(){void 0!==h&&(h.geometry.dispose(),h.material.dispose(),h=void 0),void 0!==d&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}}}function lre(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let o=r,s=!1;function d(O){return n.bindVertexArray(O)}function h(O){return n.deleteVertexArray(O)}function p(O){const Y=[],pe=[],fe=[];for(let be=0;be<t;be++)Y[be]=0,pe[be]=0,fe[be]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:pe,attributeDivisors:fe,object:O,attributes:{},index:null}}function w(){const O=o.newAttributes;for(let Y=0,pe=O.length;Y<pe;Y++)O[Y]=0}function x(O){y(O,0)}function y(O,Y){const fe=o.enabledAttributes,be=o.attributeDivisors;o.newAttributes[O]=1,0===fe[O]&&(n.enableVertexAttribArray(O),fe[O]=1),be[O]!==Y&&(n.vertexAttribDivisor(O,Y),be[O]=Y)}function E(){const O=o.newAttributes,Y=o.enabledAttributes;for(let pe=0,fe=Y.length;pe<fe;pe++)Y[pe]!==O[pe]&&(n.disableVertexAttribArray(pe),Y[pe]=0)}function D(O,Y,pe,fe,be,Ee,te){!0===te?n.vertexAttribIPointer(O,Y,pe,be,Ee):n.vertexAttribPointer(O,Y,pe,fe,be,Ee)}function Z(){F(),s=!0,o!==r&&(o=r,d(o.object))}function F(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(O,Y,pe,fe,be){let Ee=!1;const te=function f(O,Y,pe){const fe=!0===pe.wireframe;let be=i[O.id];void 0===be&&(be={},i[O.id]=be);let Ee=be[Y.id];void 0===Ee&&(Ee={},be[Y.id]=Ee);let te=Ee[fe];return void 0===te&&(te=p(function l(){return n.createVertexArray()}()),Ee[fe]=te),te}(fe,pe,Y);o!==te&&(o=te,d(o.object)),Ee=function g(O,Y,pe,fe){const be=o.attributes,Ee=Y.attributes;let te=0;const me=pe.getAttributes();for(const re in me)if(me[re].location>=0){const We=be[re];let rt=Ee[re];if(void 0===rt&&("instanceMatrix"===re&&O.instanceMatrix&&(rt=O.instanceMatrix),"instanceColor"===re&&O.instanceColor&&(rt=O.instanceColor)),void 0===We||We.attribute!==rt||rt&&We.data!==rt.data)return!0;te++}return o.attributesNum!==te||o.index!==fe}(O,fe,pe,be),Ee&&function v(O,Y,pe,fe){const be={},Ee=Y.attributes;let te=0;const me=pe.getAttributes();for(const re in me)if(me[re].location>=0){let We=Ee[re];void 0===We&&("instanceMatrix"===re&&O.instanceMatrix&&(We=O.instanceMatrix),"instanceColor"===re&&O.instanceColor&&(We=O.instanceColor));const rt={};rt.attribute=We,We&&We.data&&(rt.data=We.data),be[re]=rt,te++}o.attributes=be,o.attributesNum=te,o.index=fe}(O,fe,pe,be),null!==be&&e.update(be,n.ELEMENT_ARRAY_BUFFER),(Ee||s)&&(s=!1,function I(O,Y,pe,fe){w();const be=fe.attributes,Ee=pe.getAttributes(),te=Y.defaultAttributeValues;for(const me in Ee){const re=Ee[me];if(re.location>=0){let Te=be[me];if(void 0===Te&&("instanceMatrix"===me&&O.instanceMatrix&&(Te=O.instanceMatrix),"instanceColor"===me&&O.instanceColor&&(Te=O.instanceColor)),void 0!==Te){const We=Te.normalized,rt=Te.itemSize,Tt=e.get(Te);if(void 0===Tt)continue;const Qt=Tt.buffer,ye=Tt.type,$e=Tt.bytesPerElement,Mt=ye===n.INT||ye===n.UNSIGNED_INT||Te.gpuType===TE;if(Te.isInterleavedBufferAttribute){const ze=Te.data,xt=ze.stride,At=Te.offset;if(ze.isInstancedInterleavedBuffer){for(let Ct=0;Ct<re.locationSize;Ct++)y(re.location+Ct,ze.meshPerAttribute);!0!==O.isInstancedMesh&&void 0===fe._maxInstanceCount&&(fe._maxInstanceCount=ze.meshPerAttribute*ze.count)}else for(let Ct=0;Ct<re.locationSize;Ct++)x(re.location+Ct);n.bindBuffer(n.ARRAY_BUFFER,Qt);for(let Ct=0;Ct<re.locationSize;Ct++)D(re.location+Ct,rt/re.locationSize,ye,We,xt*$e,(At+rt/re.locationSize*Ct)*$e,Mt)}else{if(Te.isInstancedBufferAttribute){for(let ze=0;ze<re.locationSize;ze++)y(re.location+ze,Te.meshPerAttribute);!0!==O.isInstancedMesh&&void 0===fe._maxInstanceCount&&(fe._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let ze=0;ze<re.locationSize;ze++)x(re.location+ze);n.bindBuffer(n.ARRAY_BUFFER,Qt);for(let ze=0;ze<re.locationSize;ze++)D(re.location+ze,rt/re.locationSize,ye,We,rt*$e,rt/re.locationSize*ze*$e,Mt)}}else if(void 0!==te){const We=te[me];if(void 0!==We)switch(We.length){case 2:n.vertexAttrib2fv(re.location,We);break;case 3:n.vertexAttrib3fv(re.location,We);break;case 4:n.vertexAttrib4fv(re.location,We);break;default:n.vertexAttrib1fv(re.location,We)}}}}E()}(O,Y,pe,fe),null!==be&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(be).buffer))},reset:Z,resetDefaultState:F,dispose:function z(){Z();for(const O in i){const Y=i[O];for(const pe in Y){const fe=Y[pe];for(const be in fe)h(fe[be].object),delete fe[be];delete Y[pe]}delete i[O]}},releaseStatesOfGeometry:function U(O){if(void 0===i[O.id])return;const Y=i[O.id];for(const pe in Y){const fe=Y[pe];for(const be in fe)h(fe[be].object),delete fe[be];delete Y[pe]}delete i[O.id]},releaseStatesOfProgram:function W(O){for(const Y in i){const pe=i[Y];if(void 0===pe[O.id])continue;const fe=pe[O.id];for(const be in fe)h(fe[be].object),delete fe[be];delete pe[O.id]}},initAttributes:w,enableAttribute:x,disableUnusedAttributes:E}}function cre(n,e,t){let i;function s(d,h,f){0!==f&&(n.drawArraysInstanced(i,d,h,f),t.update(h,i,f))}this.setMode=function r(d){i=d},this.render=function o(d,h){n.drawArrays(i,d,h),t.update(h,i,1)},this.renderInstances=s,this.renderMultiDraw=function a(d,h,f){if(0===f)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,d,0,h,0,f);let g=0;for(let v=0;v<f;v++)g+=h[v];t.update(g,i,1)},this.renderMultiDrawInstances=function l(d,h,f,p){if(0===f)return;const g=e.get("WEBGL_multi_draw");if(null===g)for(let v=0;v<d.length;v++)s(d[v],h[v],p[v]);else{g.multiDrawArraysInstancedWEBGL(i,d,0,h,0,p,0,f);let v=0;for(let w=0;w<f;w++)v+=h[w]*p[w];t.update(v,i,1)}}}function dre(n,e,t,i){let r;function l(W){if("highp"===W){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";W="mediump"}return"mediump"===W&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=void 0!==t.precision?t.precision:"highp";const h=l(d);h!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",h,"instead."),d=h);const f=!0===t.logarithmicDepthBuffer,p=!0===t.reverseDepthBuffer&&e.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function o(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const W=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(W.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:l,textureFormatReadable:function s(W){return!(W!==To&&i.convert(W)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(W){const Z=W===Dg&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(W!==Ba&&i.convert(W)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&W!==$o&&!Z)},precision:d,logarithmicDepthBuffer:f,reverseDepthBuffer:p,maxTextures:g,maxVertexTextures:v,maxTextureSize:n.getParameter(n.MAX_TEXTURE_SIZE),maxCubemapSize:n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:n.getParameter(n.MAX_VERTEX_ATTRIBS),maxVertexUniforms:n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:n.getParameter(n.MAX_VARYING_VECTORS),maxFragmentUniforms:n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:v>0,maxSamples:n.getParameter(n.MAX_SAMPLES)}}function ure(n){const e=this;let t=null,i=0,r=!1,o=!1;const s=new Xc,a=new sn,l={value:null,needsUpdate:!1};function h(f,p,g,v){const w=null!==f?f.length:0;let x=null;if(0!==w){if(x=l.value,!0!==v||null===x){const y=g+4*w,E=p.matrixWorldInverse;a.getNormalMatrix(E),(null===x||x.length<y)&&(x=new Float32Array(y));for(let D=0,I=g;D!==w;++D,I+=4)s.copy(f[D]).applyMatrix4(E,a),s.normal.toArray(x,I),x[I+3]=s.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,x}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const g=0!==f.length||p||0!==i||r;return r=p,i=f.length,g},this.beginShadows=function(){o=!0,h(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(f,p){t=h(f,p,0)},this.setState=function(f,p,g){const v=f.clippingPlanes,w=f.clipIntersection,x=f.clipShadows,y=n.get(f);if(!r||null===v||0===v.length||o&&!x)o?h(null):function d(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const E=o?0:i,D=4*E;let I=y.clippingState||null;l.value=I,I=h(v,p,D,g);for(let z=0;z!==D;++z)I[z]=t[z];y.clippingState=I,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=E}}}function hre(n){let e=new WeakMap;function t(s,a){return 303===a?s.mapping=Uc:304===a&&(s.mapping=uu),s}function r(s){const a=s.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(s){if(s&&s.isTexture){const a=s.mapping;if(303===a||304===a){if(e.has(s))return t(e.get(s).texture,s.mapping);{const l=s.image;if(l&&l.height>0){const d=new oee(l.height);return d.fromEquirectangularTexture(n,s),e.set(s,d),s.addEventListener("dispose",r),t(d.texture,s.mapping)}return null}}}return s},dispose:function o(){e=new WeakMap}}}const M3=[.125,.215,.35,.446,.526,.582],DT=new bT,C3=new at;let AT=null,IT=0,PT=0,RT=!1;const Ou=(1+Math.sqrt(5))/2,pp=1/Ou,E3=[new $(-Ou,pp,0),new $(Ou,pp,0),new $(-pp,0,Ou),new $(pp,0,Ou),new $(0,Ou,-pp),new $(0,Ou,pp),new $(-1,1,-1),new $(1,1,-1),new $(-1,1,1),new $(1,1,1)],fre=new $;class S3{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,o={}){const{size:s=256,position:a=fre}=o;AT=this._renderer.getRenderTarget(),IT=this._renderer.getActiveCubeFace(),PT=this._renderer.getActiveMipmapLevel(),RT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=A3(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=D3(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(AT,IT,PT),this._renderer.xr.enabled=RT,e.scissorTest=!1,w0(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===Uc||e.mapping===uu?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),AT=this._renderer.getRenderTarget(),IT=this._renderer.getActiveCubeFace(),PT=this._renderer.getActiveMipmapLevel(),RT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:vr,minFilter:vr,generateMipmaps:!1,type:Dg,format:To,colorSpace:Nf,depthBuffer:!1},r=T3(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=T3(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function pre(n){const e=[],t=[],i=[];let r=n;const o=n-4+1+M3.length;for(let s=0;s<o;s++){const a=Math.pow(2,r);t.push(a);let l=1/a;s>n-4?l=M3[s-n+4-1]:0===s&&(l=0),i.push(l);const d=1/(a-2),h=-d,f=1+d,p=[h,h,f,h,f,f,h,h,f,f,h,f],g=6,v=6,w=3,x=2,y=1,E=new Float32Array(w*v*g),D=new Float32Array(x*v*g),I=new Float32Array(y*v*g);for(let U=0;U<g;U++){const W=U%3*2/3-1,Z=U>2?0:-1;E.set([W,Z,0,W+2/3,Z,0,W+2/3,Z+1,0,W,Z,0,W+2/3,Z+1,0,W,Z+1,0],w*v*U),D.set(p,x*v*U),I.set([U,U,U,U,U,U],y*v*U)}const z=new jt;z.setAttribute("position",new jn(E,w)),z.setAttribute("uv",new jn(D,x)),z.setAttribute("faceIndex",new jn(I,y)),e.push(z),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(o)),this._blurMaterial=function mre(n,e,t){const i=new Float32Array(20),r=new $(0,1,0);return new Ua({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(o,e,t)}return r}_compileMaterial(e){const t=new mi(this._lodPlanes[0],e);this._renderer.compile(t,DT)}_sceneToCubeUV(e,t,i,r,o){const l=new Ar(90,1,t,i),d=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,g=f.toneMapping;f.getClearColor(C3),f.toneMapping=Bc,f.autoClear=!1;const v=new ea({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),w=new mi(new Jf,v);let x=!1;const y=e.background;y?y.isColor&&(v.color.copy(y),e.background=null,x=!0):(v.color.copy(C3),x=!0);for(let E=0;E<6;E++){const D=E%3;0===D?(l.up.set(0,d[E],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x+h[E],o.y,o.z)):1===D?(l.up.set(0,0,d[E]),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y+h[E],o.z)):(l.up.set(0,d[E],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y,o.z+h[E]));const I=this._cubeSize;w0(r,D*I,E>2?I:0,I,I),f.setRenderTarget(r),x&&f.render(w,l),f.render(e,l)}w.geometry.dispose(),w.material.dispose(),f.toneMapping=g,f.autoClear=p,e.background=y}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Uc||e.mapping===uu;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=A3()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=D3());const o=r?this._cubemapMaterial:this._equirectMaterial,s=new mi(this._lodPlanes[0],o);o.uniforms.envMap.value=e;const l=this._cubeSize;w0(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,DT)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let o=1;o<r;o++){const s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]);this._blur(e,o-1,o,s,E3[(r-o-1)%E3.length])}t.autoClear=i}_blur(e,t,i,r,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){const l=this._renderer,d=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new mi(this._lodPlanes[r],d),p=d.uniforms,g=this._sizeLods[i]-1,v=isFinite(o)?Math.PI/(2*g):2*Math.PI/39,w=o/v,x=isFinite(o)?1+Math.floor(3*w):20;x>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${x} samples when the maximum is set to 20`);const y=[];let E=0;for(let W=0;W<20;++W){const Z=W/w,F=Math.exp(-Z*Z/2);y.push(F),0===W?E+=F:W<x&&(E+=2*F)}for(let W=0;W<y.length;W++)y[W]=y[W]/E;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=y,p.latitudinal.value="latitudinal"===s,a&&(p.poleAxis.value=a);const{_lodMax:D}=this;p.dTheta.value=v,p.mipInt.value=D-i;const I=this._sizeLods[r];w0(t,3*I*(r>D-4?r-D+4:0),4*(this._cubeSize-I),3*I,2*I),l.setRenderTarget(t),l.render(f,DT)}}function T3(n,e,t){const i=new Al(n,e,t);return i.texture.mapping=Eg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function w0(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function D3(){return new Ua({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function A3(){return new Ua({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function gre(n){let e=new WeakMap,t=null;function o(a){const l=a.target;l.removeEventListener("dispose",o);const d=e.get(l);void 0!==d&&(e.delete(l),d.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,d=303===l||304===l,h=l===Uc||l===uu;if(d||h){let f=e.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==f?f.texture.pmremVersion:0))return null===t&&(t=new S3(n)),f=d?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(void 0!==f)return f.texture;{const g=a.image;return d&&g&&g.height>0||h&&g&&function r(a){let l=0;for(let h=0;h<6;h++)void 0!==a[h]&&l++;return 6===l}(g)?(null===t&&(t=new S3(n)),f=d?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",o),f.texture):null}}}return a},dispose:function s(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function _re(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return null===r&&gb("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function vre(n,e,t,i){const r={},o=new WeakMap;function s(f){const p=f.target;null!==p.index&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",s),delete r[p.id];const g=o.get(p);g&&(e.remove(g),o.delete(p)),i.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,t.memory.geometries--}function d(f){const p=[],g=f.index,v=f.attributes.position;let w=0;if(null!==g){const E=g.array;w=g.version;for(let D=0,I=E.length;D<I;D+=3){const z=E[D+0],U=E[D+1],W=E[D+2];p.push(z,U,U,W,W,z)}}else{if(void 0===v)return;w=v.version;for(let D=0,I=v.array.length/3-1;D<I;D+=3){const z=D+0,U=D+1,W=D+2;p.push(z,U,U,W,W,z)}}const x=new(PN(p)?$N:WN)(p,1);x.version=w;const y=o.get(f);y&&e.remove(y),o.set(f,x)}return{get:function a(f,p){return!0===r[p.id]||(p.addEventListener("dispose",s),r[p.id]=!0,t.memory.geometries++),p},update:function l(f){const p=f.attributes;for(const g in p)e.update(p[g],n.ARRAY_BUFFER)},getWireframeAttribute:function h(f){const p=o.get(f);if(p){const g=f.index;null!==g&&p.version<g.version&&d(f)}else d(f);return o.get(f)}}}function yre(n,e,t){let i,o,s;function d(p,g,v){0!==v&&(n.drawElementsInstanced(i,g,o,p*s,v),t.update(g,i,v))}this.setMode=function r(p){i=p},this.setIndex=function a(p){o=p.type,s=p.bytesPerElement},this.render=function l(p,g){n.drawElements(i,g,o,p*s),t.update(g,i,1)},this.renderInstances=d,this.renderMultiDraw=function h(p,g,v){if(0===v)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,o,p,0,v);let x=0;for(let y=0;y<v;y++)x+=g[y];t.update(x,i,1)},this.renderMultiDrawInstances=function f(p,g,v,w){if(0===v)return;const x=e.get("WEBGL_multi_draw");if(null===x)for(let y=0;y<p.length;y++)d(p[y]/s,g[y],w[y]);else{x.multiDrawElementsInstancedWEBGL(i,g,0,o,p,0,w,0,v);let y=0;for(let E=0;E<v;E++)y+=g[E]*w[E];t.update(y,i,1)}}}function bre(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s)}}}}function xre(n,e,t){const i=new WeakMap,r=new On;return{update:function o(s,a,l){const d=s.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=void 0!==h?h.length:0;let p=i.get(a);if(void 0===p||p.count!==f){let F=function(){W.dispose(),i.delete(a),a.removeEventListener("dispose",F)};void 0!==p&&p.texture.dispose();const g=void 0!==a.morphAttributes.position,v=void 0!==a.morphAttributes.normal,w=void 0!==a.morphAttributes.color,x=a.morphAttributes.position||[],y=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let D=0;!0===g&&(D=1),!0===v&&(D=2),!0===w&&(D=3);let I=a.attributes.position.count*D,z=1;I>e.maxTextureSize&&(z=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const U=new Float32Array(I*z*4*f),W=new _b(U,I,z,f);W.type=$o,W.needsUpdate=!0;const Z=4*D;for(let O=0;O<f;O++){const Y=x[O],pe=y[O],fe=E[O],be=I*z*4*O;for(let Ee=0;Ee<Y.count;Ee++){const te=Ee*Z;!0===g&&(r.fromBufferAttribute(Y,Ee),U[be+te+0]=r.x,U[be+te+1]=r.y,U[be+te+2]=r.z,U[be+te+3]=0),!0===v&&(r.fromBufferAttribute(pe,Ee),U[be+te+4]=r.x,U[be+te+5]=r.y,U[be+te+6]=r.z,U[be+te+7]=0),!0===w&&(r.fromBufferAttribute(fe,Ee),U[be+te+8]=r.x,U[be+te+9]=r.y,U[be+te+10]=r.z,U[be+te+11]=4===fe.itemSize?r.w:1)}}p={count:f,texture:W,size:new Ce(I,z)},i.set(a,p),a.addEventListener("dispose",F)}if(!0===s.isInstancedMesh&&null!==s.morphTexture)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let g=0;for(let w=0;w<d.length;w++)g+=d[w];const v=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",d)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}}}function wre(n,e,t,i){let r=new WeakMap;function a(l){const d=l.target;d.removeEventListener("dispose",a),t.remove(d.instanceMatrix),null!==d.instanceColor&&t.remove(d.instanceColor)}return{update:function o(l){const d=i.render.frame,f=e.get(l,l.geometry);if(r.get(f)!==d&&(e.update(f),r.set(f,d)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==d&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),null!==l.instanceColor&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,d))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==d&&(p.update(),r.set(p,d))}return f},dispose:function s(){r=new WeakMap}}}const I3=new Ao,P3=new qS(1,1),R3=new _b,L3=new hS,O3=new Ob,k3=[],F3=[],N3=new Float32Array(16),B3=new Float32Array(9),U3=new Float32Array(4);function mp(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let o=k3[r];if(void 0===o&&(o=new Float32Array(r),k3[r]=o),0!==e){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function cr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function dr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function M0(n,e){let t=F3[e];void 0===t&&(t=new Int32Array(e),F3[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Mre(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Cre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(cr(t,e))return;n.uniform2fv(this.addr,e),dr(t,e)}}function Ere(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(cr(t,e))return;n.uniform3fv(this.addr,e),dr(t,e)}}function Sre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(cr(t,e))return;n.uniform4fv(this.addr,e),dr(t,e)}}function Tre(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(cr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),dr(t,e)}else{if(cr(t,i))return;U3.set(i),n.uniformMatrix2fv(this.addr,!1,U3),dr(t,i)}}function Dre(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(cr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),dr(t,e)}else{if(cr(t,i))return;B3.set(i),n.uniformMatrix3fv(this.addr,!1,B3),dr(t,i)}}function Are(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(cr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),dr(t,e)}else{if(cr(t,i))return;N3.set(i),n.uniformMatrix4fv(this.addr,!1,N3),dr(t,i)}}function Ire(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Pre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(cr(t,e))return;n.uniform2iv(this.addr,e),dr(t,e)}}function Rre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(cr(t,e))return;n.uniform3iv(this.addr,e),dr(t,e)}}function Lre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(cr(t,e))return;n.uniform4iv(this.addr,e),dr(t,e)}}function Ore(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function kre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(cr(t,e))return;n.uniform2uiv(this.addr,e),dr(t,e)}}function Fre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(cr(t,e))return;n.uniform3uiv(this.addr,e),dr(t,e)}}function Nre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(cr(t,e))return;n.uniform4uiv(this.addr,e),dr(t,e)}}function Bre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();let o;i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),this.type===n.SAMPLER_2D_SHADOW?(P3.compareFunction=515,o=P3):o=I3,t.setTexture2D(e||o,r)}function Ure(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||L3,r)}function zre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||O3,r)}function Vre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||R3,r)}function Gre(n,e){n.uniform1fv(this.addr,e)}function jre(n,e){const t=mp(e,this.size,2);n.uniform2fv(this.addr,t)}function Wre(n,e){const t=mp(e,this.size,3);n.uniform3fv(this.addr,t)}function $re(n,e){const t=mp(e,this.size,4);n.uniform4fv(this.addr,t)}function qre(n,e){const t=mp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Zre(n,e){const t=mp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Xre(n,e){const t=mp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Yre(n,e){n.uniform1iv(this.addr,e)}function Kre(n,e){n.uniform2iv(this.addr,e)}function Qre(n,e){n.uniform3iv(this.addr,e)}function Jre(n,e){n.uniform4iv(this.addr,e)}function eoe(n,e){n.uniform1uiv(this.addr,e)}function toe(n,e){n.uniform2uiv(this.addr,e)}function noe(n,e){n.uniform3uiv(this.addr,e)}function ioe(n,e){n.uniform4uiv(this.addr,e)}function roe(n,e,t){const i=this.cache,r=e.length,o=M0(t,r);cr(i,o)||(n.uniform1iv(this.addr,o),dr(i,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||I3,o[s])}function ooe(n,e,t){const i=this.cache,r=e.length,o=M0(t,r);cr(i,o)||(n.uniform1iv(this.addr,o),dr(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||L3,o[s])}function soe(n,e,t){const i=this.cache,r=e.length,o=M0(t,r);cr(i,o)||(n.uniform1iv(this.addr,o),dr(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||O3,o[s])}function aoe(n,e,t){const i=this.cache,r=e.length,o=M0(t,r);cr(i,o)||(n.uniform1iv(this.addr,o),dr(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||R3,o[s])}class coe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function Hre(n){switch(n){case 5126:return Mre;case 35664:return Cre;case 35665:return Ere;case 35666:return Sre;case 35674:return Tre;case 35675:return Dre;case 35676:return Are;case 5124:case 35670:return Ire;case 35667:case 35671:return Pre;case 35668:case 35672:return Rre;case 35669:case 35673:return Lre;case 5125:return Ore;case 36294:return kre;case 36295:return Fre;case 36296:return Nre;case 35678:case 36198:case 36298:case 36306:case 35682:return Bre;case 35679:case 36299:case 36307:return Ure;case 35680:case 36300:case 36308:case 36293:return zre;case 36289:case 36303:case 36311:case 36292:return Vre}}(t.type)}}class doe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function loe(n){switch(n){case 5126:return Gre;case 35664:return jre;case 35665:return Wre;case 35666:return $re;case 35674:return qre;case 35675:return Zre;case 35676:return Xre;case 5124:case 35670:return Yre;case 35667:case 35671:return Kre;case 35668:case 35672:return Qre;case 35669:case 35673:return Jre;case 5125:return eoe;case 36294:return toe;case 36295:return noe;case 36296:return ioe;case 35678:case 36198:case 36298:case 36306:case 35682:return roe;case 35679:case 36299:case 36307:return ooe;case 35680:case 36300:case 36308:case 36293:return soe;case 36289:case 36303:case 36311:case 36292:return aoe}}(t.type)}}class uoe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let o=0,s=r.length;o!==s;++o){const a=r[o];a.setValue(e,t[a.id],i)}}}const OT=/(\w+)(\])?(\[|\.)?/g;function z3(n,e){n.seq.push(e),n.map[e.id]=e}function hoe(n,e,t){const i=n.name,r=i.length;for(OT.lastIndex=0;;){const o=OT.exec(i);let a=o[1];const d=o[3];if("]"===o[2]&&(a|=0),void 0===d||"["===d&&OT.lastIndex+2===r){z3(t,void 0===d?new coe(a,n,e):new doe(a,n,e));break}{let f=t.map[a];void 0===f&&(f=new uoe(a),z3(t,f)),t=f}}}class C0{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const o=e.getActiveUniform(t,r);hoe(o,e.getUniformLocation(t,o.name),this)}}setValue(e,t,i,r){const o=this.map[t];void 0!==o&&o.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){const a=t[o],l=i[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,o=e.length;r!==o;++r){const s=e[r];s.id in t&&i.push(s)}return i}}function V3(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const foe=37297;let poe=0;const H3=new sn;function G3(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const s=parseInt(o[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function moe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){const a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join("\n")}(n.getShaderSource(e),s)}return r}function _oe(n,e){const t=function goe(n){In._getMatrix(H3,In.workingColorSpace,n);const e=`mat3( ${H3.elements.map(t=>t.toFixed(4))} )`;switch(In.getTransfer(n)){case fb:return[e,"LinearTransferOETF"];case Xn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${n}( vec4 value ) {`,`\treturn ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join("\n")}function voe(n,e){let t;switch(e){case YQ:t="Linear";break;case KQ:t="Reinhard";break;case QQ:t="Cineon";break;case JQ:t="ACESFilmic";break;case tJ:t="AgX";break;case nJ:t="Neutral";break;case eJ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const E0=new $;function i_(n){return""!==n}function j3(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function W3(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Moe=/^[ \t]*#include +<([\w\d./]+)>/gm;function kT(n){return n.replace(Moe,Eoe)}const Coe=new Map;function Eoe(n,e){let t=hn[e];if(void 0===t){const i=Coe.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=hn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return kT(t)}const Soe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $3(n){return n.replace(Soe,Toe)}function Toe(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function q3(n){let e=`precision ${n.precision} float;\n\tprecision ${n.precision} int;\n\tprecision ${n.precision} sampler2D;\n\tprecision ${n.precision} samplerCube;\n\tprecision ${n.precision} sampler3D;\n\tprecision ${n.precision} sampler2DArray;\n\tprecision ${n.precision} sampler2DShadow;\n\tprecision ${n.precision} samplerCubeShadow;\n\tprecision ${n.precision} sampler2DArrayShadow;\n\tprecision ${n.precision} isampler2D;\n\tprecision ${n.precision} isampler3D;\n\tprecision ${n.precision} isamplerCube;\n\tprecision ${n.precision} isampler2DArray;\n\tprecision ${n.precision} usampler2D;\n\tprecision ${n.precision} usampler3D;\n\tprecision ${n.precision} usamplerCube;\n\tprecision ${n.precision} usampler2DArray;\n\t`;return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function Loe(n,e,t,i){const r=n.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const l=function Doe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===gE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===AQ?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===El&&(e="SHADOWMAP_TYPE_VSM"),e}(t),d=function Aoe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Uc:case uu:e="ENVMAP_TYPE_CUBE";break;case Eg:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),h=function Ioe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===uu&&(e="ENVMAP_MODE_REFRACTION"),e}(t),f=function Poe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Jy:e="ENVMAP_BLENDING_MULTIPLY";break;case ZQ:e="ENVMAP_BLENDING_MIX";break;case XQ:e="ENVMAP_BLENDING_ADD"}return e}(t),p=function Roe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),g=function boe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(i_).join("\n")}(t),v=function xoe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(o),w=r.createProgram();let x,y,E=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(i_).join("\n"),x.length>0&&(x+="\n"),y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(i_).join("\n"),y.length>0&&(y+="\n")):(x=[q3(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(i_).join("\n"),y=[q3(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Bc?"#define TONE_MAPPING":"",t.toneMapping!==Bc?hn.tonemapping_pars_fragment:"",t.toneMapping!==Bc?voe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",hn.colorspace_pars_fragment,_oe("linearToOutputTexel",t.outputColorSpace),(In.getLuminanceCoefficients(E0),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${E0.x.toFixed(4)}, ${E0.y.toFixed(4)}, ${E0.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(i_).join("\n")),s=kT(s),s=j3(s,t),s=W3(s,t),a=kT(a),a=j3(a,t),a=W3(a,t),s=$3(s),a=$3(a),!0!==t.isRawShaderMaterial&&(E="#version 300 es\n",x=[g,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+x,y=["#define varying in",t.glslVersion===AN?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===AN?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const I=E+y+a,z=V3(r,r.VERTEX_SHADER,E+x+s),U=V3(r,r.FRAGMENT_SHADER,I);function W(Y){if(n.debug.checkShaderErrors){const pe=r.getProgramInfoLog(w).trim(),fe=r.getShaderInfoLog(z).trim(),be=r.getShaderInfoLog(U).trim();let Ee=!0,te=!0;if(!1===r.getProgramParameter(w,r.LINK_STATUS))if(Ee=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,w,z,U);else{const me=G3(r,z,"vertex"),re=G3(r,U,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+Y.name+"\nMaterial Type: "+Y.type+"\n\nProgram Info Log: "+pe+"\n"+me+"\n"+re)}else""!==pe?console.warn("THREE.WebGLProgram: Program Info Log:",pe):(""===fe||""===be)&&(te=!1);te&&(Y.diagnostics={runnable:Ee,programLog:pe,vertexShader:{log:fe,prefix:x},fragmentShader:{log:be,prefix:y}})}r.deleteShader(z),r.deleteShader(U),Z=new C0(r,w),F=function woe(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const o=n.getActiveAttrib(e,r),s=o.name;let a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}(r,w)}let Z,F;r.attachShader(w,z),r.attachShader(w,U),void 0!==t.index0AttributeName?r.bindAttribLocation(w,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w),this.getUniforms=function(){return void 0===Z&&W(this),Z},this.getAttributes=function(){return void 0===F&&W(this),F};let O=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===O&&(O=r.getProgramParameter(w,foe)),O},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=poe++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=z,this.fragmentShader=U,this}let Ooe=0;class koe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(o)&&(s.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new Foe(e),t.set(e,i)),i}}class Foe{constructor(e){this.id=Ooe++,this.code=e,this.usedTimes=0}}function Noe(n,e,t,i,r,o,s){const a=new yS,l=new koe,d=new Set,h=[],f=r.logarithmicDepthBuffer,p=r.vertexTextures;let g=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(F){return d.add(F),0===F?"uv":`uv${F}`}return{getParameters:function x(F,O,Y,pe,fe){const be=pe.fog,Ee=fe.geometry,me=(F.isMeshStandardMaterial?t:e).get(F.envMap||(F.isMeshStandardMaterial?pe.environment:null)),re=me&&me.mapping===Eg?me.image.height:null,Te=v[F.type];null!==F.precision&&(g=r.getMaxPrecision(F.precision),g!==F.precision&&console.warn("THREE.WebGLProgram.getParameters:",F.precision,"not supported, using",g,"instead."));const We=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,rt=void 0!==We?We.length:0;let Qt,ye,$e,Mt,Tt=0;if(void 0!==Ee.morphAttributes.position&&(Tt=1),void 0!==Ee.morphAttributes.normal&&(Tt=2),void 0!==Ee.morphAttributes.color&&(Tt=3),Te){const Wn=Wa[Te];Qt=Wn.vertexShader,ye=Wn.fragmentShader}else Qt=F.vertexShader,ye=F.fragmentShader,l.update(F),$e=l.getVertexShaderID(F),Mt=l.getFragmentShaderID(F);const ze=n.getRenderTarget(),xt=n.state.buffers.depth.getReversed(),At=!0===fe.isInstancedMesh,Ct=!0===fe.isBatchedMesh,ni=!!F.map,Jt=!!me,q=!!F.aoMap,Qe=!!F.lightMap,Fe=!!F.bumpMap,je=!!F.normalMap,Ae=!!F.displacementMap,Et=!!F.emissiveMap,Ue=!!F.metalnessMap,j=!!F.roughnessMap,k=F.anisotropy>0,de=F.clearcoat>0,Le=F.iridescence>0,xe=F.sheen>0,wt=F.transmission>0,nt=k&&!!F.anisotropyMap,Rt=de&&!!F.clearcoatMap,Bt=de&&!!F.clearcoatNormalMap,Ve=de&&!!F.clearcoatRoughnessMap,ht=Le&&!!F.iridescenceMap,Ft=Le&&!!F.iridescenceThicknessMap,Zt=xe&&!!F.sheenColorMap,_t=xe&&!!F.sheenRoughnessMap,Dn=!!F.specularMap,fn=!!F.specularColorMap,ui=!!F.specularIntensityMap,ne=wt&&!!F.transmissionMap,ot=wt&&!!F.thicknessMap,Pe=!!F.alphaMap,cn=!!F.extensions;let Ni=Bc;F.toneMapped&&(null===ze||!0===ze.isXRRenderTarget)&&(Ni=n.toneMapping);const zr={shaderID:Te,shaderType:F.type,shaderName:F.name,vertexShader:Qt,fragmentShader:ye,defines:F.defines,customVertexShaderID:$e,customFragmentShaderID:Mt,isRawShaderMaterial:!0===F.isRawShaderMaterial,glslVersion:F.glslVersion,precision:g,batching:Ct,batchingColor:Ct&&null!==fe._colorsTexture,instancing:At,instancingColor:At&&null!==fe.instanceColor,instancingMorph:At&&null!==fe.morphTexture,supportsVertexTextures:p,outputColorSpace:null===ze?n.outputColorSpace:!0===ze.isXRRenderTarget?ze.texture.colorSpace:Nf,alphaToCoverage:!!F.alphaToCoverage,map:ni,matcap:!!F.matcap,envMap:Jt,envMapMode:Jt&&me.mapping,envMapCubeUVHeight:re,aoMap:q,lightMap:Qe,bumpMap:Fe,normalMap:je,displacementMap:p&&Ae,emissiveMap:Et,normalMapObjectSpace:je&&1===F.normalMapType,normalMapTangentSpace:je&&0===F.normalMapType,metalnessMap:Ue,roughnessMap:j,anisotropy:k,anisotropyMap:nt,clearcoat:de,clearcoatMap:Rt,clearcoatNormalMap:Bt,clearcoatRoughnessMap:Ve,dispersion:F.dispersion>0,iridescence:Le,iridescenceMap:ht,iridescenceThicknessMap:Ft,sheen:xe,sheenColorMap:Zt,sheenRoughnessMap:_t,specularMap:Dn,specularColorMap:fn,specularIntensityMap:ui,transmission:wt,transmissionMap:ne,thicknessMap:ot,gradientMap:!!F.gradientMap,opaque:!1===F.transparent&&1===F.blending&&!1===F.alphaToCoverage,alphaMap:Pe,alphaTest:F.alphaTest>0,alphaHash:!!F.alphaHash,combine:F.combine,mapUv:ni&&w(F.map.channel),aoMapUv:q&&w(F.aoMap.channel),lightMapUv:Qe&&w(F.lightMap.channel),bumpMapUv:Fe&&w(F.bumpMap.channel),normalMapUv:je&&w(F.normalMap.channel),displacementMapUv:Ae&&w(F.displacementMap.channel),emissiveMapUv:Et&&w(F.emissiveMap.channel),metalnessMapUv:Ue&&w(F.metalnessMap.channel),roughnessMapUv:j&&w(F.roughnessMap.channel),anisotropyMapUv:nt&&w(F.anisotropyMap.channel),clearcoatMapUv:Rt&&w(F.clearcoatMap.channel),clearcoatNormalMapUv:Bt&&w(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ve&&w(F.clearcoatRoughnessMap.channel),iridescenceMapUv:ht&&w(F.iridescenceMap.channel),iridescenceThicknessMapUv:Ft&&w(F.iridescenceThicknessMap.channel),sheenColorMapUv:Zt&&w(F.sheenColorMap.channel),sheenRoughnessMapUv:_t&&w(F.sheenRoughnessMap.channel),specularMapUv:Dn&&w(F.specularMap.channel),specularColorMapUv:fn&&w(F.specularColorMap.channel),specularIntensityMapUv:ui&&w(F.specularIntensityMap.channel),transmissionMapUv:ne&&w(F.transmissionMap.channel),thicknessMapUv:ot&&w(F.thicknessMap.channel),alphaMapUv:Pe&&w(F.alphaMap.channel),vertexTangents:!!Ee.attributes.tangent&&(je||k),vertexColors:F.vertexColors,vertexAlphas:!0===F.vertexColors&&!!Ee.attributes.color&&4===Ee.attributes.color.itemSize,pointsUvs:!0===fe.isPoints&&!!Ee.attributes.uv&&(ni||Pe),fog:!!be,useFog:!0===F.fog,fogExp2:!!be&&be.isFogExp2,flatShading:!0===F.flatShading,sizeAttenuation:!0===F.sizeAttenuation,logarithmicDepthBuffer:f,reverseDepthBuffer:xt,skinning:!0===fe.isSkinnedMesh,morphTargets:void 0!==Ee.morphAttributes.position,morphNormals:void 0!==Ee.morphAttributes.normal,morphColors:void 0!==Ee.morphAttributes.color,morphTargetsCount:rt,morphTextureStride:Tt,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:F.dithering,shadowMapEnabled:n.shadowMap.enabled&&Y.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ni,decodeVideoTexture:ni&&!0===F.map.isVideoTexture&&In.getTransfer(F.map.colorSpace)===Xn,decodeVideoTextureEmissive:Et&&!0===F.emissiveMap.isVideoTexture&&In.getTransfer(F.emissiveMap.colorSpace)===Xn,premultipliedAlpha:F.premultipliedAlpha,doubleSided:2===F.side,flipSided:1===F.side,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionClipCullDistance:cn&&!0===F.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(cn&&!0===F.extensions.multiDraw||Ct)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()};return zr.vertexUv1s=d.has(1),zr.vertexUv2s=d.has(2),zr.vertexUv3s=d.has(3),d.clear(),zr},getProgramCacheKey:function y(F){const O=[];if(F.shaderID?O.push(F.shaderID):(O.push(F.customVertexShaderID),O.push(F.customFragmentShaderID)),void 0!==F.defines)for(const Y in F.defines)O.push(Y),O.push(F.defines[Y]);return!1===F.isRawShaderMaterial&&(function E(F,O){F.push(O.precision),F.push(O.outputColorSpace),F.push(O.envMapMode),F.push(O.envMapCubeUVHeight),F.push(O.mapUv),F.push(O.alphaMapUv),F.push(O.lightMapUv),F.push(O.aoMapUv),F.push(O.bumpMapUv),F.push(O.normalMapUv),F.push(O.displacementMapUv),F.push(O.emissiveMapUv),F.push(O.metalnessMapUv),F.push(O.roughnessMapUv),F.push(O.anisotropyMapUv),F.push(O.clearcoatMapUv),F.push(O.clearcoatNormalMapUv),F.push(O.clearcoatRoughnessMapUv),F.push(O.iridescenceMapUv),F.push(O.iridescenceThicknessMapUv),F.push(O.sheenColorMapUv),F.push(O.sheenRoughnessMapUv),F.push(O.specularMapUv),F.push(O.specularColorMapUv),F.push(O.specularIntensityMapUv),F.push(O.transmissionMapUv),F.push(O.thicknessMapUv),F.push(O.combine),F.push(O.fogExp2),F.push(O.sizeAttenuation),F.push(O.morphTargetsCount),F.push(O.morphAttributeCount),F.push(O.numDirLights),F.push(O.numPointLights),F.push(O.numSpotLights),F.push(O.numSpotLightMaps),F.push(O.numHemiLights),F.push(O.numRectAreaLights),F.push(O.numDirLightShadows),F.push(O.numPointLightShadows),F.push(O.numSpotLightShadows),F.push(O.numSpotLightShadowsWithMaps),F.push(O.numLightProbes),F.push(O.shadowMapType),F.push(O.toneMapping),F.push(O.numClippingPlanes),F.push(O.numClipIntersection),F.push(O.depthPacking)}(O,F),function D(F,O){a.disableAll(),O.supportsVertexTextures&&a.enable(0),O.instancing&&a.enable(1),O.instancingColor&&a.enable(2),O.instancingMorph&&a.enable(3),O.matcap&&a.enable(4),O.envMap&&a.enable(5),O.normalMapObjectSpace&&a.enable(6),O.normalMapTangentSpace&&a.enable(7),O.clearcoat&&a.enable(8),O.iridescence&&a.enable(9),O.alphaTest&&a.enable(10),O.vertexColors&&a.enable(11),O.vertexAlphas&&a.enable(12),O.vertexUv1s&&a.enable(13),O.vertexUv2s&&a.enable(14),O.vertexUv3s&&a.enable(15),O.vertexTangents&&a.enable(16),O.anisotropy&&a.enable(17),O.alphaHash&&a.enable(18),O.batching&&a.enable(19),O.dispersion&&a.enable(20),O.batchingColor&&a.enable(21),F.push(a.mask),a.disableAll(),O.fog&&a.enable(0),O.useFog&&a.enable(1),O.flatShading&&a.enable(2),O.logarithmicDepthBuffer&&a.enable(3),O.reverseDepthBuffer&&a.enable(4),O.skinning&&a.enable(5),O.morphTargets&&a.enable(6),O.morphNormals&&a.enable(7),O.morphColors&&a.enable(8),O.premultipliedAlpha&&a.enable(9),O.shadowMapEnabled&&a.enable(10),O.doubleSided&&a.enable(11),O.flipSided&&a.enable(12),O.useDepthPacking&&a.enable(13),O.dithering&&a.enable(14),O.transmission&&a.enable(15),O.sheen&&a.enable(16),O.opaque&&a.enable(17),O.pointsUvs&&a.enable(18),O.decodeVideoTexture&&a.enable(19),O.decodeVideoTextureEmissive&&a.enable(20),O.alphaToCoverage&&a.enable(21),F.push(a.mask)}(O,F),O.push(n.outputColorSpace)),O.push(F.customProgramCacheKey),O.join()},getUniforms:function I(F){const O=v[F.type];let Y;return Y=O?tee.clone(Wa[O].uniforms):F.uniforms,Y},acquireProgram:function z(F,O){let Y;for(let pe=0,fe=h.length;pe<fe;pe++){const be=h[pe];if(be.cacheKey===O){Y=be,++Y.usedTimes;break}}return void 0===Y&&(Y=new Loe(n,O,F,o),h.push(Y)),Y},releaseProgram:function U(F){if(0==--F.usedTimes){const O=h.indexOf(F);h[O]=h[h.length-1],h.pop(),F.destroy()}},releaseShaderCache:function W(F){l.remove(F)},programs:h,dispose:function Z(){l.dispose()}}}function Boe(){let n=new WeakMap;return{has:function e(s){return n.has(s)},get:function t(s){let a=n.get(s);return void 0===a&&(a={},n.set(s,a)),a},remove:function i(s){n.delete(s)},update:function r(s,a,l){n.get(s)[a]=l},dispose:function o(){n=new WeakMap}}}function Uoe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Z3(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function X3(){const n=[];let e=0;const t=[],i=[],r=[];function s(f,p,g,v,w,x){let y=n[e];return void 0===y?(y={id:f.id,object:f,geometry:p,material:g,groupOrder:v,renderOrder:f.renderOrder,z:w,group:x},n[e]=y):(y.id=f.id,y.object=f,y.geometry=p,y.material=g,y.groupOrder=v,y.renderOrder=f.renderOrder,y.z=w,y.group=x),e++,y}return{opaque:t,transmissive:i,transparent:r,init:function o(){e=0,t.length=0,i.length=0,r.length=0},push:function a(f,p,g,v,w,x){const y=s(f,p,g,v,w,x);g.transmission>0?i.push(y):!0===g.transparent?r.push(y):t.push(y)},unshift:function l(f,p,g,v,w,x){const y=s(f,p,g,v,w,x);g.transmission>0?i.unshift(y):!0===g.transparent?r.unshift(y):t.unshift(y)},finish:function h(){for(let f=e,p=n.length;f<p;f++){const g=n[f];if(null===g.id)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}},sort:function d(f,p){t.length>1&&t.sort(f||Uoe),i.length>1&&i.sort(p||Z3),r.length>1&&r.sort(p||Z3)}}}function zoe(){let n=new WeakMap;return{get:function e(i,r){const o=n.get(i);let s;return void 0===o?(s=new X3,n.set(i,[s])):r>=o.length?(s=new X3,o.push(s)):s=o[r],s},dispose:function t(){n=new WeakMap}}}function Voe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new $,color:new at};break;case"SpotLight":t={position:new $,direction:new $,color:new at,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new $,color:new at,distance:0,decay:0};break;case"HemisphereLight":t={direction:new $,skyColor:new at,groundColor:new at};break;case"RectAreaLight":t={color:new at,position:new $,halfWidth:new $,halfHeight:new $}}return n[e.id]=t,t}}}let Goe=0;function joe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Woe(n){const e=new Voe,t=function Hoe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new $);const r=new $,o=new Gt,s=new Gt;return{setup:function a(d){let h=0,f=0,p=0;for(let F=0;F<9;F++)i.probe[F].set(0,0,0);let g=0,v=0,w=0,x=0,y=0,E=0,D=0,I=0,z=0,U=0,W=0;d.sort(joe);for(let F=0,O=d.length;F<O;F++){const Y=d[F],pe=Y.color,fe=Y.intensity,be=Y.distance,Ee=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)h+=pe.r*fe,f+=pe.g*fe,p+=pe.b*fe;else if(Y.isLightProbe){for(let te=0;te<9;te++)i.probe[te].addScaledVector(Y.sh.coefficients[te],fe);W++}else if(Y.isDirectionalLight){const te=e.get(Y);if(te.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const me=Y.shadow,re=t.get(Y);re.shadowIntensity=me.intensity,re.shadowBias=me.bias,re.shadowNormalBias=me.normalBias,re.shadowRadius=me.radius,re.shadowMapSize=me.mapSize,i.directionalShadow[g]=re,i.directionalShadowMap[g]=Ee,i.directionalShadowMatrix[g]=Y.shadow.matrix,E++}i.directional[g]=te,g++}else if(Y.isSpotLight){const te=e.get(Y);te.position.setFromMatrixPosition(Y.matrixWorld),te.color.copy(pe).multiplyScalar(fe),te.distance=be,te.coneCos=Math.cos(Y.angle),te.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),te.decay=Y.decay,i.spot[w]=te;const me=Y.shadow;if(Y.map&&(i.spotLightMap[z]=Y.map,z++,me.updateMatrices(Y),Y.castShadow&&U++),i.spotLightMatrix[w]=me.matrix,Y.castShadow){const re=t.get(Y);re.shadowIntensity=me.intensity,re.shadowBias=me.bias,re.shadowNormalBias=me.normalBias,re.shadowRadius=me.radius,re.shadowMapSize=me.mapSize,i.spotShadow[w]=re,i.spotShadowMap[w]=Ee,I++}w++}else if(Y.isRectAreaLight){const te=e.get(Y);te.color.copy(pe).multiplyScalar(fe),te.halfWidth.set(.5*Y.width,0,0),te.halfHeight.set(0,.5*Y.height,0),i.rectArea[x]=te,x++}else if(Y.isPointLight){const te=e.get(Y);if(te.color.copy(Y.color).multiplyScalar(Y.intensity),te.distance=Y.distance,te.decay=Y.decay,Y.castShadow){const me=Y.shadow,re=t.get(Y);re.shadowIntensity=me.intensity,re.shadowBias=me.bias,re.shadowNormalBias=me.normalBias,re.shadowRadius=me.radius,re.shadowMapSize=me.mapSize,re.shadowCameraNear=me.camera.near,re.shadowCameraFar=me.camera.far,i.pointShadow[v]=re,i.pointShadowMap[v]=Ee,i.pointShadowMatrix[v]=Y.shadow.matrix,D++}i.point[v]=te,v++}else if(Y.isHemisphereLight){const te=e.get(Y);te.skyColor.copy(Y.color).multiplyScalar(fe),te.groundColor.copy(Y.groundColor).multiplyScalar(fe),i.hemi[y]=te,y++}}x>0&&(!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=tt.LTC_FLOAT_1,i.rectAreaLTC2=tt.LTC_FLOAT_2):(i.rectAreaLTC1=tt.LTC_HALF_1,i.rectAreaLTC2=tt.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=p;const Z=i.hash;(Z.directionalLength!==g||Z.pointLength!==v||Z.spotLength!==w||Z.rectAreaLength!==x||Z.hemiLength!==y||Z.numDirectionalShadows!==E||Z.numPointShadows!==D||Z.numSpotShadows!==I||Z.numSpotMaps!==z||Z.numLightProbes!==W)&&(i.directional.length=g,i.spot.length=w,i.rectArea.length=x,i.point.length=v,i.hemi.length=y,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=D,i.pointShadowMap.length=D,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=D,i.spotLightMatrix.length=I+z-U,i.spotLightMap.length=z,i.numSpotLightShadowsWithMaps=U,i.numLightProbes=W,Z.directionalLength=g,Z.pointLength=v,Z.spotLength=w,Z.rectAreaLength=x,Z.hemiLength=y,Z.numDirectionalShadows=E,Z.numPointShadows=D,Z.numSpotShadows=I,Z.numSpotMaps=z,Z.numLightProbes=W,i.version=Goe++)},setupView:function l(d,h){let f=0,p=0,g=0,v=0,w=0;const x=h.matrixWorldInverse;for(let y=0,E=d.length;y<E;y++){const D=d[y];if(D.isDirectionalLight){const I=i.directional[f];I.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(x),f++}else if(D.isSpotLight){const I=i.spot[g];I.position.setFromMatrixPosition(D.matrixWorld),I.position.applyMatrix4(x),I.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(x),g++}else if(D.isRectAreaLight){const I=i.rectArea[v];I.position.setFromMatrixPosition(D.matrixWorld),I.position.applyMatrix4(x),s.identity(),o.copy(D.matrixWorld),o.premultiply(x),s.extractRotation(o),I.halfWidth.set(.5*D.width,0,0),I.halfHeight.set(0,.5*D.height,0),I.halfWidth.applyMatrix4(s),I.halfHeight.applyMatrix4(s),v++}else if(D.isPointLight){const I=i.point[p];I.position.setFromMatrixPosition(D.matrixWorld),I.position.applyMatrix4(x),p++}else if(D.isHemisphereLight){const I=i.hemi[w];I.direction.setFromMatrixPosition(D.matrixWorld),I.direction.transformDirection(x),w++}}},state:i}}function Y3(n){const e=new Woe(n),t=[],i=[],d={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function r(h){d.camera=h,t.length=0,i.length=0},state:d,setupLights:function a(){e.setup(t)},setupLightsView:function l(h){e.setupView(t,h)},pushLight:function o(h){t.push(h)},pushShadow:function s(h){i.push(h)}}}function $oe(n){let e=new WeakMap;return{get:function t(r,o=0){const s=e.get(r);let a;return void 0===s?(a=new Y3(n),e.set(r,[a])):o>=s.length?(a=new Y3(n),s.push(a)):a=s[o],a},dispose:function i(){e=new WeakMap}}}function Xoe(n,e,t){let i=new Wg;const r=new Ce,o=new Ce,s=new On,a=new VB({depthPacking:3201}),l=new HB,d={},h=t.maxTextureSize,f={0:1,1:0,2:2},p=new Ua({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ce},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const v=new jt;v.setAttribute("position",new jn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new mi(v,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=gE;let y=this.type;function E(U,W){const Z=e.update(w);p.defines.VSM_SAMPLES!==U.blurSamples&&(p.defines.VSM_SAMPLES=U.blurSamples,g.defines.VSM_SAMPLES=U.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),null===U.mapPass&&(U.mapPass=new Al(r.x,r.y)),p.uniforms.shadow_pass.value=U.map.texture,p.uniforms.resolution.value=U.mapSize,p.uniforms.radius.value=U.radius,n.setRenderTarget(U.mapPass),n.clear(),n.renderBufferDirect(W,null,Z,p,w,null),g.uniforms.shadow_pass.value=U.mapPass.texture,g.uniforms.resolution.value=U.mapSize,g.uniforms.radius.value=U.radius,n.setRenderTarget(U.map),n.clear(),n.renderBufferDirect(W,null,Z,g,w,null)}function D(U,W,Z,F){let O=null;const Y=!0===Z.isPointLight?U.customDistanceMaterial:U.customDepthMaterial;if(void 0!==Y)O=Y;else if(O=!0===Z.isPointLight?l:a,n.localClippingEnabled&&!0===W.clipShadows&&Array.isArray(W.clippingPlanes)&&0!==W.clippingPlanes.length||W.displacementMap&&0!==W.displacementScale||W.alphaMap&&W.alphaTest>0||W.map&&W.alphaTest>0||!0===W.alphaToCoverage){const pe=O.uuid,fe=W.uuid;let be=d[pe];void 0===be&&(be={},d[pe]=be);let Ee=be[fe];void 0===Ee&&(Ee=O.clone(),be[fe]=Ee,W.addEventListener("dispose",z)),O=Ee}return O.visible=W.visible,O.wireframe=W.wireframe,O.side=F===El?null!==W.shadowSide?W.shadowSide:W.side:null!==W.shadowSide?W.shadowSide:f[W.side],O.alphaMap=W.alphaMap,O.alphaTest=!0===W.alphaToCoverage?.5:W.alphaTest,O.map=W.map,O.clipShadows=W.clipShadows,O.clippingPlanes=W.clippingPlanes,O.clipIntersection=W.clipIntersection,O.displacementMap=W.displacementMap,O.displacementScale=W.displacementScale,O.displacementBias=W.displacementBias,O.wireframeLinewidth=W.wireframeLinewidth,O.linewidth=W.linewidth,!0===Z.isPointLight&&!0===O.isMeshDistanceMaterial&&(n.properties.get(O).light=Z),O}function I(U,W,Z,F,O){if(!1===U.visible)return;if(U.layers.test(W.layers)&&(U.isMesh||U.isLine||U.isPoints)&&(U.castShadow||U.receiveShadow&&O===El)&&(!U.frustumCulled||i.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(Z.matrixWorldInverse,U.matrixWorld);const fe=e.update(U),be=U.material;if(Array.isArray(be)){const Ee=fe.groups;for(let te=0,me=Ee.length;te<me;te++){const re=Ee[te],Te=be[re.materialIndex];if(Te&&Te.visible){const We=D(U,Te,F,O);U.onBeforeShadow(n,U,W,Z,fe,We,re),n.renderBufferDirect(Z,null,fe,We,U,re),U.onAfterShadow(n,U,W,Z,fe,We,re)}}}else if(be.visible){const Ee=D(U,be,F,O);U.onBeforeShadow(n,U,W,Z,fe,Ee,null),n.renderBufferDirect(Z,null,fe,Ee,U,null),U.onAfterShadow(n,U,W,Z,fe,Ee,null)}}const pe=U.children;for(let fe=0,be=pe.length;fe<be;fe++)I(pe[fe],W,Z,F,O)}function z(U){U.target.removeEventListener("dispose",z);for(const Z in d){const F=d[Z],O=U.target.uuid;O in F&&(F[O].dispose(),delete F[O])}}this.render=function(U,W,Z){if(!1===x.enabled||!1===x.autoUpdate&&!1===x.needsUpdate||0===U.length)return;const F=n.getRenderTarget(),O=n.getActiveCubeFace(),Y=n.getActiveMipmapLevel(),pe=n.state;pe.setBlending(0),pe.buffers.color.setClear(1,1,1,1),pe.buffers.depth.setTest(!0),pe.setScissorTest(!1);const fe=y!==El&&this.type===El,be=y===El&&this.type!==El;for(let Ee=0,te=U.length;Ee<te;Ee++){const me=U[Ee],re=me.shadow;if(void 0===re){console.warn("THREE.WebGLShadowMap:",me,"has no shadow.");continue}if(!1===re.autoUpdate&&!1===re.needsUpdate)continue;r.copy(re.mapSize);const Te=re.getFrameExtents();if(r.multiply(Te),o.copy(re.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(o.x=Math.floor(h/Te.x),r.x=o.x*Te.x,re.mapSize.x=o.x),r.y>h&&(o.y=Math.floor(h/Te.y),r.y=o.y*Te.y,re.mapSize.y=o.y)),null===re.map||!0===fe||!0===be){const rt=this.type!==El?{minFilter:kr,magFilter:kr}:{};null!==re.map&&re.map.dispose(),re.map=new Al(r.x,r.y,rt),re.map.texture.name=me.name+".shadowMap",re.camera.updateProjectionMatrix()}n.setRenderTarget(re.map),n.clear();const We=re.getViewportCount();for(let rt=0;rt<We;rt++){const Tt=re.getViewport(rt);s.set(o.x*Tt.x,o.y*Tt.y,o.x*Tt.z,o.y*Tt.w),pe.viewport(s),re.updateMatrices(me,rt),i=re.getFrustum(),I(W,Z,re.camera,me,this.type)}!0!==re.isPointLightShadow&&this.type===El&&E(re,Z),re.needsUpdate=!1}y=this.type,x.needsUpdate=!1,n.setRenderTarget(F,O,Y)}}const Yoe={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function Koe(n,e){const o=new function t(){let ne=!1;const ot=new On;let we=null;const Pe=new On(0,0,0,0);return{setMask:function(lt){we!==lt&&!ne&&(n.colorMask(lt,lt,lt,lt),we=lt)},setLocked:function(lt){ne=lt},setClear:function(lt,st,cn,Ni,zr){!0===zr&&(lt*=Ni,st*=Ni,cn*=Ni),ot.set(lt,st,cn,Ni),!1===Pe.equals(ot)&&(n.clearColor(lt,st,cn,Ni),Pe.copy(ot))},reset:function(){ne=!1,we=null,Pe.set(-1,0,0,0)}}},s=new function i(){let ne=!1,ot=!1,we=null,Pe=null,lt=null;return{setReversed:function(st){if(ot!==st){const cn=e.get("EXT_clip_control");cn.clipControlEXT(cn.LOWER_LEFT_EXT,st?cn.ZERO_TO_ONE_EXT:cn.NEGATIVE_ONE_TO_ONE_EXT),ot=st;const Ni=lt;lt=null,this.setClear(Ni)}},getReversed:function(){return ot},setTest:function(st){st?ze(n.DEPTH_TEST):xt(n.DEPTH_TEST)},setMask:function(st){we!==st&&!ne&&(n.depthMask(st),we=st)},setFunc:function(st){if(ot&&(st=Yoe[st]),Pe!==st){switch(st){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}Pe=st}},setLocked:function(st){ne=st},setClear:function(st){lt!==st&&(ot&&(st=1-st),n.clearDepth(st),lt=st)},reset:function(){ne=!1,we=null,Pe=null,lt=null,ot=!1}}},a=new function r(){let ne=!1,ot=null,we=null,Pe=null,lt=null,st=null,cn=null,Ni=null,zr=null;return{setTest:function(Wn){ne||(Wn?ze(n.STENCIL_TEST):xt(n.STENCIL_TEST))},setMask:function(Wn){ot!==Wn&&!ne&&(n.stencilMask(Wn),ot=Wn)},setFunc:function(Wn,ra,zl){(we!==Wn||Pe!==ra||lt!==zl)&&(n.stencilFunc(Wn,ra,zl),we=Wn,Pe=ra,lt=zl)},setOp:function(Wn,ra,zl){(st!==Wn||cn!==ra||Ni!==zl)&&(n.stencilOp(Wn,ra,zl),st=Wn,cn=ra,Ni=zl)},setLocked:function(Wn){ne=Wn},setClear:function(Wn){zr!==Wn&&(n.clearStencil(Wn),zr=Wn)},reset:function(){ne=!1,ot=null,we=null,Pe=null,lt=null,st=null,cn=null,Ni=null,zr=null}}},l=new WeakMap,d=new WeakMap;let h={},f={},p=new WeakMap,g=[],v=null,w=!1,x=null,y=null,E=null,D=null,I=null,z=null,U=null,W=new at(0,0,0),Z=0,F=!1,O=null,Y=null,pe=null,fe=null,be=null;const Ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let te=!1,me=0;const re=n.getParameter(n.VERSION);-1!==re.indexOf("WebGL")?(me=parseFloat(/^WebGL (\d)/.exec(re)[1]),te=me>=1):-1!==re.indexOf("OpenGL ES")&&(me=parseFloat(/^OpenGL ES (\d)/.exec(re)[1]),te=me>=2);let Te=null,We={};const rt=n.getParameter(n.SCISSOR_BOX),Tt=n.getParameter(n.VIEWPORT),Qt=(new On).fromArray(rt),ye=(new On).fromArray(Tt);function $e(ne,ot,we,Pe){const lt=new Uint8Array(4),st=n.createTexture();n.bindTexture(ne,st),n.texParameteri(ne,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ne,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let cn=0;cn<we;cn++)ne===n.TEXTURE_3D||ne===n.TEXTURE_2D_ARRAY?n.texImage3D(ot,0,n.RGBA,1,1,Pe,0,n.RGBA,n.UNSIGNED_BYTE,lt):n.texImage2D(ot+cn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,lt);return st}const Mt={};function ze(ne){!0!==h[ne]&&(n.enable(ne),h[ne]=!0)}function xt(ne){!1!==h[ne]&&(n.disable(ne),h[ne]=!1)}Mt[n.TEXTURE_2D]=$e(n.TEXTURE_2D,n.TEXTURE_2D,1),Mt[n.TEXTURE_CUBE_MAP]=$e(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Mt[n.TEXTURE_2D_ARRAY]=$e(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Mt[n.TEXTURE_3D]=$e(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),ze(n.DEPTH_TEST),s.setFunc(3),Fe(!1),je(1),ze(n.CULL_FACE),q(0);const Pn={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};Pn[103]=n.MIN,Pn[104]=n.MAX;const Jt={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA,211:n.CONSTANT_COLOR,212:n.ONE_MINUS_CONSTANT_COLOR,213:n.CONSTANT_ALPHA,214:n.ONE_MINUS_CONSTANT_ALPHA};function q(ne,ot,we,Pe,lt,st,cn,Ni,zr,Wn){if(0!==ne){if(!1===w&&(ze(n.BLEND),w=!0),5===ne)lt=lt||ot,st=st||we,cn=cn||Pe,(ot!==y||lt!==I)&&(n.blendEquationSeparate(Pn[ot],Pn[lt]),y=ot,I=lt),(we!==E||Pe!==D||st!==z||cn!==U)&&(n.blendFuncSeparate(Jt[we],Jt[Pe],Jt[st],Jt[cn]),E=we,D=Pe,z=st,U=cn),(!1===Ni.equals(W)||zr!==Z)&&(n.blendColor(Ni.r,Ni.g,Ni.b,zr),W.copy(Ni),Z=zr),x=ne,F=!1;else if(ne!==x||Wn!==F){if((100!==y||100!==I)&&(n.blendEquation(n.FUNC_ADD),y=100,I=100),Wn)switch(ne){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne)}else switch(ne){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne)}E=null,D=null,z=null,U=null,W.set(0,0,0),Z=0,x=ne,F=Wn}}else!0===w&&(xt(n.BLEND),w=!1)}function Fe(ne){O!==ne&&(n.frontFace(ne?n.CW:n.CCW),O=ne)}function je(ne){0!==ne?(ze(n.CULL_FACE),ne!==Y&&n.cullFace(1===ne?n.BACK:2===ne?n.FRONT:n.FRONT_AND_BACK)):xt(n.CULL_FACE),Y=ne}function Et(ne,ot,we){ne?(ze(n.POLYGON_OFFSET_FILL),(fe!==ot||be!==we)&&(n.polygonOffset(ot,we),fe=ot,be=we)):xt(n.POLYGON_OFFSET_FILL)}return{buffers:{color:o,depth:s,stencil:a},enable:ze,disable:xt,bindFramebuffer:function At(ne,ot){return f[ne]!==ot&&(n.bindFramebuffer(ne,ot),f[ne]=ot,ne===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=ot),ne===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=ot),!0)},drawBuffers:function Ct(ne,ot){let we=g,Pe=!1;if(ne){we=p.get(ot),void 0===we&&(we=[],p.set(ot,we));const lt=ne.textures;if(we.length!==lt.length||we[0]!==n.COLOR_ATTACHMENT0){for(let st=0,cn=lt.length;st<cn;st++)we[st]=n.COLOR_ATTACHMENT0+st;we.length=lt.length,Pe=!0}}else we[0]!==n.BACK&&(we[0]=n.BACK,Pe=!0);Pe&&n.drawBuffers(we)},useProgram:function ni(ne){return v!==ne&&(n.useProgram(ne),v=ne,!0)},setBlending:q,setMaterial:function Qe(ne,ot){2===ne.side?xt(n.CULL_FACE):ze(n.CULL_FACE);let we=1===ne.side;ot&&(we=!we),Fe(we),1===ne.blending&&!1===ne.transparent?q(0):q(ne.blending,ne.blendEquation,ne.blendSrc,ne.blendDst,ne.blendEquationAlpha,ne.blendSrcAlpha,ne.blendDstAlpha,ne.blendColor,ne.blendAlpha,ne.premultipliedAlpha),s.setFunc(ne.depthFunc),s.setTest(ne.depthTest),s.setMask(ne.depthWrite),o.setMask(ne.colorWrite);const Pe=ne.stencilWrite;a.setTest(Pe),Pe&&(a.setMask(ne.stencilWriteMask),a.setFunc(ne.stencilFunc,ne.stencilRef,ne.stencilFuncMask),a.setOp(ne.stencilFail,ne.stencilZFail,ne.stencilZPass)),Et(ne.polygonOffset,ne.polygonOffsetFactor,ne.polygonOffsetUnits),!0===ne.alphaToCoverage?ze(n.SAMPLE_ALPHA_TO_COVERAGE):xt(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Fe,setCullFace:je,setLineWidth:function Ae(ne){ne!==pe&&(te&&n.lineWidth(ne),pe=ne)},setPolygonOffset:Et,setScissorTest:function Ue(ne){ne?ze(n.SCISSOR_TEST):xt(n.SCISSOR_TEST)},activeTexture:function j(ne){void 0===ne&&(ne=n.TEXTURE0+Ee-1),Te!==ne&&(n.activeTexture(ne),Te=ne)},bindTexture:function k(ne,ot,we){void 0===we&&(we=null===Te?n.TEXTURE0+Ee-1:Te);let Pe=We[we];void 0===Pe&&(Pe={type:void 0,texture:void 0},We[we]=Pe),(Pe.type!==ne||Pe.texture!==ot)&&(Te!==we&&(n.activeTexture(we),Te=we),n.bindTexture(ne,ot||Mt[ne]),Pe.type=ne,Pe.texture=ot)},unbindTexture:function de(){const ne=We[Te];void 0!==ne&&void 0!==ne.type&&(n.bindTexture(ne.type,null),ne.type=void 0,ne.texture=void 0)},compressedTexImage2D:function Me(){try{n.compressedTexImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},compressedTexImage3D:function Le(){try{n.compressedTexImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},texImage2D:function ht(){try{n.texImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},texImage3D:function Ft(){try{n.texImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},updateUBOMapping:function Dn(ne,ot){let we=d.get(ot);void 0===we&&(we=new WeakMap,d.set(ot,we));let Pe=we.get(ne);void 0===Pe&&(Pe=n.getUniformBlockIndex(ot,ne.name),we.set(ne,Pe))},uniformBlockBinding:function fn(ne,ot){const Pe=d.get(ot).get(ne);l.get(ot)!==Pe&&(n.uniformBlockBinding(ot,Pe,ne.__bindingPointIndex),l.set(ot,Pe))},texStorage2D:function Bt(){try{n.texStorage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},texStorage3D:function Ve(){try{n.texStorage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},texSubImage2D:function xe(){try{n.texSubImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},texSubImage3D:function wt(){try{n.texSubImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},compressedTexSubImage2D:function nt(){try{n.compressedTexSubImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},compressedTexSubImage3D:function Rt(){try{n.compressedTexSubImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},scissor:function Zt(ne){!1===Qt.equals(ne)&&(n.scissor(ne.x,ne.y,ne.z,ne.w),Qt.copy(ne))},viewport:function _t(ne){!1===ye.equals(ne)&&(n.viewport(ne.x,ne.y,ne.z,ne.w),ye.copy(ne))},reset:function ui(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},Te=null,We={},f={},p=new WeakMap,g=[],v=null,w=!1,x=null,y=null,E=null,D=null,I=null,z=null,U=null,W=new at(0,0,0),Z=0,F=!1,O=null,Y=null,pe=null,fe=null,be=null,Qt.set(0,0,n.canvas.width,n.canvas.height),ye.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}}}function Qoe(n,e,t,i,r,o,s){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),d=new Ce,h=new WeakMap;let f;const p=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function v(j,k){return g?new OffscreenCanvas(j,k):Lg("canvas")}function w(j,k,de){let Me=1;const Le=Ue(j);if((Le.width>de||Le.height>de)&&(Me=de/Math.max(Le.width,Le.height)),Me<1){if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap||typeof VideoFrame<"u"&&j instanceof VideoFrame){const xe=Math.floor(Me*Le.width),wt=Math.floor(Me*Le.height);void 0===f&&(f=v(xe,wt));const nt=k?v(xe,wt):f;return nt.width=xe,nt.height=wt,nt.getContext("2d").drawImage(j,0,0,xe,wt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Le.width+"x"+Le.height+") to ("+xe+"x"+wt+")."),nt}return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Le.width+"x"+Le.height+")."),j}return j}function x(j){return j.generateMipmaps}function y(j){n.generateMipmap(j)}function E(j){return j.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:j.isWebGL3DRenderTarget?n.TEXTURE_3D:j.isWebGLArrayRenderTarget||j.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function D(j,k,de,Me,Le=!1){if(null!==j){if(void 0!==n[j])return n[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let xe=k;if(k===n.RED&&(de===n.FLOAT&&(xe=n.R32F),de===n.HALF_FLOAT&&(xe=n.R16F),de===n.UNSIGNED_BYTE&&(xe=n.R8)),k===n.RED_INTEGER&&(de===n.UNSIGNED_BYTE&&(xe=n.R8UI),de===n.UNSIGNED_SHORT&&(xe=n.R16UI),de===n.UNSIGNED_INT&&(xe=n.R32UI),de===n.BYTE&&(xe=n.R8I),de===n.SHORT&&(xe=n.R16I),de===n.INT&&(xe=n.R32I)),k===n.RG&&(de===n.FLOAT&&(xe=n.RG32F),de===n.HALF_FLOAT&&(xe=n.RG16F),de===n.UNSIGNED_BYTE&&(xe=n.RG8)),k===n.RG_INTEGER&&(de===n.UNSIGNED_BYTE&&(xe=n.RG8UI),de===n.UNSIGNED_SHORT&&(xe=n.RG16UI),de===n.UNSIGNED_INT&&(xe=n.RG32UI),de===n.BYTE&&(xe=n.RG8I),de===n.SHORT&&(xe=n.RG16I),de===n.INT&&(xe=n.RG32I)),k===n.RGB_INTEGER&&(de===n.UNSIGNED_BYTE&&(xe=n.RGB8UI),de===n.UNSIGNED_SHORT&&(xe=n.RGB16UI),de===n.UNSIGNED_INT&&(xe=n.RGB32UI),de===n.BYTE&&(xe=n.RGB8I),de===n.SHORT&&(xe=n.RGB16I),de===n.INT&&(xe=n.RGB32I)),k===n.RGBA_INTEGER&&(de===n.UNSIGNED_BYTE&&(xe=n.RGBA8UI),de===n.UNSIGNED_SHORT&&(xe=n.RGBA16UI),de===n.UNSIGNED_INT&&(xe=n.RGBA32UI),de===n.BYTE&&(xe=n.RGBA8I),de===n.SHORT&&(xe=n.RGBA16I),de===n.INT&&(xe=n.RGBA32I)),k===n.RGB&&de===n.UNSIGNED_INT_5_9_9_9_REV&&(xe=n.RGB9_E5),k===n.RGBA){const wt=Le?fb:In.getTransfer(Me);de===n.FLOAT&&(xe=n.RGBA32F),de===n.HALF_FLOAT&&(xe=n.RGBA16F),de===n.UNSIGNED_BYTE&&(xe=wt===Xn?n.SRGB8_ALPHA8:n.RGBA8),de===n.UNSIGNED_SHORT_4_4_4_4&&(xe=n.RGBA4),de===n.UNSIGNED_SHORT_5_5_5_1&&(xe=n.RGB5_A1)}return(xe===n.R16F||xe===n.R32F||xe===n.RG16F||xe===n.RG32F||xe===n.RGBA16F||xe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),xe}function I(j,k){let de;return j?null===k||k===zc||k===Ag?de=n.DEPTH24_STENCIL8:k===$o?de=n.DEPTH32F_STENCIL8:k===Tg&&(de=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===k||k===zc||k===Ag?de=n.DEPTH_COMPONENT24:k===$o?de=n.DEPTH_COMPONENT32F:k===Tg&&(de=n.DEPTH_COMPONENT16),de}function z(j,k){return!0===x(j)||j.isFramebufferTexture&&j.minFilter!==kr&&j.minFilter!==vr?Math.log2(Math.max(k.width,k.height))+1:void 0!==j.mipmaps&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?k.mipmaps.length:1}function U(j){const k=j.target;k.removeEventListener("dispose",U),function Z(j){const k=i.get(j);if(void 0===k.__webglInit)return;const de=j.source,Me=p.get(de);if(Me){const Le=Me[k.__cacheKey];Le.usedTimes--,0===Le.usedTimes&&F(j),0===Object.keys(Me).length&&p.delete(de)}i.remove(j)}(k),k.isVideoTexture&&h.delete(k)}function W(j){const k=j.target;k.removeEventListener("dispose",W),function O(j){const k=i.get(j);if(j.depthTexture&&(j.depthTexture.dispose(),i.remove(j.depthTexture)),j.isWebGLCubeRenderTarget)for(let Me=0;Me<6;Me++){if(Array.isArray(k.__webglFramebuffer[Me]))for(let Le=0;Le<k.__webglFramebuffer[Me].length;Le++)n.deleteFramebuffer(k.__webglFramebuffer[Me][Le]);else n.deleteFramebuffer(k.__webglFramebuffer[Me]);k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer[Me])}else{if(Array.isArray(k.__webglFramebuffer))for(let Me=0;Me<k.__webglFramebuffer.length;Me++)n.deleteFramebuffer(k.__webglFramebuffer[Me]);else n.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&n.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let Me=0;Me<k.__webglColorRenderbuffer.length;Me++)k.__webglColorRenderbuffer[Me]&&n.deleteRenderbuffer(k.__webglColorRenderbuffer[Me]);k.__webglDepthRenderbuffer&&n.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const de=j.textures;for(let Me=0,Le=de.length;Me<Le;Me++){const xe=i.get(de[Me]);xe.__webglTexture&&(n.deleteTexture(xe.__webglTexture),s.memory.textures--),i.remove(de[Me])}i.remove(j)}(k)}function F(j){const k=i.get(j);n.deleteTexture(k.__webglTexture),delete p.get(j.source)[k.__cacheKey],s.memory.textures--}let Y=0;function Ee(j,k){const de=i.get(j);if(j.isVideoTexture&&function Ae(j){const k=s.render.frame;h.get(j)!==k&&(h.set(j,k),j.update())}(j),!1===j.isRenderTargetTexture&&j.version>0&&de.__version!==j.version){const Me=j.image;if(null===Me)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Me.complete)return void ye(de,j,k);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,de.__webglTexture,n.TEXTURE0+k)}const Te={1e3:n.REPEAT,[Xs]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},We={[kr]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,1005:n.NEAREST_MIPMAP_LINEAR,[vr]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[Sl]:n.LINEAR_MIPMAP_LINEAR},rt={512:n.NEVER,519:n.ALWAYS,513:n.LESS,515:n.LEQUAL,514:n.EQUAL,518:n.GEQUAL,516:n.GREATER,517:n.NOTEQUAL};function Tt(j,k){if(k.type===$o&&!1===e.has("OES_texture_float_linear")&&(k.magFilter===vr||1007===k.magFilter||1005===k.magFilter||k.magFilter===Sl||k.minFilter===vr||1007===k.minFilter||1005===k.minFilter||k.minFilter===Sl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(j,n.TEXTURE_WRAP_S,Te[k.wrapS]),n.texParameteri(j,n.TEXTURE_WRAP_T,Te[k.wrapT]),(j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY)&&n.texParameteri(j,n.TEXTURE_WRAP_R,Te[k.wrapR]),n.texParameteri(j,n.TEXTURE_MAG_FILTER,We[k.magFilter]),n.texParameteri(j,n.TEXTURE_MIN_FILTER,We[k.minFilter]),k.compareFunction&&(n.texParameteri(j,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(j,n.TEXTURE_COMPARE_FUNC,rt[k.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(k.magFilter===kr||1005!==k.minFilter&&k.minFilter!==Sl||k.type===$o&&!1===e.has("OES_texture_float_linear"))return;if(k.anisotropy>1||i.get(k).__currentAnisotropy){const de=e.get("EXT_texture_filter_anisotropic");n.texParameterf(j,de.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy}}}function Qt(j,k){let de=!1;void 0===j.__webglInit&&(j.__webglInit=!0,k.addEventListener("dispose",U));const Me=k.source;let Le=p.get(Me);void 0===Le&&(Le={},p.set(Me,Le));const xe=function be(j){const k=[];return k.push(j.wrapS),k.push(j.wrapT),k.push(j.wrapR||0),k.push(j.magFilter),k.push(j.minFilter),k.push(j.anisotropy),k.push(j.internalFormat),k.push(j.format),k.push(j.type),k.push(j.generateMipmaps),k.push(j.premultiplyAlpha),k.push(j.flipY),k.push(j.unpackAlignment),k.push(j.colorSpace),k.join()}(k);if(xe!==j.__cacheKey){void 0===Le[xe]&&(Le[xe]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,de=!0),Le[xe].usedTimes++;const wt=Le[j.__cacheKey];void 0!==wt&&(Le[j.__cacheKey].usedTimes--,0===wt.usedTimes&&F(k)),j.__cacheKey=xe,j.__webglTexture=Le[xe].texture}return de}function ye(j,k,de){let Me=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(Me=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(Me=n.TEXTURE_3D);const Le=Qt(j,k),xe=k.source;t.bindTexture(Me,j.__webglTexture,n.TEXTURE0+de);const wt=i.get(xe);if(xe.version!==wt.__version||!0===Le){t.activeTexture(n.TEXTURE0+de);const nt=In.getPrimaries(In.workingColorSpace),Rt=""===k.colorSpace?null:In.getPrimaries(k.colorSpace),Bt=""===k.colorSpace||nt===Rt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Bt);let Ve=w(k.image,!1,r.maxTextureSize);Ve=Et(k,Ve);const ht=o.convert(k.format,k.colorSpace),Ft=o.convert(k.type);let _t,Zt=D(k.internalFormat,ht,Ft,k.colorSpace,k.isVideoTexture);Tt(Me,k);const Dn=k.mipmaps,fn=!0!==k.isVideoTexture,ui=void 0===wt.__version||!0===Le,ne=xe.dataReady,ot=z(k,Ve);if(k.isDepthTexture)Zt=I(k.format===Pg,k.type),ui&&(fn?t.texStorage2D(n.TEXTURE_2D,1,Zt,Ve.width,Ve.height):t.texImage2D(n.TEXTURE_2D,0,Zt,Ve.width,Ve.height,0,ht,Ft,null));else if(k.isDataTexture)if(Dn.length>0){fn&&ui&&t.texStorage2D(n.TEXTURE_2D,ot,Zt,Dn[0].width,Dn[0].height);for(let we=0,Pe=Dn.length;we<Pe;we++)_t=Dn[we],fn?ne&&t.texSubImage2D(n.TEXTURE_2D,we,0,0,_t.width,_t.height,ht,Ft,_t.data):t.texImage2D(n.TEXTURE_2D,we,Zt,_t.width,_t.height,0,ht,Ft,_t.data);k.generateMipmaps=!1}else fn?(ui&&t.texStorage2D(n.TEXTURE_2D,ot,Zt,Ve.width,Ve.height),ne&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ve.width,Ve.height,ht,Ft,Ve.data)):t.texImage2D(n.TEXTURE_2D,0,Zt,Ve.width,Ve.height,0,ht,Ft,Ve.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){fn&&ui&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ot,Zt,Dn[0].width,Dn[0].height,Ve.depth);for(let we=0,Pe=Dn.length;we<Pe;we++)if(_t=Dn[we],k.format!==To)if(null!==ht)if(fn){if(ne)if(k.layerUpdates.size>0){const lt=TT(_t.width,_t.height,k.format,k.type);for(const st of k.layerUpdates){const cn=_t.data.subarray(st*lt/_t.data.BYTES_PER_ELEMENT,(st+1)*lt/_t.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,st,_t.width,_t.height,1,ht,cn)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,0,_t.width,_t.height,Ve.depth,ht,_t.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,we,Zt,_t.width,_t.height,Ve.depth,0,_t.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else fn?ne&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,0,_t.width,_t.height,Ve.depth,ht,Ft,_t.data):t.texImage3D(n.TEXTURE_2D_ARRAY,we,Zt,_t.width,_t.height,Ve.depth,0,ht,Ft,_t.data)}else{fn&&ui&&t.texStorage2D(n.TEXTURE_2D,ot,Zt,Dn[0].width,Dn[0].height);for(let we=0,Pe=Dn.length;we<Pe;we++)_t=Dn[we],k.format!==To?null!==ht?fn?ne&&t.compressedTexSubImage2D(n.TEXTURE_2D,we,0,0,_t.width,_t.height,ht,_t.data):t.compressedTexImage2D(n.TEXTURE_2D,we,Zt,_t.width,_t.height,0,_t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):fn?ne&&t.texSubImage2D(n.TEXTURE_2D,we,0,0,_t.width,_t.height,ht,Ft,_t.data):t.texImage2D(n.TEXTURE_2D,we,Zt,_t.width,_t.height,0,ht,Ft,_t.data)}else if(k.isDataArrayTexture)if(fn){if(ui&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ot,Zt,Ve.width,Ve.height,Ve.depth),ne)if(k.layerUpdates.size>0){const we=TT(Ve.width,Ve.height,k.format,k.type);for(const Pe of k.layerUpdates){const lt=Ve.data.subarray(Pe*we/Ve.data.BYTES_PER_ELEMENT,(Pe+1)*we/Ve.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Pe,Ve.width,Ve.height,1,ht,Ft,lt)}k.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ve.width,Ve.height,Ve.depth,ht,Ft,Ve.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Zt,Ve.width,Ve.height,Ve.depth,0,ht,Ft,Ve.data);else if(k.isData3DTexture)fn?(ui&&t.texStorage3D(n.TEXTURE_3D,ot,Zt,Ve.width,Ve.height,Ve.depth),ne&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ve.width,Ve.height,Ve.depth,ht,Ft,Ve.data)):t.texImage3D(n.TEXTURE_3D,0,Zt,Ve.width,Ve.height,Ve.depth,0,ht,Ft,Ve.data);else if(k.isFramebufferTexture){if(ui)if(fn)t.texStorage2D(n.TEXTURE_2D,ot,Zt,Ve.width,Ve.height);else{let we=Ve.width,Pe=Ve.height;for(let lt=0;lt<ot;lt++)t.texImage2D(n.TEXTURE_2D,lt,Zt,we,Pe,0,ht,Ft,null),we>>=1,Pe>>=1}}else if(Dn.length>0){if(fn&&ui){const we=Ue(Dn[0]);t.texStorage2D(n.TEXTURE_2D,ot,Zt,we.width,we.height)}for(let we=0,Pe=Dn.length;we<Pe;we++)_t=Dn[we],fn?ne&&t.texSubImage2D(n.TEXTURE_2D,we,0,0,ht,Ft,_t):t.texImage2D(n.TEXTURE_2D,we,Zt,ht,Ft,_t);k.generateMipmaps=!1}else if(fn){if(ui){const we=Ue(Ve);t.texStorage2D(n.TEXTURE_2D,ot,Zt,we.width,we.height)}ne&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ht,Ft,Ve)}else t.texImage2D(n.TEXTURE_2D,0,Zt,ht,Ft,Ve);x(k)&&y(Me),wt.__version=xe.version,k.onUpdate&&k.onUpdate(k)}j.__version=k.version}function Mt(j,k,de,Me,Le,xe){const wt=o.convert(de.format,de.colorSpace),nt=o.convert(de.type),Rt=D(de.internalFormat,wt,nt,de.colorSpace),Bt=i.get(k),Ve=i.get(de);if(Ve.__renderTarget=k,!Bt.__hasExternalTextures){const ht=Math.max(1,k.width>>xe),Ft=Math.max(1,k.height>>xe);Le===n.TEXTURE_3D||Le===n.TEXTURE_2D_ARRAY?t.texImage3D(Le,xe,Rt,ht,Ft,k.depth,0,wt,nt,null):t.texImage2D(Le,xe,Rt,ht,Ft,0,wt,nt,null)}t.bindFramebuffer(n.FRAMEBUFFER,j),je(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Me,Le,Ve.__webglTexture,0,Fe(k)):(Le===n.TEXTURE_2D||Le>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Le<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Me,Le,Ve.__webglTexture,xe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ze(j,k,de){if(n.bindRenderbuffer(n.RENDERBUFFER,j),k.depthBuffer){const Me=k.depthTexture,xe=I(k.stencilBuffer,Me&&Me.isDepthTexture?Me.type:null),wt=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,nt=Fe(k);je(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,nt,xe,k.width,k.height):de?n.renderbufferStorageMultisample(n.RENDERBUFFER,nt,xe,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,xe,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,wt,n.RENDERBUFFER,j)}else{const Me=k.textures;for(let Le=0;Le<Me.length;Le++){const xe=Me[Le],wt=o.convert(xe.format,xe.colorSpace),nt=o.convert(xe.type),Rt=D(xe.internalFormat,wt,nt,xe.colorSpace),Bt=Fe(k);de&&!1===je(k)?n.renderbufferStorageMultisample(n.RENDERBUFFER,Bt,Rt,k.width,k.height):je(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Bt,Rt,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,Rt,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function At(j){const k=i.get(j),de=!0===j.isWebGLCubeRenderTarget;if(k.__boundDepthTexture!==j.depthTexture){const Me=j.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),Me){const Le=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,Me.removeEventListener("dispose",Le)};Me.addEventListener("dispose",Le),k.__depthDisposeCallback=Le}k.__boundDepthTexture=Me}if(j.depthTexture&&!k.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");const Me=j.texture.mipmaps;!function xt(j,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,j),!k.depthTexture||!k.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Me=i.get(k.depthTexture);Me.__renderTarget=k,(!Me.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),Ee(k.depthTexture,0);const Le=Me.__webglTexture,xe=Fe(k);if(k.depthTexture.format===Ig)je(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Le,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Le,0);else{if(k.depthTexture.format!==Pg)throw new Error("Unknown depthTexture format");je(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Le,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Le,0)}}(Me&&Me.length>0?k.__webglFramebuffer[0]:k.__webglFramebuffer,j)}else if(de){k.__webglDepthbuffer=[];for(let Me=0;Me<6;Me++)if(t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[Me]),void 0===k.__webglDepthbuffer[Me])k.__webglDepthbuffer[Me]=n.createRenderbuffer(),ze(k.__webglDepthbuffer[Me],j,!1);else{const Le=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xe=k.__webglDepthbuffer[Me];n.bindRenderbuffer(n.RENDERBUFFER,xe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Le,n.RENDERBUFFER,xe)}}else{const Me=j.texture.mipmaps;if(t.bindFramebuffer(n.FRAMEBUFFER,Me&&Me.length>0?k.__webglFramebuffer[0]:k.__webglFramebuffer),void 0===k.__webglDepthbuffer)k.__webglDepthbuffer=n.createRenderbuffer(),ze(k.__webglDepthbuffer,j,!1);else{const Le=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xe=k.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,xe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Le,n.RENDERBUFFER,xe)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}const Jt=[],q=[];function Fe(j){return Math.min(r.maxSamples,j.samples)}function je(j){const k=i.get(j);return j.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==k.__useRenderToTexture}function Et(j,k){const de=j.colorSpace,Me=j.format,Le=j.type;return!0===j.isCompressedTexture||!0===j.isVideoTexture||de!==Nf&&""!==de&&(In.getTransfer(de)===Xn?(Me!==To||Le!==Ba)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",de)),k}function Ue(j){return typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement?(d.width=j.naturalWidth||j.width,d.height=j.naturalHeight||j.height):typeof VideoFrame<"u"&&j instanceof VideoFrame?(d.width=j.displayWidth,d.height=j.displayHeight):(d.width=j.width,d.height=j.height),d}this.allocateTextureUnit=function fe(){const j=Y;return j>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+r.maxTextures),Y+=1,j},this.resetTextureUnits=function pe(){Y=0},this.setTexture2D=Ee,this.setTexture2DArray=function te(j,k){const de=i.get(j);j.version>0&&de.__version!==j.version?ye(de,j,k):t.bindTexture(n.TEXTURE_2D_ARRAY,de.__webglTexture,n.TEXTURE0+k)},this.setTexture3D=function me(j,k){const de=i.get(j);j.version>0&&de.__version!==j.version?ye(de,j,k):t.bindTexture(n.TEXTURE_3D,de.__webglTexture,n.TEXTURE0+k)},this.setTextureCube=function re(j,k){const de=i.get(j);j.version>0&&de.__version!==j.version?function $e(j,k,de){if(6!==k.image.length)return;const Me=Qt(j,k),Le=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,j.__webglTexture,n.TEXTURE0+de);const xe=i.get(Le);if(Le.version!==xe.__version||!0===Me){t.activeTexture(n.TEXTURE0+de);const wt=In.getPrimaries(In.workingColorSpace),nt=""===k.colorSpace?null:In.getPrimaries(k.colorSpace),Rt=""===k.colorSpace||wt===nt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rt);const Bt=k.isCompressedTexture||k.image[0].isCompressedTexture,Ve=k.image[0]&&k.image[0].isDataTexture,ht=[];for(let Pe=0;Pe<6;Pe++)ht[Pe]=Bt||Ve?Ve?k.image[Pe].image:k.image[Pe]:w(k.image[Pe],!0,r.maxCubemapSize),ht[Pe]=Et(k,ht[Pe]);const Ft=ht[0],Zt=o.convert(k.format,k.colorSpace),_t=o.convert(k.type),Dn=D(k.internalFormat,Zt,_t,k.colorSpace),fn=!0!==k.isVideoTexture,ui=void 0===xe.__version||!0===Me,ne=Le.dataReady;let we,ot=z(k,Ft);if(Tt(n.TEXTURE_CUBE_MAP,k),Bt){fn&&ui&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ot,Dn,Ft.width,Ft.height);for(let Pe=0;Pe<6;Pe++){we=ht[Pe].mipmaps;for(let lt=0;lt<we.length;lt++){const st=we[lt];k.format!==To?null!==Zt?fn?ne&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,lt,0,0,st.width,st.height,Zt,st.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,lt,Dn,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):fn?ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,lt,0,0,st.width,st.height,Zt,_t,st.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,lt,Dn,st.width,st.height,0,Zt,_t,st.data)}}}else{if(we=k.mipmaps,fn&&ui){we.length>0&&ot++;const Pe=Ue(ht[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ot,Dn,Pe.width,Pe.height)}for(let Pe=0;Pe<6;Pe++)if(Ve){fn?ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,ht[Pe].width,ht[Pe].height,Zt,_t,ht[Pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Dn,ht[Pe].width,ht[Pe].height,0,Zt,_t,ht[Pe].data);for(let lt=0;lt<we.length;lt++){const cn=we[lt].image[Pe].image;fn?ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,lt+1,0,0,cn.width,cn.height,Zt,_t,cn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,lt+1,Dn,cn.width,cn.height,0,Zt,_t,cn.data)}}else{fn?ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,Zt,_t,ht[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Dn,Zt,_t,ht[Pe]);for(let lt=0;lt<we.length;lt++){const st=we[lt];fn?ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,lt+1,0,0,Zt,_t,st.image[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,lt+1,Dn,Zt,_t,st.image[Pe])}}}x(k)&&y(n.TEXTURE_CUBE_MAP),xe.__version=Le.version,k.onUpdate&&k.onUpdate(k)}j.__version=k.version}(de,j,k):t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture,n.TEXTURE0+k)},this.rebindTextures=function Ct(j,k,de){const Me=i.get(j);void 0!==k&&Mt(Me.__webglFramebuffer,j,j.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==de&&At(j)},this.setupRenderTarget=function ni(j){const k=j.texture,de=i.get(j),Me=i.get(k);j.addEventListener("dispose",W);const Le=j.textures,xe=!0===j.isWebGLCubeRenderTarget,wt=Le.length>1;if(wt||(void 0===Me.__webglTexture&&(Me.__webglTexture=n.createTexture()),Me.__version=k.version,s.memory.textures++),xe){de.__webglFramebuffer=[];for(let nt=0;nt<6;nt++)if(k.mipmaps&&k.mipmaps.length>0){de.__webglFramebuffer[nt]=[];for(let Rt=0;Rt<k.mipmaps.length;Rt++)de.__webglFramebuffer[nt][Rt]=n.createFramebuffer()}else de.__webglFramebuffer[nt]=n.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){de.__webglFramebuffer=[];for(let nt=0;nt<k.mipmaps.length;nt++)de.__webglFramebuffer[nt]=n.createFramebuffer()}else de.__webglFramebuffer=n.createFramebuffer();if(wt)for(let nt=0,Rt=Le.length;nt<Rt;nt++){const Bt=i.get(Le[nt]);void 0===Bt.__webglTexture&&(Bt.__webglTexture=n.createTexture(),s.memory.textures++)}if(j.samples>0&&!1===je(j)){de.__webglMultisampledFramebuffer=n.createFramebuffer(),de.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,de.__webglMultisampledFramebuffer);for(let nt=0;nt<Le.length;nt++){const Rt=Le[nt];de.__webglColorRenderbuffer[nt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,de.__webglColorRenderbuffer[nt]);const Bt=o.convert(Rt.format,Rt.colorSpace),Ve=o.convert(Rt.type),ht=D(Rt.internalFormat,Bt,Ve,Rt.colorSpace,!0===j.isXRRenderTarget),Ft=Fe(j);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ft,ht,j.width,j.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,de.__webglColorRenderbuffer[nt])}n.bindRenderbuffer(n.RENDERBUFFER,null),j.depthBuffer&&(de.__webglDepthRenderbuffer=n.createRenderbuffer(),ze(de.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(xe){t.bindTexture(n.TEXTURE_CUBE_MAP,Me.__webglTexture),Tt(n.TEXTURE_CUBE_MAP,k);for(let nt=0;nt<6;nt++)if(k.mipmaps&&k.mipmaps.length>0)for(let Rt=0;Rt<k.mipmaps.length;Rt++)Mt(de.__webglFramebuffer[nt][Rt],j,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+nt,Rt);else Mt(de.__webglFramebuffer[nt],j,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+nt,0);x(k)&&y(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(wt){for(let nt=0,Rt=Le.length;nt<Rt;nt++){const Bt=Le[nt],Ve=i.get(Bt);t.bindTexture(n.TEXTURE_2D,Ve.__webglTexture),Tt(n.TEXTURE_2D,Bt),Mt(de.__webglFramebuffer,j,Bt,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,0),x(Bt)&&y(n.TEXTURE_2D)}t.unbindTexture()}else{let nt=n.TEXTURE_2D;if((j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(nt=j.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(nt,Me.__webglTexture),Tt(nt,k),k.mipmaps&&k.mipmaps.length>0)for(let Rt=0;Rt<k.mipmaps.length;Rt++)Mt(de.__webglFramebuffer[Rt],j,k,n.COLOR_ATTACHMENT0,nt,Rt);else Mt(de.__webglFramebuffer,j,k,n.COLOR_ATTACHMENT0,nt,0);x(k)&&y(nt),t.unbindTexture()}j.depthBuffer&&At(j)},this.updateRenderTargetMipmap=function Pn(j){const k=j.textures;for(let de=0,Me=k.length;de<Me;de++){const Le=k[de];if(x(Le)){const xe=E(j),wt=i.get(Le).__webglTexture;t.bindTexture(xe,wt),y(xe),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Qe(j){if(j.samples>0)if(!1===je(j)){const k=j.textures,de=j.width,Me=j.height;let Le=n.COLOR_BUFFER_BIT;const xe=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,wt=i.get(j),nt=k.length>1;if(nt)for(let Bt=0;Bt<k.length;Bt++)t.bindFramebuffer(n.FRAMEBUFFER,wt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Bt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,wt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Bt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,wt.__webglMultisampledFramebuffer);const Rt=j.texture.mipmaps;t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Rt&&Rt.length>0?wt.__webglFramebuffer[0]:wt.__webglFramebuffer);for(let Bt=0;Bt<k.length;Bt++){if(j.resolveDepthBuffer&&(j.depthBuffer&&(Le|=n.DEPTH_BUFFER_BIT),j.stencilBuffer&&j.resolveStencilBuffer&&(Le|=n.STENCIL_BUFFER_BIT)),nt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,wt.__webglColorRenderbuffer[Bt]);const Ve=i.get(k[Bt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ve,0)}n.blitFramebuffer(0,0,de,Me,0,0,de,Me,Le,n.NEAREST),!0===l&&(Jt.length=0,q.length=0,Jt.push(n.COLOR_ATTACHMENT0+Bt),j.depthBuffer&&!1===j.resolveDepthBuffer&&(Jt.push(xe),q.push(xe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Jt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),nt)for(let Bt=0;Bt<k.length;Bt++){t.bindFramebuffer(n.FRAMEBUFFER,wt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Bt,n.RENDERBUFFER,wt.__webglColorRenderbuffer[Bt]);const Ve=i.get(k[Bt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,wt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Bt,n.TEXTURE_2D,Ve,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,wt.__webglMultisampledFramebuffer)}else j.depthBuffer&&!1===j.resolveDepthBuffer&&l&&n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=At,this.setupFrameBufferTexture=Mt,this.useMultisampledRTT=je}function Joe(n,e){return{convert:function t(i,r=""){let o;const s=In.getTransfer(r);if(i===Ba)return n.UNSIGNED_BYTE;if(i===DE)return n.UNSIGNED_SHORT_4_4_4_4;if(i===AE)return n.UNSIGNED_SHORT_5_5_5_1;if(i===xN)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===yN)return n.BYTE;if(i===bN)return n.SHORT;if(i===Tg)return n.UNSIGNED_SHORT;if(i===TE)return n.INT;if(i===zc)return n.UNSIGNED_INT;if(i===$o)return n.FLOAT;if(i===Dg)return n.HALF_FLOAT;if(i===wN)return n.ALPHA;if(i===MN)return n.RGB;if(i===To)return n.RGBA;if(i===Ig)return n.DEPTH_COMPONENT;if(i===Pg)return n.DEPTH_STENCIL;if(i===IE)return n.RED;if(i===ob)return n.RED_INTEGER;if(i===CN)return n.RG;if(i===PE)return n.RG_INTEGER;if(i===RE)return n.RGBA_INTEGER;if(i===sb||i===ab||i===lb||i===cb)if(s===Xn){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(i===sb)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===ab)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===lb)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===cb)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(i===sb)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===ab)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===lb)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===cb)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===LE||i===OE||i===kE||i===FE){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(i===LE)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===OE)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===kE)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===FE)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===NE||i===BE||i===UE){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(i===NE||i===BE)return s===Xn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===UE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(i===zE||i===VE||i===HE||i===GE||i===jE||i===WE||i===$E||i===qE||i===ZE||i===XE||i===YE||i===KE||i===QE||i===JE){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(i===zE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===VE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===HE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===GE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===jE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===WE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===$E)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===qE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===ZE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===XE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===YE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===KE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===QE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===JE)return s===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===db||i===eS||i===tS){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(i===db)return s===Xn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===eS)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===tS)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(i===EN||i===nS||i===iS||i===rS){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(i===db)return o.COMPRESSED_RED_RGTC1_EXT;if(i===nS)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===iS)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===rS)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===Ag?n.UNSIGNED_INT_24_8:void 0!==n[i]?n[i]:null}}}class nse{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const r=new Ao;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,i=new Ua({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new mi(new e_(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class ise extends Tl{constructor(e,t){super();const i=this;let r=null,o=1,s=null,a="local-floor",l=1,d=null,h=null,f=null,p=null,g=null,v=null;const w=new nse,x=t.getContextAttributes();let y=null,E=null;const D=[],I=[],z=new Ce;let U=null;const W=new Ar;W.viewport=new On;const Z=new Ar;Z.viewport=new On;const F=[W,Z],O=new Fte;let Y=null,pe=null;function fe(ye){const $e=I.indexOf(ye.inputSource);if(-1===$e)return;const Mt=D[$e];void 0!==Mt&&(Mt.update(ye.inputSource,ye.frame,d||s),Mt.dispatchEvent({type:ye.type,data:ye.inputSource}))}function be(){r.removeEventListener("select",fe),r.removeEventListener("selectstart",fe),r.removeEventListener("selectend",fe),r.removeEventListener("squeeze",fe),r.removeEventListener("squeezestart",fe),r.removeEventListener("squeezeend",fe),r.removeEventListener("end",be),r.removeEventListener("inputsourceschange",Ee);for(let ye=0;ye<D.length;ye++){const $e=I[ye];null!==$e&&(I[ye]=null,D[ye].disconnect($e))}Y=null,pe=null,w.reset(),e.setRenderTarget(y),g=null,p=null,f=null,r=null,E=null,Qt.stop(),i.isPresenting=!1,e.setPixelRatio(U),e.setSize(z.width,z.height,!1),i.dispatchEvent({type:"sessionend"})}function Ee(ye){for(let $e=0;$e<ye.removed.length;$e++){const Mt=ye.removed[$e],ze=I.indexOf(Mt);ze>=0&&(I[ze]=null,D[ze].disconnect(Mt))}for(let $e=0;$e<ye.added.length;$e++){const Mt=ye.added[$e];let ze=I.indexOf(Mt);if(-1===ze){for(let At=0;At<D.length;At++){if(At>=I.length){I.push(Mt),ze=At;break}if(null===I[At]){I[At]=Mt,ze=At;break}}if(-1===ze)break}const xt=D[ze];xt&&xt.connect(Mt)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ye){let $e=D[ye];return void 0===$e&&($e=new RS,D[ye]=$e),$e.getTargetRaySpace()},this.getControllerGrip=function(ye){let $e=D[ye];return void 0===$e&&($e=new RS,D[ye]=$e),$e.getGripSpace()},this.getHand=function(ye){let $e=D[ye];return void 0===$e&&($e=new RS,D[ye]=$e),$e.getHandSpace()},this.setFramebufferScaleFactor=function(ye){o=ye,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ye){a=ye,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||s},this.setReferenceSpace=function(ye){d=ye},this.getBaseLayer=function(){return null!==p?p:g},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=function(){var ye=cu(function*($e){if(r=$e,null!==r){if(y=e.getRenderTarget(),r.addEventListener("select",fe),r.addEventListener("selectstart",fe),r.addEventListener("selectend",fe),r.addEventListener("squeeze",fe),r.addEventListener("squeezestart",fe),r.addEventListener("squeezeend",fe),r.addEventListener("end",be),r.addEventListener("inputsourceschange",Ee),!0!==x.xrCompatible&&(yield t.makeXRCompatible()),U=e.getPixelRatio(),e.getSize(z),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ze=null,xt=null,At=null;x.depth&&(At=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ze=x.stencil?Pg:Ig,xt=x.stencil?Ag:zc);const Ct={colorFormat:t.RGBA8,depthFormat:At,scaleFactor:o};f=new XRWebGLBinding(r,t),p=f.createProjectionLayer(Ct),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),E=new Al(p.textureWidth,p.textureHeight,{format:To,type:Ba,depthTexture:new qS(p.textureWidth,p.textureHeight,xt,void 0,void 0,void 0,void 0,void 0,void 0,ze),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:!1===p.ignoreDepthValues,resolveStencilBuffer:!1===p.ignoreDepthValues})}else g=new XRWebGLLayer(r,t,{antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:o}),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),E=new Al(g.framebufferWidth,g.framebufferHeight,{format:To,type:Ba,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil,resolveDepthBuffer:!1===g.ignoreDepthValues,resolveStencilBuffer:!1===g.ignoreDepthValues});E.isXRRenderTarget=!0,this.setFoveation(l),d=null,s=yield r.requestReferenceSpace(a),Qt.setContext(r),Qt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function($e){return ye.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};const te=new $,me=new $;function Te(ye,$e){null===$e?ye.matrixWorld.copy(ye.matrix):ye.matrixWorld.multiplyMatrices($e.matrixWorld,ye.matrix),ye.matrixWorldInverse.copy(ye.matrixWorld).invert()}this.updateCamera=function(ye){if(null===r)return;let $e=ye.near,Mt=ye.far;null!==w.texture&&(w.depthNear>0&&($e=w.depthNear),w.depthFar>0&&(Mt=w.depthFar)),O.near=Z.near=W.near=$e,O.far=Z.far=W.far=Mt,(Y!==O.near||pe!==O.far)&&(r.updateRenderState({depthNear:O.near,depthFar:O.far}),Y=O.near,pe=O.far),W.layers.mask=2|ye.layers.mask,Z.layers.mask=4|ye.layers.mask,O.layers.mask=W.layers.mask|Z.layers.mask;const ze=ye.parent,xt=O.cameras;Te(O,ze);for(let At=0;At<xt.length;At++)Te(xt[At],ze);2===xt.length?function re(ye,$e,Mt){te.setFromMatrixPosition($e.matrixWorld),me.setFromMatrixPosition(Mt.matrixWorld);const ze=te.distanceTo(me),xt=$e.projectionMatrix.elements,At=Mt.projectionMatrix.elements,Ct=xt[14]/(xt[10]-1),ni=xt[14]/(xt[10]+1),Pn=(xt[9]+1)/xt[5],Jt=(xt[9]-1)/xt[5],q=(xt[8]-1)/xt[0],Qe=(At[8]+1)/At[0],Fe=Ct*q,je=Ct*Qe,Ae=ze/(-q+Qe),Et=Ae*-q;if($e.matrixWorld.decompose(ye.position,ye.quaternion,ye.scale),ye.translateX(Et),ye.translateZ(Ae),ye.matrixWorld.compose(ye.position,ye.quaternion,ye.scale),ye.matrixWorldInverse.copy(ye.matrixWorld).invert(),-1===xt[10])ye.projectionMatrix.copy($e.projectionMatrix),ye.projectionMatrixInverse.copy($e.projectionMatrixInverse);else{const Ue=Ct+Ae,j=ni+Ae;ye.projectionMatrix.makePerspective(Fe-Et,je+(ze-Et),Pn*ni/j*Ue,Jt*ni/j*Ue,Ue,j),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert()}}(O,W,Z):O.projectionMatrix.copy(W.projectionMatrix),function We(ye,$e,Mt){null===Mt?ye.matrix.copy($e.matrixWorld):(ye.matrix.copy(Mt.matrixWorld),ye.matrix.invert(),ye.matrix.multiply($e.matrixWorld)),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.updateMatrixWorld(!0),ye.projectionMatrix.copy($e.projectionMatrix),ye.projectionMatrixInverse.copy($e.projectionMatrixInverse),ye.isPerspectiveCamera&&(ye.fov=2*Uf*Math.atan(1/ye.projectionMatrix.elements[5]),ye.zoom=1)}(ye,O,ze)},this.getCamera=function(){return O},this.getFoveation=function(){if(null!==p||null!==g)return l},this.setFoveation=function(ye){l=ye,null!==p&&(p.fixedFoveation=ye),null!==g&&void 0!==g.fixedFoveation&&(g.fixedFoveation=ye)},this.hasDepthSensing=function(){return null!==w.texture},this.getDepthSensingMesh=function(){return w.getMesh(O)};let rt=null;const Qt=new w3;Qt.setAnimationLoop(function Tt(ye,$e){if(h=$e.getViewerPose(d||s),v=$e,null!==h){const Mt=h.views;null!==g&&(e.setRenderTargetFramebuffer(E,g.framebuffer),e.setRenderTarget(E));let ze=!1;Mt.length!==O.cameras.length&&(O.cameras.length=0,ze=!0);for(let Ct=0;Ct<Mt.length;Ct++){const ni=Mt[Ct];let Pn=null;if(null!==g)Pn=g.getViewport(ni);else{const q=f.getViewSubImage(p,ni);Pn=q.viewport,0===Ct&&(e.setRenderTargetTextures(E,q.colorTexture,q.depthStencilTexture),e.setRenderTarget(E))}let Jt=F[Ct];void 0===Jt&&(Jt=new Ar,Jt.layers.enable(Ct),Jt.viewport=new On,F[Ct]=Jt),Jt.matrix.fromArray(ni.transform.matrix),Jt.matrix.decompose(Jt.position,Jt.quaternion,Jt.scale),Jt.projectionMatrix.fromArray(ni.projectionMatrix),Jt.projectionMatrixInverse.copy(Jt.projectionMatrix).invert(),Jt.viewport.set(Pn.x,Pn.y,Pn.width,Pn.height),0===Ct&&(O.matrix.copy(Jt.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),!0===ze&&O.cameras.push(Jt)}const xt=r.enabledFeatures;if(xt&&xt.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&f){const Ct=f.getDepthInformation(Mt[0]);Ct&&Ct.isValid&&Ct.texture&&w.init(e,Ct,r.renderState)}}for(let Mt=0;Mt<D.length;Mt++){const ze=I[Mt],xt=D[Mt];null!==ze&&void 0!==xt&&xt.update(ze,$e,d||s)}rt&&rt(ye,$e),$e.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:$e}),v=null}),this.setAnimationLoop=function(ye){rt=ye},this.dispose=function(){}}}const ku=new Rl,rse=new Gt;function ose(n,e){function t(x,y){!0===x.matrixAutoUpdate&&x.updateMatrix(),y.value.copy(x.matrix)}function o(x,y){x.opacity.value=y.opacity,y.color&&x.diffuse.value.copy(y.color),y.emissive&&x.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(x.map.value=y.map,t(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.bumpMap&&(x.bumpMap.value=y.bumpMap,t(y.bumpMap,x.bumpMapTransform),x.bumpScale.value=y.bumpScale,1===y.side&&(x.bumpScale.value*=-1)),y.normalMap&&(x.normalMap.value=y.normalMap,t(y.normalMap,x.normalMapTransform),x.normalScale.value.copy(y.normalScale),1===y.side&&x.normalScale.value.negate()),y.displacementMap&&(x.displacementMap.value=y.displacementMap,t(y.displacementMap,x.displacementMapTransform),x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias),y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,x.emissiveMapTransform)),y.specularMap&&(x.specularMap.value=y.specularMap,t(y.specularMap,x.specularMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);const E=e.get(y),D=E.envMap,I=E.envMapRotation;D&&(x.envMap.value=D,ku.copy(I),ku.x*=-1,ku.y*=-1,ku.z*=-1,D.isCubeTexture&&!1===D.isRenderTargetTexture&&(ku.y*=-1,ku.z*=-1),x.envMapRotation.value.setFromMatrix4(rse.makeRotationFromEuler(ku)),x.flipEnvMap.value=D.isCubeTexture&&!1===D.isRenderTargetTexture?-1:1,x.reflectivity.value=y.reflectivity,x.ior.value=y.ior,x.refractionRatio.value=y.refractionRatio),y.lightMap&&(x.lightMap.value=y.lightMap,x.lightMapIntensity.value=y.lightMapIntensity,t(y.lightMap,x.lightMapTransform)),y.aoMap&&(x.aoMap.value=y.aoMap,x.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,x.aoMapTransform))}return{refreshFogUniforms:function i(x,y){y.color.getRGB(x.fogColor.value,YN(n)),y.isFog?(x.fogNear.value=y.near,x.fogFar.value=y.far):y.isFogExp2&&(x.fogDensity.value=y.density)},refreshMaterialUniforms:function r(x,y,E,D,I){y.isMeshBasicMaterial||y.isMeshLambertMaterial?o(x,y):y.isMeshToonMaterial?(o(x,y),function f(x,y){y.gradientMap&&(x.gradientMap.value=y.gradientMap)}(x,y)):y.isMeshPhongMaterial?(o(x,y),function h(x,y){x.specular.value.copy(y.specular),x.shininess.value=Math.max(y.shininess,1e-4)}(x,y)):y.isMeshStandardMaterial?(o(x,y),function p(x,y){x.metalness.value=y.metalness,y.metalnessMap&&(x.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,x.metalnessMapTransform)),x.roughness.value=y.roughness,y.roughnessMap&&(x.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,x.roughnessMapTransform)),y.envMap&&(x.envMapIntensity.value=y.envMapIntensity)}(x,y),y.isMeshPhysicalMaterial&&function g(x,y,E){x.ior.value=y.ior,y.sheen>0&&(x.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),x.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(x.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,x.sheenColorMapTransform)),y.sheenRoughnessMap&&(x.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,x.sheenRoughnessMapTransform))),y.clearcoat>0&&(x.clearcoat.value=y.clearcoat,x.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(x.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,x.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(x.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),1===y.side&&x.clearcoatNormalScale.value.negate())),y.dispersion>0&&(x.dispersion.value=y.dispersion),y.iridescence>0&&(x.iridescence.value=y.iridescence,x.iridescenceIOR.value=y.iridescenceIOR,x.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(x.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,x.iridescenceMapTransform)),y.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),y.transmission>0&&(x.transmission.value=y.transmission,x.transmissionSamplerMap.value=E.texture,x.transmissionSamplerSize.value.set(E.width,E.height),y.transmissionMap&&(x.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,x.transmissionMapTransform)),x.thickness.value=y.thickness,y.thicknessMap&&(x.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=y.attenuationDistance,x.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(x.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(x.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=y.specularIntensity,x.specularColor.value.copy(y.specularColor),y.specularColorMap&&(x.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,x.specularColorMapTransform)),y.specularIntensityMap&&(x.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,x.specularIntensityMapTransform))}(x,y,I)):y.isMeshMatcapMaterial?(o(x,y),function v(x,y){y.matcap&&(x.matcap.value=y.matcap)}(x,y)):y.isMeshDepthMaterial?o(x,y):y.isMeshDistanceMaterial?(o(x,y),function w(x,y){const E=e.get(y).light;x.referencePosition.value.setFromMatrixPosition(E.matrixWorld),x.nearDistance.value=E.shadow.camera.near,x.farDistance.value=E.shadow.camera.far}(x,y)):y.isMeshNormalMaterial?o(x,y):y.isLineBasicMaterial?(function s(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,y.map&&(x.map.value=y.map,t(y.map,x.mapTransform))}(x,y),y.isLineDashedMaterial&&function a(x,y){x.dashSize.value=y.dashSize,x.totalSize.value=y.dashSize+y.gapSize,x.scale.value=y.scale}(x,y)):y.isPointsMaterial?function l(x,y,E,D){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.size.value=y.size*E,x.scale.value=.5*D,y.map&&(x.map.value=y.map,t(y.map,x.uvTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}(x,y,E,D):y.isSpriteMaterial?function d(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.rotation.value=y.rotation,y.map&&(x.map.value=y.map,t(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}(x,y):y.isShadowMaterial?(x.color.value.copy(y.color),x.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}}}function sse(n,e,t,i){let r={},o={},s=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function g(E,D,I,z){const U=E.value,W=D+"_"+I;if(void 0===z[W])return z[W]="number"==typeof U||"boolean"==typeof U?U:U.clone(),!0;{const Z=z[W];if("number"==typeof U||"boolean"==typeof U){if(Z!==U)return z[W]=U,!0}else if(!1===Z.equals(U))return Z.copy(U),!0}return!1}function w(E){const D={boundary:0,storage:0};return"number"==typeof E||"boolean"==typeof E?(D.boundary=4,D.storage=4):E.isVector2?(D.boundary=8,D.storage=8):E.isVector3||E.isColor?(D.boundary=16,D.storage=12):E.isVector4?(D.boundary=16,D.storage=16):E.isMatrix3?(D.boundary=48,D.storage=48):E.isMatrix4?(D.boundary=64,D.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),D}function x(E){const D=E.target;D.removeEventListener("dispose",x);const I=s.indexOf(D.__bindingPointIndex);s.splice(I,1),n.deleteBuffer(r[D.id]),delete r[D.id],delete o[D.id]}return{bind:function l(E,D){i.uniformBlockBinding(E,D.program)},update:function d(E,D){let I=r[E.id];void 0===I&&(function v(E){const D=E.uniforms;let I=0;for(let W=0,Z=D.length;W<Z;W++){const F=Array.isArray(D[W])?D[W]:[D[W]];for(let O=0,Y=F.length;O<Y;O++){const pe=F[O],fe=Array.isArray(pe.value)?pe.value:[pe.value];for(let be=0,Ee=fe.length;be<Ee;be++){const me=w(fe[be]),re=I%16,Te=re%me.boundary,We=re+Te;I+=Te,0!==We&&16-We<me.storage&&(I+=16-We),pe.__data=new Float32Array(me.storage/Float32Array.BYTES_PER_ELEMENT),pe.__offset=I,I+=me.storage}}}const U=I%16;U>0&&(I+=16-U),E.__size=I,E.__cache={}}(E),I=function h(E){const D=function f(){for(let E=0;E<a;E++)if(-1===s.indexOf(E))return s.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();E.__bindingPointIndex=D;const I=n.createBuffer(),z=E.__size,U=E.usage;return n.bindBuffer(n.UNIFORM_BUFFER,I),n.bufferData(n.UNIFORM_BUFFER,z,U),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,D,I),I}(E),r[E.id]=I,E.addEventListener("dispose",x)),i.updateUBOMapping(E,D.program);const U=e.render.frame;o[E.id]!==U&&(function p(E){const I=E.uniforms,z=E.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[E.id]);for(let U=0,W=I.length;U<W;U++){const Z=Array.isArray(I[U])?I[U]:[I[U]];for(let F=0,O=Z.length;F<O;F++){const Y=Z[F];if(!0===g(Y,U,F,z)){const pe=Y.__offset,fe=Array.isArray(Y.value)?Y.value:[Y.value];let be=0;for(let Ee=0;Ee<fe.length;Ee++){const te=fe[Ee],me=w(te);"number"==typeof te||"boolean"==typeof te?(Y.__data[0]=te,n.bufferSubData(n.UNIFORM_BUFFER,pe+be,Y.__data)):te.isMatrix3?(Y.__data[0]=te.elements[0],Y.__data[1]=te.elements[1],Y.__data[2]=te.elements[2],Y.__data[3]=0,Y.__data[4]=te.elements[3],Y.__data[5]=te.elements[4],Y.__data[6]=te.elements[5],Y.__data[7]=0,Y.__data[8]=te.elements[6],Y.__data[9]=te.elements[7],Y.__data[10]=te.elements[8],Y.__data[11]=0):(te.toArray(Y.__data,be),be+=me.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,pe,Y.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(E),o[E.id]=U)},dispose:function y(){for(const E in r)n.deleteBuffer(r[E]);s=[],r={},o={}}}}class ase{constructor(e={}){const{canvas:t=OJ(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:d=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:p=!1}=e;let g;if(this.isWebGLRenderer=!0,null!==i){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=s;const v=new Uint32Array(4),w=new Int32Array(4);let x=null,y=null;const E=[],D=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Bc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const I=this;let z=!1;this._outputColorSpace=Do;let U=0,W=0,Z=null,F=-1,O=null;const Y=new On,pe=new On;let fe=null;const be=new at(0);let Ee=0,te=t.width,me=t.height,re=1,Te=null,We=null;const rt=new On(0,0,te,me),Tt=new On(0,0,te,me);let Qt=!1;const ye=new Wg;let $e=!1,Mt=!1;const ze=new Gt,xt=new Gt,At=new $,Ct=new On,ni={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Pn=!1;function Jt(){return null===Z?re:1}let Fe,je,Ae,Et,Ue,j,k,de,Me,Le,xe,wt,nt,Rt,Bt,Ve,ht,Ft,Zt,_t,Dn,fn,ui,ne,q=i;function Qe(V,ie){return t.getContext(V,ie)}try{const V={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:d,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r176"),t.addEventListener("webglcontextlost",Pe,!1),t.addEventListener("webglcontextrestored",lt,!1),t.addEventListener("webglcontextcreationerror",st,!1),null===q){const ie="webgl2";if(q=Qe(ie,V),null===q)throw Qe(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}function ot(){Fe=new _re(q),Fe.init(),fn=new Joe(q,Fe),je=new dre(q,Fe,e,fn),Ae=new Koe(q,Fe),je.reverseDepthBuffer&&p&&Ae.buffers.depth.setReversed(!0),Et=new bre(q),Ue=new Boe,j=new Qoe(q,Fe,Ae,Ue,je,fn,Et),k=new hre(I),de=new gre(I),Me=new sne(q),ui=new lre(q,Me),Le=new vre(q,Me,Et,ui),xe=new wre(q,Le,Me,Et),Zt=new xre(q,je,j),Ve=new ure(Ue),wt=new Noe(I,k,de,Fe,je,ui,Ve),nt=new ose(I,Ue),Rt=new zoe,Bt=new $oe(Fe),Ft=new are(I,k,de,Ae,xe,g,l),ht=new Xoe(I,xe,je),ne=new sse(q,Et,je,Ae),_t=new cre(q,Fe,Et),Dn=new yre(q,Fe,Et),Et.programs=wt.programs,I.capabilities=je,I.extensions=Fe,I.properties=Ue,I.renderLists=Rt,I.shadowMap=ht,I.state=Ae,I.info=Et}ot();const we=new ise(I,q);function Pe(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),z=!0}function lt(){console.log("THREE.WebGLRenderer: Context Restored."),z=!1;const V=Et.autoReset,ie=ht.enabled,_e=ht.autoUpdate,ve=ht.needsUpdate,le=ht.type;ot(),Et.autoReset=V,ht.enabled=ie,ht.autoUpdate=_e,ht.needsUpdate=ve,ht.type=le}function st(V){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function cn(V){const ie=V.target;ie.removeEventListener("dispose",cn),function Ni(V){(function zr(V){const ie=Ue.get(V).programs;void 0!==ie&&(ie.forEach(function(_e){wt.releaseProgram(_e)}),V.isShaderMaterial&&wt.releaseShaderCache(V))})(V),Ue.remove(V)}(ie)}function Wn(V,ie,_e){!0===V.transparent&&2===V.side&&!1===V.forceSinglePass?(V.side=1,V.needsUpdate=!0,G0(V,ie,_e),V.side=0,V.needsUpdate=!0,G0(V,ie,_e),V.side=2):G0(V,ie,_e)}this.xr=we,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const V=Fe.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=Fe.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(V){void 0!==V&&(re=V,this.setSize(te,me,!1))},this.getSize=function(V){return V.set(te,me)},this.setSize=function(V,ie,_e=!0){we.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(te=V,me=ie,t.width=Math.floor(V*re),t.height=Math.floor(ie*re),!0===_e&&(t.style.width=V+"px",t.style.height=ie+"px"),this.setViewport(0,0,V,ie))},this.getDrawingBufferSize=function(V){return V.set(te*re,me*re).floor()},this.setDrawingBufferSize=function(V,ie,_e){te=V,me=ie,re=_e,t.width=Math.floor(V*_e),t.height=Math.floor(ie*_e),this.setViewport(0,0,V,ie)},this.getCurrentViewport=function(V){return V.copy(Y)},this.getViewport=function(V){return V.copy(rt)},this.setViewport=function(V,ie,_e,ve){V.isVector4?rt.set(V.x,V.y,V.z,V.w):rt.set(V,ie,_e,ve),Ae.viewport(Y.copy(rt).multiplyScalar(re).round())},this.getScissor=function(V){return V.copy(Tt)},this.setScissor=function(V,ie,_e,ve){V.isVector4?Tt.set(V.x,V.y,V.z,V.w):Tt.set(V,ie,_e,ve),Ae.scissor(pe.copy(Tt).multiplyScalar(re).round())},this.getScissorTest=function(){return Qt},this.setScissorTest=function(V){Ae.setScissorTest(Qt=V)},this.setOpaqueSort=function(V){Te=V},this.setTransparentSort=function(V){We=V},this.getClearColor=function(V){return V.copy(Ft.getClearColor())},this.setClearColor=function(){Ft.setClearColor(...arguments)},this.getClearAlpha=function(){return Ft.getClearAlpha()},this.setClearAlpha=function(){Ft.setClearAlpha(...arguments)},this.clear=function(V=!0,ie=!0,_e=!0){let ve=0;if(V){let le=!1;if(null!==Z){const Ge=Z.texture.format;le=Ge===RE||Ge===PE||Ge===ob}if(le){const Ge=Z.texture.type,it=Ge===Ba||Ge===zc||Ge===Tg||Ge===Ag||Ge===DE||Ge===AE,mt=Ft.getClearColor(),ft=Ft.getClearAlpha(),Xt=mt.r,Wt=mt.g,Lt=mt.b;it?(v[0]=Xt,v[1]=Wt,v[2]=Lt,v[3]=ft,q.clearBufferuiv(q.COLOR,0,v)):(w[0]=Xt,w[1]=Wt,w[2]=Lt,w[3]=ft,q.clearBufferiv(q.COLOR,0,w))}else ve|=q.COLOR_BUFFER_BIT}ie&&(ve|=q.DEPTH_BUFFER_BIT),_e&&(ve|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Pe,!1),t.removeEventListener("webglcontextrestored",lt,!1),t.removeEventListener("webglcontextcreationerror",st,!1),Ft.dispose(),Rt.dispose(),Bt.dispose(),Ue.dispose(),k.dispose(),de.dispose(),xe.dispose(),ui.dispose(),ne.dispose(),wt.dispose(),we.dispose(),we.removeEventListener("sessionstart",kU),we.removeEventListener("sessionend",FU),Uu.stop()},this.renderBufferDirect=function(V,ie,_e,ve,le,Ge){null===ie&&(ie=ni);const it=le.isMesh&&le.matrixWorld.determinant()<0,mt=function Wce(V,ie,_e,ve,le){!0!==ie.isScene&&(ie=ni),j.resetTextureUnits();const Ge=ie.fog,mt=null===Z?I.outputColorSpace:!0===Z.isXRRenderTarget?Z.texture.colorSpace:Nf,ft=(ve.isMeshStandardMaterial?de:k).get(ve.envMap||(ve.isMeshStandardMaterial?ie.environment:null)),Xt=!0===ve.vertexColors&&!!_e.attributes.color&&4===_e.attributes.color.itemSize,Wt=!!_e.attributes.tangent&&(!!ve.normalMap||ve.anisotropy>0),Lt=!!_e.morphAttributes.position,En=!!_e.morphAttributes.normal,$n=!!_e.morphAttributes.color;let Ii=Bc;ve.toneMapped&&(null===Z||!0===Z.isXRRenderTarget)&&(Ii=I.toneMapping);const Bi=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,kn=void 0!==Bi?Bi.length:0,Ot=Ue.get(ve),Ir=y.state.lights;!0!==$e||!0!==Mt&&V===O||Ve.setState(ve,V,V===O&&ve.id===F);let Un=!1;ve.version===Ot.__version?(Ot.needsLights&&Ot.lightsStateVersion!==Ir.state.version||Ot.outputColorSpace!==mt||le.isBatchedMesh&&!1===Ot.batching||!le.isBatchedMesh&&!0===Ot.batching||le.isBatchedMesh&&!0===Ot.batchingColor&&null===le.colorTexture||le.isBatchedMesh&&!1===Ot.batchingColor&&null!==le.colorTexture||le.isInstancedMesh&&!1===Ot.instancing||!le.isInstancedMesh&&!0===Ot.instancing||le.isSkinnedMesh&&!1===Ot.skinning||!le.isSkinnedMesh&&!0===Ot.skinning||le.isInstancedMesh&&!0===Ot.instancingColor&&null===le.instanceColor||le.isInstancedMesh&&!1===Ot.instancingColor&&null!==le.instanceColor||le.isInstancedMesh&&!0===Ot.instancingMorph&&null===le.morphTexture||le.isInstancedMesh&&!1===Ot.instancingMorph&&null!==le.morphTexture||Ot.envMap!==ft||!0===ve.fog&&Ot.fog!==Ge||void 0!==Ot.numClippingPlanes&&(Ot.numClippingPlanes!==Ve.numPlanes||Ot.numIntersection!==Ve.numIntersection)||Ot.vertexAlphas!==Xt||Ot.vertexTangents!==Wt||Ot.morphTargets!==Lt||Ot.morphNormals!==En||Ot.morphColors!==$n||Ot.toneMapping!==Ii||Ot.morphTargetsCount!==kn)&&(Un=!0):(Un=!0,Ot.__version=ve.version);let oa=Ot.currentProgram;!0===Un&&(oa=G0(ve,ie,le));let _p=!1,Jo=!1,c_=!1;const Ei=oa.getUniforms(),Es=Ot.uniforms;if(Ae.useProgram(oa.program)&&(_p=!0,Jo=!0,c_=!0),ve.id!==F&&(F=ve.id,Jo=!0),_p||O!==V){Ae.buffers.depth.getReversed()?(ze.copy(V.projectionMatrix),function FJ(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}(ze),function NJ(n){const e=n.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}(ze),Ei.setValue(q,"projectionMatrix",ze)):Ei.setValue(q,"projectionMatrix",V.projectionMatrix),Ei.setValue(q,"viewMatrix",V.matrixWorldInverse);const Lo=Ei.map.cameraPosition;void 0!==Lo&&Lo.setValue(q,At.setFromMatrixPosition(V.matrixWorld)),je.logarithmicDepthBuffer&&Ei.setValue(q,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshLambertMaterial||ve.isMeshBasicMaterial||ve.isMeshStandardMaterial||ve.isShaderMaterial)&&Ei.setValue(q,"isOrthographic",!0===V.isOrthographicCamera),O!==V&&(O=V,Jo=!0,c_=!0)}if(le.isSkinnedMesh){Ei.setOptional(q,le,"bindMatrix"),Ei.setOptional(q,le,"bindMatrixInverse");const ho=le.skeleton;ho&&(null===ho.boneTexture&&ho.computeBoneTexture(),Ei.setValue(q,"boneTexture",ho.boneTexture,j))}le.isBatchedMesh&&(Ei.setOptional(q,le,"batchingTexture"),Ei.setValue(q,"batchingTexture",le._matricesTexture,j),Ei.setOptional(q,le,"batchingIdTexture"),Ei.setValue(q,"batchingIdTexture",le._indirectTexture,j),Ei.setOptional(q,le,"batchingColorTexture"),null!==le._colorsTexture&&Ei.setValue(q,"batchingColorTexture",le._colorsTexture,j));const Ss=_e.morphAttributes;if((void 0!==Ss.position||void 0!==Ss.normal||void 0!==Ss.color)&&Zt.update(le,_e,oa),(Jo||Ot.receiveShadow!==le.receiveShadow)&&(Ot.receiveShadow=le.receiveShadow,Ei.setValue(q,"receiveShadow",le.receiveShadow)),ve.isMeshGouraudMaterial&&null!==ve.envMap&&(Es.envMap.value=ft,Es.flipEnvMap.value=ft.isCubeTexture&&!1===ft.isRenderTargetTexture?-1:1),ve.isMeshStandardMaterial&&null===ve.envMap&&null!==ie.environment&&(Es.envMapIntensity.value=ie.environmentIntensity),Jo&&(Ei.setValue(q,"toneMappingExposure",I.toneMappingExposure),Ot.needsLights&&function $ce(V,ie){V.ambientLightColor.needsUpdate=ie,V.lightProbe.needsUpdate=ie,V.directionalLights.needsUpdate=ie,V.directionalLightShadows.needsUpdate=ie,V.pointLights.needsUpdate=ie,V.pointLightShadows.needsUpdate=ie,V.spotLights.needsUpdate=ie,V.spotLightShadows.needsUpdate=ie,V.rectAreaLights.needsUpdate=ie,V.hemisphereLights.needsUpdate=ie}(Es,c_),Ge&&!0===ve.fog&&nt.refreshFogUniforms(Es,Ge),nt.refreshMaterialUniforms(Es,ve,re,me,y.state.transmissionRenderTarget[V.id]),C0.upload(q,zU(Ot),Es,j)),ve.isShaderMaterial&&!0===ve.uniformsNeedUpdate&&(C0.upload(q,zU(Ot),Es,j),ve.uniformsNeedUpdate=!1),ve.isSpriteMaterial&&Ei.setValue(q,"center",le.center),Ei.setValue(q,"modelViewMatrix",le.modelViewMatrix),Ei.setValue(q,"normalMatrix",le.normalMatrix),Ei.setValue(q,"modelMatrix",le.matrixWorld),ve.isShaderMaterial||ve.isRawShaderMaterial){const ho=ve.uniformsGroups;for(let Lo=0,dD=ho.length;Lo<dD;Lo++){const zu=ho[Lo];ne.update(zu,oa),ne.bind(zu,oa)}}return oa}(V,ie,_e,ve,le);Ae.setMaterial(ve,it);let ft=_e.index,Xt=1;if(!0===ve.wireframe){if(ft=Le.getWireframeAttribute(_e),void 0===ft)return;Xt=2}const Wt=_e.drawRange,Lt=_e.attributes.position;let En=Wt.start*Xt,$n=(Wt.start+Wt.count)*Xt;null!==Ge&&(En=Math.max(En,Ge.start*Xt),$n=Math.min($n,(Ge.start+Ge.count)*Xt)),null!==ft?(En=Math.max(En,0),$n=Math.min($n,ft.count)):null!=Lt&&(En=Math.max(En,0),$n=Math.min($n,Lt.count));const Ii=$n-En;if(Ii<0||Ii===1/0)return;ui.setup(le,ve,mt,_e,ft);let Bi,kn=_t;if(null!==ft&&(Bi=Me.get(ft),kn=Dn,kn.setIndex(Bi)),le.isMesh)!0===ve.wireframe?(Ae.setLineWidth(ve.wireframeLinewidth*Jt()),kn.setMode(q.LINES)):kn.setMode(q.TRIANGLES);else if(le.isLine){let Ot=ve.linewidth;void 0===Ot&&(Ot=1),Ae.setLineWidth(Ot*Jt()),kn.setMode(le.isLineSegments?q.LINES:le.isLineLoop?q.LINE_LOOP:q.LINE_STRIP)}else le.isPoints?kn.setMode(q.POINTS):le.isSprite&&kn.setMode(q.TRIANGLES);if(le.isBatchedMesh)if(null!==le._multiDrawInstances)gb("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),kn.renderMultiDrawInstances(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount,le._multiDrawInstances);else if(Fe.get("WEBGL_multi_draw"))kn.renderMultiDraw(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount);else{const Ot=le._multiDrawStarts,Ir=le._multiDrawCounts,Un=le._multiDrawCount,oa=ft?Me.get(ft).bytesPerElement:1,_p=Ue.get(ve).currentProgram.getUniforms();for(let Jo=0;Jo<Un;Jo++)_p.setValue(q,"_gl_DrawID",Jo),kn.render(Ot[Jo]/oa,Ir[Jo])}else if(le.isInstancedMesh)kn.renderInstances(En,Ii,le.count);else if(_e.isInstancedBufferGeometry){const Ir=Math.min(_e.instanceCount,void 0!==_e._maxInstanceCount?_e._maxInstanceCount:1/0);kn.renderInstances(En,Ii,Ir)}else kn.render(En,Ii)},this.compile=function(V,ie,_e=null){null===_e&&(_e=V),y=Bt.get(_e),y.init(ie),D.push(y),_e.traverseVisible(function(le){le.isLight&&le.layers.test(ie.layers)&&(y.pushLight(le),le.castShadow&&y.pushShadow(le))}),V!==_e&&V.traverseVisible(function(le){le.isLight&&le.layers.test(ie.layers)&&(y.pushLight(le),le.castShadow&&y.pushShadow(le))}),y.setupLights();const ve=new Set;return V.traverse(function(le){if(!(le.isMesh||le.isPoints||le.isLine||le.isSprite))return;const Ge=le.material;if(Ge)if(Array.isArray(Ge))for(let it=0;it<Ge.length;it++){const mt=Ge[it];Wn(mt,_e,le),ve.add(mt)}else Wn(Ge,_e,le),ve.add(Ge)}),y=D.pop(),ve},this.compileAsync=function(V,ie,_e=null){const ve=this.compile(V,ie,_e);return new Promise(le=>{function Ge(){ve.forEach(function(it){Ue.get(it).currentProgram.isReady()&&ve.delete(it)}),0!==ve.size?setTimeout(Ge,10):le(V)}null!==Fe.get("KHR_parallel_shader_compile")?Ge():setTimeout(Ge,10)})};let ra=null;function kU(){Uu.stop()}function FU(){Uu.start()}const Uu=new w3;function cD(V,ie,_e,ve){if(!1===V.visible)return;if(V.layers.test(ie.layers))if(V.isGroup)_e=V.renderOrder;else if(V.isLOD)!0===V.autoUpdate&&V.update(ie);else if(V.isLight)y.pushLight(V),V.castShadow&&y.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||ye.intersectsSprite(V)){ve&&Ct.setFromMatrixPosition(V.matrixWorld).applyMatrix4(xt);const it=xe.update(V),mt=V.material;mt.visible&&x.push(V,it,mt,_e,Ct.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||ye.intersectsObject(V))){const it=xe.update(V),mt=V.material;if(ve&&(void 0!==V.boundingSphere?(null===V.boundingSphere&&V.computeBoundingSphere(),Ct.copy(V.boundingSphere.center)):(null===it.boundingSphere&&it.computeBoundingSphere(),Ct.copy(it.boundingSphere.center)),Ct.applyMatrix4(V.matrixWorld).applyMatrix4(xt)),Array.isArray(mt)){const ft=it.groups;for(let Xt=0,Wt=ft.length;Xt<Wt;Xt++){const Lt=ft[Xt],En=mt[Lt.materialIndex];En&&En.visible&&x.push(V,it,En,_e,Ct.z,Lt)}}else mt.visible&&x.push(V,it,mt,_e,Ct.z,null)}const Ge=V.children;for(let it=0,mt=Ge.length;it<mt;it++)cD(Ge[it],ie,_e,ve)}function NU(V,ie,_e,ve){const le=V.opaque,Ge=V.transmissive,it=V.transparent;y.setupLightsView(_e),!0===$e&&Ve.setGlobalState(I.clippingPlanes,_e),ve&&Ae.viewport(Y.copy(ve)),le.length>0&&H0(le,ie,_e),Ge.length>0&&H0(Ge,ie,_e),it.length>0&&H0(it,ie,_e),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function BU(V,ie,_e,ve){if(null!==(!0===_e.isScene?_e.overrideMaterial:null))return;void 0===y.state.transmissionRenderTarget[ve.id]&&(y.state.transmissionRenderTarget[ve.id]=new Al(1,1,{generateMipmaps:!0,type:Fe.has("EXT_color_buffer_half_float")||Fe.has("EXT_color_buffer_float")?Dg:Ba,minFilter:Sl,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:In.workingColorSpace}));const Ge=y.state.transmissionRenderTarget[ve.id],it=ve.viewport||Y;Ge.setSize(it.z*I.transmissionResolutionScale,it.w*I.transmissionResolutionScale);const mt=I.getRenderTarget();I.setRenderTarget(Ge),I.getClearColor(be),Ee=I.getClearAlpha(),Ee<1&&I.setClearColor(16777215,.5),I.clear(),Pn&&Ft.render(_e);const ft=I.toneMapping;I.toneMapping=Bc;const Xt=ve.viewport;if(void 0!==ve.viewport&&(ve.viewport=void 0),y.setupLightsView(ve),!0===$e&&Ve.setGlobalState(I.clippingPlanes,ve),H0(V,_e,ve),j.updateMultisampleRenderTarget(Ge),j.updateRenderTargetMipmap(Ge),!1===Fe.has("WEBGL_multisampled_render_to_texture")){let Wt=!1;for(let Lt=0,En=ie.length;Lt<En;Lt++){const $n=ie[Lt],Ii=$n.object,Bi=$n.geometry,kn=$n.material,Ot=$n.group;if(2===kn.side&&Ii.layers.test(ve.layers)){const Ir=kn.side;kn.side=1,kn.needsUpdate=!0,UU(Ii,_e,ve,Bi,kn,Ot),kn.side=Ir,kn.needsUpdate=!0,Wt=!0}}!0===Wt&&(j.updateMultisampleRenderTarget(Ge),j.updateRenderTargetMipmap(Ge))}I.setRenderTarget(mt),I.setClearColor(be,Ee),void 0!==Xt&&(ve.viewport=Xt),I.toneMapping=ft}function H0(V,ie,_e){const ve=!0===ie.isScene?ie.overrideMaterial:null;for(let le=0,Ge=V.length;le<Ge;le++){const it=V[le],mt=it.object,ft=it.geometry,Xt=it.group;let Wt=it.material;!0===Wt.allowOverride&&null!==ve&&(Wt=ve),mt.layers.test(_e.layers)&&UU(mt,ie,_e,ft,Wt,Xt)}}function UU(V,ie,_e,ve,le,Ge){V.onBeforeRender(I,ie,_e,ve,le,Ge),V.modelViewMatrix.multiplyMatrices(_e.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),le.onBeforeRender(I,ie,_e,ve,V,Ge),!0===le.transparent&&2===le.side&&!1===le.forceSinglePass?(le.side=1,le.needsUpdate=!0,I.renderBufferDirect(_e,ie,ve,le,V,Ge),le.side=0,le.needsUpdate=!0,I.renderBufferDirect(_e,ie,ve,le,V,Ge),le.side=2):I.renderBufferDirect(_e,ie,ve,le,V,Ge),V.onAfterRender(I,ie,_e,ve,le,Ge)}function G0(V,ie,_e){!0!==ie.isScene&&(ie=ni);const ve=Ue.get(V),le=y.state.lights,it=le.state.version,mt=wt.getParameters(V,le.state,y.state.shadowsArray,ie,_e),ft=wt.getProgramCacheKey(mt);let Xt=ve.programs;ve.environment=V.isMeshStandardMaterial?ie.environment:null,ve.fog=ie.fog,ve.envMap=(V.isMeshStandardMaterial?de:k).get(V.envMap||ve.environment),ve.envMapRotation=null!==ve.environment&&null===V.envMap?ie.environmentRotation:V.envMapRotation,void 0===Xt&&(V.addEventListener("dispose",cn),Xt=new Map,ve.programs=Xt);let Wt=Xt.get(ft);if(void 0!==Wt){if(ve.currentProgram===Wt&&ve.lightsStateVersion===it)return VU(V,mt),Wt}else mt.uniforms=wt.getUniforms(V),V.onBeforeCompile(mt,I),Wt=wt.acquireProgram(mt,ft),Xt.set(ft,Wt),ve.uniforms=mt.uniforms;const Lt=ve.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||!0===V.clipping)&&(Lt.clippingPlanes=Ve.uniform),VU(V,mt),ve.needsLights=function qce(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&!0===V.lights}(V),ve.lightsStateVersion=it,ve.needsLights&&(Lt.ambientLightColor.value=le.state.ambient,Lt.lightProbe.value=le.state.probe,Lt.directionalLights.value=le.state.directional,Lt.directionalLightShadows.value=le.state.directionalShadow,Lt.spotLights.value=le.state.spot,Lt.spotLightShadows.value=le.state.spotShadow,Lt.rectAreaLights.value=le.state.rectArea,Lt.ltc_1.value=le.state.rectAreaLTC1,Lt.ltc_2.value=le.state.rectAreaLTC2,Lt.pointLights.value=le.state.point,Lt.pointLightShadows.value=le.state.pointShadow,Lt.hemisphereLights.value=le.state.hemi,Lt.directionalShadowMap.value=le.state.directionalShadowMap,Lt.directionalShadowMatrix.value=le.state.directionalShadowMatrix,Lt.spotShadowMap.value=le.state.spotShadowMap,Lt.spotLightMatrix.value=le.state.spotLightMatrix,Lt.spotLightMap.value=le.state.spotLightMap,Lt.pointShadowMap.value=le.state.pointShadowMap,Lt.pointShadowMatrix.value=le.state.pointShadowMatrix),ve.currentProgram=Wt,ve.uniformsList=null,Wt}function zU(V){if(null===V.uniformsList){const ie=V.currentProgram.getUniforms();V.uniformsList=C0.seqWithValue(ie.seq,V.uniforms)}return V.uniformsList}function VU(V,ie){const _e=Ue.get(V);_e.outputColorSpace=ie.outputColorSpace,_e.batching=ie.batching,_e.batchingColor=ie.batchingColor,_e.instancing=ie.instancing,_e.instancingColor=ie.instancingColor,_e.instancingMorph=ie.instancingMorph,_e.skinning=ie.skinning,_e.morphTargets=ie.morphTargets,_e.morphNormals=ie.morphNormals,_e.morphColors=ie.morphColors,_e.morphTargetsCount=ie.morphTargetsCount,_e.numClippingPlanes=ie.numClippingPlanes,_e.numIntersection=ie.numClipIntersection,_e.vertexAlphas=ie.vertexAlphas,_e.vertexTangents=ie.vertexTangents,_e.toneMapping=ie.toneMapping}Uu.setAnimationLoop(function zl(V){ra&&ra(V)}),typeof self<"u"&&Uu.setContext(self),this.setAnimationLoop=function(V){ra=V,we.setAnimationLoop(V),null===V?Uu.stop():Uu.start()},we.addEventListener("sessionstart",kU),we.addEventListener("sessionend",FU),this.render=function(V,ie){if(void 0!==ie&&!0!==ie.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===z)return;if(!0===V.matrixWorldAutoUpdate&&V.updateMatrixWorld(),null===ie.parent&&!0===ie.matrixWorldAutoUpdate&&ie.updateMatrixWorld(),!0===we.enabled&&!0===we.isPresenting&&(!0===we.cameraAutoUpdate&&we.updateCamera(ie),ie=we.getCamera()),!0===V.isScene&&V.onBeforeRender(I,V,ie,Z),y=Bt.get(V,D.length),y.init(ie),D.push(y),xt.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),ye.setFromProjectionMatrix(xt),Mt=this.localClippingEnabled,$e=Ve.init(this.clippingPlanes,Mt),x=Rt.get(V,E.length),x.init(),E.push(x),!0===we.enabled&&!0===we.isPresenting){const Ge=I.xr.getDepthSensingMesh();null!==Ge&&cD(Ge,ie,-1/0,I.sortObjects)}cD(V,ie,0,I.sortObjects),x.finish(),!0===I.sortObjects&&x.sort(Te,We),Pn=!1===we.enabled||!1===we.isPresenting||!1===we.hasDepthSensing(),Pn&&Ft.addToRenderList(x,V),this.info.render.frame++,!0===$e&&Ve.beginShadows(),ht.render(y.state.shadowsArray,V,ie),!0===$e&&Ve.endShadows(),!0===this.info.autoReset&&this.info.reset();const ve=x.opaque,le=x.transmissive;if(y.setupLights(),ie.isArrayCamera){const Ge=ie.cameras;if(le.length>0)for(let it=0,mt=Ge.length;it<mt;it++)BU(ve,le,V,Ge[it]);Pn&&Ft.render(V);for(let it=0,mt=Ge.length;it<mt;it++){const ft=Ge[it];NU(x,V,ft,ft.viewport)}}else le.length>0&&BU(ve,le,V,ie),Pn&&Ft.render(V),NU(x,V,ie);null!==Z&&0===W&&(j.updateMultisampleRenderTarget(Z),j.updateRenderTargetMipmap(Z)),!0===V.isScene&&V.onAfterRender(I,V,ie),ui.resetDefaultState(),F=-1,O=null,D.pop(),D.length>0?(y=D[D.length-1],!0===$e&&Ve.setGlobalState(I.clippingPlanes,y.state.camera)):y=null,E.pop(),x=E.length>0?E[E.length-1]:null},this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return W},this.getRenderTarget=function(){return Z},this.setRenderTargetTextures=function(V,ie,_e){const ve=Ue.get(V);ve.__autoAllocateDepthBuffer=!1===V.resolveDepthBuffer,!1===ve.__autoAllocateDepthBuffer&&(ve.__useRenderToTexture=!1),Ue.get(V.texture).__webglTexture=ie,Ue.get(V.depthTexture).__webglTexture=ve.__autoAllocateDepthBuffer?void 0:_e,ve.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(V,ie){const _e=Ue.get(V);_e.__webglFramebuffer=ie,_e.__useDefaultFramebuffer=void 0===ie};const Zce=q.createFramebuffer();this.setRenderTarget=function(V,ie=0,_e=0){Z=V,U=ie,W=_e;let ve=!0,le=null,Ge=!1,it=!1;if(V){const ft=Ue.get(V);if(void 0!==ft.__useDefaultFramebuffer)Ae.bindFramebuffer(q.FRAMEBUFFER,null),ve=!1;else if(void 0===ft.__webglFramebuffer)j.setupRenderTarget(V);else if(ft.__hasExternalTextures)j.rebindTextures(V,Ue.get(V.texture).__webglTexture,Ue.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const Lt=V.depthTexture;if(ft.__boundDepthTexture!==Lt){if(null!==Lt&&Ue.has(Lt)&&(V.width!==Lt.image.width||V.height!==Lt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");j.setupDepthRenderbuffer(V)}}const Xt=V.texture;(Xt.isData3DTexture||Xt.isDataArrayTexture||Xt.isCompressedArrayTexture)&&(it=!0);const Wt=Ue.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(le=Array.isArray(Wt[ie])?Wt[ie][_e]:Wt[ie],Ge=!0):le=V.samples>0&&!1===j.useMultisampledRTT(V)?Ue.get(V).__webglMultisampledFramebuffer:Array.isArray(Wt)?Wt[_e]:Wt,Y.copy(V.viewport),pe.copy(V.scissor),fe=V.scissorTest}else Y.copy(rt).multiplyScalar(re).floor(),pe.copy(Tt).multiplyScalar(re).floor(),fe=Qt;if(0!==_e&&(le=Zce),Ae.bindFramebuffer(q.FRAMEBUFFER,le)&&ve&&Ae.drawBuffers(V,le),Ae.viewport(Y),Ae.scissor(pe),Ae.setScissorTest(fe),Ge){const ft=Ue.get(V.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+ie,ft.__webglTexture,_e)}else if(it){const ft=Ue.get(V.texture);q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,ft.__webglTexture,_e,ie)}else if(null!==V&&0!==_e){const ft=Ue.get(V.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,ft.__webglTexture,_e)}F=-1},this.readRenderTargetPixels=function(V,ie,_e,ve,le,Ge,it){if(!V||!V.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let mt=Ue.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&void 0!==it&&(mt=mt[it]),mt){Ae.bindFramebuffer(q.FRAMEBUFFER,mt);try{const ft=V.texture,Xt=ft.format,Wt=ft.type;if(!je.textureFormatReadable(Xt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!je.textureTypeReadable(Wt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ie>=0&&ie<=V.width-ve&&_e>=0&&_e<=V.height-le&&q.readPixels(ie,_e,ve,le,fn.convert(Xt),fn.convert(Wt),Ge)}finally{const ft=null!==Z?Ue.get(Z).__webglFramebuffer:null;Ae.bindFramebuffer(q.FRAMEBUFFER,ft)}}},this.readRenderTargetPixelsAsync=function(){var V=cu(function*(ie,_e,ve,le,Ge,it,mt){if(!ie||!ie.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ft=Ue.get(ie).__webglFramebuffer;if(ie.isWebGLCubeRenderTarget&&void 0!==mt&&(ft=ft[mt]),ft){if(_e>=0&&_e<=ie.width-le&&ve>=0&&ve<=ie.height-Ge){Ae.bindFramebuffer(q.FRAMEBUFFER,ft);const Xt=ie.texture,Wt=Xt.format,Lt=Xt.type;if(!je.textureFormatReadable(Wt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!je.textureTypeReadable(Lt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const En=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,En),q.bufferData(q.PIXEL_PACK_BUFFER,it.byteLength,q.STREAM_READ),q.readPixels(_e,ve,le,Ge,fn.convert(Wt),fn.convert(Lt),0);const $n=null!==Z?Ue.get(Z).__webglFramebuffer:null;Ae.bindFramebuffer(q.FRAMEBUFFER,$n);const Ii=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);return q.flush(),yield function kJ(n,e,t){return new Promise(function(i,r){setTimeout(function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:i()}},t)})}(q,Ii,4),q.bindBuffer(q.PIXEL_PACK_BUFFER,En),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,it),q.deleteBuffer(En),q.deleteSync(Ii),it}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(ie,_e,ve,le,Ge,it,mt){return V.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(V,ie=null,_e=0){const ve=Math.pow(2,-_e),le=Math.floor(V.image.width*ve),Ge=Math.floor(V.image.height*ve),it=null!==ie?ie.x:0,mt=null!==ie?ie.y:0;j.setTexture2D(V,0),q.copyTexSubImage2D(q.TEXTURE_2D,_e,0,0,it,mt,le,Ge),Ae.unbindTexture()};const Xce=q.createFramebuffer(),Yce=q.createFramebuffer();this.copyTextureToTexture=function(V,ie,_e=null,ve=null,le=0,Ge=null){let it,mt,ft,Xt,Wt,Lt,En,$n,Ii;null===Ge&&(0!==le?(gb("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ge=le,le=0):Ge=0);const Bi=V.isCompressedTexture?V.mipmaps[Ge]:V.image;if(null!==_e)it=_e.max.x-_e.min.x,mt=_e.max.y-_e.min.y,ft=_e.isBox3?_e.max.z-_e.min.z:1,Xt=_e.min.x,Wt=_e.min.y,Lt=_e.isBox3?_e.min.z:0;else{const Ss=Math.pow(2,-le);it=Math.floor(Bi.width*Ss),mt=Math.floor(Bi.height*Ss),ft=V.isDataArrayTexture?Bi.depth:V.isData3DTexture?Math.floor(Bi.depth*Ss):1,Xt=0,Wt=0,Lt=0}null!==ve?(En=ve.x,$n=ve.y,Ii=ve.z):(En=0,$n=0,Ii=0);const kn=fn.convert(ie.format),Ot=fn.convert(ie.type);let Ir;ie.isData3DTexture?(j.setTexture3D(ie,0),Ir=q.TEXTURE_3D):ie.isDataArrayTexture||ie.isCompressedArrayTexture?(j.setTexture2DArray(ie,0),Ir=q.TEXTURE_2D_ARRAY):(j.setTexture2D(ie,0),Ir=q.TEXTURE_2D),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,ie.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,ie.unpackAlignment);const Un=q.getParameter(q.UNPACK_ROW_LENGTH),oa=q.getParameter(q.UNPACK_IMAGE_HEIGHT),_p=q.getParameter(q.UNPACK_SKIP_PIXELS),Jo=q.getParameter(q.UNPACK_SKIP_ROWS),c_=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,Bi.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Bi.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Xt),q.pixelStorei(q.UNPACK_SKIP_ROWS,Wt),q.pixelStorei(q.UNPACK_SKIP_IMAGES,Lt);const Ei=V.isDataArrayTexture||V.isData3DTexture,Es=ie.isDataArrayTexture||ie.isData3DTexture;if(V.isDepthTexture){const Ss=Ue.get(V),ho=Ue.get(ie),Lo=Ue.get(Ss.__renderTarget),dD=Ue.get(ho.__renderTarget);Ae.bindFramebuffer(q.READ_FRAMEBUFFER,Lo.__webglFramebuffer),Ae.bindFramebuffer(q.DRAW_FRAMEBUFFER,dD.__webglFramebuffer);for(let zu=0;zu<ft;zu++)Ei&&(q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Ue.get(V).__webglTexture,le,Lt+zu),q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Ue.get(ie).__webglTexture,Ge,Ii+zu)),q.blitFramebuffer(Xt,Wt,it,mt,En,$n,it,mt,q.DEPTH_BUFFER_BIT,q.NEAREST);Ae.bindFramebuffer(q.READ_FRAMEBUFFER,null),Ae.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else if(0!==le||V.isRenderTargetTexture||Ue.has(V)){const Ss=Ue.get(V),ho=Ue.get(ie);Ae.bindFramebuffer(q.READ_FRAMEBUFFER,Xce),Ae.bindFramebuffer(q.DRAW_FRAMEBUFFER,Yce);for(let Lo=0;Lo<ft;Lo++)Ei?q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Ss.__webglTexture,le,Lt+Lo):q.framebufferTexture2D(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Ss.__webglTexture,le),Es?q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,ho.__webglTexture,Ge,Ii+Lo):q.framebufferTexture2D(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,ho.__webglTexture,Ge),0!==le?q.blitFramebuffer(Xt,Wt,it,mt,En,$n,it,mt,q.COLOR_BUFFER_BIT,q.NEAREST):Es?q.copyTexSubImage3D(Ir,Ge,En,$n,Ii+Lo,Xt,Wt,it,mt):q.copyTexSubImage2D(Ir,Ge,En,$n,Xt,Wt,it,mt);Ae.bindFramebuffer(q.READ_FRAMEBUFFER,null),Ae.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else Es?V.isDataTexture||V.isData3DTexture?q.texSubImage3D(Ir,Ge,En,$n,Ii,it,mt,ft,kn,Ot,Bi.data):ie.isCompressedArrayTexture?q.compressedTexSubImage3D(Ir,Ge,En,$n,Ii,it,mt,ft,kn,Bi.data):q.texSubImage3D(Ir,Ge,En,$n,Ii,it,mt,ft,kn,Ot,Bi):V.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,Ge,En,$n,it,mt,kn,Ot,Bi.data):V.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,Ge,En,$n,Bi.width,Bi.height,kn,Bi.data):q.texSubImage2D(q.TEXTURE_2D,Ge,En,$n,it,mt,kn,Ot,Bi);q.pixelStorei(q.UNPACK_ROW_LENGTH,Un),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,oa),q.pixelStorei(q.UNPACK_SKIP_PIXELS,_p),q.pixelStorei(q.UNPACK_SKIP_ROWS,Jo),q.pixelStorei(q.UNPACK_SKIP_IMAGES,c_),0===Ge&&ie.generateMipmaps&&q.generateMipmap(Ir),Ae.unbindTexture()},this.copyTextureToTexture3D=function(V,ie,_e=null,ve=null,le=0){return gb('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(V,ie,_e,ve,le)},this.initRenderTarget=function(V){void 0===Ue.get(V).__webglFramebuffer&&j.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?j.setTextureCube(V,0):V.isData3DTexture?j.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?j.setTexture2DArray(V,0):j.setTexture2D(V,0),Ae.unbindTexture()},this.resetState=function(){U=0,W=0,Z=null,Ae.reset(),ui.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ys}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=In._getDrawingBufferColorSpace(e),t.unpackColorSpace=In._getUnpackColorSpace()}}const K3={type:"change"},FT={type:"start"},Q3={type:"end"},S0=new $f,J3=new Xc,lse=Math.cos(70*pu.DEG2RAD),ur=new $,Ro=2*Math.PI,NT=1e-6;class cse extends tne{constructor(e,t=null){super(e,t),this.state=-1,this.target=new $,this.cursor=new $,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new $,this._lastQuaternion=new so,this._lastTargetPosition=new $,this._quat=(new so).setFromUnitVectors(e.up,new $(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new u3,this._sphericalDelta=new u3,this._scale=1,this._panOffset=new $,this._rotateStart=new Ce,this._rotateEnd=new Ce,this._rotateDelta=new Ce,this._panStart=new Ce,this._panEnd=new Ce,this._panDelta=new Ce,this._dollyStart=new Ce,this._dollyEnd=new Ce,this._dollyDelta=new Ce,this._dollyDirection=new $,this._mouse=new Ce,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=use.bind(this),this._onPointerDown=dse.bind(this),this._onPointerUp=hse.bind(this),this._onContextMenu=yse.bind(this),this._onMouseWheel=mse.bind(this),this._onKeyDown=gse.bind(this),this._onTouchStart=_se.bind(this),this._onTouchMove=vse.bind(this),this._onMouseDown=fse.bind(this),this._onMouseMove=pse.bind(this),this._interceptControlDown=bse.bind(this),this._interceptControlUp=xse.bind(this),null!==this.domElement&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(K3),this.update(),this.state=-1}update(e=null){const t=this.object.position;ur.copy(t).sub(this.target),ur.applyQuaternion(this._quat),this._spherical.setFromVector3(ur),this.autoRotate&&-1===this.state&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=Ro:i>Math.PI&&(i-=Ro),r<-Math.PI?r+=Ro:r>Math.PI&&(r-=Ro),this._spherical.theta=i<=r?Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(ur.setFromSpherical(this._spherical),ur.applyQuaternion(this._quatInverse),t.copy(this.target).add(ur),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){const a=ur.length();s=this._clampDistance(a*this._scale);const l=a-s;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),o=!!l}else if(this.object.isOrthographicCamera){const a=new $(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=l!==this.object.zoom;const d=new $(this._mouse.x,this._mouse.y,0);d.unproject(this.object),this.object.position.sub(d).add(a),this.object.updateMatrixWorld(),s=ur.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==s&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(S0.origin.copy(this.object.position),S0.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(S0.direction))<lse?this.object.lookAt(this.target):(J3.setFromNormalAndCoplanarPoint(this.object.up,this.target),S0.intersectPlane(J3,this.target))))}else if(this.object.isOrthographicCamera){const s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,!!(o||this._lastPosition.distanceToSquared(this.object.position)>NT||8*(1-this._lastQuaternion.dot(this.object.quaternion))>NT||this._lastTargetPosition.distanceToSquared(this.target)>NT)&&(this.dispatchEvent(K3),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(e){return null!==e?Ro/60*this.autoRotateSpeed*e:Ro/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(.01*e);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){ur.setFromMatrixColumn(t,0),ur.multiplyScalar(-e),this._panOffset.add(ur)}_panUp(e,t){!0===this.screenSpacePanning?ur.setFromMatrixColumn(t,1):(ur.setFromMatrixColumn(t,0),ur.crossVectors(this.object.up,ur)),ur.multiplyScalar(e),this._panOffset.add(ur)}_pan(e,t){const i=this.domElement;if(this.object.isPerspectiveCamera){ur.copy(this.object.position).sub(this.target);let o=ur.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/i.clientHeight,this.object.matrix),this._panUp(2*t*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),o=t-i.top,a=i.height;this._mouse.x=(e-i.left)/i.width*2-1,this._mouse.y=-o/a*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Ro*this._rotateDelta.x/t.clientHeight),this._rotateUp(Ro*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Ro*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Ro*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Ro*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Ro*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(1===this._pointers.length)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e);this._rotateStart.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}}_handleTouchStartPan(e){if(1===this._pointers.length)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e);this._panStart.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(1==this._pointers.length)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e);this._rotateEnd.set(.5*(e.pageX+i.x),.5*(e.pageY+i.y))}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Ro*this._rotateDelta.x/t.clientHeight),this._rotateUp(Ro*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(1===this._pointers.length)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e);this._panEnd.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd),this._updateZoomParameters(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return void this._pointers.splice(t,1)}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];void 0===t&&(t=new Ce,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){return this._pointerPositions[e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0]]}_customWheelEvent(e){const i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(e.deltaMode){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function dse(n){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),"touch"===n.pointerType?this._onTouchStart(n):this._onMouseDown(n)))}function use(n){!1!==this.enabled&&("touch"===n.pointerType?this._onTouchMove(n):this._onMouseMove(n))}function hse(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Q3),this.state=-1;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y})}}function fse(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case 1:if(!1===this.enableZoom)return;this._handleMouseDownDolly(n),this.state=1;break;case 0:if(n.ctrlKey||n.metaKey||n.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(n),this.state=2}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(n),this.state=0}break;case 2:if(n.ctrlKey||n.metaKey||n.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(n),this.state=0}else{if(!1===this.enablePan)return;this._handleMouseDownPan(n),this.state=2}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(FT)}function pse(n){switch(this.state){case 0:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(n);break;case 1:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(n);break;case 2:if(!1===this.enablePan)return;this._handleMouseMovePan(n)}}function mse(n){!1===this.enabled||!1===this.enableZoom||-1!==this.state||(n.preventDefault(),this.dispatchEvent(FT),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(Q3))}function gse(n){!1!==this.enabled&&this._handleKeyDown(n)}function _se(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case 0:if(!1===this.enableRotate)return;this._handleTouchStartRotate(n),this.state=3;break;case 1:if(!1===this.enablePan)return;this._handleTouchStartPan(n),this.state=4;break;default:this.state=-1}break;case 2:switch(this.touches.TWO){case 2:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(n),this.state=5;break;case 3:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(n),this.state=6;break;default:this.state=-1}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(FT)}function vse(n){switch(this._trackPointer(n),this.state){case 3:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(n),this.update();break;case 4:if(!1===this.enablePan)return;this._handleTouchMovePan(n),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(n),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=-1}}function yse(n){!1!==this.enabled&&n.preventDefault()}function bse(n){"Control"===n.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function xse(n){"Control"===n.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const wse=["container"];let Mse=(()=>{class n{constructor(t){this.data=t,this.frameId=0,this.axisLabels=[],this.trailPoints=[],this.gyroData={roll:0,pitch:0,yaw:0},this.gyroBuffer=[],this.bufferSize=3,this.smoothedRotation={x:0,y:0,z:0},this.smoothingFactor=.3,this.maxDelta=.016,this.lastUpdateTime=0,this.frameCounter=0,this.animate=()=>{this.frameId=requestAnimationFrame(this.animate),this.frameCounter++;const i=performance.now(),r=Math.min((i-this.lastUpdateTime)/1e3,this.maxDelta);this.lastUpdateTime=i,this.controls.update(),this.updateShipRotation(r),this.updateTrail(),this.frameCounter%10==0&&this.axisLabels.forEach(o=>{o.lookAt(this.camera.position)}),this.renderer.render(this.scene,this.camera)},t?.gyroscopeData&&(this.gyroData=t.gyroscopeData)}ngAfterViewInit(){this.initThree(),this.lastUpdateTime=performance.now(),this.animate()}ngOnDestroy(){this.cleanup()}cleanup(){this.frameId&&cancelAnimationFrame(this.frameId),this.renderer&&(this.renderer.dispose(),this.renderer.forceContextLoss()),this.scene?.traverse(t=>{t instanceof mi&&(t.geometry?.dispose(),Array.isArray(t.material)?t.material.forEach(i=>i.dispose()):t.material?.dispose())}),window.removeEventListener("resize",this.onWindowResize.bind(this))}createAdvancedShipGeometry(){const t=new jt,i=new Float32Array([0,1.2,4.5,-.4,.8,4,.4,.8,4,-.8,.4,3.5,.8,.4,3.5,-1,0,3,1,0,3,-.8,-.4,3.2,.8,-.4,3.2,0,-.8,3.5,-1.8,1,2,1.8,1,2,-2.2,.6,1,2.2,.6,1,-2.5,0,.5,2.5,0,.5,-2.2,-.8,.8,2.2,-.8,.8,0,-1.2,1,-2,1.2,0,2,1.2,0,-2.8,.8,-.5,2.8,.8,-.5,-3,0,-1,3,0,-1,-2.5,-1,-.5,2.5,-1,-.5,0,-1.5,-.8,-1.5,1,-2.5,1.5,1,-2.5,-1.8,.6,-3,1.8,.6,-3,-1.2,0,-3.5,1.2,0,-3.5,-.8,-.6,-3.2,.8,-.6,-3.2,0,-.8,-3.8,-.6,.8,-4.2,.6,.8,-4.2,-.8,0,-4.5,.8,0,-4.5,-.4,-.4,-4.3,.4,-.4,-4.3,-1.2,1.2,1.5,1.2,1.2,1.5,-1.2,1.2,-.5,1.2,1.2,-.5,-1.2,2.2,1.5,1.2,2.2,1.5,-1.2,2.2,-.5,1.2,2.2,-.5,-.8,2.2,.8,.8,2.2,.8,-.8,2.2,-.2,.8,2.2,-.2,-.8,3,.8,.8,3,.8,-.8,3,-.2,.8,3,-.2,-.3,2.2,-1.2,.3,2.2,-1.2,-.3,2.2,-1.8,.3,2.2,-1.8,-.25,3.5,-1.2,.25,3.5,-1.2,-.25,3.5,-1.8,.25,3.5,-1.8,0,3,.3,0,5.5,.3,0,2.2,-2,0,4,-2,-.4,5.5,.3,.4,5.5,.3,0,5.8,.3,-2.5,1.5,.5,2.5,1.5,.5,-2.5,1.8,.5,2.5,1.8,.5]);return t.setAttribute("position",new jn(i,3)),t.setIndex([0,1,2,0,3,1,0,2,4,1,3,5,2,6,4,3,7,5,4,6,8,5,7,9,6,9,8,7,9,8,1,10,3,2,4,11,3,10,12,4,13,11,5,12,14,6,15,13,7,16,14,8,17,15,9,18,16,9,17,18,10,12,19,11,20,13,12,14,21,13,22,15,14,16,23,15,24,17,16,18,25,17,26,18,18,25,27,18,27,26,19,21,28,20,29,22,21,23,30,22,31,24,23,25,32,24,33,26,25,27,34,26,35,27,28,30,37,29,38,31,30,32,39,31,40,33,32,34,41,33,42,35,34,36,41,35,42,36,37,39,41,38,42,40,37,38,40,37,40,39,39,40,42,39,42,41,43,44,48,43,48,47,44,46,50,44,50,48,46,45,49,46,49,50,45,43,47,45,47,49,47,48,50,47,50,49,51,52,56,51,56,55,52,54,58,52,58,56,54,53,57,54,57,58,53,51,55,53,55,57,55,56,58,55,58,57,59,60,64,59,64,63,60,62,66,60,66,64,62,61,65,62,65,66,61,59,63,61,63,65,63,64,66,63,66,65,10,11,44,10,44,43,19,20,46,19,46,45,74,76,75,75,76,77,5,6,15,5,15,14,14,15,24,14,24,23,23,24,33,23,33,32]),t.computeVertexNormals(),t.center(),t}createAxisLabel(t,i){const r=document.createElement("canvas"),o=r.getContext("2d");r.width=128,r.height=64,o.fillStyle=`#${i.toString(16).padStart(6,"0")}`,o.font="Bold 20px Arial",o.textAlign="center",o.fillText(t,64,40);const s=new See(r),a=new kS({map:s});return new iB(a)}initThree(){const t=this.container.nativeElement.clientWidth,i=this.container.nativeElement.clientHeight;this.scene=new JN;const r=new at(8900331);this.scene.background=r,this.scene.fog=new kb(8900331,50,200),this.camera=new Ar(75,t/i,.1,1e3),this.camera.position.set(0,8,15),this.camera.lookAt(0,0,0),this.renderer=new ase({antialias:!0,powerPreference:"high-performance",stencil:!1,depth:!0}),this.renderer.setSize(t,i),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=gE,this.renderer.outputColorSpace=Do,this.container.nativeElement.appendChild(this.renderer.domElement),this.controls=new cse(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.maxDistance=50,this.controls.minDistance=5,this.controls.maxPolarAngle=.8*Math.PI;const o=new KB(4210752,.4);this.scene.add(o);const s=new f0(16777215,1.5);s.position.set(30,30,20),s.castShadow=!0,s.shadow.mapSize.width=2048,s.shadow.mapSize.height=2048,s.shadow.camera.near=.5,s.shadow.camera.far=200,s.shadow.camera.left=-30,s.shadow.camera.right=30,s.shadow.camera.top=30,s.shadow.camera.bottom=-30,this.scene.add(s);const a=new f0(4491519,.3);a.position.set(-20,10,-20),this.scene.add(a);const l=new f0(16746564,.2);l.position.set(20,5,20),this.scene.add(l);const d=this.createAdvancedShipGeometry();d.scale(1.5,1.5,1.5);const h=new zB({color:3100495,shininess:60,side:2});this.shipMesh=new mi(d,h),this.shipMesh.castShadow=!0,this.shipMesh.receiveShadow=!0,this.scene.add(this.shipMesh);const f=new MB(d),p=new lr({color:6710886,linewidth:1,transparent:!0,opacity:.6});this.wireframe=new Ha(f,p),this.shipMesh.add(this.wireframe),this.createCoordinateAxes(),this.createTrail(),window.addEventListener("resize",this.onWindowResize.bind(this))}createCoordinateAxes(){const r=new Zc,o=(new jt).setFromPoints([new $(0,0,0),new $(4,0,0)]),s=new ta(o,new lr({color:16729156,linewidth:4}));r.add(s);const a=new wu(.1,.3,8),l=new mi(a,new ea({color:16729156}));l.position.set(4,0,0),l.rotateZ(-Math.PI/2),r.add(l);const d=this.createAxisLabel("ROLL",16729156);d.position.set(4.5,0,0),d.scale.setScalar(.5),r.add(d),this.axisLabels.push(d),this.scene.add(r);const h=new Zc,f=(new jt).setFromPoints([new $(0,0,0),new $(0,4,0)]),p=new ta(f,new lr({color:4521796,linewidth:4}));h.add(p);const g=new wu(.1,.3,8),v=new mi(g,new ea({color:4521796}));v.position.set(0,4,0),h.add(v);const w=this.createAxisLabel("PITCH",4521796);w.position.set(0,4.5,0),w.scale.setScalar(.5),h.add(w),this.axisLabels.push(w),this.scene.add(h);const x=new Zc,y=(new jt).setFromPoints([new $(0,0,0),new $(0,0,4)]),E=new ta(y,new lr({color:4474111,linewidth:4}));x.add(E);const D=new wu(.1,.3,8),I=new mi(D,new ea({color:4474111}));I.position.set(0,0,4),I.rotateX(Math.PI/2),x.add(I);const z=this.createAxisLabel("YAW",4474111);z.position.set(0,0,4.5),z.scale.setScalar(.5),x.add(z),this.axisLabels.push(z),this.scene.add(x);const U=new mi(new t_(.15,16,16),new ea({color:16777215}));this.scene.add(U)}createTrail(){const t=new jt,i=new lr({color:65535,transparent:!0,opacity:.8,linewidth:3});this.trailLine=new ta(t,i),this.scene.add(this.trailLine)}updateTrail(){if(this.frameCounter%3!=0)return;const t=new $(0,1.2,4.5);if(t.applyMatrix4(this.shipMesh.matrixWorld),this.trailPoints.push(t.clone()),this.trailPoints.length>30&&this.trailPoints.shift(),this.trailPoints.length>1){const i=new Float32Array(3*this.trailPoints.length);this.trailPoints.forEach((r,o)=>{i[3*o]=r.x,i[3*o+1]=r.y,i[3*o+2]=r.z}),this.trailLine.geometry.setAttribute("position",new jn(i,3)),this.trailLine.geometry.setDrawRange(0,this.trailPoints.length)}}onWindowResize(){const t=this.container.nativeElement.clientWidth,i=this.container.nativeElement.clientHeight;this.camera.aspect=t/i,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,i)}updateShipRotation(t){const i={x:pu.degToRad(-this.gyroData.pitch),y:pu.degToRad(this.gyroData.yaw),z:pu.degToRad(this.gyroData.roll)},r={x:Math.abs(i.x-this.smoothedRotation.x),y:Math.abs(i.y-this.smoothedRotation.y),z:Math.abs(i.z-this.smoothedRotation.z)},s=Math.max(r.x,r.y,r.z)>.1?.7:this.smoothingFactor,a=Math.min(s*t*60,1);this.smoothedRotation.x=pu.lerp(this.smoothedRotation.x,i.x,a),this.smoothedRotation.y=pu.lerp(this.smoothedRotation.y,i.y,a),this.smoothedRotation.z=pu.lerp(this.smoothedRotation.z,i.z,a),this.shipMesh.rotation.order="YXZ",this.shipMesh.rotation.set(this.smoothedRotation.x,this.smoothedRotation.y,this.smoothedRotation.z)}updateGyroData(t){const i=performance.now();if(this.gyroBuffer.push({...t,timestamp:i}),this.gyroBuffer.length>this.bufferSize&&this.gyroBuffer.shift(),this.gyroBuffer.length>=2){const r=this.gyroBuffer.map((a,l)=>Math.pow(2,l)),o=r.reduce((a,l)=>a+l,0),s=this.gyroBuffer.reduce((a,l,d)=>({roll:a.roll+l.roll*r[d],pitch:a.pitch+l.pitch*r[d],yaw:a.yaw+l.yaw*r[d]}),{roll:0,pitch:0,yaw:0});this.gyroData={roll:s.roll/o,pitch:s.pitch/o,yaw:s.yaw/o}}else this.gyroData={...t}}resetOrientation(){this.gyroData={roll:0,pitch:0,yaw:0},this.smoothedRotation={x:0,y:0,z:0},this.trailPoints=[],this.gyroBuffer=[]}toggleTrail(){this.trailLine.visible=!this.trailLine.visible}resetCameraToFront(){this.camera.position.set(0,8,15),this.camera.lookAt(0,0,0),this.controls.reset()}getCurrentFPS(){return Math.round(1e3/(performance.now()-this.lastUpdateTime))}getFrameCounter(){return this.frameCounter}static{this.\u0275fac=function(i){return new(i||n)(oe(wg))}}static{this.\u0275cmp=wi({type:n,selectors:[["app-gyro3d-dialog"]],viewQuery:function(i,r){if(1&i&&Qh(wse,5),2&i){let o;Gd(o=jd())&&(r.container=o.first)}},decls:60,vars:3,consts:[[1,"gyro3d-dialog-optimal"],[1,"dialog-header-optimal"],["mat-dialog-title",""],[1,"gyro-data-row"],[1,"gyro-item","roll"],[1,"gyro-label"],[1,"gyro-value"],[1,"gyro-item","pitch"],[1,"gyro-item","yaw"],[1,"dialog-body-optimal"],[1,"visualization-area"],[1,"canvas-container"],["container",""],[1,"control-sidebar"],[1,"control-group"],[1,"button-stack"],["mat-stroked-button","",1,"ctrl-btn",3,"click"],[1,"info-group"],[1,"axis-list"],[1,"axis-row","roll"],[1,"axis-dot"],[1,"axis-text"],[1,"axis-row","pitch"],[1,"axis-row","yaw"],[1,"dialog-footer-optimal"],["mat-button","","mat-dialog-close","",1,"close-button"]],template:function(i,r){1&i&&(B(0,"div",0)(1,"div",1)(2,"h2",2),K(3,"Ship 3D Gyroscope"),H(),B(4,"div",3)(5,"div",4)(6,"span",5),K(7,"Roll"),H(),B(8,"span",6),K(9),H()(),B(10,"div",7)(11,"span",5),K(12,"Pitch"),H(),B(13,"span",6),K(14),H()(),B(15,"div",8)(16,"span",5),K(17,"Yaw"),H(),B(18,"span",6),K(19),H()()()(),B(20,"div",9)(21,"div",10),ai(22,"div",11,12),H(),B(24,"div",13)(25,"div",14)(26,"h4"),K(27,"Kontrol"),H(),B(28,"div",15)(29,"button",16),Re("click",function(){return r.resetOrientation()}),B(30,"mat-icon"),K(31,"refresh"),H(),K(32," Reset "),H(),B(33,"button",16),Re("click",function(){return r.toggleTrail()}),B(34,"mat-icon"),K(35,"timeline"),H(),K(36," Trail "),H(),B(37,"button",16),Re("click",function(){return r.resetCameraToFront()}),B(38,"mat-icon"),K(39,"camera_alt"),H(),K(40," View "),H()()(),B(41,"div",17)(42,"h4"),K(43,"Orientasi"),H(),B(44,"div",18)(45,"div",19),ai(46,"div",20),B(47,"span",21),K(48,"Roll - Kiri/Kanan"),H()(),B(49,"div",22),ai(50,"div",20),B(51,"span",21),K(52,"Pitch - Depan/Belakang"),H()(),B(53,"div",23),ai(54,"div",20),B(55,"span",21),K(56,"Yaw - Rotasi"),H()()()()()(),B(57,"div",24)(58,"button",25),K(59," Tutup "),H()()()),2&i&&(ee(9),_r("",r.gyroData.roll.toFixed(1),"\xb0"),ee(5),_r("",r.gyroData.pitch.toFixed(1),"\xb0"),ee(5),_r("",r.gyroData.yaw.toFixed(1),"\xb0"))},dependencies:[fE,pE,Xy,dN],styles:[".gyro3d-dialog-optimal[_ngcontent-%COMP%]{width:min(90vw,1200px);height:min(85vh,800px);max-width:1200px;max-height:800px;min-width:800px;min-height:600px;display:flex;flex-direction:column;background:linear-gradient(135deg,#1e3c72 0%,#2a5298 100%);color:#fff;border-radius:12px;overflow:hidden;font-family:Segoe UI,sans-serif}.dialog-header-optimal[_ngcontent-%COMP%]{flex:0 0 auto;padding:16px 24px;background:rgba(0,0,0,.2);border-bottom:1px solid rgba(255,255,255,.1);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.dialog-header-optimal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:18px;font-weight:600;text-align:center;line-height:1.2}.gyro-data-row[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;flex-wrap:wrap}.gyro-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:8px 16px;border-radius:8px;min-width:70px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid rgba(255,255,255,.15);transition:transform .2s ease}.gyro-item[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.gyro-item.roll[_ngcontent-%COMP%]{background:rgba(255,68,68,.15);border-color:#ff44444d}.gyro-item.pitch[_ngcontent-%COMP%]{background:rgba(68,255,68,.15);border-color:#44ff444d}.gyro-item.yaw[_ngcontent-%COMP%]{background:rgba(68,68,255,.15);border-color:#4444ff4d}.gyro-label[_ngcontent-%COMP%]{font-size:10px;font-weight:500;opacity:.8;margin-bottom:2px;text-transform:uppercase}.gyro-value[_ngcontent-%COMP%]{font-size:14px;font-weight:700;font-family:Courier New,monospace}.dialog-body-optimal[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;gap:16px;padding:16px 24px;min-height:0;overflow:hidden}.visualization-area[_ngcontent-%COMP%]{flex:1 1 75%;display:flex;flex-direction:column;min-width:0}.canvas-container[_ngcontent-%COMP%]{flex:1 1 auto;border-radius:8px;overflow:hidden;box-shadow:0 4px 15px #0000004d;background:#000;border:1px solid rgba(255,255,255,.1);min-height:0}.control-sidebar[_ngcontent-%COMP%]{flex:0 0 200px;display:flex;flex-direction:column;gap:16px;background:rgba(0,0,0,.15);border-radius:8px;padding:16px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.1);overflow-y:auto}.control-group[_ngcontent-%COMP%], .info-group[_ngcontent-%COMP%]{flex:0 0 auto}.control-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .info-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;font-weight:600;text-align:center;color:#fff;border-bottom:1px solid rgba(255,255,255,.2);padding-bottom:6px}.button-stack[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.ctrl-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:8px;padding:8px 12px;border-radius:6px;font-size:12px;color:#fff!important;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.15)!important;transition:all .2s ease;width:100%;height:36px}.ctrl-btn[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.1);transform:translate(2px)}.ctrl-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.axis-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.axis-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:4px;background:rgba(255,255,255,.03);font-size:11px;transition:background .2s ease}.axis-row[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.08)}.axis-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;flex-shrink:0;border:1px solid rgba(255,255,255,.2)}.axis-row.roll[_ngcontent-%COMP%]   .axis-dot[_ngcontent-%COMP%]{background:#ff4444;box-shadow:0 0 6px #f446}.axis-row.pitch[_ngcontent-%COMP%]   .axis-dot[_ngcontent-%COMP%]{background:#44ff44;box-shadow:0 0 6px #4f46}.axis-row.yaw[_ngcontent-%COMP%]   .axis-dot[_ngcontent-%COMP%]{background:#4444ff;box-shadow:0 0 6px #44f6}.axis-text[_ngcontent-%COMP%]{color:#ffffffe6;line-height:1.2}.dialog-footer-optimal[_ngcontent-%COMP%]{flex:0 0 auto;padding:16px 24px;text-align:center;border-top:1px solid rgba(255,255,255,.1);background:rgba(0,0,0,.2);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.close-button[_ngcontent-%COMP%]{padding:8px 24px;border-radius:20px;font-weight:600;background:rgba(255,255,255,.1);color:#fff;border:1px solid rgba(255,255,255,.2);transition:all .2s ease}.close-button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);transform:translateY(-1px)}@media (max-width: 1000px){.gyro3d-dialog-optimal[_ngcontent-%COMP%]{width:95vw;height:90vh;min-width:600px;min-height:500px}.dialog-body-optimal[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.visualization-area[_ngcontent-%COMP%]{flex:1 1 auto;min-height:300px}.control-sidebar[_ngcontent-%COMP%]{flex:0 0 auto;flex-direction:row;justify-content:space-around;padding:12px}.control-group[_ngcontent-%COMP%], .info-group[_ngcontent-%COMP%]{flex:1;margin:0 8px}.button-stack[_ngcontent-%COMP%]{flex-direction:row;gap:6px}.ctrl-btn[_ngcontent-%COMP%]{flex:1;justify-content:center;min-width:0}}@media (max-width: 768px){.gyro3d-dialog-optimal[_ngcontent-%COMP%]{width:98vw;height:95vh;min-width:320px;border-radius:8px}.dialog-header-optimal[_ngcontent-%COMP%], .dialog-footer-optimal[_ngcontent-%COMP%], .dialog-body-optimal[_ngcontent-%COMP%]{padding:12px 16px}.gyro-data-row[_ngcontent-%COMP%]{gap:8px}.gyro-item[_ngcontent-%COMP%]{min-width:60px;padding:6px 12px}.gyro-label[_ngcontent-%COMP%]{font-size:9px}.gyro-value[_ngcontent-%COMP%]{font-size:12px}.control-sidebar[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.button-stack[_ngcontent-%COMP%]{flex-direction:row}}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0;transform:scale(.95) translateY(-10px)}to{opacity:1;transform:scale(1) translateY(0)}}.gyro3d-dialog-optimal[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalFadeIn .3s ease-out}.gyro3d-dialog-optimal[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.visualization-area[_ngcontent-%COMP%], .canvas-container[_ngcontent-%COMP%]{position:relative;overflow:hidden}.control-sidebar[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3) transparent}.control-sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.control-sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.control-sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(255,255,255,.3);border-radius:2px}"]})}}return n})(),Cse=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Mg_apiUrl+"/datasensor"}getSensorData(){return this.http.get(this.apiUrl)}updateSensorData(t){return this.http.post(this.apiUrl,t)}static{this.\u0275fac=function(i){return new(i||n)(he(Jd))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),BT=(()=>{class n{constructor(t){this.http=t,this.dynamicData={},this.staticData={},this.intervalData=0,this.combineUrl=`${Mg_apiUrl}/combined-csv`}setDynamicData(t){this.dynamicData=t}setStaticData(t){this.staticData=t,console.log(this.staticData)}setInterval(t){this.intervalData=t}getCombinedData(){return{static:{...this.staticData},dynamic:{...this.dynamicData},interval:this.intervalData}}submitCombinedData(){const t=this.getCombinedData(),i=1e3*t.interval,r=this.http.post(this.combineUrl,t),o=function Ese(n=0,e=Ry){return n<0&&(n=0),Ly(n,n,e)}(i).pipe(zi(()=>(console.log("Data yang dikirim:",t),this.http.post(this.combineUrl,t))));return Xm(r,o)}reset(){this.dynamicData={},this.staticData={}}static{this.\u0275fac=function(i){return new(i||n)(he(Jd))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Sse=["switch"];function Tse(n,e){1&n&&(B(0,"div",12),x_(),B(1,"svg",13),ai(2,"path",14),H(),B(3,"svg",15),ai(4,"path",16),H()())}const Dse=["*"],Ase=new Se("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),Ise={provide:$s,useExisting:Cn(()=>UT),multi:!0};class eU{constructor(e,t){this.source=e,this.checked=t}}let Pse=0;const Rse=CK(Gy(RF(PF(class{constructor(n){this._elementRef=n}}))));let Lse=(()=>{class n extends Rse{get required(){return this._required}set required(t){this._required=Oc(t)}get checked(){return this._checked}set checked(t){this._checked=Oc(t),this._changeDetectorRef.markForCheck()}get hideIcon(){return this._hideIcon}set hideIcon(t){this._hideIcon=Oc(t)}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,i,r,o,s,a,l){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=s,this._onChange=d=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this._hideIcon=!1,this.change=new ei,this.toggleChange=new ei,this.tabIndex=parseInt(o)||0,this.color=this.defaultColor=s.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId=`${l}${++Pse}`,this._hideIcon=s.hideIcon??!1}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}static{this.\u0275fac=function(i){am()}}static{this.\u0275dir=bt({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked",hideIcon:"hideIcon"},outputs:{change:"change",toggleChange:"toggleChange"},features:[ln]})}}return n})(),UT=(()=>{class n extends Lse{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(t,i,r,o,s,a){super(t,i,r,o,s,a,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new eU(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(t){return new eU(this,t)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static{this.\u0275fac=function(i){return new(i||n)(oe(Zn),oe(vg),oe(Rm),vh("tabindex"),oe(Ase),oe(Us,8))}}static{this.\u0275cmp=wi({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(1&i&&Qh(Sse,5),2&i){let o;Gd(o=jd())&&(r._switchElement=o.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(i,r){2&i&&(xm("id",r.id),Ci("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),eo("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[ci([Ise]),ln],ngContentSelectors:Dse,decls:13,vars:25,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],["class","mdc-switch__icons",4,"ngIf"],[1,"mdc-label",3,"for","click"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(1&i&&(vm(),B(0,"div",0)(1,"button",1,2),Re("click",function(){return r._handleClick()}),ai(3,"div",3),B(4,"div",4)(5,"div",5)(6,"div",6),ai(7,"div",7),H(),B(8,"div",8),ai(9,"div",9),H(),Ht(10,Tse,5,0,"div",10),H()()(),B(11,"label",11),Re("click",function(s){return s.stopPropagation()}),Ud(12),H()()),2&i){const o=gv(2);eo("mdc-form-field--align-end","before"==r.labelPosition),ee(1),eo("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),se("tabIndex",r.tabIndex)("disabled",r.disabled),Ci("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),ee(8),se("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),ee(1),se("ngIf",!r.hideIcon),ee(1),se("for",r.buttonId),Ci("id",r._labelId)}},dependencies:[UF,qd],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mdc-switch{width:var(--mdc-switch-track-width);--mdc-switch-disabled-handle-opacity:0.38;--mdc-switch-disabled-selected-icon-opacity:0.38;--mdc-switch-disabled-track-opacity:0.12;--mdc-switch-disabled-unselected-icon-opacity:0.38;--mdc-switch-handle-height:20px;--mdc-switch-handle-shape:10px;--mdc-switch-handle-width:20px;--mdc-switch-selected-icon-size:18px;--mdc-switch-track-height:14px;--mdc-switch-track-shape:7px;--mdc-switch-track-width:36px;--mdc-switch-unselected-icon-size:18px;--mdc-switch-state-layer-size:40px;--mdc-switch-selected-focus-state-layer-opacity:0.12;--mdc-switch-selected-hover-state-layer-opacity:0.04;--mdc-switch-selected-pressed-state-layer-opacity:0.1;--mdc-switch-unselected-focus-state-layer-opacity:0.12;--mdc-switch-unselected-hover-state-layer-opacity:0.04;--mdc-switch-unselected-pressed-state-layer-opacity:0.1}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle .mdc-label{font-family:var(--mat-slide-toggle-label-text-font);font-size:var(--mat-slide-toggle-label-text-size);letter-spacing:var(--mat-slide-toggle-label-text-tracking);line-height:var(--mat-slide-toggle-label-text-line-height);font-weight:var(--mat-slide-toggle-label-text-weight)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}'],encapsulation:2,changeDetection:0})}}return n})(),tU=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({})}}return n})(),Fse=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[tU,ar,sE,rf,tU,ar]})}}return n})();var r_=Ne(244),Nse=(Ne(372),Ne(32)),$a=Ne.n(Nse);let Bse=(()=>{class n{constructor(t){this.http=t,this.saveApiUrl=`${Mg_apiUrl}/save-csv`,this.resetApiUrl=`${Mg_apiUrl}/reset-csv`}uploadCsv(t){return this.http.post(this.saveApiUrl,{csv:t})}resetCsv(){return this.http.delete(this.resetApiUrl)}static{this.\u0275fac=function(i){return new(i||n)(he(Jd))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Use=(()=>{class n{constructor(t){this.RS=t,this.drawnItems=new r_.FeatureGroup,this.polylinePoints=[],this.stepPoints=[]}ngAfterViewInit(){this.initMap()}initMap(){this.map=r_.map("map",{center:[-6.1751,106.865],zoom:10}),r_.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xa9 OpenStreetMap contributors"}).addTo(this.map),this.map.addLayer(this.drawnItems),this.addClearButton();const t=new r_.Control.Draw({edit:{featureGroup:this.drawnItems},draw:{polyline:{},polygon:!1,rectangle:!1,circle:!1,marker:!1,circlemarker:!1}});this.map.addControl(t),this.map.on(r_.Draw.Event.CREATED,i=>{const r=i.layer;this.drawnItems.clearLayers(),this.drawnItems.addLayer(r),"polyline"===i.layerType&&(this.polylinePoints=r.getLatLngs(),this.showStepPopup())})}showStepPopup(){var t=this;return cu(function*(){const{value:i}=yield $a().fire({title:"Pilih Kecepatan & Interval",html:'<label>Kecepatan (knot):</label>\n        <select id="swal-speed" class="swal2-input">\n          <option value="3">3</option>\n          <option value="5" selected>5</option>\n          <option value="15">15</option>\n          <option value="32">32</option>\n        </select>\n        <label>Interval Step (menit):</label>\n        <input id="swal-interval" class="swal2-input" type="number" min="1" value="10" placeholder="Interval dalam menit">',focusConfirm:!1,preConfirm:()=>{const r=Number(document.getElementById("swal-speed").value),o=Number(document.getElementById("swal-interval").value);if(!(![3,5,15].includes(r)||isNaN(o)||o<1))return{speed:r,interval:o};$a().showValidationMessage("Isi kecepatan (3/5/15) dan interval (>=1 menit)!")},confirmButtonText:"OK",showCancelButton:!0});i&&(t.generateSteps(i.speed,i.interval),t.saveCsvToServer())})()}generateSteps(t,i){if(this.stepPoints=[],this.polylinePoints.length<2)return;let r=Date.now();for(let o=0;o<this.polylinePoints.length-1;o++){const s=this.polylinePoints[o],a=this.polylinePoints[o+1],f=this.getDistanceKm(s,a)/(1.852*t)*60,p=Math.max(1,Math.ceil(f/i));for(let g=0;g<p;g++){const v=g/p;this.stepPoints.push({lat:s.lat+(a.lat-s.lat)*v,lng:s.lng+(a.lng-s.lng)*v,timestamp:r+g*i*60*1e3})}this.stepPoints.push({lat:a.lat,lng:a.lng,timestamp:r+60*f*1e3}),r+=60*f*1e3}$a().fire({title:"Step Berhasil Dibuat!",html:`Total Steps: <b>${this.stepPoints.length}</b><br>Siap diekspor ke CSV.`,icon:"success"})}getDistanceKm(t,i){const o=this.deg2rad(i.lat-t.lat),s=this.deg2rad(i.lng-t.lng),a=this.deg2rad(t.lat),l=this.deg2rad(i.lat),d=Math.sin(o/2)*Math.sin(o/2)+Math.sin(s/2)*Math.sin(s/2)*Math.cos(a)*Math.cos(l);return 2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))*6371}deg2rad(t){return t*(Math.PI/180)}saveCsvToServer(){const t=["lat","lng","timestamp","datetime"],i=this.stepPoints.map(o=>({lat:o.lat,lng:o.lng,timestamp:o.timestamp,datetime:new Date(o.timestamp).toISOString()})),r=t.join(",")+"\n"+i.map(o=>t.map(s=>`"${o[s]}"`).join(",")).join("\n");this.RS.uploadCsv(r).subscribe({next:()=>alert("CSV berhasil disimpan di server!"),error:()=>alert("Gagal simpan CSV di server.")})}addClearButton(){const t=document.getElementById("map");if(!t||document.getElementById("clear-route-btn"))return;const i=document.createElement("button");i.id="clear-route-btn",i.innerText="Clear Data Route",i.style.position="absolute",i.style.top="16px",i.style.right="16px",i.style.zIndex="1000",i.style.padding="8px 18px",i.style.backgroundColor="#f44336",i.style.color="white",i.style.border="none",i.style.borderRadius="6px",i.style.fontWeight="600",i.style.cursor="pointer",i.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",i.onclick=()=>{$a().fire({title:"Hapus semua data route?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus",cancelButtonText:"Batal"}).then(r=>{r.isConfirmed&&this.clearDataRoute()})},t.style.position="relative",t.appendChild(i)}clearDataRoute(){this.drawnItems.clearLayers(),this.polylinePoints=[],this.stepPoints=[],this.RS.resetCsv().subscribe({next:()=>{$a().fire({icon:"success",title:"Data route berhasil dihapus",showConfirmButton:!1,timer:1500})},error:()=>{$a().fire({icon:"error",title:"Gagal menghapus data route di server",showConfirmButton:!1,timer:1500})}})}static{this.\u0275fac=function(i){return new(i||n)(oe(Bse))}}static{this.\u0275cmp=wi({type:n,selectors:[["app-map"]],inputs:{coordinates:"coordinates"},decls:1,vars:0,consts:[["id","map",2,"width","100%","height","70vh","border-radius","14px"]],template:function(i,r){1&i&&ai(0,"div",0)}})}}return n})();function zse(n,e){if(1&n){const t=rr();zs(0),B(1,"div",6)(2,"label"),K(3,"Special Manoeuvre Indicator"),H(),B(4,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.specialManoeuvre=r)}),B(5,"option",8),K(6,"0 - Not available"),H(),B(7,"option",9),K(8,"1 - Not engaged in special manoeuvre"),H(),B(9,"option",10),K(10,"2 - Engaged in special manoeuvre"),H()()(),B(11,"div",6)(12,"label"),K(13,"SOG (knots)"),H(),B(14,"input",11),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.sog=r)}),H()(),B(15,"div",6)(16,"label"),K(17,"COG (degrees)"),H(),B(18,"input",12),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.cog=r)}),H()(),B(19,"div",6)(20,"label"),K(21,"Heading (degrees)"),H(),B(22,"input",13),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.heading=r)}),H()(),B(23,"div",6)(24,"label"),K(25,"RAIM Flag"),H(),B(26,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.raimFlag=r)}),B(27,"option",8),K(28,"0 - RAIM not in use"),H(),B(29,"option",9),K(30,"1 - RAIM in use"),H()()(),Vs()}if(2&n){const t=ke();ee(4),se("ngModel",t.data.formData.specialManoeuvre),ee(10),se("ngModel",t.data.formData.sog),ee(4),se("ngModel",t.data.formData.cog),ee(4),se("ngModel",t.data.formData.heading),ee(4),se("ngModel",t.data.formData.raimFlag)}}function Vse(n,e){if(1&n){const t=rr();zs(0),B(1,"div",6)(2,"label"),K(3,"Tahun (UTC)"),H(),B(4,"input",14),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.year=r)}),H()(),B(5,"div",6)(6,"label"),K(7,"Bulan (UTC)"),H(),B(8,"input",15),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.month=r)}),H()(),B(9,"div",6)(10,"label"),K(11,"Hari (UTC)"),H(),B(12,"input",16),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.day=r)}),H()(),B(13,"div",6)(14,"label"),K(15,"Jam (UTC)"),H(),B(16,"input",17),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.hour=r)}),H()(),B(17,"div",6)(18,"label"),K(19,"Menit (UTC)"),H(),B(20,"input",18),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.minute=r)}),H()(),B(21,"div",6)(22,"label"),K(23,"Detik (UTC)"),H(),B(24,"input",18),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.second=r)}),H()(),B(25,"div",6)(26,"label"),K(27,"Akurasi Posisi"),H(),B(28,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.accuracy=r)}),B(29,"option",19),K(30,"0 - Low"),H(),B(31,"option",19),K(32,"1 - High"),H()()(),B(33,"div",6)(34,"label"),K(35,"Tipe EPFD"),H(),B(36,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.epfd=r)}),B(37,"option",19),K(38,"0 - Undefined"),H(),B(39,"option",19),K(40,"1 - GPS"),H(),B(41,"option",19),K(42,"2 - GLONASS"),H(),B(43,"option",19),K(44,"3 - Combined GPS/GLONASS"),H(),B(45,"option",19),K(46,"4 - Loran-C"),H(),B(47,"option",19),K(48,"5 - Chayka"),H(),B(49,"option",19),K(50,"6 - Integrated Navigation System"),H(),B(51,"option",19),K(52,"7 - Surveyed"),H(),B(53,"option",19),K(54,"8 - Galileo"),H()()(),Vs()}if(2&n){const t=ke();ee(4),se("ngModel",t.data.formData.year),ee(4),se("ngModel",t.data.formData.month),ee(4),se("ngModel",t.data.formData.day),ee(4),se("ngModel",t.data.formData.hour),ee(4),se("ngModel",t.data.formData.minute),ee(4),se("ngModel",t.data.formData.second),ee(4),se("ngModel",t.data.formData.accuracy),ee(1),se("value",0),ee(2),se("value",1),ee(5),se("ngModel",t.data.formData.epfd),ee(1),se("value",0),ee(2),se("value",1),ee(2),se("value",2),ee(2),se("value",3),ee(2),se("value",4),ee(2),se("value",5),ee(2),se("value",6),ee(2),se("value",7),ee(2),se("value",8)}}function Hse(n,e){if(1&n){const t=rr();zs(0),B(1,"div",6)(2,"label"),K(3,"RAIM Flag"),H(),B(4,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.raimFlag=r)}),B(5,"option",8),K(6,"0 - RAIM not in use"),H(),B(7,"option",9),K(8,"1 - RAIM in use"),H()()(),B(9,"div",6)(10,"label"),K(11,"CS Flag"),H(),B(12,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.csFlag=r)}),B(13,"option",8),K(14,"0 - Carrier sense based on SOTDMA"),H(),B(15,"option",9),K(16,"1 - Carrier sense based on CSTDMA"),H()()(),B(17,"div",6)(18,"label"),K(19,"Display Flag"),H(),B(20,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.displayFlag=r)}),B(21,"option",8),K(22,"0 - No display available"),H(),B(23,"option",9),K(24,"1 - Display available"),H()()(),B(25,"div",6)(26,"label"),K(27,"DSC Flag"),H(),B(28,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.dscFlag=r)}),B(29,"option",8),K(30,"0 - No DSC capability"),H(),B(31,"option",9),K(32,"1 - With DSC capability"),H()()(),Vs()}if(2&n){const t=ke();ee(4),se("ngModel",t.data.formData.raimFlag),ee(8),se("ngModel",t.data.formData.csFlag),ee(8),se("ngModel",t.data.formData.displayFlag),ee(8),se("ngModel",t.data.formData.dscFlag)}}function Gse(n,e){if(1&n&&(B(0,"option",19),K(1),H()),2&n){const t=e.$implicit;se("value",t.code),ee(1),xc("",t.code," - ",t.label,"")}}function jse(n,e){if(1&n){const t=rr();zs(0),B(1,"div",6)(2,"label"),K(3,"Ship Name"),H(),B(4,"input",20),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.name=r)}),H()(),B(5,"div",6)(6,"label"),K(7,"Ship Type"),H(),B(8,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.shipType=r)}),Ht(9,Gse,2,3,"option",21),H()(),B(10,"div",22)(11,"h4",23),K(12,"Ship Dimensions"),H(),B(13,"div",24)(14,"div",6)(15,"label"),K(16,"To Bow (m)"),H(),B(17,"input",25),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.dimBow=r)}),H()(),B(18,"div",6)(19,"label"),K(20,"To Stern (m)"),H(),B(21,"input",25),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.dimStern=r)}),H()(),B(22,"div",6)(23,"label"),K(24,"To Port (m)"),H(),B(25,"input",25),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.dimPort=r)}),H()(),B(26,"div",6)(27,"label"),K(28,"To Starboard (m)"),H(),B(29,"input",25),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.dimStarboard=r)}),H()()()(),B(30,"div",6)(31,"label"),K(32,"RAIM Flag"),H(),B(33,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.raimFlag=r)}),B(34,"option",8),K(35,"0 - RAIM not in use"),H(),B(36,"option",9),K(37,"1 - RAIM in use"),H()()(),B(38,"div",6)(39,"label"),K(40,"DTE"),H(),B(41,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.dte=r)}),B(42,"option",8),K(43,"0 - Data terminal ready"),H(),B(44,"option",9),K(45,"1 - Data terminal not ready"),H()()(),Vs()}if(2&n){const t=ke();ee(4),se("ngModel",t.data.formData.name),ee(4),se("ngModel",t.data.formData.shipType),ee(1),se("ngForOf",t.data.shipTypes),ee(8),se("ngModel",t.data.formData.dimBow),ee(4),se("ngModel",t.data.formData.dimStern),ee(4),se("ngModel",t.data.formData.dimPort),ee(4),se("ngModel",t.data.formData.dimStarboard),ee(4),se("ngModel",t.data.formData.raimFlag),ee(8),se("ngModel",t.data.formData.dte)}}function Wse(n,e){if(1&n&&(B(0,"option",19),K(1),H()),2&n){const t=e.$implicit;se("value",t.code),ee(1),xc(" ",t.code," - ",t.description," ")}}function $se(n,e){if(1&n){const t=rr();zs(0),B(1,"div",6)(2,"label"),K(3,"AtoN Type"),H(),B(4,"select",26),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.aid_type=r)}),Ht(5,Wse,2,3,"option",21),H()(),B(6,"div",6)(7,"label"),K(8,"Position Accuracy"),H(),B(9,"select",27),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.accuracyAtoN=r)}),B(10,"option",8),K(11,"0 - Low (> 10m)"),H(),B(12,"option",9),K(13,"1 - High (\u2264 10m)"),H()()(),B(14,"div",6)(15,"label"),K(16,"AtoN Status"),H(),B(17,"input",25),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.atonStatus=r)}),H(),B(18,"small",28),K(19,"8 bits for status (binary format)"),H()(),B(20,"div",6)(21,"label"),K(22,"RAIM Flag"),H(),B(23,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.raimFlag=r)}),B(24,"option",8),K(25,"0 - RAIM not in use"),H(),B(26,"option",9),K(27,"1 - RAIM in use"),H()()(),B(28,"div",6)(29,"label"),K(30,"Time Stamp"),H(),B(31,"input",18),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.timeStamp=r)}),H(),B(32,"small",28),K(33,"UTC second (0-59, or 60 if not available)"),H()(),B(34,"div",22)(35,"h4",23),K(36,"AtoN Dimensions"),H(),B(37,"div",24)(38,"div",6)(39,"label"),K(40,"To Bow (m)"),H(),B(41,"input",25),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.dimBow=r)}),H()(),B(42,"div",6)(43,"label"),K(44,"To Stern (m)"),H(),B(45,"input",25),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.dimStern=r)}),H()(),B(46,"div",6)(47,"label"),K(48,"To Port (m)"),H(),B(49,"input",25),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.dimPort=r)}),H()(),B(50,"div",6)(51,"label"),K(52,"To Starboard (m)"),H(),B(53,"input",25),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.dimStarboard=r)}),H()()()(),B(54,"div",6)(55,"label"),K(56,"Name Extension"),H(),B(57,"input",20),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.nameExtension=r)}),H(),B(58,"small",28),K(59,"Additional characters for longer AtoN names"),H()(),B(60,"div",6)(61,"label"),K(62,"Assigned Mode Flag"),H(),B(63,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.assignedMode=r)}),B(64,"option",8),K(65,"0 - Autonomous mode"),H(),B(66,"option",9),K(67,"1 - Assigned mode"),H()()(),Vs()}if(2&n){const t=ke();ee(4),se("ngModel",t.data.formData.aid_type),ee(1),se("ngForOf",t.atonTypes),ee(4),se("ngModel",t.data.formData.accuracyAtoN),ee(8),se("ngModel",t.data.formData.atonStatus),ee(6),se("ngModel",t.data.formData.raimFlag),ee(8),se("ngModel",t.data.formData.timeStamp),ee(10),se("ngModel",t.data.formData.dimBow),ee(4),se("ngModel",t.data.formData.dimStern),ee(4),se("ngModel",t.data.formData.dimPort),ee(4),se("ngModel",t.data.formData.dimStarboard),ee(4),se("ngModel",t.data.formData.nameExtension),ee(6),se("ngModel",t.data.formData.assignedMode)}}let qse=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.atonTypes=[{code:0,description:"Default, Type of AtoN not specified"},{code:1,description:"Reference point"},{code:2,description:"RACON (radar transponder)"},{code:3,description:"Fixed structure offshore"},{code:4,description:"Emergency Wreck Marking Buoy"},{code:5,description:"Light, without sectors"},{code:6,description:"Light, with sectors"},{code:7,description:"Leading Light Front"},{code:8,description:"Leading Light Rear"},{code:9,description:"Beacon, Cardinal N"},{code:10,description:"Beacon, Cardinal E"},{code:11,description:"Beacon, Cardinal S"},{code:12,description:"Beacon, Cardinal W"},{code:13,description:"Beacon, Port hand"},{code:14,description:"Beacon, Starboard hand"},{code:15,description:"Beacon, Preferred Channel port hand"},{code:16,description:"Beacon, Preferred Channel starboard hand"},{code:17,description:"Beacon, Isolated danger"},{code:18,description:"Beacon, Safe water"},{code:19,description:"Beacon, Special mark"},{code:20,description:"Cardinal Mark N"},{code:21,description:"Cardinal Mark E"},{code:22,description:"Cardinal Mark S"},{code:23,description:"Cardinal Mark W"},{code:24,description:"Port hand Mark"},{code:25,description:"Starboard hand Mark"},{code:26,description:"Preferred Channel Port hand"},{code:27,description:"Preferred Channel Starboard hand"},{code:28,description:"Isolated danger"},{code:29,description:"Safe Water"},{code:30,description:"Special Mark"},{code:31,description:"Light Vessel/LANBY/Rigs"}]}static{this.\u0275fac=function(i){return new(i||n)(oe(Af),oe(wg))}}static{this.\u0275cmp=wi({type:n,selectors:[["app-dynamic-params-dialog"]],decls:13,vars:6,consts:[["mat-dialog-title",""],[1,"mat-typography"],[4,"ngIf"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],[1,"form-group","center-label"],[1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],["type","number","step","0.1","name","sog","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","step","0.1","name","cog","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","heading",1,"form-control",3,"ngModel","ngModelChange"],["type","number","min","1","max","9999",1,"form-control",3,"ngModel","ngModelChange"],["type","number","min","1","max","12",1,"form-control",3,"ngModel","ngModelChange"],["type","number","min","1","max","31",1,"form-control",3,"ngModel","ngModelChange"],["type","number","min","0","max","23",1,"form-control",3,"ngModel","ngModelChange"],["type","number","min","0","max","59",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"dimensions-container"],[1,"center-label"],[1,"dimensions-grid"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],["name","atonType","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","posAccuracy",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-text","text-muted"]],template:function(i,r){1&i&&(B(0,"h2",0),K(1,"Optional Parameters"),H(),B(2,"mat-dialog-content",1),Ht(3,zse,31,5,"ng-container",2),Ht(4,Vse,55,19,"ng-container",2),Ht(5,Hse,33,4,"ng-container",2),Ht(6,jse,46,9,"ng-container",2),Ht(7,$se,68,12,"ng-container",2),H(),B(8,"mat-dialog-actions",3)(9,"button",4),K(10,"Batal"),H(),B(11,"button",5),K(12,"Terapkan"),H()()),2&i&&(ee(3),se("ngIf","1"===r.data.type||"2"===r.data.type||"3"===r.data.type),ee(1),se("ngIf","4"===r.data.type),ee(1),se("ngIf","18"===r.data.type),ee(1),se("ngIf","19"===r.data.type),ee(1),se("ngIf","21"===r.data.type),ee(4),se("mat-dialog-close",!0))},dependencies:[Nm,qd,Wm,$m,sf,iy,Kd,af,cf,oy,ry,Yd,fE,pE,eN,tN,Xy],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:15px}.center-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;text-align:center;margin-bottom:5px;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:5px;border:1px solid #ddd;border-radius:4px;box-sizing:border-box}.dimensions-container[_ngcontent-%COMP%]{border:1px solid #eee;padding:15px;border-radius:4px;margin:15px 0}.dimensions-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:15px;text-align:center}.dimensions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}mat-dialog-content[_ngcontent-%COMP%]{max-height:65vh}"]})}}return n})();function Zse(n,e){if(1&n){const t=rr();B(0,"div")(1,"div",1)(2,"label"),K(3,"Latitude (Decimal Degrees)"),H(),B(4,"input",31),Re("ngModelChange",function(r){return Ze(t),Xe(ke(2).formData.lat=r)}),H()(),B(5,"div",1)(6,"label"),K(7,"Longitude (Decimal Degrees)"),H(),B(8,"input",32),Re("ngModelChange",function(r){return Ze(t),Xe(ke(2).formData.lon=r)}),H()()()}if(2&n){const t=ke(2);ee(4),se("ngModel",t.formData.lat),ee(4),se("ngModel",t.formData.lon)}}function Xse(n,e){if(1&n){const t=rr();B(0,"div",1)(1,"label"),K(2,"Latitude (Decimal Degrees)"),H(),B(3,"input",33),Re("ngModelChange",function(r){return Ze(t),Xe(ke(2).formData.lat=r)}),H()(),B(4,"div",1)(5,"label"),K(6,"Longitude (Decimal Degrees)"),H(),B(7,"input",34),Re("ngModelChange",function(r){return Ze(t),Xe(ke(2).formData.lon=r)}),H()()}if(2&n){const t=ke(2);ee(3),se("ngModel",t.formData.lat),ee(4),se("ngModel",t.formData.lon)}}function Yse(n,e){if(1&n){const t=rr();B(0,"div")(1,"div",1)(2,"label"),K(3,"AtoN Name"),H(),B(4,"input",35),Re("ngModelChange",function(r){return Ze(t),Xe(ke(2).formData.name=r)}),H()()()}if(2&n){const t=ke(2);ee(4),se("ngModel",t.formData.name)}}function Kse(n,e){if(1&n&&(B(0,"option",21),K(1),H()),2&n){const t=e.$implicit;se("value",t.code),ee(1),xc(" ",t.code," - ",t.description," ")}}function Qse(n,e){if(1&n){const t=rr();B(0,"div",14)(1,"div",15)(2,"div",1)(3,"label"),K(4,"Navigation Status"),H(),B(5,"select",36),Re("ngModelChange",function(r){return Ze(t),Xe(ke(2).formData.status=r)}),Ht(6,Kse,2,3,"option",37),H()()(),B(7,"div",15)(8,"div",1)(9,"label"),K(10,"ROT (degrees/min)"),H(),B(11,"input",38),Re("ngModelChange",function(r){return Ze(t),Xe(ke(2).formData.rot=r)}),H()()()()}if(2&n){const t=ke(2);ee(5),se("ngModel",t.formData.status),ee(1),se("ngForOf",t.navigationStatuses),ee(5),se("ngModel",t.formData.rot)}}function Jse(n,e){if(1&n){const t=rr();B(0,"div",14)(1,"div",15)(2,"div",1)(3,"label"),K(4,"Off Position"),H(),B(5,"select",39),Re("ngModelChange",function(r){return Ze(t),Xe(ke(2).formData.off_position=r)}),B(6,"option",40),K(7,"0 - On position"),H(),B(8,"option",5),K(9,"1 - Off position"),H()()()(),B(10,"div",15)(11,"div",1)(12,"label"),K(13,"Virtual AtoN"),H(),B(14,"select",41),Re("ngModelChange",function(r){return Ze(t),Xe(ke(2).formData.virtual_aid=r)}),B(15,"option",40),K(16,"0 - Real AtoN"),H(),B(17,"option",5),K(18,"1 - Virtual AtoN"),H()()()()()}if(2&n){const t=ke(2);ee(5),se("ngModel",t.formData.off_position),ee(9),se("ngModel",t.formData.virtual_aid)}}function eae(n,e){if(1&n){const t=rr();B(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",1)(4,"label"),K(5,"MMSI"),H(),B(6,"input",16),Re("ngModelChange",function(r){return Ze(t),Xe(ke().formData.mmsi=r)}),H()(),Ht(7,Zse,9,2,"div",17),Ht(8,Xse,8,2,"ng-template",null,18,Xw),H(),B(10,"div",15)(11,"div",1)(12,"label"),K(13,"Repeat Indicator"),H(),B(14,"input",19),Re("ngModelChange",function(r){return Ze(t),Xe(ke().formData.repeat=r)}),H()(),B(15,"div",1)(16,"label"),K(17,"RAIM Flag"),H(),B(18,"select",20),Re("ngModelChange",function(r){return Ze(t),Xe(ke().formData.raim=r)}),B(19,"option",21),K(20,"0 - Not in use"),H(),B(21,"option",21),K(22,"1 - In use"),H()()(),B(23,"div",1)(24,"label"),K(25,"Status Radio"),H(),B(26,"input",22),Re("ngModelChange",function(r){return Ze(t),Xe(ke().formData.radio=r)}),H()(),Ht(27,Yse,5,1,"div",23),H()(),Ht(28,Qse,12,3,"div",24),Ht(29,Jse,19,2,"div",24),B(30,"div",25)(31,"button",26),Re("click",function(){return Ze(t),Xe(ke().openOptionalParamsDialog())}),ai(32,"i",27),K(33," Optional Parameters "),H(),B(34,"button",28),Re("click",function(){return Ze(t),Xe(ke().submitForm())}),K(35,"Simpan Dynamic Data"),H()(),B(36,"mat-slide-toggle",29),Re("ngModelChange",function(r){return Ze(t),Xe(ke().useLongLatData=r)})("change",function(){return Ze(t),Xe(ke().useLongLatDataRoutes())}),K(37," Manipulation Routes "),H(),B(38,"mat-slide-toggle",30),Re("ngModelChange",function(r){return Ze(t),Xe(ke().usingDatasensor=r)})("change",function(){return Ze(t),Xe(ke().toggleDataSensor())}),K(39," Manipulation with Sensor "),H()()}if(2&n){const t=gv(9),i=ke();ee(6),se("ngModel",i.formData.mmsi),ee(1),se("ngIf","4"===i.selectedDynamicType)("ngIfElse",t),ee(7),se("ngModel",i.formData.repeat),ee(4),se("ngModel",i.formData.raim),ee(1),se("value",0),ee(2),se("value",1),ee(5),se("ngModel",i.formData.radio),ee(1),se("ngIf","21"===i.selectedDynamicType),ee(1),se("ngIf","1"===i.selectedDynamicType||"2"===i.selectedDynamicType||"3"===i.selectedDynamicType||"9"===i.selectedDynamicType),ee(1),se("ngIf","21"===i.selectedDynamicType),ee(7),se("ngModel",i.useLongLatData),ee(2),se("ngModel",i.usingDatasensor)}}let tae=(()=>{class n{constructor(t,i){this.dialog=t,this.formDataService=i,this.selectedDynamicType="",this.useLongLatData=!1,this.usingDatasensor=!1,this.formData={aistype:null,mmsi:"",latitude:0,longitude:0,sog:0,cog:0,heading:511,status:15,rot:128,repeat:0,year:0,month:0,day:0,hour:0,minute:0,second:0,accuracy:0,lon:0,lat:0,epfd:0,raim:0,radio:0,name:"",shiptype:"30",to_bow:0,to_stern:0,to_port:0,to_starboard:0,raimFlag:0,dte:0,aid_type:0,accuracyAtoN:0,off_position:0,virtual_aid:0,atonStatus:0,timeStamp:0,nameExtension:"",assignedMode:0,specialManoeuvre:0,raimFlagType123:0,raimFlagType18:0,csFlag:0,displayFlag:0,dscFlag:0},this.navigationStatuses=[{code:0,description:"Under way using engine"},{code:1,description:"At anchor"},{code:2,description:"Not under command"},{code:3,description:"Restricted manoeuvrability"},{code:4,description:"Constrained by her draught"},{code:5,description:"Moored"},{code:6,description:"Aground"},{code:7,description:"Engaged in fishing"},{code:8,description:"Under way sailing"},{code:9,description:"Reserved for HSC"},{code:10,description:"Reserved for WIG"},{code:11,description:"Reserved"},{code:12,description:"Reserved"},{code:13,description:"Reserved"},{code:14,description:"AIS-SART active"},{code:15,description:"Not defined (default)"}],this.shipTypes=[{code:"30",label:"Fishing"},{code:"70",label:"Cargo"},{code:"60",label:"Passenger"}]}ngOnInit(){}useLongLatDataRoutes(){this.useLongLatData=this.useLongLatData,this.formData.manipulation=this.useLongLatData}toggleDataSensor(){this.usingDatasensor=this.usingDatasensor,this.formData.datasensor=this.usingDatasensor,console.log(this.formData.datasensor)}onDynamicTypeChange(){if(!this.selectedDynamicType)return;const t=this.formData.mmsi||"";switch(this.formData={manipulation:this.useLongLatData,datasensor:this.usingDatasensor,aistype:Number(this.selectedDynamicType),mmsi:t,latitude:0,longitude:0,sog:0,cog:0,heading:511,status:15,rot:128,repeat:0,year:0,month:0,day:0,hour:0,minute:0,second:0,accuracy:0,lon:0,lat:0,epfd:0,raim:0,radio:0,name:"",shiptype:this.shipTypes[0].code,to_bow:0,to_stern:0,to_port:0,to_starboard:0,raimFlag:0,dte:0,aid_type:0,accuracyAtoN:0,off_position:0,virtual_aid:0,atonStatus:0,timeStamp:0,nameExtension:"",assignedMode:0,specialManoeuvre:0,raimFlagType123:0,raimFlagType18:0,csFlag:0,displayFlag:0,dscFlag:0},this.selectedDynamicType){case"1":case"2":case"3":this.formData.status=15,this.formData.rot=128;break;case"4":break;case"19":this.formData.name="",this.formData.shiptype=this.shipTypes[0].code,this.formData.to_bow=0,this.formData.to_stern=0,this.formData.to_port=0,this.formData.to_starboard=0;break;case"21":this.formData.name="",this.formData.aid_type=0,this.formData.accuracyAtoN=0,this.formData.off_position=0,this.formData.virtual_aid=0,this.formData.to_bow=0,this.formData.to_stern=0,this.formData.to_port=0,this.formData.to_starboard=0}}openOptionalParamsDialog(){this.dialog.open(qse,{width:"600px",data:{type:this.selectedDynamicType,formData:this.formData,navigationStatuses:this.navigationStatuses,shipTypes:this.shipTypes}}).afterClosed().subscribe(i=>{i&&console.log("Optional parameters applied")})}submitForm(){this.formData.mmsi&&this.selectedDynamicType?(console.log("Dynamic Form submitted:",this.formData),this.formDataService.setDynamicData(this.formData),$a().fire({icon:"success",title:"Sukses",text:"Data berhasil disimpan.",confirmButtonText:"OK"})):$a().fire({icon:"error",title:"Error",text:"Form tidak valid. Mohon periksa kembali isian Anda.",confirmButtonText:"OK"})}static{this.\u0275fac=function(i){return new(i||n)(oe(If),oe(BT))}}static{this.\u0275cmp=wi({type:n,selectors:[["app-dynamic-form"]],decls:23,vars:2,consts:[[1,"form-title"],[1,"form-group","center-label"],["for","dynamicType"],["id","dynamicType","name","dynamicType",1,"form-control",3,"ngModel","ngModelChange","change"],["value",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","9"],["value","18"],["value","21"],["class","dynamic-form",4,"ngIf"],[1,"dynamic-form"],[1,"two-column-layout"],[1,"column"],["type","text","name","mmsi","required","",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["latLonDefault",""],["type","number","min","0","max","3",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["type","number","min","0",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],["class","two-column-layout",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn-optional",3,"click"],[1,"fa","fa-cog"],[1,"btn-primary",3,"click"],["name","useLongLatToggle",3,"ngModel","ngModelChange","change"],["name","useDataSensor",3,"ngModel","ngModelChange","change"],["type","number","step","0.000001","name","lat","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","step","0.000001","name","lon","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","step","0.000001","name","latitude","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","step","0.000001","name","longitude","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","navStatus",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","number","name","rot",1,"form-control",3,"ngModel","ngModelChange"],["name","offPosition",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["name","virtualAton",1,"form-control",3,"ngModel","ngModelChange"]],template:function(i,r){1&i&&(B(0,"h2",0),K(1,"Dynamic AIS Data"),H(),B(2,"div",1)(3,"label",2),K(4,"Pilih Tipe Pesan"),H(),B(5,"select",3),Re("ngModelChange",function(s){return r.selectedDynamicType=s})("change",function(){return r.onDynamicTypeChange()}),B(6,"option",4),K(7,"-- Pilih --"),H(),B(8,"option",5),K(9,"1 - Position Report Class A"),H(),B(10,"option",6),K(11,"2 - Position Report Class A"),H(),B(12,"option",7),K(13,"3 - Position Report Class A"),H(),B(14,"option",8),K(15,"4 - Base Station Report"),H(),B(16,"option",9),K(17,"9 - Sar Aircraft Position"),H(),B(18,"option",10),K(19,"18 - Standard Class B Position Report"),H(),B(20,"option",11),K(21,"21 - Aid-to-Navigation Report"),H()()(),Ht(22,eae,40,13,"div",12)),2&i&&(ee(5),se("ngModel",r.selectedDynamicType),ee(17),se("ngIf",r.selectedDynamicType))},dependencies:[Nm,qd,Wm,$m,sf,iy,Kd,af,cf,oy,ry,Yd,UT],styles:[".form-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333;font-weight:700}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.center-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;text-align:center;margin-bottom:5px;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:4px;border:1px solid #ddd;border-radius:4px;box-sizing:border-box}.two-column-layout[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:15px}.column[_ngcontent-%COMP%]{flex:1;min-width:120px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:20px}.btn-optional[_ngcontent-%COMP%]{height:38px;padding:0 15px;background-color:#f0f0f0;border:1px solid #ddd;border-radius:4px;cursor:pointer;display:flex;align-items:center}.btn-optional[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn-optional[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.btn-primary[_ngcontent-%COMP%]{padding:8px 16px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;flex:1}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0069d9}@media (max-width: 768px){.two-column-layout[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}"]})}}return n})();function nae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function iae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function rae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t.code),ee(1),xc("",t.code," - ",t.label,"")}}function oae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function sae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function aae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function lae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function cae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function dae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function uae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function hae(n,e){if(1&n){const t=rr();zs(0),B(1,"div",6)(2,"label"),K(3,"IMO Number"),H(),B(4,"select",7),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.imo=r)}),Ht(5,nae,2,2,"option",8),H()(),B(6,"div",6)(7,"label"),K(8,"Call Sign"),H(),B(9,"select",9),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.callsign=r)}),Ht(10,iae,2,2,"option",8),H()(),B(11,"div",6)(12,"label"),K(13,"Ship Type"),H(),B(14,"select",10),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.shiptype=r)}),Ht(15,rae,2,3,"option",8),H()(),B(16,"div",11)(17,"h4"),K(18,"Ship Dimensions"),H(),B(19,"div",12)(20,"div",6)(21,"label"),K(22,"To Bow (m)"),H(),B(23,"select",13),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.to_bow=r)}),Ht(24,oae,2,2,"option",8),H()(),B(25,"div",6)(26,"label"),K(27,"To Stern (m)"),H(),B(28,"select",14),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.to_stern=r)}),Ht(29,sae,2,2,"option",8),H()(),B(30,"div",6)(31,"label"),K(32,"To Port (m)"),H(),B(33,"select",15),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.to_port=r)}),Ht(34,aae,2,2,"option",8),H()(),B(35,"div",6)(36,"label"),K(37,"To Starboard (m)"),H(),B(38,"select",16),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.to_starboard=r)}),Ht(39,lae,2,2,"option",8),H()()()(),B(40,"div",6)(41,"label"),K(42,"ETA (YYYYMMDDHHMM)"),H(),B(43,"select",17),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.eta=r)}),Ht(44,cae,2,2,"option",8),H()(),B(45,"div",6)(46,"label"),K(47,"Destination"),H(),B(48,"select",18),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.destination=r)}),Ht(49,dae,2,2,"option",8),H()(),B(50,"div",6)(51,"label"),K(52,"Draught (dm)"),H(),B(53,"select",19),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.draught=r)}),Ht(54,uae,2,2,"option",8),H()(),Vs()}if(2&n){const t=ke();ee(4),se("ngModel",t.data.formData.imo),ee(1),se("ngForOf",t.data.imoCodes),ee(4),se("ngModel",t.data.formData.callsign),ee(1),se("ngForOf",t.data.callSignCodes),ee(4),se("ngModel",t.data.formData.shiptype),ee(1),se("ngForOf",t.data.shipTypes),ee(8),se("ngModel",t.data.formData.to_bow),ee(1),se("ngForOf",t.data.dimOptions),ee(4),se("ngModel",t.data.formData.to_stern),ee(1),se("ngForOf",t.data.dimOptions),ee(4),se("ngModel",t.data.formData.to_port),ee(1),se("ngForOf",t.data.dimOptions),ee(4),se("ngModel",t.data.formData.to_starboard),ee(1),se("ngForOf",t.data.dimOptions),ee(4),se("ngModel",t.data.formData.eta),ee(1),se("ngForOf",t.data.etaOptions),ee(4),se("ngModel",t.data.formData.destination),ee(1),se("ngForOf",t.data.destinationCodes),ee(4),se("ngModel",t.data.formData.draught),ee(1),se("ngForOf",t.data.draughtOptions)}}function fae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t.code),ee(1),xc("",t.code," - ",t.label,"")}}function pae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function mae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function gae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function _ae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function vae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function yae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function bae(n,e){if(1&n){const t=rr();zs(0),B(1,"div",6)(2,"label"),K(3,"Ship Type"),H(),B(4,"select",10),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.shiptype=r)}),Ht(5,fae,2,3,"option",8),H()(),B(6,"div",6)(7,"label"),K(8,"Vendor ID"),H(),B(9,"select",21),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.vendorid=r)}),Ht(10,pae,2,2,"option",8),H()(),B(11,"div",6)(12,"label"),K(13,"Call Sign"),H(),B(14,"select",9),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.callsign=r)}),Ht(15,mae,2,2,"option",8),H()(),B(16,"div",11)(17,"h4"),K(18,"Ship Dimensions"),H(),B(19,"div",12)(20,"div",6)(21,"label"),K(22,"To Bow (m)"),H(),B(23,"select",13),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.to_bow=r)}),Ht(24,gae,2,2,"option",8),H()(),B(25,"div",6)(26,"label"),K(27,"To Stern (m)"),H(),B(28,"select",14),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.to_stern=r)}),Ht(29,_ae,2,2,"option",8),H()(),B(30,"div",6)(31,"label"),K(32,"To Port (m)"),H(),B(33,"select",15),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.to_port=r)}),Ht(34,vae,2,2,"option",8),H()(),B(35,"div",6)(36,"label"),K(37,"To Starboard (m)"),H(),B(38,"select",16),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.to_starboard=r)}),Ht(39,yae,2,2,"option",8),H()()()(),Vs()}if(2&n){const t=ke();ee(4),se("ngModel",t.data.formData.shiptype),ee(1),se("ngForOf",t.data.shipTypes),ee(4),se("ngModel",t.data.formData.vendorid),ee(1),se("ngForOf",t.data.vendorIds),ee(4),se("ngModel",t.data.formData.callsign),ee(1),se("ngForOf",t.data.callSignCodes),ee(8),se("ngModel",t.data.formData.to_bow),ee(1),se("ngForOf",t.data.dimOptions),ee(4),se("ngModel",t.data.formData.to_stern),ee(1),se("ngForOf",t.data.dimOptions),ee(4),se("ngModel",t.data.formData.to_port),ee(1),se("ngForOf",t.data.dimOptions),ee(4),se("ngModel",t.data.formData.to_starboard),ee(1),se("ngForOf",t.data.dimOptions)}}function xae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t.code),ee(1),xc("",t.code," - ",t.label,"")}}function wae(n,e){if(1&n&&(B(0,"option",20),K(1),H()),2&n){const t=e.$implicit;se("value",t),ee(1),sr(t)}}function Mae(n,e){if(1&n){const t=rr();zs(0),B(1,"div",6)(2,"label"),K(3,"Ship Type"),H(),B(4,"select",10),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.shiptype=r)}),Ht(5,xae,2,3,"option",8),H()(),B(6,"div",6)(7,"label"),K(8,"Call Sign"),H(),B(9,"select",9),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.callsign=r)}),Ht(10,wae,2,2,"option",8),H()(),B(11,"div",6)(12,"label"),K(13,"Repeat Indicator"),H(),B(14,"select",22),Re("ngModelChange",function(r){return Ze(t),Xe(ke().data.formData.repeat=r)}),B(15,"option",20),K(16,"0"),H(),B(17,"option",20),K(18,"1"),H()()(),Vs()}if(2&n){const t=ke();ee(4),se("ngModel",t.data.formData.shiptype),ee(1),se("ngForOf",t.data.shipTypes),ee(4),se("ngModel",t.data.formData.callsign),ee(1),se("ngForOf",t.data.callSignCodes),ee(4),se("ngModel",t.data.formData.repeat),ee(1),se("value",0),ee(2),se("value",1)}}let Cae=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i}onNoClick(){this.dialogRef.close()}static{this.\u0275fac=function(i){return new(i||n)(oe(Af),oe(wg))}}static{this.\u0275cmp=wi({type:n,selectors:[["app-optional-params-dialog"]],decls:11,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[4,"ngIf"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],[1,"form-group"],["name","imo",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","callsign",1,"form-control",3,"ngModel","ngModelChange"],["name","shiptype",1,"form-control",3,"ngModel","ngModelChange"],[1,"dimensions-container"],[1,"dimensions-grid"],["name","to_bow",1,"form-control",3,"ngModel","ngModelChange"],["name","to_stern",1,"form-control",3,"ngModel","ngModelChange"],["name","to_port",1,"form-control",3,"ngModel","ngModelChange"],["name","to_starboard",1,"form-control",3,"ngModel","ngModelChange"],["name","eta",1,"form-control",3,"ngModel","ngModelChange"],["name","destination",1,"form-control",3,"ngModel","ngModelChange"],["name","draught",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["name","vendorid",1,"form-control",3,"ngModel","ngModelChange"],["name","repeat",1,"form-control",3,"ngModel","ngModelChange"]],template:function(i,r){1&i&&(B(0,"h2",0),K(1,"Optional Parameters"),H(),B(2,"mat-dialog-content",1),Ht(3,hae,55,20,"ng-container",2),Ht(4,bae,40,14,"ng-container",2),Ht(5,Mae,19,7,"ng-container",2),H(),B(6,"mat-dialog-actions",3)(7,"button",4),K(8,"Tutup"),H(),B(9,"button",5),K(10,"Terapkan"),H()()),2&i&&(ee(3),se("ngIf","5"===r.data.selectedType),ee(1),se("ngIf","24b"===r.data.selectedType),ee(1),se("ngIf","24a"===r.data.selectedType),ee(4),se("mat-dialog-close",!0))},dependencies:[Nm,qd,Wm,$m,Kd,af,Yd,fE,pE,eN,tN,Xy],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;box-sizing:border-box}.dimensions-container[_ngcontent-%COMP%]{border:1px solid #eee;padding:10px;border-radius:4px;margin:10px 0}.dimensions-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px}.dimensions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}mat-dialog-content[_ngcontent-%COMP%]{max-height:65vh}"]})}}return n})();const Eae=["staticForm"];function Sae(n,e){if(1&n){const t=rr();B(0,"div")(1,"div",16)(2,"label"),K(3,"MMSI"),H(),B(4,"input",17),Re("ngModelChange",function(r){return Ze(t),Xe(ke().formData.mmsi=r)}),H()(),B(5,"div",16)(6,"label"),K(7,"Nama Kapal"),H(),B(8,"input",18),Re("ngModelChange",function(r){return Ze(t),Xe(ke().formData.shipname=r)}),H()()()}if(2&n){const t=ke();ee(4),se("ngModel",t.formData.mmsi),ee(4),se("ngModel",t.formData.shipname)}}function Tae(n,e){if(1&n){const t=rr();B(0,"div")(1,"div",16)(2,"label"),K(3,"MMSI"),H(),B(4,"input",17),Re("ngModelChange",function(r){return Ze(t),Xe(ke().formData.mmsi=r)}),H()()()}if(2&n){const t=ke();ee(4),se("ngModel",t.formData.mmsi)}}function Dae(n,e){if(1&n){const t=rr();B(0,"div")(1,"div",16)(2,"label"),K(3,"MMSI"),H(),B(4,"input",17),Re("ngModelChange",function(r){return Ze(t),Xe(ke().formData.mmsi=r)}),H()(),B(5,"div",16)(6,"label",19),K(7,"Pesan Keselamatan"),H(),B(8,"textarea",20),Re("ngModelChange",function(r){return Ze(t),Xe(ke().formData.safetyMessage=r)}),H()()()}if(2&n){const t=ke();ee(4),se("ngModel",t.formData.mmsi),ee(4),se("ngModel",t.formData.safetyMessage)}}function Aae(n,e){if(1&n&&(B(0,"option",21),K(1),H()),2&n){const t=e.$implicit;se("value",t.value),ee(1),_r(" ",t.label," ")}}function Iae(n,e){if(1&n){const t=rr();B(0,"div",22)(1,"button",23),Re("click",function(){return Ze(t),Xe(ke().openOptionalParamsDialog())}),ai(2,"i",24),K(3," Optional Parameters "),H(),B(4,"button",25),K(5,"Simpan Static Data"),H()()}}let Pae=(()=>{class n{constructor(t,i){this.formDataService=t,this.dialog=i,this.selectedType="",this.formData={aistype:"",repeat:0,mmsi:"",shipname:"",part:0,safetyMessage:""},this.imoCodes=["0000000","1234567","9876543"],this.callSignCodes=["ABCD","XYZ1","TEST1"],this.shipTypes=[{code:"30",label:"Fishing"},{code:"70",label:"Cargo"},{code:"60",label:"Passenger"}],this.dimOptions=[0,1,2,3,5,10,15,20,25,30,40,50],this.etaOptions=["000000000000","202404251200","202405011500"],this.destinationCodes=["JAKARTA","SURABAYA","MAKASSAR"],this.draughtOptions=[0,10,20,30,40,50],this.vendorIds=["VENDOR1","VENDOR2","VENDOR3"],this.selectedInterval=60,this.intervalOptions=[{value:5,label:"5 detik"},{value:10,label:"10 detik"},{value:30,label:"30 detik"},{value:60,label:"1 menit"},{value:300,label:"5 menit"},{value:600,label:"10 menit"},{value:1800,label:"30 menit"}]}ngOnInit(){}onTypeChange(){this.selectedType&&("5"===this.selectedType?this.formData={aistype:"5",repeat:0,mmsi:"",shipname:"",part:0}:"24a"===this.selectedType?this.formData={aistype:"24",repeat:0,mmsi:"",shipname:"",part:0}:"24b"===this.selectedType?this.formData={aistype:"24",repeat:0,mmsi:"",part:1}:"14"===this.selectedType&&(this.formData={aistype:"14",repeat:0,mmsi:"",shipname:"",part:0,safetyMessage:""}))}openOptionalParamsDialog(){this.dialog.open(Cae,{width:"600px",data:{selectedType:this.selectedType,formData:this.formData,imoCodes:this.imoCodes,callSignCodes:this.callSignCodes,shipTypes:this.shipTypes,dimOptions:this.dimOptions,etaOptions:this.etaOptions,destinationCodes:this.destinationCodes,draughtOptions:this.draughtOptions,vendorIds:this.vendorIds}}).afterClosed().subscribe(i=>{i&&console.log("Optional parameters applied")})}submitForm(){this.staticForm.invalid?$a().fire({icon:"error",title:"Error",text:"Form tidak valid. Mohon periksa kembali isian Anda.",confirmButtonText:"OK"}):(this.formDataService.setStaticData(this.formData),this.formDataService.setInterval(this.selectedInterval),$a().fire({icon:"success",title:"Sukses",text:"Data berhasil disimpan.",confirmButtonText:"OK"}))}static{this.\u0275fac=function(i){return new(i||n)(oe(BT),oe(If))}}static{this.\u0275cmp=wi({type:n,selectors:[["app-static-form"]],viewQuery:function(i,r){if(1&i&&Qh(Eae,5),2&i){let o;Gd(o=jd())&&(r.staticForm=o.first)}},decls:27,vars:7,consts:[[1,"form-title"],[1,"form-group","center-label"],["for","staticType"],["id","staticType","name","staticType",1,"form-control",3,"ngModel","ngModelChange","change"],["value",""],["value","5"],["value","24a"],["value","24b"],["value","14"],[3,"ngSubmit"],["staticForm","ngForm"],[4,"ngIf"],["for","intervalWaktu"],["id","intervalWaktu","name","intervalWaktu",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","form-actions",4,"ngIf"],[1,"form-group"],["type","text","name","mmsi","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","shipname","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","safetyMessage"],["id","safetyMessage","name","safetyMessage","rows","4",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],[1,"form-actions"],["type","button",1,"btn-optional",3,"click"],[1,"fa","fa-cog"],["type","submit",1,"btn-primary"]],template:function(i,r){1&i&&(B(0,"h2",0),K(1,"Static AIS Data"),H(),B(2,"div",1)(3,"label",2),K(4,"Pilih Tipe Pesan Static"),H(),B(5,"select",3),Re("ngModelChange",function(s){return r.selectedType=s})("change",function(){return r.onTypeChange()}),B(6,"option",4),K(7,"-- Pilih --"),H(),B(8,"option",5),K(9,"5 - Static and Voyage Related Data"),H(),B(10,"option",6),K(11,"24 Part A - Static Data Report"),H(),B(12,"option",7),K(13,"24 Part B - Static Data Report"),H(),B(14,"option",8),K(15,"14 - Broadcast Safety Related Message"),H()()(),B(16,"form",9,10),Re("ngSubmit",function(){return r.submitForm()}),Ht(18,Sae,9,2,"div",11),Ht(19,Tae,5,1,"div",11),Ht(20,Dae,9,2,"div",11),B(21,"div",1)(22,"label",12),K(23,"Interval Waktu"),H(),B(24,"select",13),Re("ngModelChange",function(s){return r.selectedInterval=s}),Ht(25,Aae,2,2,"option",14),H()(),Ht(26,Iae,6,0,"div",15),H()),2&i&&(ee(5),se("ngModel",r.selectedType),ee(13),se("ngIf","5"===r.selectedType||"24a"===r.selectedType),ee(1),se("ngIf","24b"===r.selectedType),ee(1),se("ngIf","14"===r.selectedType),ee(4),se("ngModel",r.selectedInterval),ee(1),se("ngForOf",r.intervalOptions),ee(1),se("ngIf",r.selectedType))},dependencies:[Nm,qd,c2,Wm,$m,sf,Kd,af,XO,cf,Yd,ny],styles:[".form-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:18px;color:#333;font-weight:700}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:4px;font-weight:500;text-align:center}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:7px 10px;border:1px solid #ddd;border-radius:4px;box-sizing:border-box}.essential-fields[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;gap:.6rem;margin-bottom:.7rem}.essential-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1 1 170px;min-width:150px;margin-bottom:0}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-start;align-items:center;margin-top:1rem;flex-wrap:wrap}.btn-optional[_ngcontent-%COMP%], .button-primary[_ngcontent-%COMP%]{margin:0;border:none;cursor:pointer;transition:background-color .2s ease;font-size:1rem;line-height:1.5;padding:.6rem 1.4rem;border-radius:.3rem;font-weight:500}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;box-shadow:0 2px 4px #007bff4d}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#707071}.btn-primary[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 .2rem #007bff80}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed;box-shadow:none}.btn-optional[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#333;border:1px solid #ddd}.btn-optional[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.button-secondary[_ngcontent-%COMP%], .btn-optional[_ngcontent-%COMP%]{margin:0}.btn-primary[_ngcontent-%COMP%]{height:38px;padding:0 15px;background-color:#2a60e9;border:1px solid #010101d7;border-radius:4px;cursor:pointer;display:flex;align-items:center;font-weight:500}.button-secondary[_ngcontent-%COMP%], .btn-optional[_ngcontent-%COMP%]{height:38px;padding:0 15px;background-color:#f0f0f0;border:1px solid #ddd;border-radius:4px;cursor:pointer;display:flex;align-items:center;font-weight:500}.button-secondary[_ngcontent-%COMP%], .btn-optional[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.button-secondary[_ngcontent-%COMP%], .btn-optional[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:#00000080}.modal-active[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]{background-color:#fff;margin:10% auto;padding:20px;border-radius:5px;max-width:600px;max-height:80vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #ddd;padding-bottom:10px;margin-bottom:15px}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{margin-bottom:15px}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding-top:15px;margin-top:15px;display:flex;justify-content:flex-end;gap:10px}.dimensions-container[_ngcontent-%COMP%]{border:1px solid #eee;padding:10px;border-radius:4px;margin:10px 0}.dimensions-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px}.dimensions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}@media (max-width: 600px){.essential-fields[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.5rem}}"]})}}return n})();const Rae=[{path:"",component:(()=>{class n{constructor(t,i,r){this.sensorService=t,this.dialog=i,this.formDataService=r,this.sensorData={},this.debugMode=!1,this.isSending=!1,this.showGyroVisualization=!1,this.dataSubscription=null,this.MAX_OFFLINE_TIME=1e4,this.pollingInterval=500}ngOnInit(){this.fetchSensorData(),this.startPolling()}updateGyro3dDialog(t){this.dialogRef&&(this.dialogRef.componentInstance.gyroData={roll:t.roll,pitch:t.pitch,yaw:t.yaw})}getStatusClass(){if(!this.sensorData)return"offline";const t=new Date(this.sensorData.timestamp).getTime();return(new Date).getTime()-t>this.MAX_OFFLINE_TIME?"offline":"online"}ngOnDestroy(){this.stopPolling()}fetchSensorData(){this.sensorService.getSensorData().subscribe(t=>{this.sensorData=t},t=>{console.error("Error fetching sensor data:",t)})}startPolling(){this.stopPolling(),this.dataSubscription=Ly(0,this.pollingInterval).pipe(zi(()=>this.sensorService.getSensorData())).subscribe(t=>{if(t&&t.success&&t.data&&t.data.length>0){const i=this.getLatestDataByTimestamp(t.data);this.sensorData=i,this.dialogRef&&this.updateGyro3dDialog(this.sensorData)}},t=>{console.error("Error polling sensor data:",t)})}stopPolling(){this.dataSubscription&&(this.dataSubscription.unsubscribe(),this.dataSubscription=null)}getLatestDataByTimestamp(t){return t&&0!==t.length?t.reduce((i,r)=>{const o=new Date(i.timestamp).getTime();return new Date(r.timestamp).getTime()>o?r:i},t[0]):null}setPollingInterval(t){this.pollingInterval=t,this.isSending&&this.startPolling()}startDebug(){this.isSending?this.stopSubmitting():this.startSubmitting()}startSubmitting(){this.isSending=!0,this.submitSubscription=this.formDataService.submitCombinedData().subscribe({next:t=>{console.log("Data berhasil dikirim",t)},error:t=>{console.error("Error submitting data:",t),this.stopSubmitting()}}),this.openDebug()}stopSubmitting(){this.isSending=!1,this.submitSubscription&&(this.submitSubscription.unsubscribe(),this.submitSubscription=void 0),this.closeDebug()}openDebug(){this.isSending&&(0==this.debugMode||this.dialog.open(SQ,{width:"800px"}))}openGyro3dDialog(){this.showGyroVisualization=!this.showGyroVisualization,this.showGyroVisualization&&this.sensorData&&(this.dialogRef=this.dialog.open(Mse,{data:{gyroscopeData:{roll:this.sensorData.roll,pitch:-this.sensorData.pitch,yaw:this.sensorData.yaw}}}),this.dialogRef.afterClosed().subscribe(()=>{this.showGyroVisualization=!1,this.dialogRef=null}))}onDebugToggleChange(){this.debugMode?this.openDebug():this.closeDebug()}closeDebug(){this.dialogRef&&this.dialogRef.close()}get gpsCoordinates(){return this.sensorData?{latitude:this.sensorData.latitude,longitude:this.sensorData.longitude}:null}getTimeSince(t){if(!t)return"N/A";try{const i=new Date(t),o=(new Date).getTime()-i.getTime(),s=Math.floor(o/1e3);if(s<60)return`${s} detik yang lalu`;const a=Math.floor(s/60);if(a<60)return`${a} menit yang lalu`;const l=Math.floor(a/60);return l<24?`${l} jam yang lalu`:`${Math.floor(l/24)} hari yang lalu`}catch{return"Invalid date"}}static{this.\u0275fac=function(i){return new(i||n)(oe(Cse),oe(If),oe(BT))}}static{this.\u0275cmp=wi({type:n,selectors:[["app-main-layout"]],decls:51,vars:13,consts:[[1,"app-header"],[1,"glow-text"],[1,"main-layout"],[1,"layout-col","map-col"],[3,"coordinates"],[1,"layout-col","form-col"],[1,"sensor-footer"],[1,"sensor-card"],[1,"param-name"],[1,"param-value"],[1,"sensor-row"],[1,"sensor-item"],["mat-raised-button","","color","primary",3,"click"],[1,"status-indicator",3,"ngClass"],[1,"sensor-card","debug-card"],["color","accent",3,"ngModel","ngModelChange","change"]],template:function(i,r){1&i&&(B(0,"header",0)(1,"h3",1),K(2,"QRU\xa0VA\xa0STUDIO"),H()(),B(3,"div",2)(4,"div",3),ai(5,"app-map",4),H(),B(6,"div",5),ai(7,"app-dynamic-form"),H(),B(8,"div",5),ai(9,"app-static-form"),H()(),B(10,"footer",6)(11,"div",7)(12,"div",8),K(13,"GPS Location"),H(),B(14,"div",9)(15,"div",10)(16,"span",11),K(17),H(),B(18,"span",11),K(19),H(),B(20,"span",11),K(21),H()()()(),B(22,"div",7)(23,"div",8),K(24,"Orientation"),H(),B(25,"div",9)(26,"div",10)(27,"span",11),K(28),H(),B(29,"span",11),K(30),H(),B(31,"span",11),K(32),H()()(),B(33,"button",12),Re("click",function(){return r.openGyro3dDialog()}),K(34),H()(),B(35,"div",7)(36,"div",8),K(37,"Sensor HMCL"),H(),B(38,"div",9)(39,"span",11),K(40),H()(),B(41,"span",13),K(42),H()(),B(43,"div",14)(44,"div",8),K(45,"Debug Mode"),H(),B(46,"div",9)(47,"mat-slide-toggle",15),Re("ngModelChange",function(s){return r.debugMode=s})("change",function(){return r.onDebugToggleChange()}),K(48," Debug Mode "),H()(),B(49,"button",12),Re("click",function(){return r.startDebug()}),K(50),H()()()),2&i&&(ee(5),se("coordinates",r.gpsCoordinates),ee(12),_r("Longitude: ",(null==r.sensorData?null:r.sensorData.longitude)||"0.000",""),ee(2),_r("Latitude: ",(null==r.sensorData?null:r.sensorData.latitude)||"0.000",""),ee(2),_r("Time: ",r.getTimeSince(null==r.sensorData?null:r.sensorData.timestamp),""),ee(7),_r("Roll: ",(null==r.sensorData?null:r.sensorData.roll)||"0.00","\xb0"),ee(2),_r("Pitch: ",(null==r.sensorData?null:r.sensorData.pitch)||"0.00","\xb0"),ee(2),_r("Yaw: ",(null==r.sensorData?null:r.sensorData.yaw)||"0.00","\xb0"),ee(2),_r(" ",r.showGyroVisualization?"Hide":"Show"," Gyroscope "),ee(6),_r("Arah: ",(null==r.sensorData?null:r.sensorData.cardinalDirection)||"0.00","\xb0"),ee(1),se("ngClass",r.getStatusClass()),ee(1),_r(" ","online"===r.getStatusClass()?"Online":"Offline"," "),ee(5),se("ngModel",r.debugMode),ee(3),_r(" ",r.isSending?"STOP":"START"," Polling "))},dependencies:[GL,af,Yd,Xy,UT,Use,tae,Pae],styles:['body[_ngcontent-%COMP%], [_nghost-%COMP%]{margin:0;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif;min-height:100vh;overflow:hidden;background:linear-gradient(120deg,#0D1B2E 0%,#1A73E8 100%);display:flex;flex-direction:column}.app-header[_ngcontent-%COMP%]{position:relative;margin:1vw 1vw 0;border-radius:18px;overflow:hidden;padding:.5vw;z-index:0}.app-header[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-3px;background:linear-gradient(45deg,#ff0066,#ffcc00,#00ff66,#00ccff,#6600ff,#ff0066);background-size:400% 400%;border-radius:20px;animation:_ngcontent-%COMP%_borderMove 8s linear infinite;z-index:-2}.app-header[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:rgba(255,255,255,.13);border-radius:18px;z-index:10;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.glow-text[_ngcontent-%COMP%]{margin:0;font-weight:700;text-align:center;font-size:2.5rem;letter-spacing:.1rem;background:linear-gradient(90deg,#fdfdfd5b,#fdfdfd5b);background-size:600% 100%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:_ngcontent-%COMP%_textShift 6s linear infinite;text-shadow:0 0 8px rgba(255,255,255,.35);-webkit-user-select:none;user-select:none}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:28% 40% 28%;gap:1vw;padding:1vw;flex:1 1 auto}.layout-col[_ngcontent-%COMP%]{background:rgba(255,255,255,.13);border-radius:18px;box-shadow:0 10px 20px #1428641f;display:flex;flex-direction:column}.sensor-footer[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1.5rem;margin:1rem}.sensor-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);border-radius:18px;padding:1.5rem;box-shadow:0 4px 8px #0000001a;color:#fff;display:flex;flex-direction:column;align-items:center;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.sensor-card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 16px #0003}.param-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;margin-bottom:.8rem;color:#f39c12}.param-value[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:1rem}.sensor-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:1rem}.sensor-item[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#ecf0f1;min-width:120px}.status-indicator[_ngcontent-%COMP%]{font-weight:600;padding:.5rem;border-radius:5px;text-transform:capitalize}.status-indicator.online[_ngcontent-%COMP%]{background-color:#27ae60;color:#fff}.status-indicator.offline[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.debug-card[_ngcontent-%COMP%]   .debug-control[_ngcontent-%COMP%]{margin:1rem 0}@media (max-width: 1100px){.sensor-footer[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 600px){.sensor-footer[_ngcontent-%COMP%]{grid-template-columns:1fr}}.debug-btn[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem 1rem;border:none;border-radius:8px;background:#F59E0B;color:#0d1b2e;font-weight:600;cursor:pointer;transition:background .2s}.debug-btn[_ngcontent-%COMP%]:hover{background:#D97706}@media (max-width: 1100px){.main-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.sensor-footer[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@keyframes _ngcontent-%COMP%_borderMove{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}@keyframes _ngcontent-%COMP%_textShift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.debug-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.7)!important;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.mat-slide-toggle.mat-accent.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-thumb[_ngcontent-%COMP%]{background-color:#0f8!important}.mat-slide-toggle.mat-accent.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-bar[_ngcontent-%COMP%]{background-color:#00ff8860!important}']})}}return n})()}];let Lae=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[jk.forRoot(Rae),jk]})}}return n})(),Oae=(()=>{class n{constructor(){this.title="Qru VA Studio"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=wi({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){1&i&&ai(0,"router-outlet")},dependencies:[AC]})}}return n})(),T0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[ar,rf,hF,ar]})}}return n})();const Wae={provide:new Se("mat-select-scroll-strategy"),deps:[su],useFactory:function jae(n){return()=>n.scrollStrategies.reposition()}};let $ae=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({providers:[Wae],imports:[rf,eE,zF,ar,ZC,T0,zF,ar]})}}return n})(),qae=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({})}}return n})(),Zae=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({imports:[ar,T0,T0,qae,ar]})}}return n})();function nU(n){return new ge(3e3,!1)}function Jc(n){switch(n.length){case 0:return new xg;case 1:return n[0];default:return new qF(n)}}function iU(n,e,t=new Map,i=new Map){const r=[],o=[];let s=-1,a=null;if(e.forEach(l=>{const d=l.get("offset"),h=d==s,f=h&&a||new Map;l.forEach((p,g)=>{let v=g,w=p;if("offset"!==g)switch(v=n.normalizePropertyName(v,r),w){case"!":w=t.get(g);break;case Cl:w=i.get(g);break;default:w=n.normalizeStyleValue(g,v,w,r)}f.set(v,w)}),h||o.push(f),a=f,s=d}),r.length)throw function _le(n){return new ge(3502,!1)}();return o}function zT(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&VT(t,"start",n)));break;case"done":n.onDone(()=>i(t&&VT(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&VT(t,"destroy",n)))}}function VT(n,e,t){const o=HT(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function HT(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Ko(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function rU(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Ale=(()=>typeof document>"u"?null:document.documentElement)();function GT(n){const e=n.parentNode||n.host||null;return e===Ale?null:e}let Fu=null,oU=!1;function sU(n,e){for(;e;){if(e===n)return!0;e=GT(e)}return!1}function aU(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let lU=(()=>{class n{validateStyleProperty(t){return function Ple(n){Fu||(Fu=function Rle(){return typeof document<"u"?document.body:null}()||{},oU=!!Fu.style&&"WebkitAppearance"in Fu.style);let e=!0;return Fu.style&&!function Ile(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Fu.style,!e&&oU&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Fu.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return sU(t,i)}getParentElement(t){return GT(t)}query(t,i,r){return aU(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new xg(r,o)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})(),jT=(()=>{class n{static{this.NOOP=new lU}}return n})();const Lle=1e3,WT="ng-enter",D0="ng-leave",A0="ng-trigger",I0=".ng-trigger",dU="ng-animating",$T=".ng-animating";function Ul(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:qT(parseFloat(e[1]),e[2])}function qT(n,e){return"s"===e?n*Lle:n}function P0(n,e,t){return n.hasOwnProperty("duration")?n:function kle(n,e,t){let r,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(nU()),{duration:0,delay:0,easing:""};r=qT(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=qT(parseFloat(l),a[4]));const d=a[5];d&&(s=d)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function Xae(){return new ge(3100,!1)}()),a=!0),o<0&&(e.push(function Yae(){return new ge(3101,!1)}()),a=!0),a&&e.splice(l,0,nU())}return{duration:r,delay:o,easing:s}}(n,e,t)}function o_(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function uU(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function ed(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function qa(n,e,t){e.forEach((i,r)=>{const o=XT(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Nu(n,e){e.forEach((t,i)=>{const r=XT(i);n.style[r]=""})}function s_(n){return Array.isArray(n)?1==n.length?n[0]:$F(n):n}const ZT=new RegExp("{{\\s*(.+?)\\s*}}","g");function fU(n){let e=[];if("string"==typeof n){let t;for(;t=ZT.exec(n);)e.push(t[1]);ZT.lastIndex=0}return e}function a_(n,e,t){const i=n.toString(),r=i.replace(ZT,(o,s)=>{let a=e[s];return null==a&&(t.push(function Qae(n){return new ge(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function R0(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Ble=/-+([a-z0-9])/g;function XT(n){return n.replace(Ble,(...e)=>e[1].toUpperCase())}function Qo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Jae(n){return new ge(3004,!1)}()}}function pU(n,e){return window.getComputedStyle(n)[e]}const L0="*";function Vle(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Hle(n,e,t){if(":"==n[0]){const l=function Gle(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function fle(n){return new ge(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function hle(n){return new ge(3015,!1)}()),e;const r=i[1],o=i[2],s=i[3];e.push(mU(r,s));"<"==o[0]&&!(r==L0&&s==L0)&&e.push(mU(s,r))}(i,t,e)):t.push(n),t}const O0=new Set(["true","1"]),k0=new Set(["false","0"]);function mU(n,e){const t=O0.has(n)||k0.has(n),i=O0.has(e)||k0.has(e);return(r,o)=>{let s=n==L0||n==r,a=e==L0||e==o;return!s&&t&&"boolean"==typeof r&&(s=r?O0.has(n):k0.has(n)),!a&&i&&"boolean"==typeof o&&(a=o?O0.has(e):k0.has(e)),s&&a}}const jle=new RegExp("s*:selfs*,?","g");function YT(n,e,t,i){return new Wle(n).build(e,t,i)}class Wle{constructor(e){this._driver=e}build(e,t,i){const r=new Zle(t);return this._resetContextStyleTimingState(r),Qo(this,s_(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function tle(){return new ge(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,d=l.name;d.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,o.push(this.visitState(l,t))}),l.name=d}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(function nle(){return new ge(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{fU(l).forEach(d=>{s.hasOwnProperty(d)||o.add(d)})})}),o.size&&(R0(o.values()),t.errors.push(function ile(n,e){return new ge(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Qo(this,s_(e.animation),t);return{type:1,matchers:Vle(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Bu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Qo(this,i,t)),options:Bu(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const o=e.steps.map(s=>{t.currentTime=i;const a=Qo(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:o,options:Bu(e.options)}}visitAnimate(e,t){const i=function Yle(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return KT(P0(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=KT(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=P0(t,e);return KT(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Zs({});if(5==o.type)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const d={};i.easing&&(d.easing=i.easing),s=Zs(d)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Cl?i.push(a):t.errors.push(new ge(3002,!1)):i.push(uU(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const d=t.collectedStyles.get(t.currentQuerySelector),h=d.get(l);let f=!0;h&&(o!=r&&o>=h.startTime&&r<=h.endTime&&(t.errors.push(function ole(n,e,t,i,r){return new ge(3010,!1)}()),f=!1),o=h.startTime),f&&d.set(l,{startTime:o,endTime:r}),t.options&&function Nle(n,e,t){const i=e.params||{},r=fU(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function Kae(n){return new ge(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function sle(){return new ge(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,d=0;const h=e.steps.map(y=>{const E=this._makeStyleAst(y,t);let D=null!=E.offset?E.offset:function Xle(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(E.styles),I=0;return null!=D&&(o++,I=E.offset=D),l=l||I<0||I>1,a=a||I<d,d=I,s.push(I),E});l&&t.errors.push(function ale(){return new ge(3012,!1)}()),a&&t.errors.push(function lle(){return new ge(3200,!1)}());const f=e.steps.length;let p=0;o>0&&o<f?t.errors.push(function cle(){return new ge(3202,!1)}()):0==o&&(p=1/(f-1));const g=f-1,v=t.currentTime,w=t.currentAnimateTimings,x=w.duration;return h.forEach((y,E)=>{const D=p>0?E==g?1:p*E:s[E],I=D*x;t.currentTime=v+w.delay+I,w.duration=I,this._validateStyleAst(y,t),y.offset=D,i.styles.push(y)}),i}visitReference(e,t){return{type:8,animation:Qo(this,s_(e.animation),t),options:Bu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Bu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Bu(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function $le(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(jle,"")),n=n.replace(/@\*/g,I0).replace(/@\w+/g,t=>I0+"-"+t.slice(1)).replace(/:animating/g,$T),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,Ko(t.collectedStyles,t.currentQuerySelector,new Map);const a=Qo(this,s_(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Bu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function dle(){return new ge(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:P0(e.timings,t.errors,!0);return{type:12,animation:Qo(this,s_(e.animation),t),timings:i,options:null}}}class Zle{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Bu(n){return n?(n=o_(n)).params&&(n.params=function qle(n){return n?o_(n):null}(n.params)):n={},n}function KT(n,e,t){return{duration:n,delay:e,easing:t}}function QT(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class F0{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Jle=new RegExp(":enter","g"),tce=new RegExp(":leave","g");function JT(n,e,t,i,r,o=new Map,s=new Map,a,l,d=[]){return(new nce).buildKeyframes(n,e,t,i,r,o,s,a,l,d)}class nce{buildKeyframes(e,t,i,r,o,s,a,l,d,h=[]){d=d||new F0;const f=new eD(e,t,d,r,o,h,[]);f.options=l;const p=l.delay?Ul(l.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([s],null,f.errors,l),Qo(this,i,f);const g=f.timelines.filter(v=>v.containsAnimation());if(g.length&&a.size){let v;for(let w=g.length-1;w>=0;w--){const x=g[w];if(x.element===t){v=x;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,f.errors,l)}return g.length?g.map(v=>v.buildKeyframes()):[QT(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const o=r?.delay;if(o){const s="number"==typeof o?o:Ul(a_(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime;const s=null!=i.duration?Ul(i.duration):null,a=null!=i.delay?Ul(i.delay):null;return 0!==s&&e.forEach(l=>{const d=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,d.duration+d.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Qo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=N0);const s=Ul(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Qo(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Ul(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),Qo(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return P0(t.params?a_(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Ul(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=N0);let s=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((d,h)=>{t.currentQueryIndex=h;const f=t.createSubContext(e.options,d);o&&f.delayNextStep(o),d===t.element&&(l=f.currentTimeline),Qo(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,f.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const h=t.currentTimeline;l&&h.delayNextStep(l);const f=h.currentTime;Qo(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}}const N0={};class eD{constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=N0,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new B0(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Ul(i.duration)),null!=i.delay&&(r.delay=Ul(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=a_(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,o=new eD(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=N0,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new ice(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(Jle,"."+this._enterClassName)).replace(tce,"."+this._leaveClassName);let d=this._driver.query(this.element,e,1!=i);0!==i&&(d=i<0?d.slice(d.length+i,d.length):d.slice(0,i)),a.push(...d)}return!o&&0==a.length&&s.push(function ule(n){return new ge(3014,!1)}()),a}}class B0{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new B0(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Cl),this._currentKeyframe.set(t,Cl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},s=function rce(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let o of i)t.set(o,Cl)}else ed(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of s){const d=a_(l,o,i);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Cl),this._updateStyle(a,d)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const d=ed(a,new Map,this._backFill);d.forEach((h,f)=>{"!"===h?e.add(f):h===Cl&&t.add(f)}),i||d.set("offset",l/this.duration),r.push(d)});const o=e.size?R0(e.values()):[],s=t.size?R0(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return QT(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class ice extends B0{constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=i+t,a=t/s,l=ed(e[0]);l.set("offset",0),o.push(l);const d=ed(e[0]);d.set("offset",vU(a)),o.push(d);const h=e.length-1;for(let f=1;f<=h;f++){let p=ed(e[f]);const g=p.get("offset");p.set("offset",vU((t+g*i)/s)),o.push(p)}i=s,t=0,r="",e=o}return QT(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function vU(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class tD{}const oce=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class sce extends tD{normalizePropertyName(e,t){return XT(e)}normalizeStyleValue(e,t,i,r){let o="";const s=i.toString().trim();if(oce.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function ele(n,e){return new ge(3005,!1)}())}return s+o}}function yU(n,e,t,i,r,o,s,a,l,d,h,f,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:d,postStyleProps:h,totalTime:f,errors:p}}const nD={};class bU{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function ace(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,d,h){const f=[],p=this.ast.options&&this.ast.options.params||nD,v=this.buildStyles(i,a&&a.params||nD,f),w=l&&l.params||nD,x=this.buildStyles(r,w,f),y=new Set,E=new Map,D=new Map,I="void"===r,z={params:lce(w,p),delay:this.ast.options?.delay},U=h?[]:JT(e,t,this.ast.animation,o,s,v,x,z,d,f);let W=0;if(U.forEach(F=>{W=Math.max(F.duration+F.delay,W)}),f.length)return yU(t,this._triggerName,i,r,I,v,x,[],[],E,D,W,f);U.forEach(F=>{const O=F.element,Y=Ko(E,O,new Set);F.preStyleProps.forEach(fe=>Y.add(fe));const pe=Ko(D,O,new Set);F.postStyleProps.forEach(fe=>pe.add(fe)),O!==t&&y.add(O)});const Z=R0(y.values());return yU(t,this._triggerName,i,r,I,v,x,U,Z,E,D,W)}}function lce(n,e){const t=o_(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class cce{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=o_(this.defaultParams);return Object.keys(e).forEach(o=>{const s=e[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=a_(s,r,t));const l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}}class uce{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new cce(r.style,r.options&&r.options.params||{},i))}),xU(this.states,"true","1"),xU(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new bU(e,r,this.states))}),this.fallbackTransition=function hce(n,e,t){return new bU(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function xU(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const fce=new F0;class pce{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],o=YT(this._driver,t,i,[]);if(i.length)throw function vle(n){return new ge(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,i){const r=e.element,o=iU(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=JT(this._driver,t,o,WT,D0,new Map,new Map,i,fce,r),s.forEach(h=>{const f=Ko(a,h.element,new Map);h.postStyleProps.forEach(p=>f.set(p,null))})):(r.push(function yle(){return new ge(3300,!1)}()),s=[]),r.length)throw function ble(n){return new ge(3504,!1)}();a.forEach((h,f)=>{h.forEach((p,g)=>{h.set(g,this._driver.computeStyle(f,g,Cl))})});const d=Jc(s.map(h=>{const f=a.get(h.element);return this._buildPlayer(h,new Map,f)}));return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function xle(n){return new ge(3301,!1)}();return t}listen(e,t,i,r){const o=HT(t,"","","");return zT(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const wU="ng-animate-queued",iD="ng-animate-disabled",yce=[],MU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},bce={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ia="__ng_removed";class rD{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Cce(n){return n??null}(i?e.value:e),i){const o=o_(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const l_="void",oD=new rD(l_);class xce{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Cs(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function wle(n,e){return new ge(3302,!1)}();if(null==i||0==i.length)throw function Mle(n){return new ge(3303,!1)}();if(!function Ece(n){return"start"==n||"done"==n}(i))throw function Cle(n,e){return new ge(3400,!1)}();const o=Ko(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);const a=Ko(this._engine.statesByElement,e,new Map);return a.has(t)||(Cs(e,A0),Cs(e,A0+"-"+t),a.set(t,oD)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Ele(n){return new ge(3401,!1)}();return t}trigger(e,t,i,r=!0){const o=this._getTrigger(t),s=new sD(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Cs(e,A0),Cs(e,A0+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const d=new rD(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&d.absorbOptions(l.options),a.set(t,d),l||(l=oD),d.value!==l_&&l.value===d.value){if(!function Dce(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(l.params,d.params)){const w=[],x=o.matchStyles(l.value,l.params,w),y=o.matchStyles(d.value,d.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{Nu(e,x),qa(e,y)})}return}const p=Ko(this._engine.playersByElement,e,[]);p.forEach(w=>{w.namespaceId==this.id&&w.triggerName==t&&w.queued&&w.destroy()});let g=o.matchTransition(l.value,d.value,e,d.params),v=!1;if(!g){if(!r)return;g=o.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:l,toState:d,player:s,isFallbackTransition:v}),v||(Cs(e,wU),s.onStart(()=>{gp(e,wU)})),s.onDone(()=>{let w=this.players.indexOf(s);w>=0&&this.players.splice(w,1);const x=this._engine.playersByElement.get(e);if(x){let y=x.indexOf(s);y>=0&&x.splice(y,1)}}),this.players.push(s),p.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,I0,!0);i.forEach(r=>{if(r[ia])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((l,d)=>{if(s.set(d,l.value),this._triggers.has(d)){const h=this.trigger(e,d,l_,r);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&Jc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,d=i.get(s)||oD,h=new rD(l_),f=new sD(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:d,toState:h,player:f,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const o=e[ia];(!o||o===MU)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Cs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=HT(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,zT(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class wce{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new xce(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const d=i.indexOf(l);i.splice(d+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(e,t,i,r){if(U0(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!U0(t))return;const o=t[ia];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Cs(e,iD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),gp(e,iD))}removeNode(e,t,i){if(U0(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[ia]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return U0(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,I0,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,$T,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Jc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ia];if(t&&t.setForRemoval){if(e[ia]=MU,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(iD)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Cs(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Jc(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function Sle(n){return new ge(3402,!1)}()}_flushAnimations(e,t){const i=new F0,r=[],o=new Map,s=[],a=new Map,l=new Map,d=new Map,h=new Set;this.disabledNodes.forEach(te=>{h.add(te);const me=this.driver.query(te,".ng-animate-queued",!0);for(let re=0;re<me.length;re++)h.add(me[re])});const f=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=SU(p,this.collectedEnterElements),v=new Map;let w=0;g.forEach((te,me)=>{const re=WT+w++;v.set(me,re),te.forEach(Te=>Cs(Te,re))});const x=[],y=new Set,E=new Set;for(let te=0;te<this.collectedLeaveElements.length;te++){const me=this.collectedLeaveElements[te],re=me[ia];re&&re.setForRemoval&&(x.push(me),y.add(me),re.hasAnimation?this.driver.query(me,".ng-star-inserted",!0).forEach(Te=>y.add(Te)):E.add(me))}const D=new Map,I=SU(p,Array.from(y));I.forEach((te,me)=>{const re=D0+w++;D.set(me,re),te.forEach(Te=>Cs(Te,re))}),e.push(()=>{g.forEach((te,me)=>{const re=v.get(me);te.forEach(Te=>gp(Te,re))}),I.forEach((te,me)=>{const re=D.get(me);te.forEach(Te=>gp(Te,re))}),x.forEach(te=>{this.processLeaveNode(te)})});const z=[],U=[];for(let te=this._namespaceList.length-1;te>=0;te--)this._namespaceList[te].drainQueuedTransitions(t).forEach(re=>{const Te=re.player,We=re.element;if(z.push(Te),this.collectedEnterElements.length){const ze=We[ia];if(ze&&ze.setForMove){if(ze.previousTriggersValues&&ze.previousTriggersValues.has(re.triggerName)){const xt=ze.previousTriggersValues.get(re.triggerName),At=this.statesByElement.get(re.element);if(At&&At.has(re.triggerName)){const Ct=At.get(re.triggerName);Ct.value=xt,At.set(re.triggerName,Ct)}}return void Te.destroy()}}const rt=!f||!this.driver.containsElement(f,We),Tt=D.get(We),Qt=v.get(We),ye=this._buildInstruction(re,i,Qt,Tt,rt);if(ye.errors&&ye.errors.length)return void U.push(ye);if(rt)return Te.onStart(()=>Nu(We,ye.fromStyles)),Te.onDestroy(()=>qa(We,ye.toStyles)),void r.push(Te);if(re.isFallbackTransition)return Te.onStart(()=>Nu(We,ye.fromStyles)),Te.onDestroy(()=>qa(We,ye.toStyles)),void r.push(Te);const $e=[];ye.timelines.forEach(ze=>{ze.stretchStartingKeyframe=!0,this.disabledNodes.has(ze.element)||$e.push(ze)}),ye.timelines=$e,i.append(We,ye.timelines),s.push({instruction:ye,player:Te,element:We}),ye.queriedElements.forEach(ze=>Ko(a,ze,[]).push(Te)),ye.preStyleProps.forEach((ze,xt)=>{if(ze.size){let At=l.get(xt);At||l.set(xt,At=new Set),ze.forEach((Ct,ni)=>At.add(ni))}}),ye.postStyleProps.forEach((ze,xt)=>{let At=d.get(xt);At||d.set(xt,At=new Set),ze.forEach((Ct,ni)=>At.add(ni))})});if(U.length){const te=[];U.forEach(me=>{te.push(function Tle(n,e){return new ge(3505,!1)}())}),z.forEach(me=>me.destroy()),this.reportError(te)}const W=new Map,Z=new Map;s.forEach(te=>{const me=te.element;i.has(me)&&(Z.set(me,me),this._beforeAnimationBuild(te.player.namespaceId,te.instruction,W))}),r.forEach(te=>{const me=te.element;this._getPreviousPlayers(me,!1,te.namespaceId,te.triggerName,null).forEach(Te=>{Ko(W,me,[]).push(Te),Te.destroy()})});const F=x.filter(te=>DU(te,l,d)),O=new Map;EU(O,this.driver,E,d,Cl).forEach(te=>{DU(te,l,d)&&F.push(te)});const pe=new Map;g.forEach((te,me)=>{EU(pe,this.driver,new Set(te),l,"!")}),F.forEach(te=>{const me=O.get(te),re=pe.get(te);O.set(te,new Map([...me?.entries()??[],...re?.entries()??[]]))});const fe=[],be=[],Ee={};s.forEach(te=>{const{element:me,player:re,instruction:Te}=te;if(i.has(me)){if(h.has(me))return re.onDestroy(()=>qa(me,Te.toStyles)),re.disabled=!0,re.overrideTotalTime(Te.totalTime),void r.push(re);let We=Ee;if(Z.size>1){let Tt=me;const Qt=[];for(;Tt=Tt.parentNode;){const ye=Z.get(Tt);if(ye){We=ye;break}Qt.push(Tt)}Qt.forEach(ye=>Z.set(ye,We))}const rt=this._buildAnimation(re.namespaceId,Te,W,o,pe,O);if(re.setRealPlayer(rt),We===Ee)fe.push(re);else{const Tt=this.playersByElement.get(We);Tt&&Tt.length&&(re.parentPlayer=Jc(Tt)),r.push(re)}}else Nu(me,Te.fromStyles),re.onDestroy(()=>qa(me,Te.toStyles)),be.push(re),h.has(me)&&r.push(re)}),be.forEach(te=>{const me=o.get(te.element);if(me&&me.length){const re=Jc(me);te.setRealPlayer(re)}}),r.forEach(te=>{te.parentPlayer?te.syncPlayerEvents(te.parentPlayer):te.destroy()});for(let te=0;te<x.length;te++){const me=x[te],re=me[ia];if(gp(me,D0),re&&re.hasAnimation)continue;let Te=[];if(a.size){let rt=a.get(me);rt&&rt.length&&Te.push(...rt);let Tt=this.driver.query(me,$T,!0);for(let Qt=0;Qt<Tt.length;Qt++){let ye=a.get(Tt[Qt]);ye&&ye.length&&Te.push(...ye)}}const We=Te.filter(rt=>!rt.destroyed);We.length?Sce(this,me,We):this.processLeaveNode(me)}return x.length=0,fe.forEach(te=>{this.players.push(te),te.onDone(()=>{te.destroy();const me=this.players.indexOf(te);this.players.splice(me,1)}),te.play()}),fe}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const l=!o||o==l_;a.forEach(d=>{d.queued||!l&&d.triggerName!=r||s.push(d)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const d=l.element,h=d!==o,f=Ko(i,d,[]);this._getPreviousPlayers(d,h,s,a,t.toState).forEach(g=>{const v=g.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),g.destroy(),f.push(g)})}Nu(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){const a=t.triggerName,l=t.element,d=[],h=new Set,f=new Set,p=t.timelines.map(v=>{const w=v.element;h.add(w);const x=w[ia];if(x&&x.removedBeforeQueried)return new xg(v.duration,v.delay);const y=w!==l,E=function Tce(n){const e=[];return TU(n,e),e}((i.get(w)||yce).map(W=>W.getRealPlayer())).filter(W=>!!W.element&&W.element===w),D=o.get(w),I=s.get(w),z=iU(this._normalizer,v.keyframes,D,I),U=this._buildPlayer(v,z,E);if(v.subTimeline&&r&&f.add(w),y){const W=new sD(e,a,w);W.setRealPlayer(U),d.push(W)}return U});d.forEach(v=>{Ko(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function Mce(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,v.element,v))}),h.forEach(v=>Cs(v,dU));const g=Jc(p);return g.onDestroy(()=>{h.forEach(v=>gp(v,dU)),qa(l,t.toStyles)}),f.forEach(v=>{Ko(r,v,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new xg(e.duration,e.delay)}}class sD{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new xg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>zT(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ko(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function U0(n){return n&&1===n.nodeType}function CU(n,e){const t=n.style.display;return n.style.display=e??"none",t}function EU(n,e,t,i,r){const o=[];t.forEach(l=>o.push(CU(l)));const s=[];i.forEach((l,d)=>{const h=new Map;l.forEach(f=>{const p=e.computeStyle(d,f,r);h.set(f,p),(!p||0==p.length)&&(d[ia]=bce,s.push(d))}),n.set(d,h)});let a=0;return t.forEach(l=>CU(l,o[a++])),s}function SU(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const d=a.parentNode;return l=t.has(d)?d:r.has(d)?1:s(d),o.set(a,l),l}return e.forEach(a=>{const l=s(a);1!==l&&t.get(l).push(a)}),t}function Cs(n,e){n.classList?.add(e)}function gp(n,e){n.classList?.remove(e)}function Sce(n,e,t){Jc(t).onDone(()=>n.processLeaveNode(e))}function TU(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof qF?TU(i.players,e):e.push(i)}}function DU(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}class z0{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new wce(e,t,i),this._timelineEngine=new pce(e,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){const s=e+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],h=YT(this._driver,o,l,[]);if(l.length)throw function gle(n,e){return new ge(3404,!1)}();a=function dce(n,e,t){return new uce(n,e,t)}(r,h,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[o,s]=rU(i);this._timelineEngine.command(o,t,s,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if("@"==i.charAt(0)){const[s,a]=rU(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Ice=(()=>{class n{static{this.initialStylesByElement=new WeakMap}constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&qa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qa(this._element,this._initialStyles),this._endStyles&&(qa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Nu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Nu(this._element,this._endStyles),this._endStyles=null),qa(this._element,this._initialStyles),this._state=3)}}return n})();function aD(n){let e=null;return n.forEach((t,i)=>{(function Pce(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class AU{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:pU(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Rce{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return sU(e,t)}getParentElement(e){return GT(e)}query(e,t,i){return aU(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const d=new Map,h=s.filter(g=>g instanceof AU);(function Ule(n,e){return 0===n||0===e})(i,r)&&h.forEach(g=>{g.currentSnapshot.forEach((v,w)=>d.set(w,v))});let f=function Fle(n){return n.length?n[0]instanceof Map?n:n.map(e=>uU(e)):[]}(t).map(g=>ed(g));f=function zle(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,pU(n,a)))}}return e}(e,f,d);const p=function Ace(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=aD(e[0]),e.length>1&&(i=aD(e[e.length-1]))):e instanceof Map&&(t=aD(e)),t||i?new Ice(n,t,i):null}(e,f);return new AU(e,f,l,p)}}let Lce=(()=>{class n extends jF{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:oi.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?$F(t):t;return IU(this._renderer,null,i,"register",[r]),new Oce(i,this._renderer)}static{this.\u0275fac=function(i){return new(i||n)(he(om),he(un))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();class Oce extends RK{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new kce(this._id,e,t||{},this._renderer)}}class kce{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return IU(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function IU(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const PU="@.disabled";let Fce=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(t,i){const o=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let h=this._rendererCache.get(o);return h||(h=new RU("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,h)),h}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(s,a,t,h.name,h)};return i.data.animation.forEach(l),new Nce(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static{this.\u0275fac=function(i){return new(i||n)(he(om),he(z0),he(qt))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();class RU{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==PU?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Nce extends RU{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==PU?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function Bce(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function Uce(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}const LU=[{provide:jF,useClass:Lce},{provide:tD,useFactory:function Vce(){return new sce}},{provide:z0,useClass:(()=>{class n extends z0{constructor(t,i,r,o){super(t.body,i,r)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)(he(un),he(jT),he(tD),he(Mc))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})()},{provide:om,useFactory:function Hce(n,e,t){return new Fce(n,e,t)},deps:[zM,z0,qt]}],lD=[{provide:jT,useFactory:()=>new Rce},{provide:Us,useValue:"BrowserAnimations"},...LU],OU=[{provide:jT,useClass:lU},{provide:Us,useValue:"NoopAnimations"},...LU];let Gce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?OU:lD}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=nn({providers:lD,imports:[mO]})}}return n})(),jce=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=dn({type:n,bootstrap:[Oae]})}static{this.\u0275inj=nn({imports:[mO,Lae,R9,jK,iQ,T0,$ae,Zae,Gce,iq,L9,mQ,MQ,Fse]})}}return n})();E7().bootstrapModule(jce).catch(n=>console.error(n))},372:()=>{var Ts,hr,C;Ts=window,hr=document,L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(C,P){this._map=C,this._container=C._container,this._overlayPane=C._panes.overlayPane,this._popupPane=C._panes.popupPane,P&&P.shapeOptions&&(P.shapeOptions=L.Util.extend({},this.options.shapeOptions,P.shapeOptions)),L.setOptions(this,P);var G=L.version.split(".");1===parseInt(G[0],10)&&parseInt(G[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var C=this._map;C&&(L.DomUtil.disableTextSelection(),C.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(C){L.setOptions(this,C)},_fireCreatedEvent:function(C){this._map.fire(L.Draw.Event.CREATED,{layer:C,layerType:this.type})},_cancelDrawing:function(C){27===C.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(C,P){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,P&&P.drawError&&(P.drawError=L.Util.extend({},this.options.drawError,P.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,C,P)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var C=this._markers.pop(),P=this._poly,G=P.getLatLngs(),Q=G.splice(-1,1)[0];this._poly.setLatLngs(G),this._markerGroup.removeLayer(C),P.getLatLngs().length<2&&this._map.removeLayer(P),this._vertexChanged(Q,!1)}},addVertex:function(C){this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(C)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(C)),this._poly.addLatLng(C),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(C,!0))},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var C=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),P=this._poly.newLatLngIntersects(C[C.length-1]);!this.options.allowIntersection&&P||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(C){var P=this._map.mouseEventToLayerPoint(C.originalEvent),G=this._map.layerPointToLatLng(P);this._currentLatLng=G,this._updateTooltip(G),this._updateGuide(P),this._mouseMarker.setLatLng(G),L.DomEvent.preventDefault(C.originalEvent)},_vertexChanged:function(C,P){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(C,P),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(C){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(C),this._clickHandled=!0,this._disableNewMarkers();var P=C.originalEvent;this._startPoint.call(this,P.clientX,P.clientY)}},_startPoint:function(C,P){this._mouseDownOrigin=L.point(C,P)},_onMouseUp:function(C){var P=C.originalEvent;this._endPoint.call(this,P.clientX,P.clientY,C),this._clickHandled=null},_endPoint:function(C,P,G){if(this._mouseDownOrigin){var Q=L.point(C,P).distanceTo(this._mouseDownOrigin),Ie=this._calculateFinishDistance(G.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(G.latlng),this._finishShape()):Ie<10&&L.Browser.touch?this._finishShape():Math.abs(Q)<9*(Ts.devicePixelRatio||1)&&this.addVertex(G.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(C){var P,G,Q=C.originalEvent;!Q.touches||!Q.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(P=Q.touches[0].clientX,G=Q.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,P,G),this._endPoint.call(this,P,G,C),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(C){var P;if(this._markers.length>0){var G;if(this.type===L.Draw.Polyline.TYPE)G=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;G=this._markers[0]}var Q=this._map.latLngToContainerPoint(G.getLatLng()),Ie=new L.Marker(C,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),Je=this._map.latLngToContainerPoint(Ie.getLatLng());P=Q.distanceTo(Je)}else P=1/0;return P},_updateFinishHandler:function(){var C=this._markers.length;C>1&&this._markers[C-1].on("click",this._finishShape,this),C>2&&this._markers[C-2].off("click",this._finishShape,this)},_createMarker:function(C){var P=new L.Marker(C,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(P),P},_updateGuide:function(C){var P=this._markers?this._markers.length:0;P>0&&(C=C||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[P-1].getLatLng()),C))},_updateTooltip:function(C){var P=this._getTooltipText();C&&this._tooltip.updatePosition(C),this._errorShown||this._tooltip.updateContent(P)},_drawGuide:function(C,P){var G,Q,Ie,Je=Math.floor(Math.sqrt(Math.pow(P.x-C.x,2)+Math.pow(P.y-C.y,2))),dt=this.options.maxGuideLineLength,ue=Je>dt?Je-dt:this.options.guidelineDistance;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));ue<Je;ue+=this.options.guidelineDistance)G=ue/Je,Q={x:Math.floor(C.x*(1-G)+G*P.x),y:Math.floor(C.y*(1-G)+G*P.y)},(Ie=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(Ie,Q)},_updateGuideColor:function(C){if(this._guidesContainer)for(var P=0,G=this._guidesContainer.childNodes.length;P<G;P++)this._guidesContainer.childNodes[P].style.backgroundColor=C},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var C,P;return 0===this._markers.length?C={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(P=this.options.showLength?this._getMeasurementString():"",C=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:P}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:P}),C},_updateRunningMeasure:function(C,P){var G,Q,Ie=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(G=Ie-(P?2:1),Q=L.GeometryUtil.isVersion07x()?C.distanceTo(this._markers[G].getLatLng())*(this.options.factor||1):this._map.distance(C,this._markers[G].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=Q*(P?1:-1))},_getMeasurementString:function(){var C,P=this._currentLatLng,G=this._markers[this._markers.length-1].getLatLng();return C=L.GeometryUtil.isVersion07x()?G&&P&&P.distanceTo?this._measurementRunningTotal+P.distanceTo(G)*(this.options.factor||1):this._measurementRunningTotal||0:G&&P?this._measurementRunningTotal+this._map.distance(P,G)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(C,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var C=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,C)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(C,P){L.Draw.Polyline.prototype.initialize.call(this,C,P),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var C=this._markers.length;1===C&&this._markers[0].on("click",this._finishShape,this),C>2&&(this._markers[C-1].on("dblclick",this._finishShape,this),C>3&&this._markers[C-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var C,P;return 0===this._markers.length?C=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(C=L.drawLocal.draw.handlers.polygon.tooltip.cont,P=this._getMeasurementString()):(C=L.drawLocal.draw.handlers.polygon.tooltip.end,P=this._getMeasurementString()),{text:C,subtext:P}},_getMeasurementString:function(){var C=this._area,P="";return C||this.options.showLength?(this.options.showLength&&(P=L.Draw.Polyline.prototype._getMeasurementString.call(this)),C&&(P+="<br>"+L.GeometryUtil.readableArea(C,this.options.metric,this.options.precision)),P):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(C,P){var G;!this.options.allowIntersection&&this.options.showArea&&(G=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(G)),L.Draw.Polyline.prototype._vertexChanged.call(this,C,P)},_cleanUpShape:function(){var C=this._markers.length;C>0&&(this._markers[0].off("click",this._finishShape,this),C>2&&this._markers[C-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(C,P){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,C,P)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),hr.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(hr,"mouseup",this._onMouseUp,this),L.DomEvent.off(hr,"touchend",this._onMouseUp,this),hr.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(C){this._isDrawing=!0,this._startLatLng=C.latlng,L.DomEvent.on(hr,"mouseup",this._onMouseUp,this).on(hr,"touchend",this._onMouseUp,this).preventDefault(C.originalEvent)},_onMouseMove:function(C){var P=C.latlng;this._tooltip.updatePosition(P),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(P))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(C,P){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,C,P)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(C){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!function kt(C,P){for(;(C=C.parentElement)&&!C.classList.contains(P););return C}(C.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(C){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,C)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,C),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var C=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,C)},_getTooltipText:function(){var C,P,G,Q=L.Draw.SimpleShape.prototype._getTooltipText.call(this),Je=this.options.showArea;return this._shape&&(C=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),P=L.GeometryUtil.geodesicArea(C),G=Je?L.GeometryUtil.readableArea(P,this.options.metric):""),{text:Q.text,subtext:G}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(C,P){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,C,P)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(C){var P=C.latlng;this._tooltip.updatePosition(P),this._mouseMarker.setLatLng(P),this._marker?(P=this._mouseMarker.getLatLng(),this._marker.setLatLng(P)):(this._marker=this._createMarker(P),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(C){return new L.Marker(C,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(C){this._onMouseMove(C),this._onClick()},_fireCreatedEvent:function(){var C=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,C)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(C,P){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,C,P)},_fireCreatedEvent:function(){var C=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,C)},_createMarker:function(C){return new L.CircleMarker(C,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(C,P){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,C,P)},_drawShape:function(C){if(L.GeometryUtil.isVersion07x())var P=this._startLatLng.distanceTo(C);else P=this._map.distance(this._startLatLng,C);this._shape?this._shape.setRadius(P):(this._shape=new L.Circle(this._startLatLng,P,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var C=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,C)},_onMouseMove:function(C){var P,G=C.latlng,Q=this.options.showRadius,Ie=this.options.metric;if(this._tooltip.updatePosition(G),this._isDrawing){this._drawShape(G),P=this._shape.getRadius().toFixed(1);var Je="";Q&&(Je=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(P,Ie,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:Je})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(C,P){this._marker=C,L.setOptions(this,P)},addHooks:function(){var C=this._marker;C.dragging.enable(),C.on("dragend",this._onDragEnd,C),this._toggleMarkerHighlight()},removeHooks:function(){var C=this._marker;C.dragging.disable(),C.off("dragend",this._onDragEnd,C),this._toggleMarkerHighlight()},_onDragEnd:function(C){var P=C.target;P.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:P})},_toggleMarkerHighlight:function(){var C=this._marker._icon;C&&(C.style.display="none",L.DomUtil.hasClass(C,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(C,"leaflet-edit-marker-selected"),this._offsetMarker(C,-4)):(L.DomUtil.addClass(C,"leaflet-edit-marker-selected"),this._offsetMarker(C,4)),C.style.display="")},_offsetMarker:function(C,P){var G=parseInt(C.style.marginTop,10)-P,Q=parseInt(C.style.marginLeft,10)-P;C.style.marginTop=G+"px",C.style.marginLeft=Q+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(C){this.latlngs=[C._latlngs],C._holes&&(this.latlngs=this.latlngs.concat(C._holes)),this._poly=C,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(C){for(var P=0;P<this._verticesHandlers.length;P++)C(this._verticesHandlers[P])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(C){C.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(C){C.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(C){C.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var C=0;C<this.latlngs.length;C++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[C],this._poly.options.poly))},_updateLatLngs:function(C){this.latlngs=[C.layer._latlngs],C.layer._holes&&(this.latlngs=this.latlngs.concat(C.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(C,P,G){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=C,G&&G.drawError&&(G.drawError=L.Util.extend({},this.options.drawError,G.drawError)),this._latlngs=P,L.setOptions(this,G)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var C=this._poly,P=C._path;C instanceof L.Polygon||(C.options.fill=!1,C.options.editing&&(C.options.editing.fill=!1)),P&&C.options.editing&&C.options.editing.className&&(C.options.original.className&&C.options.original.className.split(" ").forEach(function(G){L.DomUtil.removeClass(P,G)}),C.options.editing.className.split(" ").forEach(function(G){L.DomUtil.addClass(P,G)})),C.setStyle(C.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var C=this._poly,P=C._path;P&&C.options.editing&&C.options.editing.className&&(C.options.editing.className.split(" ").forEach(function(G){L.DomUtil.removeClass(P,G)}),C.options.original.className&&C.options.original.className.split(" ").forEach(function(G){L.DomUtil.addClass(P,G)})),C.setStyle(C.options.original),C._map&&(C._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var C,P,G,Q,Je,Ke,Ie=this._defaultShape();for(C=0,G=Ie.length;C<G;C++)(Q=this._createMarker(Ie[C],C)).on("click",this._onMarkerClick,this),Q.on("contextmenu",this._onContextMenu,this),this._markers.push(Q);for(C=0,P=G-1;C<G;P=C++)(0!==C||L.Polygon&&this._poly instanceof L.Polygon)&&(this._createMiddleMarker(Je=this._markers[P],Ke=this._markers[C]),this._updatePrevNext(Je,Ke))},_createMarker:function(C,P){var G=new L.Marker.Touch(C,{draggable:!0,icon:this.options.icon});return G._origLatLng=C,G._index=P,G.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(G),G},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var C=this._defaultShape(),P=[].splice.apply(C,arguments);return this._poly._convertLatLngs(C,!0),this._poly.redraw(),P},_removeMarker:function(C){var P=C._index;this._markerGroup.removeLayer(C),this._markers.splice(P,1),this._spliceLatLngs(P,1),this._updateIndexes(P,-1),C.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(C){var P=C.target,G=this._poly,Q=L.LatLngUtil.cloneLatLng(P._origLatLng);if(L.extend(P._origLatLng,P._latlng),G.options.poly){var Ie=G._map._editTooltip;if(!G.options.poly.allowIntersection&&G.intersects()){L.extend(P._origLatLng,Q),P.setLatLng(Q);var Je=G.options.color;G.setStyle({color:this.options.drawError.color}),Ie&&Ie.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){G.setStyle({color:Je}),Ie&&Ie.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}P._middleLeft&&P._middleLeft.setLatLng(this._getMiddleLatLng(P._prev,P)),P._middleRight&&P._middleRight.setLatLng(this._getMiddleLatLng(P,P._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var Ke=this._poly.getLatLngs();this._poly._convertLatLngs(Ke,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(C){var P=L.Polygon&&this._poly instanceof L.Polygon?4:3,G=C.target;this._defaultShape().length<P||(this._removeMarker(G),this._updatePrevNext(G._prev,G._next),G._middleLeft&&this._markerGroup.removeLayer(G._middleLeft),G._middleRight&&this._markerGroup.removeLayer(G._middleRight),G._prev&&G._next?this._createMiddleMarker(G._prev,G._next):G._prev?G._next||(G._prev._middleRight=null):G._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(C){this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:C.target,layers:this._markerGroup,poly:this._poly}),L},_onTouchMove:function(C){var P=this._map.mouseEventToLayerPoint(C.originalEvent.touches[0]),G=this._map.layerPointToLatLng(P),Q=C.target;L.extend(Q._origLatLng,G),Q._middleLeft&&Q._middleLeft.setLatLng(this._getMiddleLatLng(Q._prev,Q)),Q._middleRight&&Q._middleRight.setLatLng(this._getMiddleLatLng(Q,Q._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(C,P){this._markerGroup.eachLayer(function(G){G._index>C&&(G._index+=P)})},_createMiddleMarker:function(C,P){var G,Q,Ie,Je=this._getMiddleLatLng(C,P),Ke=this._createMarker(Je);Ke.setOpacity(.6),C._middleRight=P._middleLeft=Ke,Q=function(){Ke.off("touchmove",Q,this);var dt=P._index;Ke._index=dt,Ke.off("click",G,this).on("click",this._onMarkerClick,this),Je.lat=Ke.getLatLng().lat,Je.lng=Ke.getLatLng().lng,this._spliceLatLngs(dt,0,Je),this._markers.splice(dt,0,Ke),Ke.setOpacity(1),this._updateIndexes(dt,1),P._index++,this._updatePrevNext(C,Ke),this._updatePrevNext(Ke,P),this._poly.fire("editstart")},Ie=function(){Ke.off("dragstart",Q,this),Ke.off("dragend",Ie,this),Ke.off("touchmove",Q,this),this._createMiddleMarker(C,Ke),this._createMiddleMarker(Ke,P)},Ke.on("click",G=function(){Q.call(this),Ie.call(this),this._fireEdit()},this).on("dragstart",Q,this).on("dragend",Ie,this).on("touchmove",Q,this),this._markerGroup.addLayer(Ke)},_updatePrevNext:function(C,P){C&&(C._next=P),P&&(P._prev=C)},_getMiddleLatLng:function(C,P){var G=this._poly._map,Q=G.project(C.getLatLng()),Ie=G.project(P.getLatLng());return G.unproject(Q._add(Ie)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(C,P){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=C,L.Util.setOptions(this,P)},addHooks:function(){var C=this._shape;this._shape._map&&(this._map=this._shape._map,C.setStyle(C.options.editing),C._map&&(this._map=C._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var C=this._shape;if(C.setStyle(C.options.original),C._map){this._unbindMarker(this._moveMarker);for(var P=0,G=this._resizeMarkers.length;P<G;P++)this._unbindMarker(this._resizeMarkers[P]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(C,P){var G=new L.Marker.Touch(C,{draggable:!0,icon:P,zIndexOffset:10});return this._bindMarker(G),this._markerGroup.addLayer(G),G},_bindMarker:function(C){C.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(C){C.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(C){C.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(C){var P=C.target,G=P.getLatLng();P===this._moveMarker?this._move(G):this._resize(G),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(C){C.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(C){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,C),"function"==typeof this._getCorners){var P=this._getCorners(),G=C.target,Q=G._cornerIndex;G.setOpacity(0),this._oppositeCorner=P[(Q+2)%4],this._toggleCornerMarkers(0,Q)}this._shape.fire("editstart")},_onTouchMove:function(C){var P=this._map.mouseEventToLayerPoint(C.originalEvent.touches[0]),G=this._map.layerPointToLatLng(P);return C.target===this._moveMarker?this._move(G):this._resize(G),this._shape.redraw(),!1},_onTouchEnd:function(C){C.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var P=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(P,this.options.moveIcon)},_createResizeMarker:function(){var C=this._getCorners();this._resizeMarkers=[];for(var P=0,G=C.length;P<G;P++)this._resizeMarkers.push(this._createMarker(C[P],this.options.resizeIcon)),this._resizeMarkers[P]._cornerIndex=P},_onMarkerDragStart:function(C){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,C);var P=this._getCorners(),Q=C.target._cornerIndex;this._oppositeCorner=P[(Q+2)%4],this._toggleCornerMarkers(0,Q)},_onMarkerDragEnd:function(C){var G,Q=C.target;Q===this._moveMarker&&(G=this._shape.getBounds().getCenter(),Q.setLatLng(G)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,C)},_move:function(C){for(var P,G=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),Ie=this._shape.getBounds().getCenter(),Je=[],Ke=0,dt=G.length;Ke<dt;Ke++)Je.push([C.lat+(P=[G[Ke].lat-Ie.lat,G[Ke].lng-Ie.lng])[0],C.lng+P[1]]);this._shape.setLatLngs(Je),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(C){var P;this._shape.setBounds(L.latLngBounds(C,this._oppositeCorner)),P=this._shape.getBounds(),this._moveMarker.setLatLng(P.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var C=this._shape.getBounds();return[C.getNorthWest(),C.getNorthEast(),C.getSouthEast(),C.getSouthWest()]},_toggleCornerMarkers:function(C){for(var P=0,G=this._resizeMarkers.length;P<G;P++)this._resizeMarkers[P].setOpacity(C)},_repositionCornerMarkers:function(){for(var C=this._getCorners(),P=0,G=this._resizeMarkers.length;P<G;P++)this._resizeMarkers[P].setLatLng(C[P])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var C=this._shape.getLatLng();this._moveMarker=this._createMarker(C,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(C){if(this._resizeMarkers.length){var P=this._getResizeMarkerPoint(C);this._resizeMarkers[0].setLatLng(P)}this._shape.setLatLng(C),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var C=this._shape.getLatLng(),P=this._getResizeMarkerPoint(C);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(P,this.options.resizeIcon))},_getResizeMarkerPoint:function(C){var P=this._shape._radius*Math.cos(Math.PI/4),G=this._map.project(C);return this._map.unproject([G.x+P,G.y-P])},_resize:function(C){var P=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=P.distanceTo(C):radius=this._map.distance(P,C),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(C){this._map=C,this._container=C._container,this._pane=C._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(C,P){var G={};if(void 0!==C.touches){if(!C.touches.length)return;G=C.touches[0]}else if("touch"!==C.pointerType||(G=C,!this._filterClick(C)))return;var Q=this._map.mouseEventToContainerPoint(G),Ie=this._map.mouseEventToLayerPoint(G),Je=this._map.layerPointToLatLng(Ie);this._map.fire(P,{latlng:Je,layerPoint:Ie,containerPoint:Q,pageX:G.pageX,pageY:G.pageY,originalEvent:C})},_filterClick:function(C){var P=C.timeStamp||C.originalEvent.timeStamp,G=L.DomEvent._lastClick&&P-L.DomEvent._lastClick;return G&&G>100&&G<500||C.target._simulatedClick&&!C._simulated?(L.DomEvent.stop(C),!1):(L.DomEvent._lastClick=P,!0)},_onTouchStart:function(C){this._map._loaded&&this._touchEvent(C,"touchstart")},_onTouchEnd:function(C){this._map._loaded&&this._touchEvent(C,"touchend")},_onTouchCancel:function(C){if(this._map._loaded){var P="touchcancel";this._detectIE()&&(P="pointercancel"),this._touchEvent(C,P)}},_onTouchLeave:function(C){this._map._loaded&&this._touchEvent(C,"touchleave")},_onTouchMove:function(C){this._map._loaded&&this._touchEvent(C,"touchmove")},_detectIE:function(){var C=Ts.navigator.userAgent,P=C.indexOf("MSIE ");if(P>0)return parseInt(C.substring(P+5,C.indexOf(".",P)),10);if(C.indexOf("Trident/")>0){var G=C.indexOf("rv:");return parseInt(C.substring(G+3,C.indexOf(".",G)),10)}var Q=C.indexOf("Edge/");return Q>0&&parseInt(C.substring(Q+5,C.indexOf(".",Q)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var C=this._icon,P=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];P.concat(this._detectIE?["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]:["touchcancel"]),L.DomUtil.addClass(C,"leaflet-clickable"),L.DomEvent.on(C,"click",this._onMouseClick,this),L.DomEvent.on(C,"keypress",this._onKeyPress,this);for(var G=0;G<P.length;G++)L.DomEvent.on(C,P[G],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var C=Ts.navigator.userAgent,P=C.indexOf("MSIE ");if(P>0)return parseInt(C.substring(P+5,C.indexOf(".",P)),10);if(C.indexOf("Trident/")>0){var G=C.indexOf("rv:");return parseInt(C.substring(G+3,C.indexOf(".",G)),10)}var Q=C.indexOf("Edge/");return Q>0&&parseInt(C.substring(Q+5,C.indexOf(".",Q)),10)}}),L.LatLngUtil={cloneLatLngs:function(C){for(var P=[],G=0,Q=C.length;G<Q;G++)Array.isArray(C[G])?P.push(L.LatLngUtil.cloneLatLngs(C[G])):P.push(this.cloneLatLng(C[G]));return P},cloneLatLng:function(C){return L.latLng(C.lat,C.lng)}},C={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(P){var G,Q,Ie=P.length,Je=0,Ke=Math.PI/180;if(Ie>2){for(var dt=0;dt<Ie;dt++)Je+=((Q=P[(dt+1)%Ie]).lng-(G=P[dt]).lng)*Ke*(2+Math.sin(G.lat*Ke)+Math.sin(Q.lat*Ke));Je=6378137*Je*6378137/2}return Math.abs(Je)},formattedNumber:function(P,G){var Q=parseFloat(P).toFixed(G),Ie=L.drawLocal.format&&L.drawLocal.format.numeric,Je=Ie&&Ie.delimiters,Ke=Je&&Je.thousands,dt=Je&&Je.decimal;if(Ke||dt){var ue=Q.split(".");Q=Ke?ue[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+Ke):ue[0],dt=dt||".",ue.length>1&&(Q=Q+dt+ue[1])}return Q},readableArea:function(P,G,Ke){var Ie,Je;return Ke=L.Util.extend({},C,Ke),G?(Je=["ha","m"],type=typeof G,"string"===type?Je=[G]:"boolean"!==type&&(Je=G),Ie=P>=1e6&&-1!==Je.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*P,Ke.km)+" km\xb2":P>=1e4&&-1!==Je.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*P,Ke.ha)+" ha":L.GeometryUtil.formattedNumber(P,Ke.m)+" m\xb2"):Ie=(P/=.836127)>=3097600?L.GeometryUtil.formattedNumber(P/3097600,Ke.mi)+" mi\xb2":P>=4840?L.GeometryUtil.formattedNumber(P/4840,Ke.ac)+" acres":L.GeometryUtil.formattedNumber(P,Ke.yd)+" yd\xb2",Ie},readableDistance:function(P,G,Q,Ie,dt){var Ke;switch(dt=L.Util.extend({},C,dt),G?"string"==typeof G?G:"metric":Q?"feet":Ie?"nauticalMile":"yards"){case"metric":Ke=P>1e3?L.GeometryUtil.formattedNumber(P/1e3,dt.km)+" km":L.GeometryUtil.formattedNumber(P,dt.m)+" m";break;case"feet":P*=3.28083,Ke=L.GeometryUtil.formattedNumber(P,dt.ft)+" ft";break;case"nauticalMile":P*=.53996,Ke=L.GeometryUtil.formattedNumber(P/1e3,dt.nm)+" nm";break;default:Ke=(P*=1.09361)>1760?L.GeometryUtil.formattedNumber(P/1760,dt.mi)+" miles":L.GeometryUtil.formattedNumber(P,dt.yd)+" yd"}return Ke},isVersion07x:function(){var P=L.version.split(".");return 0===parseInt(P[0],10)&&7===parseInt(P[1],10)}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(C,P,G,Q){return this._checkCounterclockwise(C,G,Q)!==this._checkCounterclockwise(P,G,Q)&&this._checkCounterclockwise(C,P,G)!==this._checkCounterclockwise(C,P,Q)},_checkCounterclockwise:function(C,P,G){return(G.y-C.y)*(P.x-C.x)>(P.y-C.y)*(G.x-C.x)}}),L.Polyline.include({intersects:function(){var C,Q=this._getProjectedPoints(),Ie=Q?Q.length:0;if(this._tooFewPointsForIntersection())return!1;for(C=Ie-1;C>=3;C--)if(this._lineSegmentsIntersectsRange(Q[C-1],Q[C],C-2))return!0;return!1},newLatLngIntersects:function(C,P){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(C),P)},newPointIntersects:function(C,P){var G=this._getProjectedPoints(),Q=G?G.length:0,Ie=G?G[Q-1]:null,Je=Q-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(Ie,C,Je,P?1:0)},_tooFewPointsForIntersection:function(C){var P=this._getProjectedPoints(),G=P?P.length:0;return!P||(G+=C||0)<=3},_lineSegmentsIntersectsRange:function(C,P,G,Q){var Ke=this._getProjectedPoints();Q=Q||0;for(var dt=G;dt>Q;dt--)if(L.LineUtil.segmentsIntersect(C,P,Ke[dt-1],Ke[dt]))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var C=[],P=this._defaultShape(),G=0;G<P.length;G++)C.push(this._map.latLngToLayerPoint(P[G]));return C}}),L.Polygon.include({intersects:function(){var C,Ie=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||this._lineSegmentsIntersectsRange(Ie[(C=Ie.length)-1],Ie[0],C-2,1))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(C){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var P;L.Control.prototype.initialize.call(this,C),this._toolbars={},L.DrawToolbar&&this.options.draw&&(P=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=P,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(P=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=P,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(C){var P,G=L.DomUtil.create("div","leaflet-draw"),Q=!1;for(var Ie in this._toolbars)this._toolbars.hasOwnProperty(Ie)&&(P=this._toolbars[Ie].addToolbar(C))&&(Q||(L.DomUtil.hasClass(P,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(P.childNodes[0],"leaflet-draw-toolbar-top"),Q=!0),G.appendChild(P));return G},onRemove:function(){for(var C in this._toolbars)this._toolbars.hasOwnProperty(C)&&this._toolbars[C].removeToolbar()},setDrawingOptions:function(C){for(var P in this._toolbars)this._toolbars[P]instanceof L.DrawToolbar&&this._toolbars[P].setOptions(C)},_toolbarEnabled:function(C){var P=C.target;for(var G in this._toolbars)this._toolbars[G]!==P&&this._toolbars[G].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(C){L.setOptions(this,C),this._modes={},this._actionButtons=[],this._activeMode=null;var P=L.version.split(".");1===parseInt(P[0],10)&&parseInt(P[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(C){var P,G=L.DomUtil.create("div","leaflet-draw-section"),Q=0,Ie=this._toolbarClass||"",Je=this.getModeHandlers(C);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=C,P=0;P<Je.length;P++)Je[P].enabled&&this._initModeHandler(Je[P].handler,this._toolbarContainer,Q++,Ie,Je[P].title);if(Q)return this._lastButtonIndex=--Q,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),G.appendChild(this._toolbarContainer),G.appendChild(this._actionsContainer),G},removeToolbar:function(){for(var C in this._modes)this._modes.hasOwnProperty(C)&&(this._disposeButton(this._modes[C].button,this._modes[C].handler.enable,this._modes[C].handler),this._modes[C].handler.disable(),this._modes[C].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var P=0,G=this._actionButtons.length;P<G;P++)this._disposeButton(this._actionButtons[P].button,this._actionButtons[P].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(C,P,G,Q,Ie){var Je=C.type;this._modes[Je]={},this._modes[Je].handler=C,this._modes[Je].button=this._createButton({type:Je,title:Ie,className:Q+"-"+Je,container:P,callback:this._modes[Je].handler.enable,context:this._modes[Je].handler}),this._modes[Je].buttonIndex=G,this._modes[Je].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!Ts.MSStream},_createButton:function(C){var P=L.DomUtil.create("a",C.className||"",C.container),G=L.DomUtil.create("span","sr-only",C.container);P.href="#",P.appendChild(G),C.title&&(P.title=C.title,G.innerHTML=C.title),C.text&&(P.innerHTML=C.text,G.innerHTML=C.text);var Q=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(P,"click",L.DomEvent.stopPropagation).on(P,"mousedown",L.DomEvent.stopPropagation).on(P,"dblclick",L.DomEvent.stopPropagation).on(P,"touchstart",L.DomEvent.stopPropagation).on(P,"click",L.DomEvent.preventDefault).on(P,Q,C.callback,C.context),P},_disposeButton:function(C,P){var G=this._detectIOS()?"touchstart":"click";L.DomEvent.off(C,"click",L.DomEvent.stopPropagation).off(C,"mousedown",L.DomEvent.stopPropagation).off(C,"dblclick",L.DomEvent.stopPropagation).off(C,"touchstart",L.DomEvent.stopPropagation).off(C,"click",L.DomEvent.preventDefault).off(C,G,P)},_handlerActivated:function(C){this.disable(),this._activeMode=this._modes[C.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(C){var P,G,Q,Ie,Je=this._actionsContainer,Ke=this.getActions(C),dt=Ke.length;for(G=0,Q=this._actionButtons.length;G<Q;G++)this._disposeButton(this._actionButtons[G].button,this._actionButtons[G].callback);for(this._actionButtons=[];Je.firstChild;)Je.removeChild(Je.firstChild);for(var ue=0;ue<dt;ue++)"enabled"in Ke[ue]&&!Ke[ue].enabled||(P=L.DomUtil.create("li","",Je),Ie=this._createButton({title:Ke[ue].title,text:Ke[ue].text,container:P,callback:Ke[ue].callback,context:Ke[ue].context}),this._actionButtons.push({button:Ie,callback:Ke[ue].callback}))},_showActionsToolbar:function(){var C=this._activeMode.buttonIndex,P=this._lastButtonIndex,G=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=G+"px",0===C&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),C===P&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(C){this._map=C,this._popupPane=C._panes.popupPane,this._visible=!1,this._container=C.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(C){return this._container?(C.subtext=C.subtext||"",0!==C.subtext.length||this._singleLineLabel?C.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(C.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+C.subtext+"</span><br />":"")+"<span>"+C.text+"</span>",C.text||C.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(C){var P=this._map.latLngToLayerPoint(C),G=this._container;return this._container&&(this._visible&&(G.style.visibility="inherit"),L.DomUtil.setPosition(G,P)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(C){for(var P in this.options)this.options.hasOwnProperty(P)&&C[P]&&(C[P]=L.extend({},this.options[P],C[P]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,C)},getModeHandlers:function(C){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(C,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(C,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(C,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(C,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(C,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(C,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(C){return[{enabled:C.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:C.completeShape,context:C},{enabled:C.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:C.deleteLastVertex,context:C},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(C){for(var P in L.setOptions(this,C),this._modes)this._modes.hasOwnProperty(P)&&C.hasOwnProperty(P)&&this._modes[P].handler.setOptions(C[P])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(C){C.edit&&(void 0===C.edit.selectedPathOptions&&(C.edit.selectedPathOptions=this.options.edit.selectedPathOptions),C.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,C.edit.selectedPathOptions)),C.remove&&(C.remove=L.extend({},this.options.remove,C.remove)),C.poly&&(C.poly=L.extend({},this.options.poly,C.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,C),this._selectedFeatureCount=0},getModeHandlers:function(C){var P=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(C,{featureGroup:P,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(C,{featureGroup:P}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(C){var P=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return C.removeAllLayers&&P.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),P},addToolbar:function(C){var P=L.Toolbar.prototype.addToolbar.call(this,C);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),P},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var C,G=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(C=this._modes[L.EditToolbar.Edit.TYPE].button,G?L.DomUtil.removeClass(C,"leaflet-disabled"):L.DomUtil.addClass(C,"leaflet-disabled"),C.setAttribute("title",G?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(C=this._modes[L.EditToolbar.Delete.TYPE].button,G?L.DomUtil.removeClass(C,"leaflet-disabled"):L.DomUtil.addClass(C,"leaflet-disabled"),C.setAttribute("title",G?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(C,P){if(L.Handler.prototype.initialize.call(this,C),L.setOptions(this,P),this._featureGroup=P.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var G=L.version.split(".");1===parseInt(G[0],10)&&parseInt(G[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var C=this._map;C&&(C.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),C._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(C){this._revertLayer(C)},this)},save:function(){var C=new L.LayerGroup;this._featureGroup.eachLayer(function(P){P.edited&&(C.addLayer(P),P.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:C})},_backupLayer:function(C){var P=L.Util.stamp(C);this._uneditedLayerProps[P]||(C instanceof L.Polyline||C instanceof L.Polygon||C instanceof L.Rectangle?this._uneditedLayerProps[P]={latlngs:L.LatLngUtil.cloneLatLngs(C.getLatLngs())}:C instanceof L.Circle?this._uneditedLayerProps[P]={latlng:L.LatLngUtil.cloneLatLng(C.getLatLng()),radius:C.getRadius()}:(C instanceof L.Marker||C instanceof L.CircleMarker)&&(this._uneditedLayerProps[P]={latlng:L.LatLngUtil.cloneLatLng(C.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(C){var P=L.Util.stamp(C);C.edited=!1,this._uneditedLayerProps.hasOwnProperty(P)&&(C instanceof L.Polyline||C instanceof L.Polygon||C instanceof L.Rectangle?C.setLatLngs(this._uneditedLayerProps[P].latlngs):C instanceof L.Circle?(C.setLatLng(this._uneditedLayerProps[P].latlng),C.setRadius(this._uneditedLayerProps[P].radius)):(C instanceof L.Marker||C instanceof L.CircleMarker)&&C.setLatLng(this._uneditedLayerProps[P].latlng),C.fire("revert-edited",{layer:C}))},_enableLayerEdit:function(C){var P,G,Q=C.layer||C.target||C;this._backupLayer(Q),this.options.poly&&(G=L.Util.extend({},this.options.poly),Q.options.poly=G),this.options.selectedPathOptions&&((P=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(P.color=Q.options.color,P.fillColor=Q.options.fillColor),Q.options.original=L.extend({},Q.options),Q.options.editing=P),Q instanceof L.Marker?(Q.editing&&Q.editing.enable(),Q.dragging.enable(),Q.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):Q.editing.enable()},_disableLayerEdit:function(C){var P=C.layer||C.target||C;P.edited=!1,P.editing&&P.editing.disable(),delete P.options.editing,delete P.options.original,this._selectedPathOptions&&(P instanceof L.Marker?this._toggleMarkerHighlight(P):(P.setStyle(P.options.previousOptions),delete P.options.previousOptions)),P instanceof L.Marker?(P.dragging.disable(),P.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):P.editing.disable()},_onMouseMove:function(C){this._tooltip.updatePosition(C.latlng)},_onMarkerDragEnd:function(C){var P=C.target;P.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:P})},_onTouchMove:function(C){var G=this._map.mouseEventToLayerPoint(C.originalEvent.changedTouches[0]),Q=this._map.layerPointToLatLng(G);C.target.setLatLng(Q)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(C,P){if(L.Handler.prototype.initialize.call(this,C),L.Util.setOptions(this,P),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var G=L.version.split(".");1===parseInt(G[0],10)&&parseInt(G[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var C=this._map;C&&(C.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(C){this._deletableLayers.addLayer(C),C.fire("revert-deleted",{layer:C})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(C){this._removeLayer({layer:C})},this),this.save()},_enableLayerDelete:function(C){(C.layer||C.target||C).on("click",this._removeLayer,this)},_disableLayerDelete:function(C){var P=C.layer||C.target||C;P.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(P)},_removeLayer:function(C){var P=C.layer||C.target||C;this._deletableLayers.removeLayer(P),this._deletedLayers.addLayer(P),P.fire("deleted")},_onMouseMove:function(C){this._tooltip.updatePosition(C.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})},244:function(Ts,hr){!function(Ne){"use strict";function C(c){var u,m,M,S;for(m=1,M=arguments.length;m<M;m++)for(u in S=arguments[m])c[u]=S[u];return c}var P=Object.create||function(){function c(){}return function(u){return c.prototype=u,new c}}();function G(c,u){var m=Array.prototype.slice;if(c.bind)return c.bind.apply(c,m.call(arguments,1));var M=m.call(arguments,2);return function(){return c.apply(u,M.length?M.concat(m.call(arguments)):arguments)}}var Q=0;function Ie(c){return"_leaflet_id"in c||(c._leaflet_id=++Q),c._leaflet_id}function Je(c,u,m){var M,S,R,X;return X=function(){M=!1,S&&(R.apply(m,S),S=!1)},R=function(){M?S=arguments:(c.apply(m,arguments),setTimeout(X,u),M=!0)},R}function Ke(c,u,m){var M=u[1],S=u[0],R=M-S;return c===M&&m?c:((c-S)%R+R)%R+S}function dt(){return!1}function ue(c,u){if(!1===u)return c;var m=Math.pow(10,void 0===u?6:u);return Math.round(c*m)/m}function td(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function Pr(c){return td(c).split(/\s+/)}function zn(c,u){for(var m in Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?P(c.options):{}),u)c.options[m]=u[m];return c.options}function Vl(c,u,m){var M=[];for(var S in c)M.push(encodeURIComponent(m?S.toUpperCase():S)+"="+encodeURIComponent(c[S]));return(u&&-1!==u.indexOf("?")?"&":"?")+M.join("&")}var nr=/\{ *([\w_ -]+) *\}/g;function fo(c,u){return c.replace(nr,function(m,M){var S=u[M];if(void 0===S)throw new Error("No value provided for variable "+m);return"function"==typeof S&&(S=S(u)),S})}var Pi=Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)};function sa(c,u){for(var m=0;m<c.length;m++)if(c[m]===u)return m;return-1}var Za="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function es(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var Hl=0;function ts(c){var u=+new Date,m=Math.max(0,16-(u-Hl));return Hl=u+m,window.setTimeout(c,m)}var Xa=window.requestAnimationFrame||es("RequestAnimationFrame")||ts,_i=window.cancelAnimationFrame||es("CancelAnimationFrame")||es("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function hi(c,u,m){if(!m||Xa!==ts)return Xa.call(window,G(c,u));c.call(u)}function qn(c){c&&_i.call(window,c)}var gn={__proto__:null,extend:C,create:P,bind:G,get lastId(){return Q},stamp:Ie,throttle:Je,wrapNum:Ke,falseFn:dt,formatNum:ue,trim:td,splitWords:Pr,setOptions:zn,getParamString:Vl,template:fo,isArray:Pi,indexOf:sa,emptyImageUrl:Za,requestFn:Xa,cancelFn:_i,requestAnimFrame:hi,cancelAnimFrame:qn};function fr(){}fr.extend=function(c){var u=function(){zn(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=u.__super__=this.prototype,M=P(m);for(var S in M.constructor=u,u.prototype=M,this)Object.prototype.hasOwnProperty.call(this,S)&&"prototype"!==S&&"__super__"!==S&&(u[S]=this[S]);return c.statics&&C(u,c.statics),c.includes&&(function nd(c){if(!(typeof L>"u")&&L&&L.Mixin){c=Pi(c)?c:[c];for(var u=0;u<c.length;u++)c[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(c.includes),C.apply(null,[M].concat(c.includes))),C(M,c),delete M.statics,delete M.includes,M.options&&(M.options=m.options?P(m.options):{},C(M.options,c.options)),M._initHooks=[],M.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,X=M._initHooks.length;R<X;R++)M._initHooks[R].call(this)}},u},fr.include=function(c){var u=this.prototype.options;return C(this.prototype,c),c.options&&(this.prototype.options=u,this.mergeOptions(c.options)),this},fr.mergeOptions=function(c){return C(this.prototype.options,c),this},fr.addInitHook=function(c){var u=Array.prototype.slice.call(arguments,1),m="function"==typeof c?c:function(){this[c].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};var fi={on:function(c,u,m){if("object"==typeof c)for(var M in c)this._on(M,c[M],u);else for(var S=0,R=(c=Pr(c)).length;S<R;S++)this._on(c[S],u,m);return this},off:function(c,u,m){if(arguments.length)if("object"==typeof c)for(var M in c)this._off(M,c[M],u);else{c=Pr(c);for(var S=1===arguments.length,R=0,X=c.length;R<X;R++)S?this._off(c[R]):this._off(c[R],u,m)}else delete this._events;return this},_on:function(c,u,m,M){if("function"==typeof u){if(!1===this._listens(c,u,m)){m===this&&(m=void 0);var S={fn:u,ctx:m};M&&(S.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(S)}}else console.warn("wrong listener type: "+typeof u)},_off:function(c,u,m){var M,S,R;if(this._events&&(M=this._events[c])){if(1===arguments.length){if(this._firingCount)for(S=0,R=M.length;S<R;S++)M[S].fn=dt;return void delete this._events[c]}if("function"!=typeof u)return void console.warn("wrong listener type: "+typeof u);var X=this._listens(c,u,m);!1!==X&&(this._firingCount&&(M[X].fn=dt,this._events[c]=M=M.slice()),M.splice(X,1))}},fire:function(c,u,m){if(!this.listens(c,m))return this;var M=C({},u,{type:c,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var S=this._events[c];if(S){this._firingCount=this._firingCount+1||1;for(var R=0,X=S.length;R<X;R++){var ae=S[R],J=ae.fn;ae.once&&this.off(c,J,ae.ctx),J.call(ae.ctx||this,M)}this._firingCount--}}return m&&this._propagateEvent(M),this},listens:function(c,u,m,M){"string"!=typeof c&&console.warn('"string" type argument expected');var S=u;"function"!=typeof u&&(M=!!u,S=void 0,m=void 0);var R=this._events&&this._events[c];if(R&&R.length&&!1!==this._listens(c,S,m))return!0;if(M)for(var X in this._eventParents)if(this._eventParents[X].listens(c,u,m,M))return!0;return!1},_listens:function(c,u,m){if(!this._events)return!1;var M=this._events[c]||[];if(!u)return!!M.length;m===this&&(m=void 0);for(var S=0,R=M.length;S<R;S++)if(M[S].fn===u&&M[S].ctx===m)return S;return!1},once:function(c,u,m){if("object"==typeof c)for(var M in c)this._on(M,c[M],u,!0);else for(var S=0,R=(c=Pr(c)).length;S<R;S++)this._on(c[S],u,m,!0);return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[Ie(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[Ie(c)],this},_propagateEvent:function(c){for(var u in this._eventParents)this._eventParents[u].fire(c.type,C({layer:c.target,propagatedFrom:c.target},c),!0)}};fi.addEventListener=fi.on,fi.removeEventListener=fi.clearAllEventListeners=fi.off,fi.addOneTimeEventListener=fi.once,fi.fireEvent=fi.fire,fi.hasEventListeners=fi.listens;var Ds=fr.extend(fi);function Ut(c,u,m){this.x=m?Math.round(c):c,this.y=m?Math.round(u):u}var Rn=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};function Pt(c,u,m){return c instanceof Ut?c:Pi(c)?new Ut(c[0],c[1]):null==c?c:"object"==typeof c&&"x"in c&&"y"in c?new Ut(c.x,c.y):new Ut(c,u,m)}function xn(c,u){if(c)for(var m=u?[c,u]:c,M=0,S=m.length;M<S;M++)this.extend(m[M])}function Si(c,u){return!c||c instanceof xn?c:new xn(c,u)}function vi(c,u){if(c)for(var m=u?[c,u]:c,M=0,S=m.length;M<S;M++)this.extend(m[M])}function St(c,u){return c instanceof vi?c:new vi(c,u)}function _n(c,u,m){if(isNaN(c)||isNaN(u))throw new Error("Invalid LatLng object: ("+c+", "+u+")");this.lat=+c,this.lng=+u,void 0!==m&&(this.alt=+m)}function en(c,u,m){return c instanceof _n?c:Pi(c)&&"object"!=typeof c[0]?3===c.length?new _n(c[0],c[1],c[2]):2===c.length?new _n(c[0],c[1]):null:null==c?c:"object"==typeof c&&"lat"in c?new _n(c.lat,"lng"in c?c.lng:c.lon,c.alt):void 0===u?null:new _n(c,u,m)}Ut.prototype={clone:function(){return new Ut(this.x,this.y)},add:function(c){return this.clone()._add(Pt(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(Pt(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new Ut(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new Ut(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Rn(this.x),this.y=Rn(this.y),this},distanceTo:function(c){var u=(c=Pt(c)).x-this.x,m=c.y-this.y;return Math.sqrt(u*u+m*m)},equals:function(c){return(c=Pt(c)).x===this.x&&c.y===this.y},contains:function(c){return c=Pt(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+ue(this.x)+", "+ue(this.y)+")"}},xn.prototype={extend:function(c){var u,m;if(!c)return this;if(c instanceof Ut||"number"==typeof c[0]||"x"in c)u=m=Pt(c);else if(m=(c=Si(c)).max,!(u=c.min)||!m)return this;return this.min||this.max?(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)):(this.min=u.clone(),this.max=m.clone()),this},getCenter:function(c){return Pt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return Pt(this.min.x,this.max.y)},getTopRight:function(){return Pt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var u,m;return(c="number"==typeof c[0]||c instanceof Ut?Pt(c):Si(c))instanceof xn?(u=c.min,m=c.max):u=m=c,u.x>=this.min.x&&m.x<=this.max.x&&u.y>=this.min.y&&m.y<=this.max.y},intersects:function(c){c=Si(c);var u=this.min,m=this.max,M=c.min,S=c.max;return S.x>=u.x&&M.x<=m.x&&S.y>=u.y&&M.y<=m.y},overlaps:function(c){c=Si(c);var u=this.min,m=this.max,M=c.min,S=c.max;return S.x>u.x&&M.x<m.x&&S.y>u.y&&M.y<m.y},isValid:function(){return!(!this.min||!this.max)},pad:function(c){var u=this.min,m=this.max,M=Math.abs(u.x-m.x)*c,S=Math.abs(u.y-m.y)*c;return Si(Pt(u.x-M,u.y-S),Pt(m.x+M,m.y+S))},equals:function(c){return!!c&&(c=Si(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight()))}},vi.prototype={extend:function(c){var M,S,u=this._southWest,m=this._northEast;if(c instanceof _n)M=c,S=c;else{if(!(c instanceof vi))return c?this.extend(en(c)||St(c)):this;if(S=c._northEast,!(M=c._southWest)||!S)return this}return u||m?(u.lat=Math.min(M.lat,u.lat),u.lng=Math.min(M.lng,u.lng),m.lat=Math.max(S.lat,m.lat),m.lng=Math.max(S.lng,m.lng)):(this._southWest=new _n(M.lat,M.lng),this._northEast=new _n(S.lat,S.lng)),this},pad:function(c){var u=this._southWest,m=this._northEast,M=Math.abs(u.lat-m.lat)*c,S=Math.abs(u.lng-m.lng)*c;return new vi(new _n(u.lat-M,u.lng-S),new _n(m.lat+M,m.lng+S))},getCenter:function(){return new _n((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new _n(this.getNorth(),this.getWest())},getSouthEast:function(){return new _n(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){c="number"==typeof c[0]||c instanceof _n||"lat"in c?en(c):St(c);var M,S,u=this._southWest,m=this._northEast;return c instanceof vi?(M=c.getSouthWest(),S=c.getNorthEast()):M=S=c,M.lat>=u.lat&&S.lat<=m.lat&&M.lng>=u.lng&&S.lng<=m.lng},intersects:function(c){c=St(c);var u=this._southWest,m=this._northEast,M=c.getSouthWest(),S=c.getNorthEast();return S.lat>=u.lat&&M.lat<=m.lat&&S.lng>=u.lng&&M.lng<=m.lng},overlaps:function(c){c=St(c);var u=this._southWest,m=this._northEast,M=c.getSouthWest(),S=c.getNorthEast();return S.lat>u.lat&&M.lat<m.lat&&S.lng>u.lng&&M.lng<m.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,u){return!!c&&(c=St(c),this._southWest.equals(c.getSouthWest(),u)&&this._northEast.equals(c.getNorthEast(),u))},isValid:function(){return!(!this._southWest||!this._northEast)}},_n.prototype={equals:function(c,u){return!!c&&(c=en(c),Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng))<=(void 0===u?1e-9:u))},toString:function(c){return"LatLng("+ue(this.lat,c)+", "+ue(this.lng,c)+")"},distanceTo:function(c){return vn.distance(this,en(c))},wrap:function(){return vn.wrapLatLng(this)},toBounds:function(c){var u=180*c/40075017,m=u/Math.cos(Math.PI/180*this.lat);return St([this.lat-u,this.lng-m],[this.lat+u,this.lng+m])},clone:function(){return new _n(this.lat,this.lng,this.alt)}};var c,Sn={latLngToPoint:function(c,u){var m=this.projection.project(c),M=this.scale(u);return this.transformation._transform(m,M)},pointToLatLng:function(c,u){var m=this.scale(u),M=this.transformation.untransform(c,m);return this.projection.unproject(M)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var u=this.projection.bounds,m=this.scale(c);return new xn(this.transformation.transform(u.min,m),this.transformation.transform(u.max,m))},infinite:!1,wrapLatLng:function(c){var u=this.wrapLng?Ke(c.lng,this.wrapLng,!0):c.lng;return new _n(this.wrapLat?Ke(c.lat,this.wrapLat,!0):c.lat,u,c.alt)},wrapLatLngBounds:function(c){var u=c.getCenter(),m=this.wrapLatLng(u),M=u.lat-m.lat,S=u.lng-m.lng;if(0===M&&0===S)return c;var R=c.getSouthWest(),X=c.getNorthEast();return new vi(new _n(R.lat-M,R.lng-S),new _n(X.lat-M,X.lng-S))}},vn=C({},Sn,{wrapLng:[-180,180],R:6371e3,distance:function(c,u){var m=Math.PI/180,M=c.lat*m,S=u.lat*m,R=Math.sin((u.lat-c.lat)*m/2),X=Math.sin((u.lng-c.lng)*m/2),ae=R*R+Math.cos(M)*Math.cos(S)*X*X,J=2*Math.atan2(Math.sqrt(ae),Math.sqrt(1-ae));return this.R*J}}),$t={R:6378137,MAX_LATITUDE:85.0511287798,project:function(c){var u=Math.PI/180,m=this.MAX_LATITUDE,M=Math.max(Math.min(m,c.lat),-m),S=Math.sin(M*u);return new Ut(this.R*c.lng*u,this.R*Math.log((1+S)/(1-S))/2)},unproject:function(c){var u=180/Math.PI;return new _n((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*u,c.x*u/this.R)},bounds:(c=6378137*Math.PI,new xn([-c,-c],[c,c]))};function As(c,u,m,M){if(Pi(c))return this._a=c[0],this._b=c[1],this._c=c[2],void(this._d=c[3]);this._a=c,this._b=u,this._c=m,this._d=M}function Is(c,u,m,M){return new As(c,u,m,M)}As.prototype={transform:function(c,u){return this._transform(c.clone(),u)},_transform:function(c,u){return c.x=(u=u||1)*(this._a*c.x+this._b),c.y=u*(this._c*c.y+this._d),c},untransform:function(c,u){return new Ut((c.x/(u=u||1)-this._b)/this._a,(c.y/u-this._d)/this._c)}};var ns=C({},vn,{code:"EPSG:3857",projection:$t,transformation:function(){var c=.5/(Math.PI*$t.R);return Is(c,.5,-c,.5)}()}),vp=C({},ns,{code:"EPSG:900913"});function pr(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function po(c,u){var M,S,R,X,ae,J,m="";for(M=0,R=c.length;M<R;M++){for(S=0,X=(ae=c[M]).length;S<X;S++)m+=(S?"L":"M")+(J=ae[S]).x+" "+J.y;m+=u?yt.svg?"z":"x":""}return m||"M0 0"}var id=document.documentElement.style,Wi="ActiveXObject"in window,jl=Wi&&!document.addEventListener,rd="msLaunchUri"in navigator&&!("documentMode"in document),Wl=Vr("webkit"),yn=Vr("android"),br=Vr("android 2")||Vr("android 3"),mo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ps=yn&&Vr("Google")&&mo<537&&!("AudioNode"in window),ii=!!window.opera,Ri=!rd&&Vr("chrome"),$l=Vr("gecko")&&!Wl&&!ii&&!Wi,Vu=!Ri&&Vr("safari"),aa=Vr("phantom"),ri="OTransition"in id,Hu=0===navigator.platform.indexOf("Win"),od=Wi&&"transition"in id,Ya="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!br,ql="MozPerspective"in id,yp=!window.L_DISABLE_3D&&(od||Ya||ql)&&!ri&&!aa,Rs=typeof orientation<"u"||Vr("mobile"),bp=Rs&&Wl,xp=Rs&&Ya,is=!window.PointerEvent&&window.MSPointerEvent,Gu=!(!window.PointerEvent&&!is),ju="ontouchstart"in window||!!window.TouchEvent,wp=!window.L_NO_TOUCH&&(ju||Gu),Mp=Rs&&ii,Cp=Rs&&$l,sd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,d_=function(){var c=!1;try{var u=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",dt,u),window.removeEventListener("testPassiveEventSupport",dt,u)}catch{}return c}(),ad=!!document.createElement("canvas").getContext,Zl=!(!document.createElementNS||!pr("svg").createSVGRect),Wu=!!Zl&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(c.firstChild&&c.firstChild.namespaceURI)}(),$u=!Zl&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var u=c.firstChild;return u.style.behavior="url(#default#VML)",u&&"object"==typeof u.adj}catch{return!1}}();function Vr(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var yt={ie:Wi,ielt9:jl,edge:rd,webkit:Wl,android:yn,android23:br,androidStock:Ps,opera:ii,chrome:Ri,gecko:$l,safari:Vu,phantom:aa,opera12:ri,win:Hu,ie3d:od,webkit3d:Ya,gecko3d:ql,any3d:yp,mobile:Rs,mobileWebkit:bp,mobileWebkit3d:xp,msPointer:is,pointer:Gu,touch:wp,touchNative:ju,mobileOpera:Mp,mobileGecko:Cp,retina:sd,passiveEvents:d_,canvas:ad,svg:Zl,vml:$u,inlineSvg:Wu,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},cd=yt.msPointer?"MSPointerDown":"pointerdown",dd=yt.msPointer?"MSPointerMove":"pointermove",$i=yt.msPointer?"MSPointerUp":"pointerup",Fn=yt.msPointer?"MSPointerCancel":"pointercancel",ud={touchstart:cd,touchmove:dd,touchend:$i,touchcancel:Fn},qu={touchstart:function u_(c,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&qi(u),bn(c,u)},touchmove:bn,touchend:bn,touchcancel:bn},la={},hd=!1;function Ep(c,u,m){return"touchstart"===u&&function Oo(){hd||(document.addEventListener(cd,Hr,!0),document.addEventListener(dd,Ka,!0),document.addEventListener($i,yi,!0),document.addEventListener(Fn,yi,!0),hd=!0)}(),qu[u]?(m=qu[u].bind(this,m),c.addEventListener(ud[u],m,!1),m):(console.warn("wrong event specified:",u),dt)}function Hr(c){la[c.pointerId]=c}function Ka(c){la[c.pointerId]&&(la[c.pointerId]=c)}function yi(c){delete la[c.pointerId]}function bn(c,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){for(var m in u.touches=[],la)u.touches.push(la[m]);u.changedTouches=[u],c(u)}}var Zu=200;var ss,Qn,da,ua,go,Ls=zi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qa=zi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Kl="webkitTransition"===Qa||"OTransition"===Qa?Qa+"End":"transitionend";function pd(c){return"string"==typeof c?document.getElementById(c):c}function ca(c,u){var m=c.style[u]||c.currentStyle&&c.currentStyle[u];if((!m||"auto"===m)&&document.defaultView){var M=document.defaultView.getComputedStyle(c,null);m=M?M[u]:null}return"auto"===m?null:m}function wn(c,u,m){var M=document.createElement(c);return M.className=u||"",m&&m.appendChild(M),M}function Vn(c){var u=c.parentNode;u&&u.removeChild(c)}function Ja(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function rs(c){var u=c.parentNode;u&&u.lastChild!==c&&u.appendChild(c)}function Os(c){var u=c.parentNode;u&&u.firstChild!==c&&u.insertBefore(c,u.firstChild)}function Ql(c,u){if(void 0!==c.classList)return c.classList.contains(u);var m=ut(c);return m.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(m)}function vt(c,u){if(void 0!==c.classList)for(var m=Pr(u),M=0,S=m.length;M<S;M++)c.classList.add(m[M]);else if(!Ql(c,u)){var R=ut(c);Li(c,(R?R+" ":"")+u)}}function Kn(c,u){void 0!==c.classList?c.classList.remove(u):Li(c,td((" "+ut(c)+" ").replace(" "+u+" "," ")))}function Li(c,u){void 0===c.className.baseVal?c.className=u:c.className.baseVal=u}function ut(c){return c.correspondingElement&&(c=c.correspondingElement),void 0===c.className.baseVal?c.className:c.className.baseVal}function Ui(c,u){"opacity"in c.style?c.style.opacity=u:"filter"in c.style&&function Jl(c,u){var m=!1,M="DXImageTransform.Microsoft.Alpha";try{m=c.filters.item(M)}catch{if(1===u)return}u=Math.round(100*u),m?(m.Enabled=100!==u,m.Opacity=u):c.style.filter+=" progid:"+M+"(opacity="+u+")"}(c,u)}function zi(c){for(var u=document.documentElement.style,m=0;m<c.length;m++)if(c[m]in u)return c[m];return!1}function os(c,u,m){var M=u||new Ut(0,0);c.style[Ls]=(yt.ie3d?"translate("+M.x+"px,"+M.y+"px)":"translate3d("+M.x+"px,"+M.y+"px,0)")+(m?" scale("+m+")":"")}function bi(c,u){c._leaflet_pos=u,yt.any3d?os(c,u):(c.style.left=u.x+"px",c.style.top=u.y+"px")}function pn(c){return c._leaflet_pos||new Ut(0,0)}if("onselectstart"in document)ss=function(){et(window,"selectstart",qi)},Qn=function(){Hn(window,"selectstart",qi)};else{var el=zi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ss=function(){if(el){var c=document.documentElement.style;da=c[el],c[el]="none"}},Qn=function(){el&&(document.documentElement.style[el]=da,da=void 0)}}function Cn(){et(window,"dragstart",qi)}function It(){Hn(window,"dragstart",qi)}function md(c){for(;-1===c.tabIndex;)c=c.parentNode;c.style&&(tl(),ua=c,go=c.style.outlineStyle,c.style.outlineStyle="none",et(window,"keydown",tl))}function tl(){ua&&(ua.style.outlineStyle=go,ua=void 0,go=void 0,Hn(window,"keydown",tl))}function ge(c){do{c=c.parentNode}while(!(c.offsetWidth&&c.offsetHeight||c===document.body));return c}function ks(c){var u=c.getBoundingClientRect();return{x:u.width/c.offsetWidth||1,y:u.height/c.offsetHeight||1,boundingClientRect:u}}var Nt={__proto__:null,TRANSFORM:Ls,TRANSITION:Qa,TRANSITION_END:Kl,get:pd,getStyle:ca,create:wn,remove:Vn,empty:Ja,toFront:rs,toBack:Os,hasClass:Ql,addClass:vt,removeClass:Kn,setClass:Li,getClass:ut,setOpacity:Ui,testProp:zi,setTransform:os,setPosition:bi,getPosition:pn,get disableTextSelection(){return ss},get enableTextSelection(){return Qn},disableImageDrag:Cn,enableImageDrag:It,preventOutline:md,restoreOutline:tl,getSizedParentNode:ge,getScale:ks};function et(c,u,m,M){if(u&&"object"==typeof u)for(var S in u)xi(c,S,u[S],m);else for(var R=0,X=(u=Pr(u)).length;R<X;R++)xi(c,u[R],m,M);return this}var _o="_leaflet_events";function Hn(c,u,m,M){if(1===arguments.length)Xu(c),delete c[_o];else if(u&&"object"==typeof u)for(var S in u)Yu(c,S,u[S],m);else if(u=Pr(u),2===arguments.length)Xu(c,function(ae){return-1!==sa(u,ae)});else for(var R=0,X=u.length;R<X;R++)Yu(c,u[R],m,M);return this}function Xu(c,u){for(var m in c[_o]){var M=m.split(/\d/)[0];(!u||u(M))&&Yu(c,M,null,null,m)}}var nl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function xi(c,u,m,M){var S=u+Ie(m)+(M?"_"+Ie(M):"");if(c[_o]&&c[_o][S])return this;var R=function(ae){return m.call(M||c,ae||window.event)},X=R;!yt.touchNative&&yt.pointer&&0===u.indexOf("touch")?R=Ep(c,u,R):yt.touch&&"dblclick"===u?R=function Yl(c,u){c.addEventListener("dblclick",u);var M,m=0;function S(R){if(1===R.detail){if("mouse"!==R.pointerType&&(!R.sourceCapabilities||R.sourceCapabilities.firesTouchEvents)){var X=Dp(R);if(!X.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})||X.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement})){var ae=Date.now();ae-m<=Zu?2==++M&&u(function Tp(c){var m,M,u={};for(M in c)u[M]=(m=c[M])&&m.bind?m.bind(c):m;return c=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}(R)):M=1,m=ae}}}else M=R.detail}return c.addEventListener("click",S),{dblclick:u,simDblclick:S}}(c,R):"addEventListener"in c?"touchstart"===u||"touchmove"===u||"wheel"===u||"mousewheel"===u?c.addEventListener(nl[u]||u,R,!!yt.passiveEvents&&{passive:!1}):"mouseenter"===u||"mouseleave"===u?c.addEventListener(nl[u],R=function(ae){ae=ae||window.event,ls(c,ae)&&X(ae)},!1):c.addEventListener(u,X,!1):c.attachEvent("on"+u,R),c[_o]=c[_o]||{},c[_o][S]=R}function Yu(c,u,m,M,S){S=S||u+Ie(m)+(M?"_"+Ie(M):"");var R=c[_o]&&c[_o][S];if(!R)return this;!yt.touchNative&&yt.pointer&&0===u.indexOf("touch")?function Sp(c,u,m){ud[u]?c.removeEventListener(ud[u],m,!1):console.warn("wrong event specified:",u)}(c,u,R):yt.touch&&"dblclick"===u?function fd(c,u){c.removeEventListener("dblclick",u.dblclick),c.removeEventListener("click",u.simDblclick)}(c,R):"removeEventListener"in c?c.removeEventListener(nl[u]||u,R,!1):c.detachEvent("on"+u,R),c[_o][S]=null}function as(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function gd(c){return xi(c,"wheel",as),this}function Gr(c){return et(c,"mousedown touchstart dblclick contextmenu",as),c._leaflet_disable_click=!0,this}function qi(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function ha(c){return qi(c),as(c),this}function Dp(c){if(c.composedPath)return c.composedPath();for(var u=[],m=c.target;m;)u.push(m),m=m.parentNode;return u}function Ap(c,u){if(!u)return new Ut(c.clientX,c.clientY);var m=ks(u),M=m.boundingClientRect;return new Ut((c.clientX-M.left)/m.x-u.clientLeft,(c.clientY-M.top)/m.y-u.clientTop)}var Ip=yt.linux&&yt.chrome?window.devicePixelRatio:yt.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Pp(c){return yt.edge?c.wheelDeltaY/2:c.deltaY&&0===c.deltaMode?-c.deltaY/Ip:c.deltaY&&1===c.deltaMode?20*-c.deltaY:c.deltaY&&2===c.deltaMode?60*-c.deltaY:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?20*-c.detail:c.detail?c.detail/-32765*60:0}function ls(c,u){var m=u.relatedTarget;if(!m)return!0;try{for(;m&&m!==c;)m=m.parentNode}catch{return!1}return m!==c}var h_={__proto__:null,on:et,off:Hn,stopPropagation:as,disableScrollPropagation:gd,disableClickPropagation:Gr,preventDefault:qi,stop:ha,getPropagationPath:Dp,getMousePosition:Ap,getWheelDelta:Pp,isExternalTarget:ls,addListener:et,removeListener:Hn},xr=Ds.extend({run:function(c,u,m,M){this.stop(),this._el=c,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(M||.5,.2),this._startPos=pn(c),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=hi(this._animate,this),this._step()},_step:function(c){var u=+new Date-this._startTime,m=1e3*this._duration;u<m?this._runFrame(this._easeOut(u/m),c):(this._runFrame(1),this._complete())},_runFrame:function(c,u){var m=this._startPos.add(this._offset.multiplyBy(c));u&&m._round(),bi(this._el,m),this.fire("step")},_complete:function(){qn(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),qe=Ds.extend({options:{crs:ns,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,u){u=zn(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=G(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),void 0!==u.zoom&&(this._zoom=this._limitZoom(u.zoom)),u.center&&void 0!==u.zoom&&this.setView(en(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Qa&&yt.any3d&&!yt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),et(this._proxy,Kl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,u,m){return u=void 0===u?this._zoom:this._limitZoom(u),c=this._limitCenter(en(c),u,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&!0!==m&&(void 0!==m.animate&&(m.zoom=C({animate:m.animate},m.zoom),m.pan=C({animate:m.animate,duration:m.duration},m.pan)),this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,u,m.zoom):this._tryAnimatedPan(c,m.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(c,u,m.pan&&m.pan.noMoveStart),this)},setZoom:function(c,u){return this._loaded?this.setView(this.getCenter(),c,{zoom:u}):(this._zoom=c,this)},zoomIn:function(c,u){return this.setZoom(this._zoom+(c=c||(yt.any3d?this.options.zoomDelta:1)),u)},zoomOut:function(c,u){return this.setZoom(this._zoom-(c=c||(yt.any3d?this.options.zoomDelta:1)),u)},setZoomAround:function(c,u,m){var M=this.getZoomScale(u),S=this.getSize().divideBy(2),X=(c instanceof Ut?c:this.latLngToContainerPoint(c)).subtract(S).multiplyBy(1-1/M),ae=this.containerPointToLatLng(S.add(X));return this.setView(ae,u,{zoom:m})},_getBoundsCenterZoom:function(c,u){u=u||{},c=c.getBounds?c.getBounds():St(c);var m=Pt(u.paddingTopLeft||u.padding||[0,0]),M=Pt(u.paddingBottomRight||u.padding||[0,0]),S=this.getBoundsZoom(c,!1,m.add(M));if((S="number"==typeof u.maxZoom?Math.min(u.maxZoom,S):S)===1/0)return{center:c.getCenter(),zoom:S};var R=M.subtract(m).divideBy(2),X=this.project(c.getSouthWest(),S),ae=this.project(c.getNorthEast(),S);return{center:this.unproject(X.add(ae).divideBy(2).add(R),S),zoom:S}},fitBounds:function(c,u){if(!(c=St(c)).isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(c,u);return this.setView(m.center,m.zoom,u)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,u){return this.setView(c,this._zoom,{pan:u})},panBy:function(c,u){if(u=u||{},!(c=Pt(c).round()).x&&!c.y)return this.fire("moveend");if(!0!==u.animate&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new xr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),!1!==u.animate){vt(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,m,u.duration||.25,u.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,u,m){if(!1===(m=m||{}).animate||!yt.any3d)return this.setView(c,u,m);this._stop();var M=this.project(this.getCenter()),S=this.project(c),R=this.getSize(),X=this._zoom;c=en(c),u=void 0===u?X:u;var ae=Math.max(R.x,R.y),J=ae*this.getZoomScale(X,u),_=S.distanceTo(M)||1,b=1.42,T=b*b;function N(Mi){var hl=(J*J-ae*ae+(Mi?-1:1)*T*T*_*_)/(2*(Mi?J:ae)*T*_),Yi=Math.sqrt(hl*hl+1)-hl;return Yi<1e-9?-18:Math.log(Yi)}function ce(Mi){return(Math.exp(Mi)-Math.exp(-Mi))/2}function Oe(Mi){return(Math.exp(Mi)+Math.exp(-Mi))/2}var Dt=N(0);function Mr(Mi){return ae*(Oe(Dt)*function pt(Mi){return ce(Mi)/Oe(Mi)}(Dt+b*Mi)-ce(Dt))/T}var Td=Date.now(),fc=(N(1)-Dt)/b,mn=m.duration?1e3*m.duration:1e3*fc*.8;return this._moveStart(!0,m.noMoveStart),function j0(){var Mi=(Date.now()-Td)/mn,Dd=function Xr(Mi){return 1-Math.pow(1-Mi,1.5)}(Mi)*fc;Mi<=1?(this._flyToFrame=hi(j0,this),this._move(this.unproject(M.add(S.subtract(M).multiplyBy(Mr(Dd)/_)),X),this.getScaleZoom(ae/function An(Mi){return ae*(Oe(Dt)/Oe(Dt+b*Mi))}(Dd),X),{flyTo:!0})):this._move(c,u)._moveEnd(!0)}.call(this),this},flyToBounds:function(c,u){var m=this._getBoundsCenterZoom(c,u);return this.flyTo(m.center,m.zoom,u)},setMaxBounds:function(c){return c=St(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var u=this.options.minZoom;return this.options.minZoom=c,this._loaded&&u!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var u=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&u!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,u){this._enforcingBounds=!0;var m=this.getCenter(),M=this._limitCenter(m,this._zoom,St(c));return m.equals(M)||this.panTo(M,u),this._enforcingBounds=!1,this},panInside:function(c,u){var m=Pt((u=u||{}).paddingTopLeft||u.padding||[0,0]),M=Pt(u.paddingBottomRight||u.padding||[0,0]),S=this.project(this.getCenter()),R=this.project(c),X=this.getPixelBounds(),ae=Si([X.min.add(m),X.max.subtract(M)]),J=ae.getSize();if(!ae.contains(R)){this._enforcingBounds=!0;var _=R.subtract(ae.getCenter()),b=ae.extend(R).getSize().subtract(J);S.x+=_.x<0?-b.x:b.x,S.y+=_.y<0?-b.y:b.y,this.panTo(this.unproject(S),u),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=C({animate:!1,pan:!0},!0===c?{animate:!0}:c);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),M=u.divideBy(2).round(),S=m.divideBy(2).round(),R=M.subtract(S);return R.x||R.y?(c.animate&&c.pan?this.panBy(R):(c.pan&&this._rawPanBy(R),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(G(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:m})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=C({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=G(this._handleGeolocationResponse,this),m=G(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,m,c):navigator.geolocation.getCurrentPosition(u,m,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var u=c.code,m=c.message||(1===u?"permission denied":2===u?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var M=new _n(c.coords.latitude,c.coords.longitude),S=M.toBounds(2*c.coords.accuracy),R=this._locateOptions;if(R.setView){var X=this.getBoundsZoom(S);this.setView(M,R.maxZoom?Math.min(X,R.maxZoom):X)}var ae={latlng:M,bounds:S,timestamp:c.timestamp};for(var J in c.coords)"number"==typeof c.coords[J]&&(ae[J]=c.coords[J]);this.fire("locationfound",ae)}},addHandler:function(c,u){if(!u)return this;var m=this[c]=new u(this);return this._handlers.push(m),this.options[c]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var c;for(c in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Vn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(qn(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[c].remove();for(c in this._panes)Vn(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,u){var M=wn("div","leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),u||this._mapPane);return c&&(this._panes[c]=M),M},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds();return new vi(this.unproject(c.getBottomLeft()),this.unproject(c.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,u,m){c=St(c),m=Pt(m||[0,0]);var M=this.getZoom()||0,S=this.getMinZoom(),R=this.getMaxZoom(),X=c.getNorthWest(),ae=c.getSouthEast(),J=this.getSize().subtract(m),_=Si(this.project(ae,M),this.project(X,M)).getSize(),b=yt.any3d?this.options.zoomSnap:1,T=J.x/_.x,N=J.y/_.y,ce=u?Math.max(T,N):Math.min(T,N);return M=this.getScaleZoom(ce,M),b&&(M=Math.round(M/(b/100))*(b/100),M=u?Math.ceil(M/b)*b:Math.floor(M/b)*b),Math.max(S,Math.min(R,M))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ut(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,u){var m=this._getTopLeftPoint(c,u);return new xn(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(void 0===c?this.getZoom():c)},getPane:function(c){return"string"==typeof c?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,u){var m=this.options.crs;return u=void 0===u?this._zoom:u,m.scale(c)/m.scale(u)},getScaleZoom:function(c,u){var m=this.options.crs,M=m.zoom(c*m.scale(u=void 0===u?this._zoom:u));return isNaN(M)?1/0:M},project:function(c,u){return u=void 0===u?this._zoom:u,this.options.crs.latLngToPoint(en(c),u)},unproject:function(c,u){return u=void 0===u?this._zoom:u,this.options.crs.pointToLatLng(Pt(c),u)},layerPointToLatLng:function(c){var u=Pt(c).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(c){return this.project(en(c))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(en(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(St(c))},distance:function(c,u){return this.options.crs.distance(en(c),en(u))},containerPointToLayerPoint:function(c){return Pt(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return Pt(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var u=this.containerPointToLayerPoint(Pt(c));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(en(c)))},mouseEventToContainerPoint:function(c){return Ap(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var u=this._container=pd(c);if(!u)throw new Error("Map container not found.");if(u._leaflet_id)throw new Error("Map container is already initialized.");et(u,"scroll",this._onScroll,this),this._containerId=Ie(u)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&yt.any3d,vt(c,"leaflet-container"+(yt.touch?" leaflet-touch":"")+(yt.retina?" leaflet-retina":"")+(yt.ielt9?" leaflet-oldie":"")+(yt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=ca(c,"position");"absolute"!==u&&"relative"!==u&&"fixed"!==u&&"sticky"!==u&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),bi(this._mapPane,new Ut(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(vt(c.markerPane,"leaflet-zoom-hide"),vt(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,u,m){bi(this._mapPane,new Ut(0,0));var M=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var S=this._zoom!==u;this._moveStart(S,m)._move(c,u)._moveEnd(S),this.fire("viewreset"),M&&this.fire("load")},_moveStart:function(c,u){return c&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(c,u,m,M){void 0===u&&(u=this._zoom);var S=this._zoom!==u;return this._zoom=u,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),M?m&&m.pinch&&this.fire("zoom",m):((S||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return qn(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){bi(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[Ie(this._container)]=this;var u=c?Hn:et;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),yt.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){qn(this._resizeRequest),this._resizeRequest=hi(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,u){for(var M,m=[],S="mouseout"===u||"mouseover"===u,R=c.target||c.srcElement,X=!1;R;){if((M=this._targets[Ie(R)])&&("click"===u||"preclick"===u)&&this._draggableMoved(M)){X=!0;break}if(M&&M.listens(u,!0)&&(S&&!ls(R,c)||(m.push(M),S))||R===this._container)break;R=R.parentNode}return!m.length&&!X&&!S&&this.listens(u,!0)&&(m=[this]),m},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var u=c.target||c.srcElement;if(!(!this._loaded||u._leaflet_disable_events||"click"===c.type&&this._isClickDisabled(u))){var m=c.type;"mousedown"===m&&md(u),this._fireDOMEvent(c,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,u,m){if("click"===c.type){var M=C({},c);M.type="preclick",this._fireDOMEvent(M,M.type,m)}var S=this._findEventTargets(c,u);if(m){for(var R=[],X=0;X<m.length;X++)m[X].listens(u,!0)&&R.push(m[X]);S=R.concat(S)}if(S.length){"contextmenu"===u&&qi(c);var ae=S[0],J={originalEvent:c};if("keypress"!==c.type&&"keydown"!==c.type&&"keyup"!==c.type){var _=ae.getLatLng&&(!ae._radius||ae._radius<=10);J.containerPoint=_?this.latLngToContainerPoint(ae.getLatLng()):this.mouseEventToContainerPoint(c),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=_?ae.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(X=0;X<S.length;X++)if(S[X].fire(u,J,!0),J.originalEvent._stopped||!1===S[X].options.bubblingMouseEvents&&-1!==sa(this._mouseEvents,u))return}},_draggableMoved:function(c){return(c=c.dragging&&c.dragging.enabled()?c:this).dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,u=this._handlers.length;c<u;c++)this._handlers[c].disable()},whenReady:function(c,u){return this._loaded?c.call(u||this,{target:this}):this.on("load",c,u),this},_getMapPanePos:function(){return pn(this._mapPane)||new Ut(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,u){return(c&&void 0!==u?this._getNewPixelOrigin(c,u):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,u){var m=this.getSize()._divideBy(2);return this.project(c,u)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,u,m){var M=this._getNewPixelOrigin(m,u);return this.project(c,u)._subtract(M)},_latLngBoundsToNewLayerBounds:function(c,u,m){var M=this._getNewPixelOrigin(m,u);return Si([this.project(c.getSouthWest(),u)._subtract(M),this.project(c.getNorthWest(),u)._subtract(M),this.project(c.getSouthEast(),u)._subtract(M),this.project(c.getNorthEast(),u)._subtract(M)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,u,m){if(!m)return c;var M=this.project(c,u),S=this.getSize().divideBy(2),R=new xn(M.subtract(S),M.add(S)),X=this._getBoundsOffset(R,m,u);return Math.abs(X.x)<=1&&Math.abs(X.y)<=1?c:this.unproject(M.add(X),u)},_limitOffset:function(c,u){if(!u)return c;var m=this.getPixelBounds(),M=new xn(m.min.add(c),m.max.add(c));return c.add(this._getBoundsOffset(M,u))},_getBoundsOffset:function(c,u,m){var M=Si(this.project(u.getNorthEast(),m),this.project(u.getSouthWest(),m)),S=M.min.subtract(c.min),R=M.max.subtract(c.max);return new Ut(this._rebound(S.x,-R.x),this._rebound(S.y,-R.y))},_rebound:function(c,u){return c+u>0?Math.round(c-u)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(u))},_limitZoom:function(c){var u=this.getMinZoom(),m=this.getMaxZoom(),M=yt.any3d?this.options.zoomSnap:1;return M&&(c=Math.round(c/M)*M),Math.max(u,Math.min(m,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Kn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,u){var m=this._getCenterOffset(c)._trunc();return!(!0!==(u&&u.animate)&&!this.getSize().contains(m)||(this.panBy(m,u),0))},_createAnimProxy:function(){var c=this._proxy=wn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(u){var m=Ls,M=this._proxy.style[m];os(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),M===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Vn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),u=this.getZoom();os(this._proxy,this.project(c,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,u,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||!1===m.animate||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var M=this.getZoomScale(u),S=this._getCenterOffset(c)._divideBy(1-1/M);return!(!0!==m.animate&&!this.getSize().contains(S)||(hi(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(c,u,!0)},this),0))},_animateZoom:function(c,u,m,M){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=u,vt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:u,noUpdate:M}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(G(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Kn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Vi=fr.extend({options:{position:"topright"},initialize:function(c){zn(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var u=this._map;return u&&u.removeControl(this),this.options.position=c,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var u=this._container=this.onAdd(c),m=this.getPosition(),M=c._controlCorners[m];return vt(u,"leaflet-control"),-1!==m.indexOf("bottom")?M.insertBefore(u,M.firstChild):M.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Vn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),ec=function(c){return new Vi(c)};qe.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},u="leaflet-",m=this._controlContainer=wn("div",u+"control-container",this._container);function M(S,R){c[S+R]=wn("div",u+S+" "+u+R,m)}M("top","left"),M("top","right"),M("bottom","left"),M("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)Vn(this._controlCorners[c]);Vn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Be=Vi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,u,m,M){return m<M?-1:M<m?1:0}},initialize:function(c,u,m){for(var M in zn(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,c)this._addLayer(c[M],M);for(M in u)this._addLayer(u[M],M,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return Vi.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,u){return this._addLayer(c,u),this._map?this._update():this},addOverlay:function(c,u){return this._addLayer(c,u,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var u=this._getLayer(Ie(c));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){vt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(vt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):Kn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Kn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",u=this._container=wn("div",c),m=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Gr(u),gd(u);var M=this._section=wn("section",c+"-list");m&&(this._map.on("click",this.collapse,this),et(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var S=this._layersLink=wn("a",c+"-toggle",u);S.href="#",S.title="Layers",S.setAttribute("role","button"),et(S,{keydown:function(R){13===R.keyCode&&this._expandSafely()},click:function(R){qi(R),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=wn("div",c+"-base",M),this._separator=wn("div",c+"-separator",M),this._overlaysList=wn("div",c+"-overlays",M),u.appendChild(M)},_getLayer:function(c){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&Ie(this._layers[u].layer)===c)return this._layers[u]},_addLayer:function(c,u,m){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:u,overlay:m}),this.options.sortLayers&&this._layers.sort(G(function(M,S){return this.options.sortFunction(M.layer,S.layer,M.name,S.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ja(this._baseLayersList),Ja(this._overlaysList),this._layerControlInputs=[];var c,u,m,M,S=0;for(m=0;m<this._layers.length;m++)this._addItem(M=this._layers[m]),u=u||M.overlay,c=c||!M.overlay,S+=M.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(c=c&&S>1)?"":"none"),this._separator.style.display=u&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var u=this._getLayer(Ie(c.target)),m=u.overlay?"add"===c.type?"overlayadd":"overlayremove":"add"===c.type?"baselayerchange":null;m&&this._map.fire(m,u)},_createRadioElement:function(c,u){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(u?' checked="checked"':"")+"/>",M=document.createElement("div");return M.innerHTML=m,M.firstChild},_addItem:function(c){var M,u=document.createElement("label"),m=this._map.hasLayer(c.layer);c.overlay?((M=document.createElement("input")).type="checkbox",M.className="leaflet-control-layers-selector",M.defaultChecked=m):M=this._createRadioElement("leaflet-base-layers_"+Ie(this),m),this._layerControlInputs.push(M),M.layerId=Ie(c.layer),et(M,"click",this._onInputClick,this);var S=document.createElement("span");S.innerHTML=" "+c.name;var R=document.createElement("span");return u.appendChild(R),R.appendChild(M),R.appendChild(S),(c.overlay?this._overlaysList:this._baseLayersList).appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var u,m,c=this._layerControlInputs,M=[],S=[];this._handlingClick=!0;for(var R=c.length-1;R>=0;R--)m=this._getLayer((u=c[R]).layerId).layer,u.checked?M.push(m):u.checked||S.push(m);for(R=0;R<S.length;R++)this._map.hasLayer(S[R])&&this._map.removeLayer(S[R]);for(R=0;R<M.length;R++)this._map.hasLayer(M[R])||this._map.addLayer(M[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u,m,c=this._layerControlInputs,M=this._map.getZoom(),S=c.length-1;S>=0;S--)m=this._getLayer((u=c[S]).layerId).layer,u.disabled=void 0!==m.options.minZoom&&M<m.options.minZoom||void 0!==m.options.maxZoom&&M>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,et(c,"click",qi),this.expand();var u=this;setTimeout(function(){Hn(c,"click",qi),u._preventClick=!1})}}),nn=Vi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var u="leaflet-control-zoom",m=wn("div",u+" leaflet-bar"),M=this.options;return this._zoomInButton=this._createButton(M.zoomInText,M.zoomInTitle,u+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(M.zoomOutText,M.zoomOutTitle,u+"-out",m,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,u,m,M,S){var R=wn("a",m,M);return R.innerHTML=c,R.href="#",R.title=u,R.setAttribute("role","button"),R.setAttribute("aria-label",u),Gr(R),et(R,"click",ha),et(R,"click",S,this),et(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var c=this._map,u="leaflet-disabled";Kn(this._zoomInButton,u),Kn(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(vt(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(vt(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});qe.mergeOptions({zoomControl:!0}),qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new nn,this.addControl(this.zoomControl))});var Ku=Vi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var u="leaflet-control-scale",m=wn("div",u),M=this.options;return this._addScales(M,u+"-line",m),c.on(M.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),m},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,u,m){c.metric&&(this._mScale=wn("div",u,m)),c.imperial&&(this._iScale=wn("div",u,m))},_update:function(){var c=this._map,u=c.getSize().y/2,m=c.distance(c.containerPointToLatLng([0,u]),c.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(m)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var u=this._getRoundNum(c);this._updateScale(this._mScale,u<1e3?u+" m":u/1e3+" km",u/c)},_updateImperial:function(c){var m,M,S,u=3.2808399*c;u>5280?(M=this._getRoundNum(m=u/5280),this._updateScale(this._iScale,M+" mi",M/m)):(S=this._getRoundNum(u),this._updateScale(this._iScale,S+" ft",S/u))},_updateScale:function(c,u,m){c.style.width=Math.round(this.options.maxWidth*m)+"px",c.innerHTML=u},_getRoundNum:function(c){var u=Math.pow(10,(Math.floor(c)+"").length-1),m=c/u;return u*(m>=10?10:m>=5?5:m>=3?3:m>=2?2:1)}}),pa=Vi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(yt.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(c){zn(this,c),this._attributions={}},onAdd:function(c){for(var u in c.attributionControl=this,this._container=wn("div","leaflet-control-attribution"),Gr(this._container),c._layers)c._layers[u].getAttribution&&this.addAttribution(c._layers[u].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var u in this._attributions)this._attributions[u]&&c.push(u);var m=[];this.options.prefix&&m.push(this.options.prefix),c.length&&m.push(c.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});qe.mergeOptions({attributionControl:!0}),qe.addInitHook(function(){this.options.attributionControl&&(new pa).addTo(this)});Vi.Layers=Be,Vi.Zoom=nn,Vi.Scale=Ku,Vi.Attribution=pa,ec.layers=function(c,u,m){return new Be(c,u,m)},ec.zoom=function(c){return new nn(c)},ec.scale=function(c){return new Ku(c)},ec.attribution=function(c){return new pa(c)};var Rr=fr.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Rr.addTo=function(c,u){return c.addHandler(u,this),this};var Qu={Events:fi},Ju=yt.touch?"touchstart mousedown":"mousedown",zt=Ds.extend({options:{clickTolerance:3},initialize:function(c,u,m,M){zn(this,M),this._element=c,this._dragStartTarget=u||c,this._preventOutline=m},enable:function(){this._enabled||(et(this._dragStartTarget,Ju,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(zt._dragging===this&&this.finishDrag(!0),Hn(this._dragStartTarget,Ju,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!Ql(this._element,"leaflet-zoom-anim"))){if(c.touches&&1!==c.touches.length)return void(zt._dragging===this&&this.finishDrag());if(!(zt._dragging||c.shiftKey||1!==c.which&&1!==c.button&&!c.touches||(zt._dragging=this,this._preventOutline&&md(this._element),Cn(),ss(),this._moving))){this.fire("down");var u=c.touches?c.touches[0]:c,m=ge(this._element);this._startPoint=new Ut(u.clientX,u.clientY),this._startPos=pn(this._element),this._parentScale=ks(m);var M="mousedown"===c.type;et(document,M?"mousemove":"touchmove",this._onMove,this),et(document,M?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1)return void(this._moved=!0);var u=c.touches&&1===c.touches.length?c.touches[0]:c,m=new Ut(u.clientX,u.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,qi(c),this._moved||(this.fire("dragstart"),this._moved=!0,vt(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),vt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),bi(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){Kn(document.body,"leaflet-dragging"),this._lastTarget&&(Kn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Hn(document,"mousemove touchmove",this._onMove,this),Hn(document,"mouseup touchend touchcancel",this._onUp,this),It(),Qn();var u=this._moved&&this._moving;this._moving=!1,zt._dragging=!1,u&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function rc(c,u,m){var M,R,X,ae,J,_,b,T,N,S=[1,4,2,8];for(R=0,b=c.length;R<b;R++)c[R]._code=cs(c[R],u);for(ae=0;ae<4;ae++){for(T=S[ae],M=[],R=0,X=(b=c.length)-1;R<b;X=R++)_=c[X],(J=c[R])._code&T?_._code&T||((N=Fs(_,J,T,u,m))._code=cs(N,u),M.push(N)):(_._code&T&&((N=Fs(_,J,T,u,m))._code=cs(N,u),M.push(N)),M.push(J));c=M}return c}function vd(c,u){var m,M,S,R,X,ae,J,_;if(!c||0===c.length)throw new Error("latlngs not passed");jr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var T=en([0,0]),N=St(c);N.getNorthWest().distanceTo(N.getSouthWest())*N.getNorthEast().distanceTo(N.getNorthWest())<1700&&(T=Zi(c));var Oe=c.length,pt=[];for(m=0;m<Oe;m++){var Dt=en(c[m]);pt.push(u.project(en([Dt.lat-T.lat,Dt.lng-T.lng])))}for(ae=J=_=0,m=0,M=Oe-1;m<Oe;M=m++)J+=((S=pt[m]).x+(R=pt[M]).x)*(X=S.y*R.x-R.y*S.x),_+=(S.y+R.y)*X,ae+=3*X;var An=u.unproject(Pt(0===ae?pt[0]:[J/ae,_/ae]));return en([An.lat+T.lat,An.lng+T.lng])}function Zi(c){for(var u=0,m=0,M=0,S=0;S<c.length;S++){var R=en(c[S]);u+=R.lat,m+=R.lng,M++}return en([u/M,m/M])}var ac,eh={__proto__:null,clipPolygon:rc,polygonCenter:vd,centroid:Zi};function oc(c,u){if(!u||!c.length)return c.slice();var m=u*u;return function m_(c,u){var m=c.length,S=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(m);S[0]=S[m-1]=1,Se(c,S,u,0,m-1);var R,X=[];for(R=0;R<m;R++)S[R]&&X.push(c[R]);return X}(c=function sc(c,u){for(var m=[c[0]],M=1,S=0,R=c.length;M<R;M++)rl(c[M],c[S])>u&&(m.push(c[M]),S=M);return S<R-1&&m.push(c[R-1]),m}(c,m),m)}function Ln(c,u,m){return Math.sqrt(Ns(c,u,m,!0))}function Se(c,u,m,M,S){var X,ae,J,R=0;for(ae=M+1;ae<=S-1;ae++)(J=Ns(c[ae],c[M],c[S],!0))>R&&(X=ae,R=J);R>m&&(u[X]=1,Se(c,u,m,M,X),Se(c,u,m,X,S))}function il(c,u,m,M,S){var ae,J,_,R=M?ac:cs(c,m),X=cs(u,m);for(ac=X;;){if(!(R|X))return[c,u];if(R&X)return!1;_=cs(J=Fs(c,u,ae=R||X,m,S),m),ae===R?(c=J,R=_):(u=J,X=_)}}function Fs(c,u,m,M,S){var _,b,R=u.x-c.x,X=u.y-c.y,ae=M.min,J=M.max;return 8&m?(_=c.x+R*(J.y-c.y)/X,b=J.y):4&m?(_=c.x+R*(ae.y-c.y)/X,b=ae.y):2&m?(_=J.x,b=c.y+X*(J.x-c.x)/R):1&m&&(_=ae.x,b=c.y+X*(ae.x-c.x)/R),new Ut(_,b,S)}function cs(c,u){var m=0;return c.x<u.min.x?m|=1:c.x>u.max.x&&(m|=2),c.y<u.min.y?m|=4:c.y>u.max.y&&(m|=8),m}function rl(c,u){var m=u.x-c.x,M=u.y-c.y;return m*m+M*M}function Ns(c,u,m,M){var _,S=u.x,R=u.y,X=m.x-S,ae=m.y-R,J=X*X+ae*ae;return J>0&&((_=((c.x-S)*X+(c.y-R)*ae)/J)>1?(S=m.x,R=m.y):_>0&&(S+=X*_,R+=ae*_)),X=c.x-S,ae=c.y-R,M?X*X+ae*ae:new Ut(S,R)}function jr(c){return!Pi(c[0])||"object"!=typeof c[0][0]&&typeof c[0][0]<"u"}function th(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),jr(c)}function nh(c,u){var m,M,S,R,X,ae,J,_;if(!c||0===c.length)throw new Error("latlngs not passed");jr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var b=en([0,0]),T=St(c);T.getNorthWest().distanceTo(T.getSouthWest())*T.getNorthEast().distanceTo(T.getNorthWest())<1700&&(b=Zi(c));var ce=c.length,Oe=[];for(m=0;m<ce;m++){var pt=en(c[m]);Oe.push(u.project(en([pt.lat-b.lat,pt.lng-b.lng])))}for(m=0,M=0;m<ce-1;m++)M+=Oe[m].distanceTo(Oe[m+1])/2;if(0===M)_=Oe[0];else for(m=0,R=0;m<ce-1;m++)if((R+=S=(X=Oe[m]).distanceTo(ae=Oe[m+1]))>M){_=[ae.x-(J=(R-M)/S)*(ae.x-X.x),ae.y-J*(ae.y-X.y)];break}var Dt=u.unproject(Pt(_));return en([Dt.lat+b.lat,Dt.lng+b.lng])}var Rp={__proto__:null,simplify:oc,pointToSegmentDistance:Ln,closestPointOnSegment:function p_(c,u,m){return Ns(c,u,m)},clipSegment:il,_getEdgeIntersection:Fs,_getBitCode:cs,_sqClosestPointOnSegment:Ns,isFlat:jr,_flat:th,polylineCenter:nh},ds={project:function(c){return new Ut(c.lng,c.lat)},unproject:function(c){return new _n(c.y,c.x)},bounds:new xn([-180,-90],[180,90])},ma={R:6378137,R_MINOR:6356752.314245179,bounds:new xn([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(c){var u=Math.PI/180,m=this.R,M=c.lat*u,S=this.R_MINOR/m,R=Math.sqrt(1-S*S),X=R*Math.sin(M),ae=Math.tan(Math.PI/4-M/2)/Math.pow((1-X)/(1+X),R/2);return M=-m*Math.log(Math.max(ae,1e-10)),new Ut(c.lng*u*m,M)},unproject:function(c){for(var _,u=180/Math.PI,m=this.R,M=this.R_MINOR/m,S=Math.sqrt(1-M*M),R=Math.exp(-c.y/m),X=Math.PI/2-2*Math.atan(R),ae=0,J=.1;ae<15&&Math.abs(J)>1e-7;ae++)_=S*Math.sin(X),_=Math.pow((1-_)/(1+_),S/2),X+=J=Math.PI/2-2*Math.atan(R*_)-X;return new _n(X*u,c.x*u/m)}},ol={__proto__:null,LonLat:ds,Mercator:ma,SphericalMercator:$t},ih=C({},vn,{code:"EPSG:3395",projection:ma,transformation:function(){var c=.5/(Math.PI*ma.R);return Is(c,.5,-c,.5)}()}),yd=C({},vn,{code:"EPSG:4326",projection:ds,transformation:Is(1/180,1,-1/180,.5)}),rh=C({},Sn,{projection:ds,transformation:Is(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,u){var m=u.lng-c.lng,M=u.lat-c.lat;return Math.sqrt(m*m+M*M)},infinite:!0});Sn.Earth=vn,Sn.EPSG3395=ih,Sn.EPSG3857=ns,Sn.EPSG900913=vp,Sn.EPSG4326=yd,Sn.Simple=rh;var Hi=Ds.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[Ie(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[Ie(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var u=c.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var m=this.getEvents();u.on(m,this),this.once("remove",function(){u.off(m,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});qe.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var u=Ie(c);return this._layers[u]||(this._layers[u]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c)),this},removeLayer:function(c){var u=Ie(c);return this._layers[u]?(this._loaded&&c.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return Ie(c)in this._layers},eachLayer:function(c,u){for(var m in this._layers)c.call(u,this._layers[m]);return this},_addLayers:function(c){for(var u=0,m=(c=c?Pi(c)?c:[c]:[]).length;u<m;u++)this.addLayer(c[u])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[Ie(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var u=Ie(c);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,u=-1/0,m=this._getZoomSpan();for(var M in this._zoomBoundLayers){var S=this._zoomBoundLayers[M].options;c=void 0===S.minZoom?c:Math.min(c,S.minZoom),u=void 0===S.maxZoom?u:Math.max(u,S.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=c===1/0?void 0:c,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wr=Hi.extend({initialize:function(c,u){var m,M;if(zn(this,u),this._layers={},c)for(m=0,M=c.length;m<M;m++)this.addLayer(c[m])},addLayer:function(c){var u=this.getLayerId(c);return this._layers[u]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var u=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(c){return("number"==typeof c?c:this.getLayerId(c))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var m,M,u=Array.prototype.slice.call(arguments,1);for(m in this._layers)(M=this._layers[m])[c]&&M[c].apply(M,u);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,u){for(var m in this._layers)c.call(u,this._layers[m]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return Ie(c)}}),Xi=Wr.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),Wr.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),Wr.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new vi;for(var u in this._layers){var m=this._layers[u];c.extend(m.getBounds?m.getBounds():m.getLatLng())}return c}}),he=fr.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){zn(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,u){var m=this._getIconUrl(c);if(!m){if("icon"===c)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var M=this._createImg(m,u&&"IMG"===u.tagName?u:null);return this._setIconStyles(M,c),(this.options.crossOrigin||""===this.options.crossOrigin)&&(M.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),M},_setIconStyles:function(c,u){var m=this.options,M=m[u+"Size"];"number"==typeof M&&(M=[M,M]);var S=Pt(M),R=Pt("shadow"===u&&m.shadowAnchor||m.iconAnchor||S&&S.divideBy(2,!0));c.className="leaflet-marker-"+u+" "+(m.className||""),R&&(c.style.marginLeft=-R.x+"px",c.style.marginTop=-R.y+"px"),S&&(c.style.width=S.x+"px",c.style.height=S.y+"px")},_createImg:function(c,u){return(u=u||document.createElement("img")).src=c,u},_getIconUrl:function(c){return yt.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});var He=he.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return"string"!=typeof He.imagePath&&(He.imagePath=this._detectIconPath()),(this.options.imagePath||He.imagePath)+he.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var u=function(m,M,S){var R=M.exec(m);return R&&R[S]};return(c=u(c,/^url\((['"])?(.+)\1\)$/,2))&&u(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=wn("div","leaflet-default-icon-path",document.body),u=ca(c,"background-image")||ca(c,"backgroundImage");if(document.body.removeChild(c),u=this._stripUrl(u))return u;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),sl=Rr.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new zt(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),vt(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Kn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var u=this._marker,m=u._map,M=this._marker.options.autoPanSpeed,S=this._marker.options.autoPanPadding,R=pn(u._icon),X=m.getPixelBounds(),ae=m.getPixelOrigin(),J=Si(X.min._subtract(ae).add(S),X.max._subtract(ae).subtract(S));if(!J.contains(R)){var _=Pt((Math.max(J.max.x,R.x)-J.max.x)/(X.max.x-J.max.x)-(Math.min(J.min.x,R.x)-J.min.x)/(X.min.x-J.min.x),(Math.max(J.max.y,R.y)-J.max.y)/(X.max.y-J.max.y)-(Math.min(J.min.y,R.y)-J.min.y)/(X.min.y-J.min.y)).multiplyBy(M);m.panBy(_,{animate:!1}),this._draggable._newPos._add(_),this._draggable._startPos._add(_),bi(u._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=hi(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(qn(this._panRequest),this._panRequest=hi(this._adjustPan.bind(this,c)))},_onDrag:function(c){var u=this._marker,m=u._shadow,M=pn(u._icon),S=u._map.layerPointToLatLng(M);m&&bi(m,M),u._latlng=S,c.latlng=S,c.oldLatLng=this._oldLatLng,u.fire("move",c).fire("drag",c)},_onDragEnd:function(c){qn(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),ga=Hi.extend({options:{icon:new He,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,u){zn(this,u),this._latlng=en(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var u=this._latlng;return this._latlng=en(c),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=c.icon.createIcon(this._icon),M=!1;m!==this._icon&&(this._icon&&this._removeIcon(),M=!0,c.title&&(m.title=c.title),"IMG"===m.tagName&&(m.alt=c.alt||"")),vt(m,u),c.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&et(m,"focus",this._panOnFocus,this);var S=c.icon.createShadow(this._shadow),R=!1;S!==this._shadow&&(this._removeShadow(),R=!0),S&&(vt(S,u),S.alt=""),this._shadow=S,c.opacity<1&&this._updateOpacity(),M&&this.getPane().appendChild(this._icon),this._initInteraction(),S&&R&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Hn(this._icon,"focus",this._panOnFocus,this),Vn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Vn(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&bi(this._icon,c),this._shadow&&bi(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var u=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(vt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sl)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sl(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Ui(this._icon,c),this._shadow&&Ui(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var u=this.options.icon.options,m=u.iconSize?Pt(u.iconSize):Pt(0,0),M=u.iconAnchor?Pt(u.iconAnchor):Pt(0,0);c.panInside(this._latlng,{paddingTopLeft:M,paddingBottomRight:m.subtract(M)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var ko=Hi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return zn(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),lc=ko.extend({options:{fill:!0,radius:10},initialize:function(c,u){zn(this,u),this._latlng=en(c),this._radius=this.options.radius},setLatLng:function(c){var u=this._latlng;return this._latlng=en(c),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var u=c&&c.radius||this._radius;return ko.prototype.setStyle.call(this,c),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,u=this._radiusY||c,m=this._clickTolerance(),M=[c+m,u+m];this._pxBounds=new xn(this._point.subtract(M),this._point.add(M))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var $r=lc.extend({initialize:function(c,u,m){if("number"==typeof u&&(u=C({},m,{radius:u})),zn(this,u),this._latlng=en(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new vi(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:ko.prototype.setStyle,_project:function(){var c=this._latlng.lng,u=this._latlng.lat,m=this._map,M=m.options.crs;if(M.distance===vn.distance){var S=Math.PI/180,R=this._mRadius/vn.R/S,X=m.project([u+R,c]),ae=m.project([u-R,c]),J=X.add(ae).divideBy(2),_=m.unproject(J).lat,b=Math.acos((Math.cos(R*S)-Math.sin(u*S)*Math.sin(_*S))/(Math.cos(u*S)*Math.cos(_*S)))/S;(isNaN(b)||0===b)&&(b=R/Math.cos(Math.PI/180*u)),this._point=J.subtract(m.getPixelOrigin()),this._radius=isNaN(b)?0:J.x-m.project([_,c-b]).x,this._radiusY=J.y-X.y}else{var T=M.unproject(M.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(T).x}this._updateBounds()}});var oi=ko.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,u){zn(this,u),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var S,R,u=1/0,m=null,M=Ns,X=0,ae=this._parts.length;X<ae;X++)for(var J=this._parts[X],_=1,b=J.length;_<b;_++){var T=M(c,S=J[_-1],R=J[_],!0);T<u&&(u=T,m=M(c,S,R))}return m&&(m.distance=Math.sqrt(u)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return nh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,u){return u=u||this._defaultShape(),c=en(c),u.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new vi,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return jr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var u=[],m=jr(c),M=0,S=c.length;M<S;M++)m?(u[M]=en(c[M]),this._bounds.extend(u[M])):u[M]=this._convertLatLngs(c[M]);return u},_project:function(){var c=new xn;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),u=new Ut(c,c);this._rawPxBounds&&(this._pxBounds=new xn([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(c,u,m){var R,X,S=c.length;if(c[0]instanceof _n){for(X=[],R=0;R<S;R++)X[R]=this._map.latLngToLayerPoint(c[R]),m.extend(X[R]);u.push(X)}else for(R=0;R<S;R++)this._projectLatlngs(c[R],u,m)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(c)){if(this.options.noClip)return void(this._parts=this._rings);var m,M,S,R,X,ae,J,u=this._parts;for(m=0,S=0,R=this._rings.length;m<R;m++)for(M=0,X=(J=this._rings[m]).length;M<X-1;M++)(ae=il(J[M],J[M+1],c,M,!0))&&(u[S]=u[S]||[],u[S].push(ae[0]),(ae[1]!==J[M+1]||M===X-2)&&(u[S].push(ae[1]),S++))}},_simplifyPoints:function(){for(var c=this._parts,u=this.options.smoothFactor,m=0,M=c.length;m<M;m++)c[m]=oc(c[m],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,u){var m,M,S,R,X,ae,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(m=0,R=this._parts.length;m<R;m++)for(M=0,S=(X=(ae=this._parts[m]).length)-1;M<X;S=M++)if((u||0!==M)&&Ln(c,ae[S],ae[M])<=J)return!0;return!1}});oi._flat=th;var an=oi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var u=oi.prototype._convertLatLngs.call(this,c),m=u.length;return m>=2&&u[0]instanceof _n&&u[0].equals(u[m-1])&&u.pop(),u},_setLatLngs:function(c){oi.prototype._setLatLngs.call(this,c),jr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return jr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,u=this.options.weight,m=new Ut(u,u);if(c=new xn(c.min.subtract(m),c.max.add(m)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(c)){if(this.options.noClip)return void(this._parts=this._rings);for(var R,M=0,S=this._rings.length;M<S;M++)(R=rc(this._rings[M],c,!0)).length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var m,M,S,R,X,ae,J,_,u=!1;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(R=0,J=this._parts.length;R<J;R++)for(X=0,ae=(_=(m=this._parts[R]).length)-1;X<_;ae=X++)(M=m[X]).y>c.y!=(S=m[ae]).y>c.y&&c.x<(S.x-M.x)*(c.y-M.y)/(S.y-M.y)+M.x&&(u=!u);return u||oi.prototype._containsPoint.call(this,c,!0)}});var qr=Xi.extend({initialize:function(c,u){zn(this,u),this._layers={},c&&this.addData(c)},addData:function(c){var m,M,S,u=Pi(c)?c:c.features;if(u){for(m=0,M=u.length;m<M;m++)((S=u[m]).geometries||S.geometry||S.features||S.coordinates)&&this.addData(S);return this}var R=this.options;if(R.filter&&!R.filter(c))return this;var X=Fo(c,R);return X?(X.feature=ll(c),X.defaultOptions=X.options,this.resetStyle(X),R.onEachFeature&&R.onEachFeature(c,X),this.addLayer(X)):this},resetStyle:function(c){return void 0===c?this.eachLayer(this.resetStyle,this):(c.options=C({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(u){this._setLayerStyle(u,c)},this)},_setLayerStyle:function(c,u){c.setStyle&&("function"==typeof u&&(u=u(c.feature)),c.setStyle(u))}});function Fo(c,u){var ae,J,_,b,m="Feature"===c.type?c.geometry:c,M=m?m.coordinates:null,S=[],R=u&&u.pointToLayer,X=u&&u.coordsToLatLng||Zr;if(!M&&!m)return null;switch(m.type){case"Point":return xd(R,c,ae=X(M),u);case"MultiPoint":for(_=0,b=M.length;_<b;_++)ae=X(M[_]),S.push(xd(R,c,ae,u));return new Xi(S);case"LineString":case"MultiLineString":return J=us(M,"LineString"===m.type?0:1,X),new oi(J,u);case"Polygon":case"MultiPolygon":return J=us(M,"Polygon"===m.type?1:2,X),new an(J,u);case"GeometryCollection":for(_=0,b=m.geometries.length;_<b;_++){var T=Fo({geometry:m.geometries[_],type:"Feature",properties:c.properties},u);T&&S.push(T)}return new Xi(S);case"FeatureCollection":for(_=0,b=m.features.length;_<b;_++){var N=Fo(m.features[_],u);N&&S.push(N)}return new Xi(S);default:throw new Error("Invalid GeoJSON object.")}}function xd(c,u,m,M){return c?c(u,m):new ga(m,M&&M.markersInheritOptions&&M)}function Zr(c){return new _n(c[1],c[0],c[2])}function us(c,u,m){for(var X,M=[],S=0,R=c.length;S<R;S++)X=u?us(c[S],u-1,m):(m||Zr)(c[S]),M.push(X);return M}function dc(c,u){return void 0!==(c=en(c)).alt?[ue(c.lng,u),ue(c.lat,u),ue(c.alt,u)]:[ue(c.lng,u),ue(c.lat,u)]}function va(c,u,m,M){for(var S=[],R=0,X=c.length;R<X;R++)S.push(u?va(c[R],jr(c[R])?0:u-1,m,M):dc(c[R],M));return!u&&m&&S.length>0&&S.push(S[0].slice()),S}function hs(c,u){return c.feature?C({},c.feature,{geometry:u}):ll(u)}function ll(c){return"Feature"===c.type||"FeatureCollection"===c.type?c:{type:"Feature",properties:{},geometry:c}}var uc={toGeoJSON:function(c){return hs(this,{type:"Point",coordinates:dc(this.getLatLng(),c)})}};function ya(c,u){return new qr(c,u)}ga.include(uc),$r.include(uc),lc.include(uc),oi.include({toGeoJSON:function(c){var u=!jr(this._latlngs);return hs(this,{type:(u?"Multi":"")+"LineString",coordinates:va(this._latlngs,u?1:0,!1,c)})}}),an.include({toGeoJSON:function(c){var u=!jr(this._latlngs),m=u&&!jr(this._latlngs[0]),M=va(this._latlngs,m?2:u?1:0,!0,c);return u||(M=[M]),hs(this,{type:(m?"Multi":"")+"Polygon",coordinates:M})}}),Wr.include({toMultiPoint:function(c){var u=[];return this.eachLayer(function(m){u.push(m.toGeoJSON(c).geometry.coordinates)}),hs(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(c){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===u)return this.toMultiPoint(c);var m="GeometryCollection"===u,M=[];return this.eachLayer(function(S){if(S.toGeoJSON){var R=S.toGeoJSON(c);if(m)M.push(R.geometry);else{var X=ll(R);"FeatureCollection"===X.type?M.push.apply(M,X.features):M.push(X)}}}),m?hs(this,{geometries:M,type:"GeometryCollection"}):{type:"FeatureCollection",features:M}}});var wd=ya,ba=Hi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,u,m){this._url=c,this._bounds=St(u),zn(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(vt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Vn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&rs(this._image),this},bringToBack:function(){return this._map&&Os(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=St(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c="IMG"===this._url.tagName,u=this._image=c?this._url:wn("img");vt(u,"leaflet-image-layer"),this._zoomAnimated&&vt(u,"leaflet-zoom-animated"),this.options.className&&vt(u,this.options.className),u.onselectstart=dt,u.onmousemove=dt,u.onload=G(this.fire,this,"load"),u.onerror=G(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(u.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c?this._url=u.src:(u.src=this._url,u.alt=this.options.alt)},_animateZoom:function(c){var u=this._map.getZoomScale(c.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;os(this._image,m,u)},_reset:function(){var c=this._image,u=new xn(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=u.getSize();bi(c,u.min),c.style.width=m.x+"px",c.style.height=m.y+"px"},_updateOpacity:function(){Ui(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),Md=ba.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c="VIDEO"===this._url.tagName,u=this._image=c?this._url:wn("video");if(vt(u,"leaflet-image-layer"),this._zoomAnimated&&vt(u,"leaflet-zoom-animated"),this.options.className&&vt(u,this.options.className),u.onselectstart=dt,u.onmousemove=dt,u.onloadeddata=G(this.fire,this,"load"),c){for(var m=u.getElementsByTagName("source"),M=[],S=0;S<m.length;S++)M.push(m[S].src);this._url=m.length>0?M:[u.src]}else{Pi(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var X=wn("source");X.src=this._url[R],u.appendChild(X)}}}});var Cd=ba.extend({_initImage:function(){var c=this._image=this._url;vt(c,"leaflet-image-layer"),this._zoomAnimated&&vt(c,"leaflet-zoom-animated"),this.options.className&&vt(c,this.options.className),c.onselectstart=dt,c.onmousemove=dt}});var yo=Hi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,u){c&&(c instanceof _n||Pi(c))?(this._latlng=en(c),zn(this,u)):(zn(this,c),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(c){return(c=arguments.length?c:this._source._map).hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Ui(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Ui(this._container,1),this.bringToFront(),this.options.interactive&&(vt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Ui(this._container,0),this._removeTimeout=setTimeout(G(Vn,void 0,this._container),200)):Vn(this._container),this.options.interactive&&(Kn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=en(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&rs(this._container),this},bringToBack:function(){return this._map&&Os(this._container),this},_prepareOpen:function(c){var u=this._source;if(!u._map)return!1;if(u instanceof Xi){u=null;var m=this._source._layers;for(var M in m)if(m[M]._map){u=m[M];break}if(!u)return!1;this._source=u}if(!c)if(u.getCenter)c=u.getCenter();else if(u.getLatLng)c=u.getLatLng();else{if(!u.getBounds)throw new Error("Unable to get source layer LatLng.");c=u.getBounds().getCenter()}return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,u="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof u)c.innerHTML=u;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),u=Pt(this.options.offset),m=this._getAnchor();this._zoomAnimated?bi(this._container,c.add(m)):u=u.add(c).add(m);var M=this._containerBottom=-u.y,S=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=M+"px",this._container.style.left=S+"px"}},_getAnchor:function(){return[0,0]}});qe.include({_initOverlay:function(c,u,m,M){var S=u;return S instanceof c||(S=new c(M).setContent(u)),m&&S.setLatLng(m),S}}),Hi.include({_initOverlay:function(c,u,m,M){var S=m;return S instanceof c?(zn(S,M),S._source=this):(S=u&&!M?u:new c(M,this)).setContent(m),S}});var cl=yo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return!(c=arguments.length?c:this._source._map).hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,yo.prototype.openOn.call(this,c)},onAdd:function(c){yo.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ko||this._source.on("preclick",as))},onRemove:function(c){yo.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ko||this._source.off("preclick",as))},getEvents:function(){var c=yo.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",u=this._container=wn("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=wn("div",c+"-content-wrapper",u);if(this._contentNode=wn("div",c+"-content",m),Gr(u),gd(this._contentNode),et(u,"contextmenu",as),this._tipContainer=wn("div",c+"-tip-container",u),this._tip=wn("div",c+"-tip",this._tipContainer),this.options.closeButton){var M=this._closeButton=wn("a",c+"-close-button",u);M.setAttribute("role","button"),M.setAttribute("aria-label","Close popup"),M.href="#close",M.innerHTML='<span aria-hidden="true">&#215;</span>',et(M,"click",function(S){qi(S),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,u=c.style;u.width="",u.whiteSpace="nowrap";var m=c.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),u.width=m+1+"px",u.whiteSpace="",u.height="";var S=this.options.maxHeight,R="leaflet-popup-scrolled";S&&c.offsetHeight>S?(u.height=S+"px",vt(c,R)):Kn(c,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var u=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),m=this._getAnchor();bi(this._container,u.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var c=this._map,u=parseInt(ca(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+u,M=this._containerWidth,S=new Ut(this._containerLeft,-m-this._containerBottom);S._add(pn(this._container));var R=c.layerPointToContainerPoint(S),X=Pt(this.options.autoPanPadding),ae=Pt(this.options.autoPanPaddingTopLeft||X),J=Pt(this.options.autoPanPaddingBottomRight||X),_=c.getSize(),b=0,T=0;R.x+M+J.x>_.x&&(b=R.x+M-_.x+J.x),R.x-b-ae.x<0&&(b=R.x-ae.x),R.y+m+J.y>_.y&&(T=R.y+m-_.y+J.y),R.y-T-ae.y<0&&(T=R.y-ae.y),(b||T)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([b,T]))}},_getAnchor:function(){return Pt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});qe.mergeOptions({closePopupOnClick:!0}),qe.include({openPopup:function(c,u,m){return this._initOverlay(cl,c,u,m).openOn(this),this},closePopup:function(c){return(c=arguments.length?c:this._popup)&&c.close(),this}}),Hi.include({bindPopup:function(c,u){return this._popup=this._initOverlay(cl,this._popup,c,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof Xi||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(this._popup&&this._map){ha(c);var u=c.layer||c.target;if(this._popup._source===u&&!(u instanceof ko))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng));this._popup._source=u,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){13===c.originalEvent.keyCode&&this._openPopup(c)}});var Ed=yo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){yo.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){yo.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=yo.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){this._contentNode=this._container=wn("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Ie(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var u,m,M=this._map,S=this._container,R=M.latLngToContainerPoint(M.getCenter()),X=M.layerPointToContainerPoint(c),ae=this.options.direction,J=S.offsetWidth,_=S.offsetHeight,b=Pt(this.options.offset),T=this._getAnchor();"top"===ae?(u=J/2,m=_):"bottom"===ae?(u=J/2,m=0):"center"===ae?(u=J/2,m=_/2):"right"===ae?(u=0,m=_/2):"left"===ae?(u=J,m=_/2):X.x<R.x?(ae="right",u=0,m=_/2):(ae="left",u=J+2*(b.x+T.x),m=_/2),c=c.subtract(Pt(u,m,!0)).add(b).add(T),Kn(S,"leaflet-tooltip-right"),Kn(S,"leaflet-tooltip-left"),Kn(S,"leaflet-tooltip-top"),Kn(S,"leaflet-tooltip-bottom"),vt(S,"leaflet-tooltip-"+ae),bi(S,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Ui(this._container,c)},_animateZoom:function(c){var u=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(u)},_getAnchor:function(){return Pt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});qe.include({openTooltip:function(c,u,m){return this._initOverlay(Ed,c,u,m).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Hi.include({bindTooltip:function(c,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ed,this._tooltip,c,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(c||!this._tooltipHandlersAdded){var u=c?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[u](m),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof Xi||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var u="function"==typeof c.getElement&&c.getElement();u&&(et(u,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),et(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var u="function"==typeof c.getElement&&c.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;return void this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(c)})}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var m,M,u=c.latlng;this._tooltip.options.sticky&&c.originalEvent&&(m=this._map.mouseEventToContainerPoint(c.originalEvent),M=this._map.containerPointToLayerPoint(m),u=this._map.layerPointToLatLng(M)),this._tooltip.setLatLng(u)}});var Np=he.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var u=c&&"DIV"===c.tagName?c:document.createElement("div"),m=this.options;if(m.html instanceof Element?(Ja(u),u.appendChild(m.html)):u.innerHTML=!1!==m.html?m.html:"",m.bgPos){var M=Pt(m.bgPos);u.style.backgroundPosition=-M.x+"px "+-M.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});he.Default=He;var dl=Hi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:yt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){zn(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),Vn(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(rs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Os(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Je(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof Ut?c:new Ut(c,c)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var R,u=this.getPane().children,m=-c(-1/0,1/0),M=0,S=u.length;M<S;M++)R=u[M].style.zIndex,u[M]!==this._container&&R&&(m=c(m,+R));isFinite(m)&&(this.options.zIndex=m+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!yt.ielt9){Ui(this._container,this.options.opacity);var c=+new Date,u=!1,m=!1;for(var M in this._tiles){var S=this._tiles[M];if(S.current&&S.loaded){var R=Math.min(1,(c-S.loaded)/200);Ui(S.el,R),R<1?u=!0:(S.active?m=!0:this._onOpaqueTile(S),S.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),u&&(qn(this._fadeFrame),this._fadeFrame=hi(this._updateOpacity,this))}},_onOpaqueTile:dt,_initContainer:function(){this._container||(this._container=wn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,u=this.options.maxZoom;if(void 0!==c){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===c?(this._levels[m].el.style.zIndex=u-Math.abs(c-m),this._onUpdateLevel(m)):(Vn(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var M=this._levels[c],S=this._map;return M||((M=this._levels[c]={}).el=wn("div","leaflet-tile-container leaflet-zoom-animated",this._container),M.el.style.zIndex=u,M.origin=S.project(S.unproject(S.getPixelOrigin()),c).round(),M.zoom=c,this._setZoomTransform(M,S.getCenter(),S.getZoom()),this._onCreateLevel(M)),this._level=M,M}},_onUpdateLevel:dt,_onRemoveLevel:dt,_onCreateLevel:dt,_pruneTiles:function(){if(this._map){var c,u,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom)return void this._removeAllTiles();for(c in this._tiles)(u=this._tiles[c]).retain=u.current;for(c in this._tiles)if((u=this._tiles[c]).current&&!u.active){var M=u.coords;this._retainParent(M.x,M.y,M.z,M.z-5)||this._retainChildren(M.x,M.y,M.z,M.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var u in this._tiles)this._tiles[u].coords.z===c&&this._removeTile(u)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)Vn(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,u,m,M){var S=Math.floor(c/2),R=Math.floor(u/2),X=m-1,ae=new Ut(+S,+R);ae.z=+X;var J=this._tileCoordsToKey(ae),_=this._tiles[J];return _&&_.active?(_.retain=!0,!0):(_&&_.loaded&&(_.retain=!0),X>M&&this._retainParent(S,R,X,M))},_retainChildren:function(c,u,m,M){for(var S=2*c;S<2*c+2;S++)for(var R=2*u;R<2*u+2;R++){var X=new Ut(S,R);X.z=m+1;var ae=this._tileCoordsToKey(X),J=this._tiles[ae];J&&J.active?J.retain=!0:(J&&J.loaded&&(J.retain=!0),m+1<M&&this._retainChildren(S,R,m+1,M))}},_resetView:function(c){var u=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var u=this.options;return void 0!==u.minNativeZoom&&c<u.minNativeZoom?u.minNativeZoom:void 0!==u.maxNativeZoom&&u.maxNativeZoom<c?u.maxNativeZoom:c},_setView:function(c,u,m,M){var S=Math.round(u);S=void 0!==this.options.maxZoom&&S>this.options.maxZoom||void 0!==this.options.minZoom&&S<this.options.minZoom?void 0:this._clampZoom(S),(!M||this.options.updateWhenZooming&&S!==this._tileZoom)&&(this._tileZoom=S,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==S&&this._update(c),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(c,u)},_setZoomTransforms:function(c,u){for(var m in this._levels)this._setZoomTransform(this._levels[m],c,u)},_setZoomTransform:function(c,u,m){var M=this._map.getZoomScale(m,c.zoom),S=c.origin.multiplyBy(M).subtract(this._map._getNewPixelOrigin(u,m)).round();yt.any3d?os(c.el,S,M):bi(c.el,S)},_resetGrid:function(){var c=this._map,u=c.options.crs,m=this._tileSize=this.getTileSize(),M=this._tileZoom,S=this._map.getPixelWorldBounds(this._tileZoom);S&&(this._globalTileRange=this._pxBoundsToTileRange(S)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,u.wrapLng[0]],M).x/m.x),Math.ceil(c.project([0,u.wrapLng[1]],M).x/m.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([u.wrapLat[0],0],M).y/m.x),Math.ceil(c.project([u.wrapLat[1],0],M).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var u=this._map,m=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),M=u.getZoomScale(m,this._tileZoom),S=u.project(c,this._tileZoom).floor(),R=u.getSize().divideBy(2*M);return new xn(S.subtract(R),S.add(R))},_update:function(c){var u=this._map;if(u){var m=this._clampZoom(u.getZoom());if(void 0===c&&(c=u.getCenter()),void 0!==this._tileZoom){var M=this._getTiledPixelBounds(c),S=this._pxBoundsToTileRange(M),R=S.getCenter(),X=[],ae=this.options.keepBuffer,J=new xn(S.getBottomLeft().subtract([ae,-ae]),S.getTopRight().add([ae,-ae]));if(!(isFinite(S.min.x)&&isFinite(S.min.y)&&isFinite(S.max.x)&&isFinite(S.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var _ in this._tiles){var b=this._tiles[_].coords;(b.z!==this._tileZoom||!J.contains(new Ut(b.x,b.y)))&&(this._tiles[_].current=!1)}if(Math.abs(m-this._tileZoom)>1)return void this._setView(c,m);for(var T=S.min.y;T<=S.max.y;T++)for(var N=S.min.x;N<=S.max.x;N++){var ce=new Ut(N,T);if(ce.z=this._tileZoom,this._isValidTile(ce)){var Oe=this._tiles[this._tileCoordsToKey(ce)];Oe?Oe.current=!0:X.push(ce)}}if(X.sort(function(Dt,An){return Dt.distanceTo(R)-An.distanceTo(R)}),0!==X.length){this._loading||(this._loading=!0,this.fire("loading"));var pt=document.createDocumentFragment();for(N=0;N<X.length;N++)this._addTile(X[N],pt);this._level.el.appendChild(pt)}}}},_isValidTile:function(c){var u=this._map.options.crs;if(!u.infinite){var m=this._globalTileRange;if(!u.wrapLng&&(c.x<m.min.x||c.x>m.max.x)||!u.wrapLat&&(c.y<m.min.y||c.y>m.max.y))return!1}if(!this.options.bounds)return!0;var M=this._tileCoordsToBounds(c);return St(this.options.bounds).overlaps(M)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var u=this._map,m=this.getTileSize(),M=c.scaleBy(m),S=M.add(m);return[u.unproject(M,c.z),u.unproject(S,c.z)]},_tileCoordsToBounds:function(c){var u=this._tileCoordsToNwSe(c),m=new vi(u[0],u[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var u=c.split(":"),m=new Ut(+u[0],+u[1]);return m.z=+u[2],m},_removeTile:function(c){var u=this._tiles[c];u&&(Vn(u.el),delete this._tiles[c],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){vt(c,"leaflet-tile");var u=this.getTileSize();c.style.width=u.x+"px",c.style.height=u.y+"px",c.onselectstart=dt,c.onmousemove=dt,yt.ielt9&&this.options.opacity<1&&Ui(c,this.options.opacity)},_addTile:function(c,u){var m=this._getTilePos(c),M=this._tileCoordsToKey(c),S=this.createTile(this._wrapCoords(c),G(this._tileReady,this,c));this._initTile(S),this.createTile.length<2&&hi(G(this._tileReady,this,c,null,S)),bi(S,m),this._tiles[M]={el:S,coords:c,current:!0},u.appendChild(S),this.fire("tileloadstart",{tile:S,coords:c})},_tileReady:function(c,u,m){u&&this.fire("tileerror",{error:u,tile:m,coords:c});var M=this._tileCoordsToKey(c);(m=this._tiles[M])&&(m.loaded=+new Date,this._map._fadeAnimated?(Ui(m.el,0),qn(this._fadeFrame),this._fadeFrame=hi(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),u||(vt(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),yt.ielt9||!this._map._fadeAnimated?hi(this._pruneTiles,this):setTimeout(G(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var u=new Ut(this._wrapX?Ke(c.x,this._wrapX):c.x,this._wrapY?Ke(c.y,this._wrapY):c.y);return u.z=c.z,u},_pxBoundsToTileRange:function(c){var u=this.getTileSize();return new xn(c.min.unscaleBy(u).floor(),c.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});var xa=dl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,u){this._url=c,(u=zn(this,u)).detectRetina&&yt.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),"string"==typeof u.subdomains&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,u){return this._url===c&&void 0===u&&(u=!0),this._url=c,u||this.redraw(),this},createTile:function(c,u){var m=document.createElement("img");return et(m,"load",G(this._tileOnLoad,this,u,m)),et(m,"error",G(this._tileOnError,this,u,m)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(m.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(c),m},getTileUrl:function(c){var u={r:yt.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-c.y;this.options.tms&&(u.y=m),u["-y"]=m}return fo(this._url,C(u,this.options))},_tileOnLoad:function(c,u){yt.ielt9?setTimeout(G(c,this,null,u),0):c(null,u)},_tileOnError:function(c,u,m){var M=this.options.errorTileUrl;M&&u.getAttribute("src")!==M&&(u.src=M),c(m,u)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom;return this.options.zoomReverse&&(c=this.options.maxZoom-c),c+this.options.zoomOffset},_getSubdomain:function(c){var u=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var c,u;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&((u=this._tiles[c].el).onload=dt,u.onerror=dt,!u.complete)){u.src=Za;var m=this._tiles[c].coords;Vn(u),delete this._tiles[c],this.fire("tileabort",{tile:u,coords:m})}},_removeTile:function(c){var u=this._tiles[c];if(u)return u.el.setAttribute("src",Za),dl.prototype._removeTile.call(this,c)},_tileReady:function(c,u,m){if(this._map&&(!m||m.getAttribute("src")!==Za))return dl.prototype._tileReady.call(this,c,u,m)}});function wi(c,u){return new xa(c,u)}var ch=xa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,u){this._url=c;var m=C({},this.defaultWmsParams);for(var M in u)M in this.options||(m[M]=u[M]);var S=(u=zn(this,u)).detectRetina&&yt.retina?2:1,R=this.getTileSize();m.width=R.x*S,m.height=R.y*S,this.wmsParams=m},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,xa.prototype.onAdd.call(this,c)},getTileUrl:function(c){var u=this._tileCoordsToNwSe(c),m=this._crs,M=Si(m.project(u[0]),m.project(u[1])),S=M.min,R=M.max,X=(this._wmsVersion>=1.3&&this._crs===yd?[S.y,S.x,R.y,R.x]:[S.x,S.y,R.x,R.y]).join(","),ae=xa.prototype.getTileUrl.call(this,c);return ae+Vl(this.wmsParams,ae,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+X},setParams:function(c,u){return C(this.wmsParams,c),u||this.redraw(),this}});xa.WMS=ch,wi.wms=function Bp(c,u){return new ch(c,u)};var No=Hi.extend({options:{padding:.1},initialize:function(c){zn(this,c),Ie(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),vt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,u){var m=this._map.getZoomScale(u,this._zoom),M=this._map.getSize().multiplyBy(.5+this.options.padding),S=this._map.project(this._center,u),R=M.multiplyBy(-m).add(S).subtract(this._map._getNewPixelOrigin(c,u));yt.any3d?os(this._container,R,m):bi(this._container,R)},_reset:function(){for(var c in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,u=this._map.getSize(),m=this._map.containerPointToLayerPoint(u.multiplyBy(-c)).round();this._bounds=new xn(m,m.add(u.multiplyBy(1+2*c)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),dn=No.extend({options:{tolerance:0},getEvents:function(){var c=No.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){No.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");et(c,"mousemove",this._onMouseMove,this),et(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),et(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){qn(this._redrawRequest),delete this._ctx,Vn(this._container),Hn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var u in this._redrawBounds=null,this._layers)this._layers[u]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){No.prototype._update.call(this);var c=this._bounds,u=this._container,m=c.getSize(),M=yt.retina?2:1;bi(u,c.min),u.width=M*m.x,u.height=M*m.y,u.style.width=m.x+"px",u.style.height=m.y+"px",yt.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){No.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[Ie(c)]=c;var u=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var u=c._order,m=u.next,M=u.prev;m?m.prev=M:this._drawLast=M,M?M.next=m:this._drawFirst=m,delete c._order,delete this._layers[Ie(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if("string"==typeof c.options.dashArray){var M,S,u=c.options.dashArray.split(/[, ]+/),m=[];for(S=0;S<u.length;S++){if(M=Number(u[S]),isNaN(M))return;m.push(M)}c.options._dashArray=m}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||hi(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var u=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new xn,this._redrawBounds.extend(c._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(c._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var u=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,u=this._redrawBounds;if(this._ctx.save(),u){var m=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var M=this._drawFirst;M;M=M.next)c=M.layer,(!u||c._pxBounds&&c._pxBounds.intersects(u))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,u){if(this._drawing){var m,M,S,R,X=c._parts,ae=X.length,J=this._ctx;if(ae){for(J.beginPath(),m=0;m<ae;m++){for(M=0,S=X[m].length;M<S;M++)J[M?"lineTo":"moveTo"]((R=X[m][M]).x,R.y);u&&J.closePath()}this._fillStroke(J,c)}}},_updateCircle:function(c){if(this._drawing&&!c._empty()){var u=c._point,m=this._ctx,M=Math.max(Math.round(c._radius),1),S=(Math.max(Math.round(c._radiusY),1)||M)/M;1!==S&&(m.save(),m.scale(1,S)),m.beginPath(),m.arc(u.x,u.y/S,M,0,2*Math.PI,!1),1!==S&&m.restore(),this._fillStroke(m,c)}},_fillStroke:function(c,u){var m=u.options;m.fill&&(c.globalAlpha=m.fillOpacity,c.fillStyle=m.fillColor||m.color,c.fill(m.fillRule||"evenodd")),m.stroke&&0!==m.weight&&(c.setLineDash&&c.setLineDash(u.options&&u.options._dashArray||[]),c.globalAlpha=m.opacity,c.lineWidth=m.weight,c.strokeStyle=m.color,c.lineCap=m.lineCap,c.lineJoin=m.lineJoin,c.stroke())},_onClick:function(c){for(var m,M,u=this._map.mouseEventToLayerPoint(c),S=this._drawFirst;S;S=S.next)(m=S.layer).options.interactive&&m._containsPoint(u)&&("click"!==c.type&&"preclick"!==c.type||!this._map._draggableMoved(m))&&(M=m);this._fireEvent(!!M&&[M],c)},_onMouseMove:function(c){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var u=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,u)}},_handleMouseOut:function(c){var u=this._hoveredLayer;u&&(Kn(this._container,"leaflet-interactive"),this._fireEvent([u],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,u){if(!this._mouseHoverThrottled){for(var m,M,S=this._drawFirst;S;S=S.next)(m=S.layer).options.interactive&&m._containsPoint(u)&&(M=m);M!==this._hoveredLayer&&(this._handleMouseOut(c),M&&(vt(this._container,"leaflet-interactive"),this._fireEvent([M],c,"mouseover"),this._hoveredLayer=M)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],c),this._mouseHoverThrottled=!0,setTimeout(G(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,u,m){this._map._fireDOMEvent(u,m||u.type,c)},_bringToFront:function(c){var u=c._order;if(u){var m=u.next,M=u.prev;if(!m)return;m.prev=M,M?M.next=m:m&&(this._drawFirst=m),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(c)}},_bringToBack:function(c){var u=c._order;if(u){var m=u.next,M=u.prev;if(!M)return;M.next=m,m?m.prev=M:M&&(this._drawLast=M),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(c)}}});function dh(c){return yt.canvas?new dn(c):null}var wa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),bt={_initContainer:function(){this._container=wn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(No.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var u=c._container=wa("shape");vt(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",c._path=wa("path"),u.appendChild(c._path),this._updateStyle(c),this._layers[Ie(c)]=c},_addPath:function(c){var u=c._container;this._container.appendChild(u),c.options.interactive&&c.addInteractiveTarget(u)},_removePath:function(c){var u=c._container;Vn(u),c.removeInteractiveTarget(u),delete this._layers[Ie(c)]},_updateStyle:function(c){var u=c._stroke,m=c._fill,M=c.options,S=c._container;S.stroked=!!M.stroke,S.filled=!!M.fill,M.stroke?(u||(u=c._stroke=wa("stroke")),S.appendChild(u),u.weight=M.weight+"px",u.color=M.color,u.opacity=M.opacity,u.dashStyle=M.dashArray?Pi(M.dashArray)?M.dashArray.join(" "):M.dashArray.replace(/( *, *)/g," "):"",u.endcap=M.lineCap.replace("butt","flat"),u.joinstyle=M.lineJoin):u&&(S.removeChild(u),c._stroke=null),M.fill?(m||(m=c._fill=wa("fill")),S.appendChild(m),m.color=M.fillColor||M.color,m.opacity=M.fillOpacity):m&&(S.removeChild(m),c._fill=null)},_updateCircle:function(c){var u=c._point.round(),m=Math.round(c._radius),M=Math.round(c._radiusY||m);this._setPath(c,c._empty()?"M0 0":"AL "+u.x+","+u.y+" "+m+","+M+" 0,23592600")},_setPath:function(c,u){c._path.v=u},_bringToFront:function(c){rs(c._container)},_bringToBack:function(c){Os(c._container)}},Jn=yt.vml?wa:pr,tn=No.extend({_initContainer:function(){this._container=Jn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Jn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Vn(this._container),Hn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){No.prototype._update.call(this);var c=this._bounds,u=c.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,m.setAttribute("width",u.x),m.setAttribute("height",u.y)),bi(m,c.min),m.setAttribute("viewBox",[c.min.x,c.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(c){var u=c._path=Jn("path");c.options.className&&vt(u,c.options.className),c.options.interactive&&vt(u,"leaflet-interactive"),this._updateStyle(c),this._layers[Ie(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){Vn(c._path),c.removeInteractiveTarget(c._path),delete this._layers[Ie(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var u=c._path,m=c.options;u&&(m.stroke?(u.setAttribute("stroke",m.color),u.setAttribute("stroke-opacity",m.opacity),u.setAttribute("stroke-width",m.weight),u.setAttribute("stroke-linecap",m.lineCap),u.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?u.setAttribute("stroke-dasharray",m.dashArray):u.removeAttribute("stroke-dasharray"),m.dashOffset?u.setAttribute("stroke-dashoffset",m.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),m.fill?(u.setAttribute("fill",m.fillColor||m.color),u.setAttribute("fill-opacity",m.fillOpacity),u.setAttribute("fill-rule",m.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(c,u){this._setPath(c,po(c._parts,u))},_updateCircle:function(c){var u=c._point,m=Math.max(Math.round(c._radius),1),S="a"+m+","+(Math.max(Math.round(c._radiusY),1)||m)+" 0 1,0 ",R=c._empty()?"M0 0":"M"+(u.x-m)+","+u.y+S+2*m+",0 "+S+2*-m+",0 ";this._setPath(c,R)},_setPath:function(c,u){c._path.setAttribute("d",u)},_bringToFront:function(c){rs(c._path)},_bringToBack:function(c){Os(c._path)}});function Oi(c){return yt.svg||yt.vml?new tn(c):null}yt.vml&&tn.include(bt),qe.include({getRenderer:function(c){var u=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(c){if("overlayPane"===c||void 0===c)return!1;var u=this._paneRenderers[c];return void 0===u&&(u=this._createRenderer({pane:c}),this._paneRenderers[c]=u),u},_createRenderer:function(c){return this.options.preferCanvas&&dh(c)||Oi(c)}});var Ti=an.extend({initialize:function(c,u){an.prototype.initialize.call(this,this._boundsToLatLngs(c),u)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return[(c=St(c)).getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});tn.create=Jn,tn.pointsToPath=po,qr.geometryToLayer=Fo,qr.coordsToLatLng=Zr,qr.coordsToLatLngs=us,qr.latLngToCoords=dc,qr.latLngsToCoords=va,qr.getFeature=hs,qr.asFeature=ll,qe.mergeOptions({boxZoom:!0});var mr=Rr.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){et(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Hn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Vn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||1!==c.which&&1!==c.button)return!1;this._clearDeferredResetState(),this._resetState(),ss(),Cn(),this._startPoint=this._map.mouseEventToContainerPoint(c),et(document,{contextmenu:ha,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=wn("div","leaflet-zoom-box",this._container),vt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var u=new xn(this._point,this._startPoint),m=u.getSize();bi(this._box,u.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(Vn(this._box),Kn(this._container,"leaflet-crosshair")),Qn(),It(),Hn(document,{contextmenu:ha,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if((1===c.which||1===c.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(G(this._resetState,this),0);var u=new vi(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(c){27===c.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});qe.addInitHook("addHandler","boxZoom",mr),qe.mergeOptions({doubleClickZoom:!0});var Sd=Rr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var u=this._map,m=u.getZoom(),M=u.options.zoomDelta,S=c.originalEvent.shiftKey?m-M:m+M;"center"===u.options.doubleClickZoom?u.setZoom(S):u.setZoomAround(c.containerPoint,S)}});qe.addInitHook("addHandler","doubleClickZoom",Sd),qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var hc=Rr.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new zt(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}vt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Kn(this._map._container,"leaflet-grab"),Kn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=St(this._map.options.maxBounds);this._offsetLimit=Si(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var u=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(u),this._prunePositions(u)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,u){return c-(c-u)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var c=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;c.x<u.min.x&&(c.x=this._viscousLimit(c.x,u.min.x)),c.y<u.min.y&&(c.y=this._viscousLimit(c.y,u.min.y)),c.x>u.max.x&&(c.x=this._viscousLimit(c.x,u.max.x)),c.y>u.max.y&&(c.y=this._viscousLimit(c.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,u=Math.round(c/2),m=this._initialWorldOffset,M=this._draggable._newPos.x,S=(M-u+m)%c+u-m,R=(M+u+m)%c-u-m,X=Math.abs(S+m)<Math.abs(R+m)?S:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=X},_onDragEnd:function(c){var u=this._map,m=u.options,M=!m.inertia||c.noInertia||this._times.length<2;if(u.fire("dragend",c),M)u.fire("moveend");else{this._prunePositions(+new Date);var S=this._lastPos.subtract(this._positions[0]),X=m.easeLinearity,ae=S.multiplyBy(X/((this._lastTime-this._times[0])/1e3)),J=ae.distanceTo([0,0]),_=Math.min(m.inertiaMaxSpeed,J),b=ae.multiplyBy(_/J),T=_/(m.inertiaDeceleration*X),N=b.multiplyBy(-T/2).round();N.x||N.y?(N=u._limitOffset(N,u.options.maxBounds),hi(function(){u.panBy(N,{duration:T,easeLinearity:X,noMoveStart:!0,animate:!0})})):u.fire("moveend")}}});qe.addInitHook("addHandler","dragging",hc),qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ul=Rr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),et(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Hn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,u=document.documentElement,m=c.scrollTop||u.scrollTop,M=c.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(M,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var M,S,u=this._panKeys={},m=this.keyCodes;for(M=0,S=m.left.length;M<S;M++)u[m.left[M]]=[-1*c,0];for(M=0,S=m.right.length;M<S;M++)u[m.right[M]]=[c,0];for(M=0,S=m.down.length;M<S;M++)u[m.down[M]]=[0,c];for(M=0,S=m.up.length;M<S;M++)u[m.up[M]]=[0,-1*c]},_setZoomDelta:function(c){var M,S,u=this._zoomKeys={},m=this.keyCodes;for(M=0,S=m.zoomIn.length;M<S;M++)u[m.zoomIn[M]]=c;for(M=0,S=m.zoomOut.length;M<S;M++)u[m.zoomOut[M]]=-c},_addHooks:function(){et(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Hn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var M,u=c.keyCode,m=this._map;if(u in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(M=this._panKeys[u],c.shiftKey&&(M=Pt(M).multiplyBy(3)),m.options.maxBounds&&(M=m._limitOffset(Pt(M),m.options.maxBounds)),m.options.worldCopyJump){var S=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(M)));m.panTo(S)}else m.panBy(M)}else if(u in this._zoomKeys)m.setZoom(m.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[u]);else{if(27!==u||!m._popup||!m._popup.options.closeOnEscapeKey)return;m.closePopup()}ha(c)}}});qe.addInitHook("addHandler","keyboard",ul),qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var uh=Rr.extend({addHooks:function(){et(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Hn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var u=Pp(c),m=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var M=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(G(this._performZoom,this),M),ha(c)},_performZoom:function(){var c=this._map,u=c.getZoom(),m=this._map.options.zoomSnap||0;c._stop();var S=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,R=m?Math.ceil(S/m)*m:S,X=c._limitZoom(u+(this._delta>0?R:-R))-u;this._delta=0,this._startTime=null,X&&("center"===c.options.scrollWheelZoom?c.setZoom(u+X):c.setZoomAround(this._lastMousePos,u+X))}});qe.addInitHook("addHandler","scrollWheelZoom",uh);qe.mergeOptions({tapHold:yt.touchNative&&yt.safari&&yt.mobile,tapTolerance:15});var Mn=Rr.extend({addHooks:function(){et(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Hn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),1===c.touches.length){var u=c.touches[0];this._startPos=this._newPos=new Ut(u.clientX,u.clientY),this._holdTimeout=setTimeout(G(function(){this._cancel(),this._isTapValid()&&(et(document,"touchend",qi),et(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),600),et(document,"touchend touchcancel contextmenu",this._cancel,this),et(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){Hn(document,"touchend",qi),Hn(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),Hn(document,"touchend touchcancel contextmenu",this._cancel,this),Hn(document,"touchmove",this._onMove,this)},_onMove:function(c){var u=c.touches[0];this._newPos=new Ut(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,u){var m=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});m._simulated=!0,u.target.dispatchEvent(m)}});qe.addInitHook("addHandler","tapHold",Mn),qe.mergeOptions({touchZoom:yt.touch,bounceAtZoomLimits:!0});var Ye=Rr.extend({addHooks:function(){vt(this._map._container,"leaflet-touch-zoom"),et(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Kn(this._map._container,"leaflet-touch-zoom"),Hn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var u=this._map;if(c.touches&&2===c.touches.length&&!u._animatingZoom&&!this._zooming){var m=u.mouseEventToContainerPoint(c.touches[0]),M=u.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),"center"!==u.options.touchZoom&&(this._pinchStartLatLng=u.containerPointToLatLng(m.add(M)._divideBy(2))),this._startDist=m.distanceTo(M),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),et(document,"touchmove",this._onTouchMove,this),et(document,"touchend touchcancel",this._onTouchEnd,this),qi(c)}},_onTouchMove:function(c){if(c.touches&&2===c.touches.length&&this._zooming){var u=this._map,m=u.mouseEventToContainerPoint(c.touches[0]),M=u.mouseEventToContainerPoint(c.touches[1]),S=m.distanceTo(M)/this._startDist;if(this._zoom=u.getScaleZoom(S,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&S<1||this._zoom>u.getMaxZoom()&&S>1)&&(this._zoom=u._limitZoom(this._zoom)),"center"===u.options.touchZoom){if(this._center=this._startLatLng,1===S)return}else{var R=m._add(M)._divideBy(2)._subtract(this._centerPoint);if(1===S&&0===R.x&&0===R.y)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),qn(this._animRequest);var X=G(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=hi(X,this,!0),qi(c)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,qn(this._animRequest),Hn(document,"touchmove",this._onTouchMove,this),Hn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});qe.addInitHook("addHandler","touchZoom",Ye),qe.BoxZoom=mr,qe.DoubleClickZoom=Sd,qe.Drag=hc,qe.Keyboard=ul,qe.ScrollWheelZoom=uh,qe.TapHold=Mn,qe.TouchZoom=Ye,Ne.Bounds=xn,Ne.Browser=yt,Ne.CRS=Sn,Ne.Canvas=dn,Ne.Circle=$r,Ne.CircleMarker=lc,Ne.Class=fr,Ne.Control=Vi,Ne.DivIcon=Np,Ne.DivOverlay=yo,Ne.DomEvent=h_,Ne.DomUtil=Nt,Ne.Draggable=zt,Ne.Evented=Ds,Ne.FeatureGroup=Xi,Ne.GeoJSON=qr,Ne.GridLayer=dl,Ne.Handler=Rr,Ne.Icon=he,Ne.ImageOverlay=ba,Ne.LatLng=_n,Ne.LatLngBounds=vi,Ne.Layer=Hi,Ne.LayerGroup=Wr,Ne.LineUtil=Rp,Ne.Map=qe,Ne.Marker=ga,Ne.Mixin=Qu,Ne.Path=ko,Ne.Point=Ut,Ne.PolyUtil=eh,Ne.Polygon=an,Ne.Polyline=oi,Ne.Popup=cl,Ne.PosAnimation=xr,Ne.Projection=ol,Ne.Rectangle=Ti,Ne.Renderer=No,Ne.SVG=tn,Ne.SVGOverlay=Cd,Ne.TileLayer=xa,Ne.Tooltip=Ed,Ne.Transformation=As,Ne.Util=gn,Ne.VideoOverlay=Md,Ne.bind=G,Ne.bounds=Si,Ne.canvas=dh,Ne.circle=function al(c,u,m){return new $r(c,u,m)},Ne.circleMarker=function sh(c,u){return new lc(c,u)},Ne.control=ec,Ne.divIcon=function ah(c){return new Np(c)},Ne.extend=C,Ne.featureGroup=function(c,u){return new Xi(c,u)},Ne.geoJSON=ya,Ne.geoJson=wd,Ne.gridLayer=function lh(c){return new dl(c)},Ne.icon=function bd(c){return new he(c)},Ne.imageOverlay=function(c,u,m){return new ba(c,u,m)},Ne.latLng=en,Ne.latLngBounds=St,Ne.layerGroup=function(c,u){return new Wr(c,u)},Ne.map=function f_(c,u){return new qe(c,u)},Ne.marker=function _a(c,u){return new ga(c,u)},Ne.point=Pt,Ne.polygon=function cc(c,u){return new an(c,u)},Ne.polyline=function vo(c,u){return new oi(c,u)},Ne.popup=function(c,u){return new cl(c,u)},Ne.rectangle=function Ma(c,u){return new Ti(c,u)},Ne.setOptions=zn,Ne.stamp=Ie,Ne.svg=Oi,Ne.svgOverlay=function wr(c,u,m){return new Cd(c,u,m)},Ne.tileLayer=wi,Ne.tooltip=function(c,u){return new Ed(c,u)},Ne.transformation=Is,Ne.version="1.9.4",Ne.videoOverlay=function kp(c,u,m){return new Md(c,u,m)};var ct=window.L;Ne.noConflict=function(){return window.L=ct,this},window.L=Ne}(hr)},32:function(Ts){Ts.exports=function(){"use strict";function hr(_,b,T){if("function"==typeof _?_===b:_.has(b))return arguments.length<3?b:T;throw new TypeError("Private element is not present on this object")}function kt(_,b){return _.get(hr(_,b))}function C(_,b,T){(function Ne(_,b){if(b.has(_))throw new TypeError("Cannot initialize the same private elements twice on an object")})(_,b),b.set(_,T)}const Q={},Je=_=>new Promise(b=>{if(!_)return b();const T=window.scrollX,N=window.scrollY;Q.restoreFocusTimeout=setTimeout(()=>{Q.previousActiveElement instanceof HTMLElement?(Q.previousActiveElement.focus(),Q.previousActiveElement=null):document.body&&document.body.focus(),b()},100),window.scrollTo(T,N)}),ue=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce((_,b)=>(_[b]="swal2-"+b,_),{}),Pr=["success","warning","info","question","error"].reduce((_,b)=>(_[b]="swal2-"+b,_),{}),zn="SweetAlert2:",Vl=_=>_.charAt(0).toUpperCase()+_.slice(1),nr=_=>{console.warn(`${zn} ${"object"==typeof _?_.join(" "):_}`)},fo=_=>{console.error(`${zn} ${_}`)},Pi=[],Za=function(_){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(_=>{Pi.includes(_)||(Pi.push(_),nr(_))})(`"${_}" is deprecated and will be removed in the next major release.${b?` Use "${b}" instead.`:""}`)},es=_=>"function"==typeof _?_():_,Hl=_=>_&&"function"==typeof _.toPromise,ts=_=>Hl(_)?_.toPromise():Promise.resolve(_),Xa=_=>_&&Promise.resolve(_)===_,_i=()=>document.body.querySelector(`.${ue.container}`),hi=_=>{const b=_i();return b?b.querySelector(_):null},qn=_=>hi(`.${_}`),gn=()=>qn(ue.popup),fr=()=>qn(ue.icon),fi=()=>qn(ue.title),Ds=()=>qn(ue["html-container"]),Ut=()=>qn(ue.image),Rn=()=>qn(ue["progress-steps"]),Pt=()=>qn(ue["validation-message"]),xn=()=>hi(`.${ue.actions} .${ue.confirm}`),Si=()=>hi(`.${ue.actions} .${ue.cancel}`),vi=()=>hi(`.${ue.actions} .${ue.deny}`),_n=()=>hi(`.${ue.loader}`),en=()=>qn(ue.actions),Sn=()=>qn(ue.footer),vn=()=>qn(ue["timer-progress-bar"]),Gl=()=>qn(ue.close),As=()=>{const _=gn();if(!_)return[];const b=_.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),T=Array.from(b).sort((Oe,pt)=>{const Dt=parseInt(Oe.getAttribute("tabindex")||"0"),An=parseInt(pt.getAttribute("tabindex")||"0");return Dt>An?1:Dt<An?-1:0}),N=_.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),ce=Array.from(N).filter(Oe=>"-1"!==Oe.getAttribute("tabindex"));return[...new Set(T.concat(ce))].filter(Oe=>ri(Oe))},Is=()=>po(document.body,ue.shown)&&!po(document.body,ue["toast-shown"])&&!po(document.body,ue["no-backdrop"]),ns=()=>{const _=gn();return!!_&&po(_,ue.toast)},pr=(_,b)=>{if(_.textContent="",b){const N=(new DOMParser).parseFromString(b,"text/html"),ce=N.querySelector("head");ce&&Array.from(ce.childNodes).forEach(pt=>{_.appendChild(pt)});const Oe=N.querySelector("body");Oe&&Array.from(Oe.childNodes).forEach(pt=>{pt instanceof HTMLVideoElement||pt instanceof HTMLAudioElement?_.appendChild(pt.cloneNode(!0)):_.appendChild(pt)})}},po=(_,b)=>{if(!b)return!1;const T=b.split(/\s+/);for(let N=0;N<T.length;N++)if(!_.classList.contains(T[N]))return!1;return!0},Wi=(_,b,T)=>{if(((_,b)=>{Array.from(_.classList).forEach(T=>{!Object.values(ue).includes(T)&&!Object.values(Pr).includes(T)&&!Object.values(b.showClass||{}).includes(T)&&_.classList.remove(T)})})(_,b),!b.customClass)return;const N=b.customClass[T];if(N){if("string"!=typeof N&&!N.forEach)return void nr(`Invalid type of customClass.${T}! Expected string or iterable object, got "${typeof N}"`);yn(_,N)}},jl=(_,b)=>{if(!b)return null;switch(b){case"select":case"textarea":case"file":return _.querySelector(`.${ue.popup} > .${ue[b]}`);case"checkbox":return _.querySelector(`.${ue.popup} > .${ue.checkbox} input`);case"radio":return _.querySelector(`.${ue.popup} > .${ue.radio} input:checked`)||_.querySelector(`.${ue.popup} > .${ue.radio} input:first-child`);case"range":return _.querySelector(`.${ue.popup} > .${ue.range} input`);default:return _.querySelector(`.${ue.popup} > .${ue.input}`)}},rd=_=>{if(_.focus(),"file"!==_.type){const b=_.value;_.value="",_.value=b}},Wl=(_,b,T)=>{!_||!b||("string"==typeof b&&(b=b.split(/\s+/).filter(Boolean)),b.forEach(N=>{Array.isArray(_)?_.forEach(ce=>{T?ce.classList.add(N):ce.classList.remove(N)}):T?_.classList.add(N):_.classList.remove(N)}))},yn=(_,b)=>{Wl(_,b,!0)},br=(_,b)=>{Wl(_,b,!1)},mo=(_,b)=>{const T=Array.from(_.children);for(let N=0;N<T.length;N++){const ce=T[N];if(ce instanceof HTMLElement&&po(ce,b))return ce}},Ps=(_,b,T)=>{T===`${parseInt(T)}`&&(T=parseInt(T)),T||0===parseInt(T)?_.style.setProperty(b,"number"==typeof T?`${T}px`:T):_.style.removeProperty(b)},ii=function(_){_&&(_.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},Ri=_=>{_&&(_.style.display="none")},$l=function(_){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";_&&new MutationObserver(()=>{aa(_,_.innerHTML,b)}).observe(_,{childList:!0,subtree:!0})},Vu=(_,b,T,N)=>{const ce=_.querySelector(b);ce&&ce.style.setProperty(T,N)},aa=function(_,b){b?ii(_,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Ri(_)},ri=_=>!(!_||!(_.offsetWidth||_.offsetHeight||_.getClientRects().length)),od=_=>_.scrollHeight>_.clientHeight,Ya=_=>{const b=window.getComputedStyle(_),T=parseFloat(b.getPropertyValue("animation-duration")||"0"),N=parseFloat(b.getPropertyValue("transition-duration")||"0");return T>0||N>0},ql=function(_){let b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const T=vn();T&&ri(T)&&(b&&(T.style.transition="none",T.style.width="100%"),setTimeout(()=>{T.style.transition=`width ${_/1e3}s linear`,T.style.width="0%"},10))},bp=`\n <div aria-labelledby="${ue.title}" aria-describedby="${ue["html-container"]}" class="${ue.popup}" tabindex="-1">\n   <button type="button" class="${ue.close}"></button>\n   <ul class="${ue["progress-steps"]}"></ul>\n   <div class="${ue.icon}"></div>\n   <img class="${ue.image}" />\n   <h2 class="${ue.title}" id="${ue.title}"></h2>\n   <div class="${ue["html-container"]}" id="${ue["html-container"]}"></div>\n   <input class="${ue.input}" id="${ue.input}" />\n   <input type="file" class="${ue.file}" />\n   <div class="${ue.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${ue.select}" id="${ue.select}"></select>\n   <div class="${ue.radio}"></div>\n   <label class="${ue.checkbox}">\n     <input type="checkbox" id="${ue.checkbox}" />\n     <span class="${ue.label}"></span>\n   </label>\n   <textarea class="${ue.textarea}" id="${ue.textarea}"></textarea>\n   <div class="${ue["validation-message"]}" id="${ue["validation-message"]}"></div>\n   <div class="${ue.actions}">\n     <div class="${ue.loader}"></div>\n     <button type="button" class="${ue.confirm}"></button>\n     <button type="button" class="${ue.deny}"></button>\n     <button type="button" class="${ue.cancel}"></button>\n   </div>\n   <div class="${ue.footer}"></div>\n   <div class="${ue["timer-progress-bar-container"]}">\n     <div class="${ue["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),is=()=>{Q.currentInstance.resetValidationMessage()},Cp=_=>{const b=(()=>{const _=_i();return!!_&&(_.remove(),br([document.documentElement,document.body],[ue["no-backdrop"],ue["toast-shown"],ue["has-column"]]),!0)})();if(typeof window>"u"||typeof document>"u")return void fo("SweetAlert2 requires document to initialize");const T=document.createElement("div");T.className=ue.container,b&&yn(T,ue["no-transition"]),pr(T,bp),T.dataset.swal2Theme=_.theme;const N=(_=>"string"==typeof _?document.querySelector(_):_)(_.target);N.appendChild(T),(_=>{const b=gn();b.setAttribute("role",_.toast?"alert":"dialog"),b.setAttribute("aria-live",_.toast?"polite":"assertive"),_.toast||b.setAttribute("aria-modal","true")})(_),(_=>{"rtl"===window.getComputedStyle(_).direction&&yn(_i(),ue.rtl)})(N),(()=>{const _=gn(),b=mo(_,ue.input),T=mo(_,ue.file),N=_.querySelector(`.${ue.range} input`),ce=_.querySelector(`.${ue.range} output`),Oe=mo(_,ue.select),pt=_.querySelector(`.${ue.checkbox} input`),Dt=mo(_,ue.textarea);b.oninput=is,T.onchange=is,Oe.onchange=is,pt.onchange=is,Dt.oninput=is,N.oninput=()=>{is(),ce.value=N.value},N.onchange=()=>{is(),ce.value=N.value}})()},sd=(_,b)=>{_ instanceof HTMLElement?b.appendChild(_):"object"==typeof _?d_(_,b):_&&pr(b,_)},d_=(_,b)=>{_.jquery?ad(b,_):pr(b,_.toString())},ad=(_,b)=>{if(_.textContent="",0 in b)for(let T=0;T in b;T++)_.appendChild(b[T].cloneNode(!0));else _.appendChild(b.cloneNode(!0))},Zl=(_,b)=>{const T=en(),N=_n();!T||!N||(b.showConfirmButton||b.showDenyButton||b.showCancelButton?ii(T):Ri(T),Wi(T,b,"actions"),function Wu(_,b,T){const N=xn(),ce=vi(),Oe=Si();!N||!ce||!Oe||(ld(N,"confirm",T),ld(ce,"deny",T),ld(Oe,"cancel",T),function $u(_,b,T,N){N.buttonsStyling?(yn([_,b,T],ue.styled),N.confirmButtonColor&&_.style.setProperty("--swal2-confirm-button-background-color",N.confirmButtonColor),N.denyButtonColor&&b.style.setProperty("--swal2-deny-button-background-color",N.denyButtonColor),N.cancelButtonColor&&T.style.setProperty("--swal2-cancel-button-background-color",N.cancelButtonColor),Xl(_),Xl(b),Xl(T)):br([_,b,T],ue.styled)}(N,ce,Oe,T),T.reverseButtons&&(T.toast?(_.insertBefore(Oe,N),_.insertBefore(ce,N)):(_.insertBefore(Oe,b),_.insertBefore(ce,b),_.insertBefore(N,b))))}(T,N,b),pr(N,b.loaderHtml||""),Wi(N,b,"loader"))};function Xl(_){const b=window.getComputedStyle(_),T=b.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");_.style.setProperty("--swal2-action-button-outline",b.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${T}`))}function ld(_,b,T){const N=Vl(b);aa(_,T[`show${N}Button`],"inline-block"),pr(_,T[`${b}ButtonText`]||""),_.setAttribute("aria-label",T[`${b}ButtonAriaLabel`]||""),_.className=ue[b],Wi(_,T,`${b}Button`)}const yt=(_,b)=>{const T=_i();T&&(function cd(_,b){"string"==typeof b?_.style.background=b:b||yn([document.documentElement,document.body],ue["no-backdrop"])}(T,b.backdrop),function dd(_,b){b&&(b in ue?yn(_,ue[b]):(nr('The "position" parameter is not valid, defaulting to "center"'),yn(_,ue.center)))}(T,b.position),function $i(_,b){b&&yn(_,ue[`grow-${b}`])}(T,b.grow),Wi(T,b,"container"))};var Fn={innerParams:new WeakMap,domCache:new WeakMap};const ud=["input","file","range","select","radio","checkbox","textarea"],la=_=>{if(!_.input)return;if(!bn[_.input])return void fo(`Unexpected type of input! Expected ${Object.keys(bn).join(" | ")}, got "${_.input}"`);const b=yi(_.input);if(!b)return;const T=bn[_.input](b,_);ii(b),_.inputAutoFocus&&setTimeout(()=>{rd(T)})},Ep=(_,b)=>{const T=gn();if(!T)return;const N=jl(T,_);if(N){(_=>{for(let b=0;b<_.attributes.length;b++){const T=_.attributes[b].name;["id","type","value","style"].includes(T)||_.removeAttribute(T)}})(N);for(const ce in b)N.setAttribute(ce,b[ce])}},Sp=_=>{if(!_.input)return;const b=yi(_.input);b&&Wi(b,_,"input")},Hr=(_,b)=>{!_.placeholder&&b.inputPlaceholder&&(_.placeholder=b.inputPlaceholder)},Ka=(_,b,T)=>{if(T.inputLabel){const N=document.createElement("label"),ce=ue["input-label"];N.setAttribute("for",_.id),N.className=ce,"object"==typeof T.customClass&&yn(N,T.customClass.inputLabel),N.innerText=T.inputLabel,b.insertAdjacentElement("beforebegin",N)}},yi=_=>{const b=gn();if(b)return mo(b,ue[_]||ue.input)},Oo=(_,b)=>{["string","number"].includes(typeof b)?_.value=`${b}`:Xa(b)||nr(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof b}"`)},bn={};bn.text=bn.email=bn.password=bn.number=bn.tel=bn.url=bn.search=bn.date=bn["datetime-local"]=bn.time=bn.week=bn.month=(_,b)=>(Oo(_,b.inputValue),Ka(_,_,b),Hr(_,b),_.type=b.input,_),bn.file=(_,b)=>(Ka(_,_,b),Hr(_,b),_),bn.range=(_,b)=>{const T=_.querySelector("input"),N=_.querySelector("output");return Oo(T,b.inputValue),T.type=b.input,Oo(N,b.inputValue),Ka(T,_,b),_},bn.select=(_,b)=>{if(_.textContent="",b.inputPlaceholder){const T=document.createElement("option");pr(T,b.inputPlaceholder),T.value="",T.disabled=!0,T.selected=!0,_.appendChild(T)}return Ka(_,_,b),_},bn.radio=_=>(_.textContent="",_),bn.checkbox=(_,b)=>{const T=jl(gn(),"checkbox");T.value="1",T.checked=!!b.inputValue;const N=_.querySelector("span");return pr(N,b.inputPlaceholder||b.inputLabel),T},bn.textarea=(_,b)=>{Oo(_,b.inputValue),Hr(_,b),Ka(_,_,b);return setTimeout(()=>{if("MutationObserver"in window){const N=parseInt(window.getComputedStyle(gn()).width);new MutationObserver(()=>{if(!document.body.contains(_))return;const Oe=_.offsetWidth+(N=>parseInt(window.getComputedStyle(N).marginLeft)+parseInt(window.getComputedStyle(N).marginRight))(_);Oe>N?gn().style.width=`${Oe}px`:Ps(gn(),"width",b.width)}).observe(_,{attributes:!0,attributeFilter:["style"]})}}),_};const u_=(_,b)=>{const T=Ds();T&&($l(T),Wi(T,b,"htmlContainer"),b.html?(sd(b.html,T),ii(T,"block")):b.text?(T.textContent=b.text,ii(T,"block")):Ri(T),((_,b)=>{const T=gn();if(!T)return;const N=Fn.innerParams.get(_),ce=!N||b.input!==N.input;ud.forEach(Oe=>{const pt=mo(T,ue[Oe]);pt&&(Ep(Oe,b.inputAttributes),pt.className=ue[Oe],ce&&Ri(pt))}),b.input&&(ce&&la(b),Sp(b))})(_,b))},Yl=(_,b)=>{for(const[T,N]of Object.entries(Pr))b.icon!==T&&br(_,N);yn(_,b.icon&&Pr[b.icon]),pd(_,b),fd(),Wi(_,b,"icon")},fd=()=>{const _=gn();if(!_)return;const b=window.getComputedStyle(_).getPropertyValue("background-color"),T=_.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let N=0;N<T.length;N++)T[N].style.backgroundColor=b},Kl=(_,b)=>{if(!b.icon&&!b.iconHtml)return;let T=_.innerHTML,N="";b.iconHtml?N=ca(b.iconHtml):"success"===b.icon?(N='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',T=T.replace(/ style=".*?"/g,"")):"error"===b.icon?N='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':b.icon&&(N=ca({question:"?",warning:"!",info:"i"}[b.icon])),T.trim()!==N.trim()&&pr(_,N)},pd=(_,b)=>{if(b.iconColor){_.style.color=b.iconColor,_.style.borderColor=b.iconColor;for(const T of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Vu(_,T,"background-color",b.iconColor);Vu(_,".swal2-success-ring","border-color",b.iconColor)}},ca=_=>`<div class="${ue["icon-content"]}">${_}</div>`;let Vn=!1,Ja=0,rs=0,Os=0,Ql=0;const Li=_=>{const b=gn();if(_.target===b||fr().contains(_.target)){Vn=!0;const T=Jl(_);Ja=T.clientX,rs=T.clientY,Os=parseInt(b.style.insetInlineStart)||0,Ql=parseInt(b.style.insetBlockStart)||0,yn(b,"swal2-dragging")}},ut=_=>{const b=gn();if(Vn){let{clientX:T,clientY:N}=Jl(_);b.style.insetInlineStart=`${Os+(T-Ja)}px`,b.style.insetBlockStart=`${Ql+(N-rs)}px`}},Ui=()=>{const _=gn();Vn=!1,br(_,"swal2-dragging")},Jl=_=>{let b=0,T=0;return _.type.startsWith("mouse")?(b=_.clientX,T=_.clientY):_.type.startsWith("touch")&&(b=_.touches[0].clientX,T=_.touches[0].clientY),{clientX:b,clientY:T}},zi=(_,b)=>{const T=_i(),N=gn();if(T&&N){if(b.toast){Ps(T,"width",b.width),N.style.width="100%";const ce=_n();ce&&N.insertBefore(ce,fr())}else Ps(N,"width",b.width);Ps(N,"padding",b.padding),b.color&&(N.style.color=b.color),b.background&&(N.style.background=b.background),Ri(Pt()),os(N,b),b.draggable&&!b.toast?(yn(N,ue.draggable),(_=>{_.addEventListener("mousedown",Li),document.body.addEventListener("mousemove",ut),_.addEventListener("mouseup",Ui),_.addEventListener("touchstart",Li),document.body.addEventListener("touchmove",ut),_.addEventListener("touchend",Ui)})(N)):(br(N,ue.draggable),(_=>{_.removeEventListener("mousedown",Li),document.body.removeEventListener("mousemove",ut),_.removeEventListener("mouseup",Ui),_.removeEventListener("touchstart",Li),document.body.removeEventListener("touchmove",ut),_.removeEventListener("touchend",Ui)})(N))}},os=(_,b)=>{const T=b.showClass||{};_.className=`${ue.popup} ${ri(_)?T.popup:""}`,b.toast?(yn([document.documentElement,document.body],ue["toast-shown"]),yn(_,ue.toast)):yn(_,ue.modal),Wi(_,b,"popup"),"string"==typeof b.customClass&&yn(_,b.customClass),b.icon&&yn(_,ue[`icon-${b.icon}`])},pn=_=>{const b=document.createElement("li");return yn(b,ue["progress-step"]),pr(b,_),b},ss=_=>{const b=document.createElement("li");return yn(b,ue["progress-step-line"]),_.progressStepsDistance&&Ps(b,"width",_.progressStepsDistance),b},da=(_,b)=>{zi(0,b),yt(0,b),((_,b)=>{const T=Rn();if(!T)return;const{progressSteps:N,currentProgressStep:ce}=b;N&&0!==N.length&&void 0!==ce?(ii(T),T.textContent="",ce>=N.length&&nr("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),N.forEach((Oe,pt)=>{const Dt=pn(Oe);if(T.appendChild(Dt),pt===ce&&yn(Dt,ue["active-progress-step"]),pt!==N.length-1){const An=ss(b);T.appendChild(An)}})):Ri(T)})(0,b),((_,b)=>{const T=Fn.innerParams.get(_),N=fr();if(N){if(T&&b.icon===T.icon)return Kl(N,b),void Yl(N,b);if(b.icon||b.iconHtml)return b.icon&&-1===Object.keys(Pr).indexOf(b.icon)?(fo(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${b.icon}"`),void Ri(N)):(ii(N),Kl(N,b),Yl(N,b),yn(N,b.showClass&&b.showClass.icon),void window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",fd));Ri(N)}})(_,b),((_,b)=>{const T=Ut();if(T){if(!b.imageUrl)return void Ri(T);ii(T,""),T.setAttribute("src",b.imageUrl),T.setAttribute("alt",b.imageAlt||""),Ps(T,"width",b.imageWidth),Ps(T,"height",b.imageHeight),T.className=ue.image,Wi(T,b,"image")}})(0,b),((_,b)=>{const T=fi();T&&($l(T),aa(T,b.title||b.titleText,"block"),b.title&&sd(b.title,T),b.titleText&&(T.innerText=b.titleText),Wi(T,b,"title"))})(0,b),((_,b)=>{const T=Gl();T&&(pr(T,b.closeButtonHtml||""),Wi(T,b,"closeButton"),aa(T,b.showCloseButton),T.setAttribute("aria-label",b.closeButtonAriaLabel||""))})(0,b),u_(_,b),Zl(0,b),((_,b)=>{const T=Sn();T&&($l(T),aa(T,b.footer,"block"),b.footer&&sd(b.footer,T),Wi(T,b,"footer"))})(0,b);const T=gn();"function"==typeof b.didRender&&T&&b.didRender(T),Q.eventEmitter.emit("didRender",T)},Cn=()=>{var _;return null===(_=xn())||void 0===_?void 0:_.click()},go=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),md=_=>{_.keydownTarget&&_.keydownHandlerAdded&&(_.keydownTarget.removeEventListener("keydown",_.keydownHandler,{capture:_.keydownListenerCapture}),_.keydownHandlerAdded=!1)},ge=(_,b)=>{var T;const N=As();if(N.length)return-2===(_+=b)&&(_=N.length-1),_===N.length?_=0:-1===_&&(_=N.length-1),void N[_].focus();null===(T=gn())||void 0===T||T.focus()},ks=["ArrowRight","ArrowDown"],Nt=["ArrowLeft","ArrowUp"],et=(_,b,T)=>{_&&(b.isComposing||229===b.keyCode||(_.stopKeydownPropagation&&b.stopPropagation(),"Enter"===b.key?_o(b,_):"Tab"===b.key?Hn(b):[...ks,...Nt].includes(b.key)?Xu(b.key):"Escape"===b.key&&nl(b,_,T)))},_o=(_,b)=>{if(!es(b.allowEnterKey))return;const T=jl(gn(),b.input);if(_.target&&T&&_.target instanceof HTMLElement&&_.target.outerHTML===T.outerHTML){if(["textarea","file"].includes(b.input))return;Cn(),_.preventDefault()}},Hn=_=>{const b=_.target,T=As();let N=-1;for(let ce=0;ce<T.length;ce++)if(b===T[ce]){N=ce;break}ge(N,_.shiftKey?-1:1),_.stopPropagation(),_.preventDefault()},Xu=_=>{const b=en(),T=xn(),N=vi(),ce=Si();if(!(b&&T&&N&&ce))return;if(document.activeElement instanceof HTMLElement&&![T,N,ce].includes(document.activeElement))return;const pt=ks.includes(_)?"nextElementSibling":"previousElementSibling";let Dt=document.activeElement;if(Dt){for(let An=0;An<b.children.length;An++){if(Dt=Dt[pt],!Dt)return;if(Dt instanceof HTMLButtonElement&&ri(Dt))break}Dt instanceof HTMLButtonElement&&Dt.focus()}},nl=(_,b,T)=>{es(b.allowEscapeKey)&&(_.preventDefault(),T(go.esc))};var xi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const as=()=>{Array.from(document.body.children).forEach(b=>{b.hasAttribute("data-previous-aria-hidden")?(b.setAttribute("aria-hidden",b.getAttribute("data-previous-aria-hidden")||""),b.removeAttribute("data-previous-aria-hidden")):b.removeAttribute("aria-hidden")})},gd=typeof window<"u"&&!!window.GestureEvent,qi=()=>{const _=_i();if(!_)return;let b;_.ontouchstart=T=>{b=ha(T)},_.ontouchmove=T=>{b&&(T.preventDefault(),T.stopPropagation())}},ha=_=>{const b=_.target,T=_i(),N=Ds();return!(!T||!N||Dp(_)||Ap(_)||b!==T&&(od(T)||!(b instanceof HTMLElement)||"INPUT"===b.tagName||"TEXTAREA"===b.tagName||od(N)&&N.contains(b)))},Dp=_=>_.touches&&_.touches.length&&"stylus"===_.touches[0].touchType,Ap=_=>_.touches&&_.touches.length>1;let ls=null;const h_=_=>{null===ls&&(document.body.scrollHeight>window.innerHeight||"scroll"===_)&&(ls=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${ls+(()=>{const _=document.createElement("div");_.className=ue["scrollbar-measure"],document.body.appendChild(_);const b=_.getBoundingClientRect().width-_.clientWidth;return document.body.removeChild(_),b})()}px`)};function qe(_,b,T,N){ns()?_d(_,N):(Je(T).then(()=>_d(_,N)),md(Q)),gd?(b.setAttribute("style","display:none !important"),b.removeAttribute("class"),b.innerHTML=""):b.remove(),Is()&&(null!==ls&&(document.body.style.paddingRight=`${ls}px`,ls=null),(()=>{if(po(document.body,ue.iosfix)){const _=parseInt(document.body.style.top,10);br(document.body,ue.iosfix),document.body.style.top="",document.body.scrollTop=-1*_}})(),as()),function f_(){br([document.documentElement,document.body],[ue.shown,ue["height-auto"],ue["no-backdrop"],ue["toast-shown"]])}()}function Vi(_){_=nn(_);const b=xi.swalPromiseResolve.get(this),T=ec(this);this.isAwaitingPromise?_.isDismissed||(tc(this),b(_)):T&&b(_)}const ec=_=>{const b=gn();if(!b)return!1;const T=Fn.innerParams.get(_);if(!T||po(b,T.hideClass.popup))return!1;br(b,T.showClass.popup),yn(b,T.hideClass.popup);const N=_i();return br(N,T.showClass.backdrop),yn(N,T.hideClass.backdrop),nc(_,b,T),!0};function Be(_){const b=xi.swalPromiseReject.get(this);tc(this),b&&b(_)}const tc=_=>{_.isAwaitingPromise&&(delete _.isAwaitingPromise,Fn.innerParams.get(_)||_._destroy())},nn=_=>typeof _>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},_),nc=(_,b,T)=>{var N;const ce=_i(),Oe=Ya(b);"function"==typeof T.willClose&&T.willClose(b),null===(N=Q.eventEmitter)||void 0===N||N.emit("willClose",b),Oe?Ku(_,b,ce,T.returnFocus,T.didClose):qe(_,ce,T.returnFocus,T.didClose)},Ku=(_,b,T,N,ce)=>{Q.swalCloseEventFinishedCallback=qe.bind(null,_,T,N,ce);const Oe=function(pt){var Dt;pt.target===b&&(null===(Dt=Q.swalCloseEventFinishedCallback)||void 0===Dt||Dt.call(Q),delete Q.swalCloseEventFinishedCallback,b.removeEventListener("animationend",Oe),b.removeEventListener("transitionend",Oe))};b.addEventListener("animationend",Oe),b.addEventListener("transitionend",Oe)},_d=(_,b)=>{setTimeout(()=>{var T;"function"==typeof b&&b.bind(_.params)(),null===(T=Q.eventEmitter)||void 0===T||T.emit("didClose"),_._destroy&&_._destroy()})},fa=_=>{let b=gn();if(b||new J,b=gn(),!b)return;const T=_n();ns()?Ri(fr()):pa(b,_),ii(T),b.setAttribute("data-loading","true"),b.setAttribute("aria-busy","true"),b.focus()},pa=(_,b)=>{const T=en(),N=_n();!T||!N||(!b&&ri(xn())&&(b=xn()),ii(T),b&&(Ri(b),N.setAttribute("data-button-to-replace",b.className),T.insertBefore(N,b)),yn([_,T],ue.loading))},Qu=_=>_.checked?1:0,Ju=_=>_.checked?_.value:null,zt=_=>_.files&&_.files.length?null!==_.getAttribute("multiple")?_.files:_.files[0]:null,rc=(_,b)=>{const T=gn();if(!T)return;const N=ce=>{"select"===b.input?function Zi(_,b,T){const N=mo(_,ue.select);if(!N)return;const ce=(Oe,pt,Dt)=>{const An=document.createElement("option");An.value=Dt,pr(An,pt),An.selected=Ln(Dt,T.inputValue),Oe.appendChild(An)};b.forEach(Oe=>{const pt=Oe[0],Dt=Oe[1];if(Array.isArray(Dt)){const An=document.createElement("optgroup");An.label=pt,An.disabled=!1,N.appendChild(An),Dt.forEach(Mr=>ce(An,Mr[1],Mr[0]))}else ce(N,Dt,pt)}),N.focus()}(T,oc(ce),b):"radio"===b.input&&function eh(_,b,T){const N=mo(_,ue.radio);if(!N)return;b.forEach(Oe=>{const pt=Oe[0],Dt=Oe[1],An=document.createElement("input"),Mr=document.createElement("label");An.type="radio",An.name=ue.radio,An.value=pt,Ln(pt,T.inputValue)&&(An.checked=!0);const Xr=document.createElement("span");pr(Xr,Dt),Xr.className=ue.label,Mr.appendChild(An),Mr.appendChild(Xr),N.appendChild(Mr)});const ce=N.querySelectorAll("input");ce.length&&ce[0].focus()}(T,oc(ce),b)};Hl(b.inputOptions)||Xa(b.inputOptions)?(fa(xn()),ts(b.inputOptions).then(ce=>{_.hideLoading(),N(ce)})):"object"==typeof b.inputOptions?N(b.inputOptions):fo("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof b.inputOptions)},vd=(_,b)=>{const T=_.getInput();T&&(Ri(T),ts(b.inputValue).then(N=>{T.value="number"===b.input?`${parseFloat(N)||0}`:`${N}`,ii(T),T.focus(),_.hideLoading()}).catch(N=>{fo(`Error in inputValue promise: ${N}`),T.value="",ii(T),T.focus(),_.hideLoading()}))};const oc=_=>{const b=[];return _ instanceof Map?_.forEach((T,N)=>{let ce=T;"object"==typeof ce&&(ce=oc(ce)),b.push([N,ce])}):Object.keys(_).forEach(T=>{let N=_[T];"object"==typeof N&&(N=oc(N)),b.push([T,N])}),b},Ln=(_,b)=>!!b&&b.toString()===_.toString(),sc=(_,b)=>{const T=Fn.innerParams.get(_);if(!T.input)return void fo(`The "input" parameter is needed to be set when using returnInputValueOn${Vl(b)}`);const N=_.getInput(),ce=((_,b)=>{const T=_.getInput();if(!T)return null;switch(b.input){case"checkbox":return Qu(T);case"radio":return Ju(T);case"file":return zt(T);default:return b.inputAutoTrim?T.value.trim():T.value}})(_,T);T.inputValidator?ac(_,ce,b):N&&!N.checkValidity()?(_.enableButtons(),_.showValidationMessage(T.validationMessage||N.validationMessage)):"deny"===b?il(_,ce):rl(_,ce)},ac=(_,b,T)=>{const N=Fn.innerParams.get(_);_.disableInput(),Promise.resolve().then(()=>ts(N.inputValidator(b,N.validationMessage))).then(Oe=>{_.enableButtons(),_.enableInput(),Oe?_.showValidationMessage(Oe):"deny"===T?il(_,b):rl(_,b)})},il=(_,b)=>{const T=Fn.innerParams.get(_||void 0);T.showLoaderOnDeny&&fa(vi()),T.preDeny?(_.isAwaitingPromise=!0,Promise.resolve().then(()=>ts(T.preDeny(b,T.validationMessage))).then(ce=>{!1===ce?(_.hideLoading(),tc(_)):_.close({isDenied:!0,value:typeof ce>"u"?b:ce})}).catch(ce=>cs(_||void 0,ce))):_.close({isDenied:!0,value:b})},Fs=(_,b)=>{_.close({isConfirmed:!0,value:b})},cs=(_,b)=>{_.rejectPromise(b)},rl=(_,b)=>{const T=Fn.innerParams.get(_||void 0);T.showLoaderOnConfirm&&fa(),T.preConfirm?(_.resetValidationMessage(),_.isAwaitingPromise=!0,Promise.resolve().then(()=>ts(T.preConfirm(b,T.validationMessage))).then(ce=>{ri(Pt())||!1===ce?(_.hideLoading(),tc(_)):Fs(_,typeof ce>"u"?b:ce)}).catch(ce=>cs(_||void 0,ce))):Fs(_,b)};function Ns(){const _=Fn.innerParams.get(this);if(!_)return;const b=Fn.domCache.get(this);Ri(b.loader),ns()?_.icon&&ii(fr()):jr(b),br([b.popup,b.actions],ue.loading),b.popup.removeAttribute("aria-busy"),b.popup.removeAttribute("data-loading"),b.confirmButton.disabled=!1,b.denyButton.disabled=!1,b.cancelButton.disabled=!1}const jr=_=>{const b=_.popup.getElementsByClassName(_.loader.getAttribute("data-button-to-replace"));b.length?ii(b[0],"inline-block"):!ri(xn())&&!ri(vi())&&!ri(Si())&&Ri(_.actions)};function th(){const _=Fn.innerParams.get(this),b=Fn.domCache.get(this);return b?jl(b.popup,_.input):null}function nh(_,b,T){const N=Fn.domCache.get(_);b.forEach(ce=>{N[ce].disabled=T})}function Rp(_,b){const T=gn();if(T&&_)if("radio"===_.type){const N=T.querySelectorAll(`[name="${ue.radio}"]`);for(let ce=0;ce<N.length;ce++)N[ce].disabled=b}else _.disabled=b}function ds(){nh(this,["confirmButton","denyButton","cancelButton"],!1)}function ma(){nh(this,["confirmButton","denyButton","cancelButton"],!0)}function ol(){Rp(this.getInput(),!1)}function ih(){Rp(this.getInput(),!0)}function yd(_){const b=Fn.domCache.get(this),T=Fn.innerParams.get(this);pr(b.validationMessage,_),b.validationMessage.className=ue["validation-message"],T.customClass&&T.customClass.validationMessage&&yn(b.validationMessage,T.customClass.validationMessage),ii(b.validationMessage);const N=this.getInput();N&&(N.setAttribute("aria-invalid","true"),N.setAttribute("aria-describedby",ue["validation-message"]),rd(N),yn(N,ue.inputerror))}function rh(){const _=Fn.domCache.get(this);_.validationMessage&&Ri(_.validationMessage);const b=this.getInput();b&&(b.removeAttribute("aria-invalid"),b.removeAttribute("aria-describedby"),br(b,ue.inputerror))}const Hi={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Wr=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Lp={allowEnterKey:void 0},Xi=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],oh=_=>Object.prototype.hasOwnProperty.call(Hi,_),he=_=>-1!==Wr.indexOf(_),bd=_=>Lp[_],He=_=>{oh(_)||nr(`Unknown parameter "${_}"`)},sl=_=>{Xi.includes(_)&&nr(`The parameter "${_}" is incompatible with toasts`)},ga=_=>{const b=bd(_);b&&Za(_,b)},_a=_=>{!1===_.backdrop&&_.allowOutsideClick&&nr('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),_.theme&&!["light","dark","auto","borderless","embed-iframe"].includes(_.theme)&&nr(`Invalid theme "${_.theme}". Expected "light", "dark", "auto", "borderless", or "embed-iframe"`);for(const b in _)He(b),_.toast&&sl(b),ga(b)};function ko(_){const b=_i(),T=gn(),N=Fn.innerParams.get(this);if(!T||po(T,N.hideClass.popup))return void nr("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const ce=lc(_),Oe=Object.assign({},N,ce);_a(Oe),b.dataset.swal2Theme=Oe.theme,da(this,Oe),Fn.innerParams.set(this,Oe),Object.defineProperties(this,{params:{value:Object.assign({},this.params,_),writable:!1,enumerable:!0}})}const lc=_=>{const b={};return Object.keys(_).forEach(T=>{he(T)?b[T]=_[T]:nr(`Invalid parameter to update: ${T}`)}),b};function sh(){const _=Fn.domCache.get(this),b=Fn.innerParams.get(this);b?(_.popup&&Q.swalCloseEventFinishedCallback&&(Q.swalCloseEventFinishedCallback(),delete Q.swalCloseEventFinishedCallback),"function"==typeof b.didDestroy&&b.didDestroy(),Q.eventEmitter.emit("didDestroy"),$r(this)):al(this)}const $r=_=>{al(_),delete _.params,delete Q.keydownHandler,delete Q.keydownTarget,delete Q.currentInstance},al=_=>{_.isAwaitingPromise?(oi(Fn,_),_.isAwaitingPromise=!0):(oi(xi,_),oi(Fn,_),delete _.isAwaitingPromise,delete _.disableButtons,delete _.enableButtons,delete _.getInput,delete _.disableInput,delete _.enableInput,delete _.hideLoading,delete _.disableLoading,delete _.showValidationMessage,delete _.resetValidationMessage,delete _.close,delete _.closePopup,delete _.closeModal,delete _.closeToast,delete _.rejectPromise,delete _.update,delete _._destroy)},oi=(_,b)=>{for(const T in _)_[T].delete(b)};var vo=Object.freeze({__proto__:null,_destroy:sh,close:Vi,closeModal:Vi,closePopup:Vi,closeToast:Vi,disableButtons:ma,disableInput:ih,disableLoading:Ns,enableButtons:ds,enableInput:ol,getInput:th,handleAwaitingPromise:tc,hideLoading:Ns,rejectPromise:Be,resetValidationMessage:rh,showValidationMessage:yd,update:ko});const cc=(_,b,T)=>{b.popup.onclick=()=>{_&&(qr(_)||_.timer||_.input)||T(go.close)}},qr=_=>!!(_.showConfirmButton||_.showDenyButton||_.showCancelButton||_.showCloseButton);let Fo=!1;const xd=_=>{_.popup.onmousedown=()=>{_.container.onmouseup=function(b){_.container.onmouseup=()=>{},b.target===_.container&&(Fo=!0)}}},Zr=_=>{_.container.onmousedown=b=>{b.target===_.container&&b.preventDefault(),_.popup.onmouseup=function(T){_.popup.onmouseup=()=>{},(T.target===_.popup||T.target instanceof HTMLElement&&_.popup.contains(T.target))&&(Fo=!0)}}},us=(_,b,T)=>{b.container.onclick=N=>{Fo?Fo=!1:N.target===b.container&&es(_.allowOutsideClick)&&T(go.backdrop)}},va=_=>_ instanceof Element||(_=>"object"==typeof _&&_.jquery)(_);const wd=()=>{if(Q.timeout)return(()=>{const _=vn();if(!_)return;const b=parseInt(window.getComputedStyle(_).width);_.style.removeProperty("transition"),_.style.width="100%";const T=parseInt(window.getComputedStyle(_).width);_.style.width=b/T*100+"%"})(),Q.timeout.stop()},ba=()=>{if(Q.timeout){const _=Q.timeout.start();return ql(_),_}};let Cd=!1;const wr={};const cl=_=>{for(let b=_.target;b&&b!==document;b=b.parentNode)for(const T in wr){const N=b.getAttribute(T);if(N)return void wr[T].fire({template:N})}};Q.eventEmitter=new class Fp{constructor(){this.events={}}_getHandlersByEventName(b){return typeof this.events[b]>"u"&&(this.events[b]=[]),this.events[b]}on(b,T){const N=this._getHandlersByEventName(b);N.includes(T)||N.push(T)}once(b,T){var N=this;const ce=function(){N.removeListener(b,ce);for(var Oe=arguments.length,pt=new Array(Oe),Dt=0;Dt<Oe;Dt++)pt[Dt]=arguments[Dt];T.apply(N,pt)};this.on(b,ce)}emit(b){for(var T=arguments.length,N=new Array(T>1?T-1:0),ce=1;ce<T;ce++)N[ce-1]=arguments[ce];this._getHandlersByEventName(b).forEach(Oe=>{try{Oe.apply(this,N)}catch(pt){console.error(pt)}})}removeListener(b,T){const N=this._getHandlersByEventName(b),ce=N.indexOf(T);ce>-1&&N.splice(ce,1)}removeAllListeners(b){void 0!==this.events[b]&&(this.events[b].length=0)}reset(){this.events={}}};var ah=Object.freeze({__proto__:null,argsToParams:_=>{const b={};return"object"!=typeof _[0]||va(_[0])?["title","html","icon"].forEach((T,N)=>{const ce=_[N];"string"==typeof ce||va(ce)?b[T]=ce:void 0!==ce&&fo(`Unexpected type of ${T}! Expected "string" or "Element", got ${typeof ce}`)}):Object.assign(b,_[0]),b},bindClickHandler:function yo(){wr[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Cd||(document.body.addEventListener("click",cl),Cd=!0)},clickCancel:()=>{var _;return null===(_=Si())||void 0===_?void 0:_.click()},clickConfirm:Cn,clickDeny:()=>{var _;return null===(_=vi())||void 0===_?void 0:_.click()},enableLoading:fa,fire:function ll(){for(var _=arguments.length,b=new Array(_),T=0;T<_;T++)b[T]=arguments[T];return new this(...b)},getActions:en,getCancelButton:Si,getCloseButton:Gl,getConfirmButton:xn,getContainer:_i,getDenyButton:vi,getFocusableElements:As,getFooter:Sn,getHtmlContainer:Ds,getIcon:fr,getIconContent:()=>qn(ue["icon-content"]),getImage:Ut,getInputLabel:()=>qn(ue["input-label"]),getLoader:_n,getPopup:gn,getProgressSteps:Rn,getTimerLeft:()=>Q.timeout&&Q.timeout.getTimerLeft(),getTimerProgressBar:vn,getTitle:fi,getValidationMessage:Pt,increaseTimer:_=>{if(Q.timeout){const b=Q.timeout.increase(_);return ql(b,!0),b}},isDeprecatedParameter:bd,isLoading:()=>{const _=gn();return!!_&&_.hasAttribute("data-loading")},isTimerRunning:()=>!(!Q.timeout||!Q.timeout.isRunning()),isUpdatableParameter:he,isValidParameter:oh,isVisible:()=>ri(gn()),mixin:function uc(_){return class b extends(this){_main(N,ce){return super._main(N,Object.assign({},_,ce))}}},off:(_,b)=>{_?b?Q.eventEmitter.removeListener(_,b):Q.eventEmitter.removeAllListeners(_):Q.eventEmitter.reset()},on:(_,b)=>{Q.eventEmitter.on(_,b)},once:(_,b)=>{Q.eventEmitter.once(_,b)},resumeTimer:ba,showLoading:fa,stopTimer:wd,toggleTimer:()=>{const _=Q.timeout;return _&&(_.running?wd():ba())}});class dl{constructor(b,T){this.callback=b,this.remaining=T,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(b){const T=this.running;return T&&this.stop(),this.remaining+=b,T&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const lh=["swal-title","swal-html","swal-footer"],wi=_=>{const b={};return Array.from(_.querySelectorAll("swal-param")).forEach(N=>{Jn(N,["name","value"]);const ce=N.getAttribute("name"),Oe=N.getAttribute("value");!ce||!Oe||(b[ce]="boolean"==typeof Hi[ce]?"false"!==Oe:"object"==typeof Hi[ce]?JSON.parse(Oe):Oe)}),b},ch=_=>{const b={};return Array.from(_.querySelectorAll("swal-function-param")).forEach(N=>{const ce=N.getAttribute("name"),Oe=N.getAttribute("value");!ce||!Oe||(b[ce]=new Function(`return ${Oe}`)())}),b},Bp=_=>{const b={};return Array.from(_.querySelectorAll("swal-button")).forEach(N=>{Jn(N,["type","color","aria-label"]);const ce=N.getAttribute("type");!ce||!["confirm","cancel","deny"].includes(ce)||(b[`${ce}ButtonText`]=N.innerHTML,b[`show${Vl(ce)}Button`]=!0,N.hasAttribute("color")&&(b[`${ce}ButtonColor`]=N.getAttribute("color")),N.hasAttribute("aria-label")&&(b[`${ce}ButtonAriaLabel`]=N.getAttribute("aria-label")))}),b},No=_=>{const b={},T=_.querySelector("swal-image");return T&&(Jn(T,["src","width","height","alt"]),T.hasAttribute("src")&&(b.imageUrl=T.getAttribute("src")||void 0),T.hasAttribute("width")&&(b.imageWidth=T.getAttribute("width")||void 0),T.hasAttribute("height")&&(b.imageHeight=T.getAttribute("height")||void 0),T.hasAttribute("alt")&&(b.imageAlt=T.getAttribute("alt")||void 0)),b},dn=_=>{const b={},T=_.querySelector("swal-icon");return T&&(Jn(T,["type","color"]),T.hasAttribute("type")&&(b.icon=T.getAttribute("type")),T.hasAttribute("color")&&(b.iconColor=T.getAttribute("color")),b.iconHtml=T.innerHTML),b},dh=_=>{const b={},T=_.querySelector("swal-input");T&&(Jn(T,["type","label","placeholder","value"]),b.input=T.getAttribute("type")||"text",T.hasAttribute("label")&&(b.inputLabel=T.getAttribute("label")),T.hasAttribute("placeholder")&&(b.inputPlaceholder=T.getAttribute("placeholder")),T.hasAttribute("value")&&(b.inputValue=T.getAttribute("value")));const N=Array.from(_.querySelectorAll("swal-input-option"));return N.length&&(b.inputOptions={},N.forEach(ce=>{Jn(ce,["value"]);const Oe=ce.getAttribute("value");Oe&&(b.inputOptions[Oe]=ce.innerHTML)})),b},wa=(_,b)=>{const T={};for(const N in b){const ce=b[N],Oe=_.querySelector(ce);Oe&&(Jn(Oe,[]),T[ce.replace(/^swal-/,"")]=Oe.innerHTML.trim())}return T},bt=_=>{const b=lh.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(_.children).forEach(T=>{const N=T.tagName.toLowerCase();b.includes(N)||nr(`Unrecognized element <${N}>`)})},Jn=(_,b)=>{Array.from(_.attributes).forEach(T=>{-1===b.indexOf(T.name)&&nr([`Unrecognized attribute "${T.name}" on <${_.tagName.toLowerCase()}>.`,b.length?`Allowed attributes are: ${b.join(", ")}`:"To set the value, use HTML within the element."])})},Oi=_=>{const b=_i(),T=gn();"function"==typeof _.willOpen&&_.willOpen(T),Q.eventEmitter.emit("willOpen",T);const ce=window.getComputedStyle(document.body).overflowY;Sd(b,T,_),setTimeout(()=>{Ma(b,T)},10),Is()&&(mr(b,_.scrollbarPadding,ce),(()=>{const _=_i();Array.from(document.body.children).forEach(T=>{T.contains(_)||(T.hasAttribute("aria-hidden")&&T.setAttribute("data-previous-aria-hidden",T.getAttribute("aria-hidden")||""),T.setAttribute("aria-hidden","true"))})})()),!ns()&&!Q.previousActiveElement&&(Q.previousActiveElement=document.activeElement),"function"==typeof _.didOpen&&setTimeout(()=>_.didOpen(T)),Q.eventEmitter.emit("didOpen",T),br(b,ue["no-transition"])},Ti=_=>{const b=gn();if(_.target!==b)return;const T=_i();b.removeEventListener("animationend",Ti),b.removeEventListener("transitionend",Ti),T.style.overflowY="auto"},Ma=(_,b)=>{Ya(b)?(_.style.overflowY="hidden",b.addEventListener("animationend",Ti),b.addEventListener("transitionend",Ti)):_.style.overflowY="auto"},mr=(_,b,T)=>{(()=>{if(gd&&!po(document.body,ue.iosfix)){const _=document.body.scrollTop;document.body.style.top=-1*_+"px",yn(document.body,ue.iosfix),qi()}})(),b&&"hidden"!==T&&h_(T),setTimeout(()=>{_.scrollTop=0})},Sd=(_,b,T)=>{yn(_,T.showClass.backdrop),T.animation?(b.style.setProperty("opacity","0","important"),ii(b,"grid"),setTimeout(()=>{yn(b,T.showClass.popup),b.style.removeProperty("opacity")},10)):ii(b,"grid"),yn([document.documentElement,document.body],ue.shown),T.heightAuto&&T.backdrop&&!T.toast&&yn([document.documentElement,document.body],ue["height-auto"])};var hc={email:(_,b)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(_)?Promise.resolve():Promise.resolve(b||"Invalid email address"),url:(_,b)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(_)?Promise.resolve():Promise.resolve(b||"Invalid URL")};function Up(_){(function ul(_){_.inputValidator||("email"===_.input&&(_.inputValidator=hc.email),"url"===_.input&&(_.inputValidator=hc.url))})(_),_.showLoaderOnConfirm&&!_.preConfirm&&nr("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function uh(_){(!_.target||"string"==typeof _.target&&!document.querySelector(_.target)||"string"!=typeof _.target&&!_.target.appendChild)&&(nr('Target parameter is not valid, defaulting to "body"'),_.target="body")}(_),"string"==typeof _.title&&(_.title=_.title.split("\n").join("<br />")),Cp(_)}let Mn;var Ye=new WeakMap;class ct{constructor(){if(C(this,Ye,void 0),typeof window>"u")return;Mn=this;for(var b=arguments.length,T=new Array(b),N=0;N<b;N++)T[N]=arguments[N];const ce=Object.freeze(this.constructor.argsToParams(T));this.params=ce,this.isAwaitingPromise=!1,function P(_,b,T){return _.set(hr(_,b),T),T}(Ye,this,this._main(Mn.params))}_main(b){let T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_a(Object.assign({},T,b)),Q.currentInstance){const Oe=xi.swalPromiseResolve.get(Q.currentInstance),{isAwaitingPromise:pt}=Q.currentInstance;Q.currentInstance._destroy(),pt||Oe({isDismissed:!0}),Is()&&as()}Q.currentInstance=Mn;const N=u(b,T);Up(N),Object.freeze(N),Q.timeout&&(Q.timeout.stop(),delete Q.timeout),clearTimeout(Q.restoreFocusTimeout);const ce=m(Mn);return da(Mn,N),Fn.innerParams.set(Mn,N),c(Mn,ce,N)}then(b){return kt(Ye,this).then(b)}finally(b){return kt(Ye,this).finally(b)}}const c=(_,b,T)=>new Promise((N,ce)=>{const Oe=pt=>{_.close({isDismissed:!0,dismiss:pt})};xi.swalPromiseResolve.set(_,N),xi.swalPromiseReject.set(_,ce),b.confirmButton.onclick=()=>{(_=>{const b=Fn.innerParams.get(_);_.disableButtons(),b.input?sc(_,"confirm"):rl(_,!0)})(_)},b.denyButton.onclick=()=>{(_=>{const b=Fn.innerParams.get(_);_.disableButtons(),b.returnInputValueOnDeny?sc(_,"deny"):il(_,!1)})(_)},b.cancelButton.onclick=()=>{((_,b)=>{_.disableButtons(),b(go.cancel)})(_,Oe)},b.closeButton.onclick=()=>{Oe(go.close)},((_,b,T)=>{_.toast?cc(_,b,T):(xd(b),Zr(b),us(_,b,T))})(T,b,Oe),((_,b,T)=>{md(_),b.toast||(_.keydownHandler=N=>et(b,N,T),_.keydownTarget=b.keydownListenerCapture?window:gn(),_.keydownListenerCapture=b.keydownListenerCapture,_.keydownTarget.addEventListener("keydown",_.keydownHandler,{capture:_.keydownListenerCapture}),_.keydownHandlerAdded=!0)})(Q,T,Oe),((_,b)=>{"select"===b.input||"radio"===b.input?rc(_,b):["text","email","number","tel","textarea"].some(T=>T===b.input)&&(Hl(b.inputValue)||Xa(b.inputValue))&&(fa(xn()),vd(_,b))})(_,T),Oi(T),M(Q,T,Oe),S(b,T),setTimeout(()=>{b.container.scrollTop=0})}),u=(_,b)=>{const T=(_=>{const b="string"==typeof _.template?document.querySelector(_.template):_.template;if(!b)return{};const T=b.content;return bt(T),Object.assign(wi(T),ch(T),Bp(T),No(T),dn(T),dh(T),wa(T,lh))})(_),N=Object.assign({},Hi,b,T,_);return N.showClass=Object.assign({},Hi.showClass,N.showClass),N.hideClass=Object.assign({},Hi.hideClass,N.hideClass),!1===N.animation&&(N.showClass={backdrop:"swal2-noanimation"},N.hideClass={}),N},m=_=>{const b={popup:gn(),container:_i(),actions:en(),confirmButton:xn(),denyButton:vi(),cancelButton:Si(),loader:_n(),closeButton:Gl(),validationMessage:Pt(),progressSteps:Rn()};return Fn.domCache.set(_,b),b},M=(_,b,T)=>{const N=vn();Ri(N),b.timer&&(_.timeout=new dl(()=>{T("timer"),delete _.timeout},b.timer),b.timerProgressBar&&(ii(N),Wi(N,b,"timerProgressBar"),setTimeout(()=>{_.timeout&&_.timeout.running&&ql(b.timer)})))},S=(_,b)=>{if(!b.toast){if(!es(b.allowEnterKey))return Za("allowEnterKey"),void ae();R(_)||X(_,b)||ge(-1,1)}},R=_=>{const b=Array.from(_.popup.querySelectorAll("[autofocus]"));for(const T of b)if(T instanceof HTMLElement&&ri(T))return T.focus(),!0;return!1},X=(_,b)=>b.focusDeny&&ri(_.denyButton)?(_.denyButton.focus(),!0):b.focusCancel&&ri(_.cancelButton)?(_.cancelButton.focus(),!0):!(!b.focusConfirm||!ri(_.confirmButton)||(_.confirmButton.focus(),0)),ae=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const _=new Date,b=localStorage.getItem("swal-initiation");b?(_.getTime()-Date.parse(b))/864e5>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const T=document.createElement("audio");T.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",T.loop=!0,document.body.appendChild(T),setTimeout(()=>{T.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${_}`)}ct.prototype.disableButtons=ma,ct.prototype.enableButtons=ds,ct.prototype.getInput=th,ct.prototype.disableInput=ih,ct.prototype.enableInput=ol,ct.prototype.hideLoading=Ns,ct.prototype.disableLoading=Ns,ct.prototype.showValidationMessage=yd,ct.prototype.resetValidationMessage=rh,ct.prototype.close=Vi,ct.prototype.closePopup=Vi,ct.prototype.closeModal=Vi,ct.prototype.closeToast=Vi,ct.prototype.rejectPromise=Be,ct.prototype.update=ko,ct.prototype._destroy=sh,Object.assign(ct,ah),Object.keys(vo).forEach(_=>{ct[_]=function(){return Mn&&Mn[_]?Mn[_](...arguments):null}}),ct.DismissReason=go,ct.version="11.19.1";const J=ct;return J.default=J,J}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(hr,Ne){var kt=hr.createElement("style");if(hr.getElementsByTagName("head")[0].appendChild(kt),kt.styleSheet)kt.styleSheet.disabled||(kt.styleSheet.cssText=Ne);else try{kt.innerHTML=Ne}catch{kt.innerText=Ne}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.1s, box-shadow 0.1s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-confirm-button-background-color: #7066e0;--swal2-deny-button-background-color: #dc3741;--swal2-cancel-button-background-color: #6e7881}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:var(--swal2-confirm-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:var(--swal2-deny-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:var(--swal2-cancel-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-outline)}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')}},Ts=>{Ts(Ts.s=587)}]);